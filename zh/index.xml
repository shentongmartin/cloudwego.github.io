<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>CloudWeGo â€“ CloudWeGo</title><link>https://www.cloudwego.io/zh/</link><description>Recent content on CloudWeGo</description><generator>Hugo -- gohugo.io</generator><language>zh</language><atom:link href="https://www.cloudwego.io/zh/index.xml" rel="self" type="application/rss+xml"/><item><title>Blog: Kitex Release v0.14.0</title><link>https://www.cloudwego.io/zh/blog/2025/06/26/kitex-release-v0.14.0/</link><pubDate>Thu, 26 Jun 2025 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2025/06/26/kitex-release-v0.14.0/</guid><description>
&lt;h2 id="é‡è¦å˜æ›´ä»‹ç»">&lt;strong>é‡è¦å˜æ›´ä»‹ç»&lt;/strong>&lt;/h2>
&lt;h3 id="æ–°ç‰¹æ€§">&lt;strong>æ–°ç‰¹æ€§&lt;/strong>&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>æ³›åŒ–è°ƒç”¨ï¼šæ³›åŒ– Client æ”¯æŒæµå¼è°ƒç”¨ï¼Œä¸€ä¸ª Client æå®šæµå¼/éæµå¼è°ƒç”¨åœºæ™¯&lt;/strong>&lt;/p>
&lt;p>æ³›åŒ– Client æ”¯æŒæµå¼æ³›åŒ–è°ƒç”¨ï¼Œé€‚é… gRPC/TTHeader Streaming å¹¶æ”¯æŒ map / json å’Œ protobuf äºŒè¿›åˆ¶æ³›åŒ–è°ƒç”¨ã€‚&lt;/p>
&lt;p>ç®€è¦ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">cli&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">err&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">:=&lt;/span> &lt;span style="color:#000">genericclient&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">NewClient&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;actualServiceName&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">g&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">// Ping-Pong æ³›åŒ–&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">resp&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">err&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">:=&lt;/span> &lt;span style="color:#000">cli&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">GenericCall&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ctx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;PingPongTest&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">req&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">// ClientStreaming æ³›åŒ–&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">cliStream&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">err&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">:=&lt;/span> &lt;span style="color:#000">cli&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">ClientStreaming&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ctx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;ClientStreamingTest&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">// ServerStreaming æ³›åŒ–&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">srvStream&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">err&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">:=&lt;/span> &lt;span style="color:#000">cli&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">ServerStreaming&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ctx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;ServerStreamingTest&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">req&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">// BidiStreaming æ³›åŒ–&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">bidiStream&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">err&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">:=&lt;/span> &lt;span style="color:#000">cli&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">BidiStreaming&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ctx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;BidiStreamingTest&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å„åœºæ™¯ä½¿ç”¨ç»†èŠ‚è¯·å‚è€ƒ&lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/advanced-feature/generic-call/basic_usage">æ³›åŒ–è°ƒç”¨&lt;/a>ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="åŠŸèƒ½ä½“éªŒä¼˜åŒ–">&lt;strong>åŠŸèƒ½/ä½“éªŒä¼˜åŒ–&lt;/strong>&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>Streamingï¼š è§‚æµ‹/æ’é”™ä½“éªŒä¼˜åŒ–&lt;/strong>&lt;/p>
&lt;p>&lt;strong>TTHeader Streaming&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>è‹¥é…ç½®äº† Tracerï¼Œåˆ›å»º Stream å¤±è´¥å°†æ‰“ç‚¹ä¸ŠæŠ¥&lt;/li>
&lt;li>å½“ Server ä¾§å‘ç”Ÿ panic æ—¶ï¼Œå°†æ‰“å°å®Œæ•´å †æ ˆï¼Œæ–¹ä¾¿æ’æŸ¥é—®é¢˜&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>gRPC Streaming&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>è‹¥é…ç½®äº† Tracerï¼Œåˆ›å»º Stream å¤±è´¥å°†æ‰“ç‚¹ä¸ŠæŠ¥&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="å…¶ä»–">&lt;strong>å…¶ä»–&lt;/strong>&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>äº§ç‰©ç®€åŒ–&lt;/p>
&lt;p>Kitex Tool ä¸å†ç”Ÿæˆ fastpbï¼Œåªå½±å“ protobuf çš„ç”¨æˆ·ã€‚è‹¥æœ‰é«˜æ€§èƒ½ protobuf ç¼–è§£ç éœ€æ±‚ï¼Œå¯é…ç½®ç¯å¢ƒå˜é‡ &lt;code>KITEX_TOOL_USE_PRUTAL_MARSHAL=1&lt;/code>å¯ç”¨ prutalã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="è¯¦ç»†å˜æ›´">&lt;strong>è¯¦ç»†å˜æ›´&lt;/strong>&lt;/h2>
&lt;h3 id="feature">Feature&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1759">#1759&lt;/a>] feat(tool): add env for using prutal to marshal&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1782">#1782&lt;/a>] feat(ttstream): process MetaFrame and reflect to rpcinfo&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1777">#1777&lt;/a>] feat(client): report err when create Stream failed&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1763">#1763&lt;/a>] feat: support ttheader streaming generic call&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1771">#1771&lt;/a>] feat(tool): add thriftgo patcher extension&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1755">#1755&lt;/a>] feat: add generic binary pb for streamx&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1752">#1752&lt;/a>] feat(generic): support generic pb binary for streaming&lt;/p>
&lt;h3 id="optimize">Optimize&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1788">#1788&lt;/a>] optimize: go net implementation&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1786">#1786&lt;/a>] optimize(tool): remove tool fastpb generation&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1783">#1783&lt;/a>] optimize(gRPC): parse PayloadCodec in server side&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1780">#1780&lt;/a>] optimize(ttstream): log the error thrown by invoking handler&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1769">#1769&lt;/a>] optimize: injection of options in ttstream&lt;/p>
&lt;h3 id="fix">Fix&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1792">#1792&lt;/a>] fix(gRPC): inject current method name to rpcinfo in server-side to fix FROM_METHOD missing&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1787">#1787&lt;/a>] fix(ttstream): metrics missing caused by server-side rpcinfo not set correctly&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1778">#1778&lt;/a>] fix: enabling json mode of map generic not work&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1774">#1774&lt;/a>] fix(server): trans server conn count race issue&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1742">#1742&lt;/a>] fix(generic): align dynamicgo&amp;rsquo;s write base behavior with old generic (only for internal logic)&lt;/p>
&lt;h3 id="refactor">Refactor&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1770">#1770&lt;/a>] refactor: refactor generic streaming&lt;/p>
&lt;h3 id="test">Test&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1793">#1793&lt;/a>] test: add go1.18 to scenario-test&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1765">#1765&lt;/a>] refactor: refactor generic streaming&lt;/p>
&lt;h3 id="docs">Docs&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1794">#1794&lt;/a>] docs: update CONTRIBUTING.md to change PR base branch to main&lt;/p>
&lt;h3 id="chore">Chore&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1795">#1795&lt;/a>] chore: update dependency&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1776">#1776&lt;/a>] chore: remove testify dependency&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1757">#1757&lt;/a>] chore: update prutal to v0.1.1&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1753">#1753&lt;/a>] ci: disable codecov annotations&lt;/p></description></item><item><title>Blog: Hertz Release v0.10.0</title><link>https://www.cloudwego.io/zh/blog/2025/05/21/hertz-release-v0.10.0/</link><pubDate>Wed, 21 May 2025 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2025/05/21/hertz-release-v0.10.0/</guid><description>
&lt;p>Hertz v0.10.0 ç‰ˆæœ¬æ–°å¢ä¸¤é¡¹åŠŸèƒ½å¹¶ä¿®å¤äº†ä¸€äº›é—®é¢˜ã€‚&lt;/p>
&lt;ol>
&lt;li>é›†æˆ SSE åŠŸèƒ½ã€‚ä½¿ç”¨æ–¹æ³•è¯·å‚é˜… &lt;a href="https://www.cloudwego.io/zh/docs/hertz/tutorials/basic-feature/sse/">SSE&lt;/a>ã€‚&lt;/li>
&lt;li>æ·»åŠ  http.Handler é€‚é…å™¨ï¼Œä½¿ç”¨å®˜æ–¹ net/http ç”Ÿæ€ç³»ç»Ÿæ‰©å±• Hertzã€‚ä½¿ç”¨æ–¹æ³•è¯·å‚é˜… &lt;a href="https://www.cloudwego.io/zh/docs/hertz/tutorials/basic-feature/http-adaptor/">Adaptor&lt;/a>ã€‚&lt;/li>
&lt;/ol>
&lt;h2 id="feature">Feature&lt;/h2>
&lt;ol>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/1327">#1327&lt;/a>] feat(adaptor): ä¸º http.Handler æ·»åŠ æ–°çš„ HertzHandler&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/1349">#1349&lt;/a>] feat(sse): SetLastEventID&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/1343">#1343&lt;/a>] feat(sse): reader æ”¯æŒå–æ¶ˆæµ&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/1341">#1341&lt;/a>] feat(server): æ£€æµ‹è¯·æ±‚ race&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/1339">#1339&lt;/a>] feat(sse): æ·»åŠ  LastEventID helper&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/1335">#1335&lt;/a>] feat(protocol): æ–°çš„ sse åŒ…&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/1322">#1322&lt;/a>] feat: server ä½¿ç”¨æ ‡å‡† go net ä¼ è¾“æ—¶æ„ŸçŸ¥å®¢æˆ·ç«¯è¿æ¥å…³é—­&lt;/li>
&lt;/ol>
&lt;h2 id="fix">Fix&lt;/h2>
&lt;ol>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/1340">#1340&lt;/a>] fix:ä»…åœ¨ amd64/arm64 linux/darwin ä¸Šä½¿ç”¨ netpoll å’Œ sonic&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/1333">#1333&lt;/a>] fix(protocol): éé¢„æœŸçš„è®¾ç½® resp.bodyStream&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/1329">#1329&lt;/a>] fix(client): sse åœºæ™¯ä¸‹è‡ªåŠ¨åˆ‡æ¢ä¸º stream body æ¨¡å¼&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/1332">#1332&lt;/a>] fix(server): server å…³é—­æ—¶æ£€æŸ¥ ExitWaitTimeout&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/1316">#1316&lt;/a>] fix: ä¼˜å…ˆä½¿ç”¨è‡ªå®šä¹‰ validator&lt;/li>
&lt;/ol>
&lt;h2 id="tests">Tests&lt;/h2>
&lt;ol>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/1336">#1336&lt;/a>] test(protocol): ä¿®å¤ç¡¬ç¼–ç çš„ç›‘å¬åœ°å€&lt;/li>
&lt;/ol>
&lt;h2 id="chore">Chore&lt;/h2>
&lt;ol>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/1353">#1353&lt;/a>] choreï¼šæ›´æ–° netpoll ä¾èµ–&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/1337">#1337&lt;/a>] chore(hz): æ›´æ–° hz å·¥å…· v0.9.7&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/1328">#1328&lt;/a>] ci: ç¦ç”¨ codecov æ³¨é‡Š&lt;/li>
&lt;/ol></description></item><item><title>Blog: Kitex Release v0.13.0</title><link>https://www.cloudwego.io/zh/blog/2025/04/09/kitex-release-v0.13.0/</link><pubDate>Wed, 09 Apr 2025 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2025/04/09/kitex-release-v0.13.0/</guid><description>
&lt;blockquote>
&lt;p>å»ºè®®ç›´æ¥å‡çº§ Kitex ç‰ˆæœ¬åˆ° v0.13.1ï¼Œå› ä¸ºæˆ‘ä»¬å¯¹ v0.13.0 é‡Œ gRPC Client æ½œåœ¨çš„ Goroutine æ³„æ¼é—®é¢˜è¿›è¡Œäº†ä¿®å¤&lt;/p>
&lt;/blockquote>
&lt;h2 id="é‡è¦å˜æ›´ä»‹ç»">&lt;strong>é‡è¦å˜æ›´ä»‹ç»&lt;/strong>&lt;/h2>
&lt;h3 id="æ–°ç‰¹æ€§">&lt;strong>æ–°ç‰¹æ€§&lt;/strong>&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>æ–°æµå¼æ¥å£ StreamX æ”¯æŒ gRPCï¼Œå­˜é‡ Kitex gRPC ç”¨æˆ·å¯è¿ç§»&lt;/strong>&lt;/p>
&lt;p>v0.12.0 å‘å¸ƒäº† StreamX æ¥å£ä¼˜åŒ–æµå¼ä½“éªŒï¼Œæ”¯æŒäº†è‡ªå®šä¹‰æµå¼åè®® TTHeader Streamingï¼Œä½†æœªæ”¯æŒ gRPCï¼Œå¯¼è‡´å­˜é‡ç”¨æˆ·æ— æ³•è¿ç§»ã€‚&lt;/p>
&lt;p>v0.13.0 å¯¹ StreamX æ”¯æŒ gRPC åï¼Œç”¨æˆ·å¯è¿ç§»è‡³ StreamX æ–°æ¥å£ï¼ŒServer ç«¯å¯ä»¥åŒæ—¶å…¼å®¹ä¸¤ä¸ªæµå¼åè®®ï¼Œæ— éœ€æ‹…å¿ƒæ¥å£è¿ç§»åçš„åè®®å…¼å®¹æ€§é—®é¢˜ã€‚&lt;/p>
&lt;p>ç‰¹åˆ«åœ°ï¼ŒStreamX åœ¨é€‚é… gRPC æ—¶ï¼Œå‘ç°ä¾ç„¶æœ‰ä¸€äº›ä¸ä¾¿åˆ©çš„é—®é¢˜ï¼Œä¸ºå¸¦æ¥æ›´å¥½çš„æ¥å£ä½¿ç”¨ä½“éªŒï¼Œå› æ­¤å¯¹ StreamX æ¥å£åšäº†äºŒæ¬¡è°ƒæ•´ã€‚&lt;/p>
&lt;p>å·²ç»ä½¿ç”¨ v0.12.* çš„ StreamX ç”¨æˆ·ä¼šå¸¦æ¥å½±å“ï¼Œåœ¨è¿™é‡Œè¡¨ç¤ºæŠ±æ­‰ã€‚&lt;/p>
&lt;p>è¯¦è§ &lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/basic-feature/streamx">StreamX ç”¨æˆ·æ–‡æ¡£&lt;/a>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Prutal - Protobuf çš„æ— ç”Ÿæˆä»£ç åºåˆ—åŒ–åº“&lt;/strong>&lt;/p>
&lt;p>&lt;a href="https://github.com/cloudwego/prutal">Prutal&lt;/a> æ­£å¼å¼€æºï¼Œå¯¹æ ‡ Thrift çš„ &lt;a href="https://github.com/cloudwego/frugal">Frugal&lt;/a> åº“ï¼Œæ–°ç‰ˆæœ¬ Kitex é»˜è®¤é›†æˆ Prutalã€‚ç‰¹ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>äº§ç‰©ä½“ç§¯æœ€å°åŒ–ï¼Œåªéœ€ç”Ÿæˆç»“æ„ä½“&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä½¿ç”¨ä¸ Frugal ç›¸ä¼¼çš„åå°„ä¼˜åŒ–ï¼Œæ€§èƒ½ä¼˜äºå®˜æ–¹ Protobuf&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å…¼å®¹å®˜æ–¹ Protobuf åŠè¡ç”Ÿç‰ˆæœ¬çš„ç”Ÿæˆä»£ç &lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>è¯¦ç»†ä¿¡æ¯å‚è€ƒ &lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/code-gen/prutal">Prutal&lt;/a>ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="åŠŸèƒ½ä½“éªŒä¼˜åŒ–">&lt;strong>åŠŸèƒ½/ä½“éªŒä¼˜åŒ–&lt;/strong>&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>TTHeader Streaming æ”¯æŒé…ç½®æ¥å£çº§åˆ« Recv è¶…æ—¶&lt;/strong>&lt;/p>
&lt;p>æœ¬ç‰ˆæœ¬ TTHeader Streaming åœ¨åŸæœ‰çš„ Kitex Client çº§åˆ«åŸºç¡€ä¸Šï¼Œé¢å¤–æ”¯æŒæ¥å£çº§åˆ«çš„ Recv è¶…æ—¶é…ç½®ï¼Œé…ç½®æ›´ä¸ºçµæ´»ã€‚&lt;/p>
&lt;p>è¯¦è§ &lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/basic-feature/streamx/stream&amp;#43;timeout&amp;#43;control/">StreamX æµè¶…æ—¶æ§åˆ¶&lt;/a>ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Thrift é»˜è®¤ä¼ è¾“åè®®ç”± Buffered æ”¹ä¸º Framed&lt;/strong>&lt;/p>
&lt;p>è¿™ä¸ªå˜æ›´å¯ä»¥åˆ©ç”¨ FastCodec ä»¥è·å¾—æ›´é«˜çš„ç¼–è§£ç æ€§èƒ½ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="å…¶ä»–">&lt;strong>å…¶ä»–&lt;/strong>&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>äº§ç‰©ç®€åŒ–&lt;/p>
&lt;ul>
&lt;li>
&lt;p>é»˜è®¤ä¸ç”Ÿæˆ Set æ•°æ®ç»“æ„çš„é‡å¤æ ¡éªŒä»£ç ä¸å„ç»“æ„ä½“çš„ DeepEqual å‡½æ•°&lt;/p>
&lt;ul>
&lt;li>
&lt;p>è‹¥åªæƒ³æ¢å¤ DeepEqualï¼Œç”Ÿæˆå‘½ä»¤è¿½åŠ &lt;code>-thrift gen_deep_equal=true&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è‹¥æƒ³æ¢å¤ Set çš„é‡å¤æ ¡éªŒï¼Œç”Ÿæˆå‘½ä»¤è¿½åŠ &lt;code>-thrift validate_set=true, -thrift gen_deep_equal=true&lt;/code>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>é»˜è®¤ä¸ç”Ÿæˆ Apache Codec ç›¸å…³ä»£ç &lt;/p>
&lt;ul>
&lt;li>è‹¥æƒ³æ¢å¤è¿™éƒ¨åˆ†ä»£ç ï¼Œç”Ÿæˆå‘½ä»¤è¿½åŠ &lt;code>-thrift no_default_serdes=false&lt;/code>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Go æ”¯æŒç‰ˆæœ¬å˜åŒ–&lt;/p>
&lt;p>æ”¯æŒç‰ˆæœ¬ Go 1.19~1.24ï¼Œæœ€ä½æ”¯æŒç‰ˆæœ¬å˜ä¸º Go 1.19ï¼Œå¦‚æœ Go ç‰ˆæœ¬è¿‡ä½ï¼Œç¼–è¯‘æ—¶ä¼šæœ‰æç¤ºï¼š&lt;code>note: module requires Go 1.19&lt;/code>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="è¯¦ç»†å˜æ›´">&lt;strong>è¯¦ç»†å˜æ›´&lt;/strong>&lt;/h2>
&lt;h3 id="feature">Feature&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1719">#1719&lt;/a>] feat: prutal for replacing protoc&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1736">#1736&lt;/a>] feat(ttstream): support WithRecvTimeout stream call option&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1702">#1702&lt;/a>] feat(gRPC): add grpc client conn dump to help debug the conn and stream status&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1723">#1723&lt;/a>] feat(codec/thrift): use fastcodec/frugal if apache codec not available&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1724">#1724&lt;/a>] feat: add tail option to support for delayed initialization of some client options&lt;/p>
&lt;h3 id="optimize">Optimize&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1728">#1728&lt;/a>] optimize(apache): remove apache codec gen and set default protocol from buffered to framed&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1732">#1732&lt;/a>] optimize(rpcinfo): purify the transport protocol of rpcinfo in a single rpc request&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1711">#1711&lt;/a>] optimize(tool): disable set validate and deep equal code gen to simplify kitex_gen&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1717">#1717&lt;/a>] optimize(gRPC): return more detailed error when received invalid http2 frame&lt;/p>
&lt;h3 id="fix">Fix&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1734">#1734&lt;/a>] fix(ttstream): adjust stream state transition and remove all SetFinalizer to avoid memory leak&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1735">#1735&lt;/a>] fix(generic): support both relative and absolute check for idl includes parse to make it compatible with generation tool&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1725">#1725&lt;/a>] fix: code gen import issue for streamx mode, stream call judgement bug and set ttheader streaming as default&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1727">#1727&lt;/a>] fix(tool): fix tool UseStdLib remains unexpected lib issue.&lt;/p>
&lt;h3 id="refactor">Refactor&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1658">#1658&lt;/a>] refactor: streamx api to adapt both grpc and ttheader streaming protocol and provide more user-friendly interface&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1729">#1729&lt;/a>] refactor(tool): move pb tpl code to sep pkg&lt;/p>
&lt;h3 id="chore">Chore&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1743">#1743&lt;/a>] chore: update dependencies version&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1740">#1740&lt;/a>] chore(generic): deprecate NewThriftContentProvider&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1741">#1741&lt;/a>] chore(streamx): remove redundant streamx package&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1738">#1738&lt;/a>] ci: fix typos &amp;amp; crate-ci/typos&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1737">#1737&lt;/a>] chore: update dependency and change go support to 1.19-1.24&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1720">#1720&lt;/a>] Revert &amp;ldquo;fix(ttstream): pingpong method refers to server interface defined in Kitex generation code when streamx is enabled and there are other streaming methods&amp;rdquo;&lt;/p></description></item><item><title>Blog: Kitex Release v0.12.0</title><link>https://www.cloudwego.io/zh/blog/2025/01/03/kitex-release-v0.12.0/</link><pubDate>Fri, 03 Jan 2025 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2025/01/03/kitex-release-v0.12.0/</guid><description>
&lt;h2 id="é‡è¦å˜æ›´ä»‹ç»">&lt;strong>é‡è¦å˜æ›´ä»‹ç»&lt;/strong>&lt;/h2>
&lt;h3 id="ç²¾ç®€äº§ç‰©å»ºè®®---å»-apache-thrift">ç²¾ç®€äº§ç‰©å»ºè®® - å» Apache Thrift&lt;/h3>
&lt;p>å¼ºçƒˆå»ºè®®å» Apache Codecï¼Œè§£å†³ Apache ä¸å…¼å®¹å˜æ›´å¸¦æ¥çš„ç¼–è¯‘ä½“éªŒé—®é¢˜ï¼Œå¹¶èƒ½&lt;strong>å‡å°‘ 50% äº§ç‰©ä½“ç§¯&lt;/strong>ã€‚&lt;/p>
&lt;p>è¯·ä½¿ç”¨ Kitex çš„ Thrift Codecï¼šFastCodec æˆ– Frugalï¼Œä¸ä¼šä¾èµ– Apache Thrift Codecã€‚&lt;/p>
&lt;p>åç»­ç‰ˆæœ¬è®¡åˆ’ï¼šKitex ä¼šé»˜è®¤å»é™¤ Apache äº§ç‰©ï¼Œç”¨æˆ·æŒ‡å—è§ &lt;a href="https://www.cloudwego.io/zh/docs/kitex/best-practice/remove_apache_codec/">Kitex å» Apache Thrift ç”¨æˆ·æ‰‹å†Œ&lt;/a>&lt;/p>
&lt;h3 id="new-features">New Features&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>Thrift Streaming over TTHeader - è‡ªå®šä¹‰æµå¼åè®®&lt;/strong>&lt;/p>
&lt;p>æ”¯æŒäº†åŸºäº TTheader åè®®çš„æµå¼è°ƒç”¨ï¼Œä¼˜åŒ–å›  gRPC streaming åè®®å¤æ‚åº¦è¿‡é«˜è€Œå¼•å…¥çš„ç¨³å®šæ€§é—®é¢˜ï¼›&lt;/p>
&lt;p>æä¾›äº†æ–°çš„æµå¼æ¥å£ StreamXï¼Œè§£å†³åŸæµå¼æ¥å£å„ç±»ä½¿ç”¨ä½“éªŒé—®é¢˜ï¼Œå¹¶æä¾›æµå¼æ¥å£çš„æœ€ä½³å®è·µã€‚&lt;/p>
&lt;p>ç”¨æˆ·æ–‡æ¡£ï¼š&lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/basic-feature/streamx/">StreamX ç”¨æˆ·æ–‡æ¡£ä¸æœ€ä½³å®è·µ&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>gRPC Streaming æ”¯æŒä¼˜é›…é€€å‡º&lt;/strong>&lt;/p>
&lt;p>æ”¯æŒäº†ä¼˜é›…é€€å‡ºåŠŸèƒ½ï¼Œç”¨äºè§£å†³å› ä¸ºæœåŠ¡å‡çº§/æ›´æ–°è€Œå¯¼è‡´çš„ä¸Šæ¸¸æŠ¥é”™é—®é¢˜ã€‚&lt;/p>
&lt;p>ç”¨æˆ·æ–‡æ¡£ï¼š&lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/basic-feature/protocol/streaming/grpc/graceful_shutdown/">gRPC Streaming ä¼˜é›…é€€å‡º&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="ä½“éªŒä¼˜åŒ–">ä½“éªŒä¼˜åŒ–&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>gRPC Streaming æ—¥å¿—ä¼˜åŒ–&lt;/strong>&lt;/p>
&lt;p>å¯¹äºæµå¼ä¸²è”åœºæ™¯ï¼Œè‹¥ä¸‹æ¸¸ Stream å‡ºé”™æ˜¯ç”±äºä¸Šæ¸¸ Stream é€€å‡ºï¼Œå°†ä¼šåœ¨é”™è¯¯ä¸­åŒ…å«&amp;quot;[triggered by {serviceName}]&amp;ldquo;åç¼€ï¼Œæ–¹ä¾¿å®šä½é—®é¢˜ï¼›&lt;/p>
&lt;p>Send è¿”å›çš„ the stream is done é”™è¯¯å°†å˜æˆå¯¼è‡´æµè¢«å…³é—­çš„çœŸæ­£é”™è¯¯ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ä»£ç ç”Ÿæˆå·¥å…· Kitex Tool&lt;/strong>&lt;/p>
&lt;p>&lt;strong>ç”Ÿæˆé€Ÿåº¦å’Œå·¥å…·å®‰è£…ä¼˜åŒ–&lt;/strong>ï¼šæ— éœ€å†å®‰è£…æˆ–å‡çº§ Thriftgo ï¼Œå†…ç½®åˆ° Kitexï¼Œåœ¨ IDL ç‰¹åˆ«åºå¤§çš„åœºæ™¯ï¼Œç”Ÿæˆé€Ÿåº¦æœ‰è¾ƒå¤§æå‡ã€‚&lt;/p>
&lt;p>&lt;strong>æœ€å°åŒ–äº§ç‰©ä½“ç§¯&lt;/strong>ï¼šäº§ç‰©ä½“ç§¯æœ€å°åŒ–å¯ä»¥ä½¿ç”¨ Frugalï¼Œå¦‚æœå¸Œæœ›ç°åº¦å¼€å¯ï¼Œæ”¯æŒæŒ‡å®šç»“æ„ä½“ä½¿ç”¨ Frugal åºåˆ—åŒ–ã€‚è¯¦è§ &lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/code-gen/code_generation/">ä»£ç ç”Ÿæˆå·¥å…·&lt;/a>å…³äº -frugal-structã€-gen-frugal å‚æ•°çš„è¯´æ˜ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="ä¸å…¼å®¹å˜æ›´-å¯¹99ç”¨æˆ·æ— å½±å“">ä¸å…¼å®¹å˜æ›´-å¯¹99%ç”¨æˆ·æ— å½±å“&lt;/h3>
&lt;p>Kitex ä¼šå°½é‡ä¿è¯å¸¸è§„ä½¿ç”¨æ–¹å¼çš„å…¼å®¹æ€§ï¼Œä¸ªåˆ«ç”¨æˆ·å¯èƒ½å¯¹ Kitex éƒ¨åˆ†ä»£ç å®šä¹‰æœ‰ä¾èµ–ï¼ŒKitex æœ¬æ¬¡ç‰ˆæœ¬è°ƒæ•´å¯¹è¿™éƒ¨åˆ†ç”¨æˆ·æœ‰å½±å“ã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>åˆ é™¤ &lt;code>thrift.NewBinaryProtocol&lt;/code>&lt;/strong>&lt;/p>
&lt;p>&lt;code>thrift.NewBinaryProtocol&lt;/code>æ˜¯ Kitex å¯¹ Apache thrift.TProtocol æ¥å£çš„å®ç°ï¼Œå› ä¸º trans éƒ¨åˆ†ç›´æ¥ä½¿ç”¨ Kitex çš„ ByteBufferï¼Œç›¸æ¯” apache thrift.TBinaryProtocol æ€§èƒ½æ›´å¥½ã€‚åœ¨ v0.11.0 å·²ç»åŠ äº†å¼ƒç”¨æ³¨é‡Šã€‚&lt;/p>
&lt;p>&lt;strong>åˆ é™¤åŸå› &lt;/strong>: å› ä¸ºè¦å»é™¤ Apache Thrift ä¾èµ–ï¼Œæ‰€ä»¥éœ€è¦åˆ é™¤è¯¥å®ç°ã€‚&lt;/p>
&lt;p>&lt;strong>ç”¨æˆ·ä¿®æ”¹è¯´æ˜&lt;/strong>: è¯¥å®ç°æœ¬å°±æ˜¯é…å¥— Apache Codec ä½¿ç”¨ï¼Œå¦‚æœä½ è¿˜éœ€è¦ä¾èµ– Apache Codecï¼Œè¯·ç›´æ¥ä½¿ç”¨ Apache çš„TBinaryProtocolã€‚å¦‚æœè§‰å¾—å¯¹æ€§èƒ½æœ‰å½±å“ï¼Œå¯ä»¥æŠŠ Kitex æ—§ç‰ˆæœ¬å®ç° fork ä¸‹æ¥ï¼Œå‚è€ƒ github/cloudwego/kitex v0.10.0ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">import&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;github.com/apache/thrift/lib/go/thrift&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">tProt&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">:=&lt;/span> &lt;span style="color:#000">thrift&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">NewTBinaryProtocol&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">thrift&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">NewTMemoryBufferLen&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1024&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;strong>åˆ é™¤ &lt;code>generic.ServiceInfo&lt;/code>&lt;/strong>&lt;/p>
&lt;p>æ³›åŒ–éƒ¨åˆ†åˆ é™¤ &lt;code>generic.ServiceInfo&lt;/code> APIã€‚&lt;/p>
&lt;p>&lt;strong>åˆ é™¤åŸå› &lt;/strong>: å› ä¸ºå¤š Service çš„æ”¯æŒéœ€è¦å¯¹æ³›åŒ–éƒ¨åˆ†å®šä¹‰åšé‡æ„ã€‚&lt;/p>
&lt;p>&lt;strong>ç”¨æˆ·ä¿®æ”¹è¯´æ˜&lt;/strong>: æ–° API ç”¨ &lt;code>generic.ServiceInfoWithGeneric&lt;/code> æ›¿ä»£ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">import&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;github.com/cloudwego/kitex/pkg/generic&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// removed&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">func&lt;/span> &lt;span style="color:#000">ServiceInfo&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">pcType&lt;/span> &lt;span style="color:#000">serviceinfo&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">PayloadCodec&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">*&lt;/span>&lt;span style="color:#000">serviceinfo&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">ServiceInfo&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// please use this instead&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">func&lt;/span> &lt;span style="color:#000">ServiceInfoWithGeneric&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">g&lt;/span> &lt;span style="color:#000">Generic&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">*&lt;/span>&lt;span style="color:#000">serviceinfo&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">ServiceInfo&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ul>
&lt;h2 id="full-release-log">&lt;strong>Full Release Log&lt;/strong>&lt;/h2>
&lt;h3 id="feature">Feature:&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1541">#1541&lt;/a>][&lt;a href="https://github.com/cloudwego/kitex/pull/1633">#1633&lt;/a>] feat(ttstream): support ttheader streaming and streamv2 interface&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1623">#1623&lt;/a>] feat(gRPC): optimize gRPC error prompt and metrics, assisting in troubleshooting problems&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1556">#1556&lt;/a>] feat(gRPC): support gRPC graceful shutdown&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1467">#1467&lt;/a>][&lt;a href="https://github.com/cloudwego/kitex/pull/1627">#1627&lt;/a>][&lt;a href="https://github.com/cloudwego/kitex/pull/1619">#1619&lt;/a>] feat(generic): support thrift streaming(over gRPC) for json generic client&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1607">#1607&lt;/a>] feat(tool): kitex tool support gen frugal codec for certain struct&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1526">#1526&lt;/a>] feat(generic): support an option to remove go.tag annotation&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1536">#1536&lt;/a>] feat(generic): support an option to set IDL ParseMode for each client&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1510">#1510&lt;/a>] feat: register service with service level middleware&lt;/p>
&lt;h3 id="optimize">Optimize:&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1635">#1635&lt;/a>] optimize: add two function for binary protocol to get bufiox reader and writer&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1630">#1630&lt;/a>] optimize(tool): implement no recursive generate to support incremental update&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1617">#1617&lt;/a>] optimize(retry): optimize UpdatePolicy and add test cases to check invalid retry policy. &amp;lt;v0.11.0, if the FailurePolicy is nil and type is 0 or &amp;gt;1, will trigger nil panic. The bug has been fixed in v0.11.0, this pr is to add test cases and optimize UpdatePolicy to ignore the nil panic&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1606">#1606&lt;/a>] optimize(tool): use embedded thriftgo as default option&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1595">#1595&lt;/a>] optimize(tool): optimize pb tool code&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1599">#1599&lt;/a>] optimize(tool): call FastWriteNocopy in FastWrite to avoid misuse by users&lt;/p>
&lt;h3 id="refactor">Refactor:&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1615">#1615&lt;/a>] refactor: get rid of apache thrift in go.mod&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1611">#1611&lt;/a>][&lt;a href="https://github.com/cloudwego/kitex/pull/1614">#1614&lt;/a>] refactor: move ttheader codec logic to gopkg&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1553">#1553&lt;/a>] refactor(codec/thrift): unified typecodec implementation and adjust new file layout&lt;/p>
&lt;h3 id="perf">Perf:&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1581">#1581&lt;/a>][&lt;a href="https://github.com/cloudwego/kitex/pull/1628">#1628&lt;/a>] perf(timeout): refactor new rpctimeout implementation to improve performance&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1564">#1564&lt;/a>][&lt;a href="https://github.com/cloudwego/kitex/pull/1567">#1567&lt;/a>] perf: reduce object allocation for circuitbreak middleware and retry context&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1557">#1557&lt;/a>] perf(rpcinfo): remove lock for rpcinfo.RPCStats&lt;/p>
&lt;h3 id="fix">Fix:&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1622">#1622&lt;/a>] fix(generic): use jsoniter instead of sonic for json generic-call, since sonic doesn&amp;rsquo;t support map[interface{}]interface{}&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1562">#1562&lt;/a>] fix: deep copy function of the generated code cannot copy the empty string&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1602">#1602&lt;/a>] fix(gRPC): check if the type assertion succeed in ProtocolMatch to avoid panic&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1598">#1598&lt;/a>] fix(retry): fix issue that mixed retry cannot update its config correctly&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1590">#1590&lt;/a>][&lt;a href="https://github.com/cloudwego/kitex/pull/1572">#1572&lt;/a>] fix(generic): set default values for optional fields of primitive types with generic with dynamicgo&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1580">#1580&lt;/a>] fix(netpoll): fix timeout caused by partial use of the Read method of remote.ByteBuffer&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1574">#1574&lt;/a>] fix(trace): stream event handler ignore io.EOF event&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1563">#1563&lt;/a>] fix(generic): fix the issue where the generic client sets the parse mode of CombineServices and then requests causes &amp;ldquo;unknown service&amp;rdquo; error&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1568">#1568&lt;/a>] fix(wpool): fix the issue of wpool object allocation, and incorrect ctx causing profiler errors.&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1558">#1558&lt;/a>][&lt;a href="https://github.com/cloudwego/kitex/pull/1555">#1555&lt;/a>] fix(bthrift): fix the issue of no recursion conversion of unknown field type under bthrift&lt;/p>
&lt;h3 id="chore">Chore:&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1593">#1593&lt;/a>][&lt;a href="https://github.com/cloudwego/kitex/pull/1560">#1560&lt;/a>][&lt;a href="https://github.com/cloudwego/kitex/pull/1561">#1561&lt;/a>][&lt;a href="https://github.com/cloudwego/kitex/pull/1559">#1559&lt;/a>] chore(test): fix data race issue, unstable issue and long time running issue of some test cases&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1634">#1634&lt;/a>][&lt;a href="https://github.com/cloudwego/kitex/pull/1632">#1632&lt;/a>][&lt;a href="https://github.com/cloudwego/kitex/pull/1573">#1573&lt;/a>] chore(dep): upgrade frugal, localsession and other cloudwego dependency versions&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1616">#1616&lt;/a>] chore(generic): remove deprecated apis/interfaces/variables&lt;/p></description></item><item><title>Blog: å¦‚ä½•è®©ä½ çš„ Kitex ç”Ÿæˆä»£ç å‡»è´¥ 99% çš„ç”¨æˆ·</title><link>https://www.cloudwego.io/zh/blog/2024/09/20/%E5%A6%82%E4%BD%95%E8%AE%A9%E4%BD%A0%E7%9A%84-kitex-%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%81%E5%87%BB%E8%B4%A5-99-%E7%9A%84%E7%94%A8%E6%88%B7/</link><pubDate>Fri, 20 Sep 2024 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2024/09/20/%E5%A6%82%E4%BD%95%E8%AE%A9%E4%BD%A0%E7%9A%84-kitex-%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%81%E5%87%BB%E8%B4%A5-99-%E7%9A%84%E7%94%A8%E6%88%B7/</guid><description>
&lt;h2 id="å‰è¨€">å‰è¨€&lt;/h2>
&lt;h3 id="ä¸ºä»€ä¹ˆè¦ç”Ÿæˆä»£ç ">ä¸ºä»€ä¹ˆè¦ç”Ÿæˆä»£ç &lt;/h3>
&lt;p>æ¡†æ¶å¼€å‘æœ‰ä¸¤ç§å¸¸è§çš„é£æ ¼ï¼š Code First å’Œ Schema First&lt;/p>
&lt;p>ç®€å•æ¥è¯´ï¼ŒCode First å°±æ˜¯å…ˆå†™ä»£ç ï¼Œå†ç”±ä»£ç ç”Ÿæˆæ•°æ®æ¨¡å‹å’Œæ¥å£è§„èŒƒï¼ˆæ¯”å¦‚å…ˆä»£ç å†™ä¸€ä¸ª http æ¥å£ï¼Œç„¶åç”¨ Swagger æ¥ç”Ÿæˆ API ä¿¡æ¯ï¼‰&lt;/p>
&lt;p>è€Œ RPC å¼€å‘æ›´å¤šæ˜¯ Schema First ï¼Œå› ä¸º RPC æœåŠ¡å¯èƒ½æ˜¯è·¨è¯­è¨€çš„ï¼Œä¸ä¸€å®šä¼šå…ˆå†™ä»£ç ï¼Œè€Œæ˜¯ç”¨ Thriftã€Protobuf è¿™äº›é€šç”¨çš„ IDL æ¥æè¿°æ¥å£å’Œç»“æ„ä½“ï¼Œå†ç”Ÿæˆå¯¹åº”è¯­è¨€ã€å¯¹åº”æ¡†æ¶çš„å…·ä½“ä»£ç ã€‚&lt;/p>
&lt;p>ï¼ˆbtwï¼Œç”¨ IDL ç”Ÿæˆ RPC ä»£ç é€šå¸¸ä¹Ÿæ¯”æ‰‹æ“ä¸€å †ç»“æ„ä½“å’Œ Getter Setter è¦æ–¹ä¾¿ä¸å°‘ï¼‰&lt;/p>
&lt;p>Kitex RPC å¼€å‘æ­¥éª¤ä¹Ÿæ˜¯å…ˆå†™ IDLï¼Œå†ç”± Kitex Tool ç”Ÿæˆ Golang ä»£ç ï¼š&lt;/p>
&lt;ol>
&lt;li>IDL é‡Œçš„ç»“æ„ä½“å®šä¹‰ä¼šè¢«ç”Ÿæˆä¸º Golang çš„æ¡©ç»“æ„ä½“ï¼ˆå’Œä¸€äº› Getter Setterï¼‰&lt;/li>
&lt;li>IDL é‡Œ Service å’Œ Method ä¼šè¢«ç”Ÿæˆä¸º NewKitexClientã€NewKitexServerã€KitexServiceInfo è¿™äº›æ¡†æ¶ä½¿ç”¨ç›¸å…³çš„è„šæ‰‹æ¶å‡½æ•°&lt;/li>
&lt;/ol>
&lt;p>ä½†å¦‚æœä½ ä»”ç»†è§‚å¯Ÿè¿‡ kitex_gen çš„å†…å®¹ï¼Œä¼šå‘ç°ä¸Šé¢ä»£ç å æ¯”å¹¶ä¸å¤šï¼Œä¸»è¦æ˜¯ FastReadã€FastWrite è¿™äº›åºåˆ—åŒ–ç›¸å…³çš„å‡½æ•°å äº†å¾ˆå¤šè¡Œã€‚&lt;/p>
&lt;p>è¿™æ˜¯å› ä¸ºé™æ€ç”Ÿæˆçš„åºåˆ—åŒ–æ–¹æ€§èƒ½ä¼šæ›´é«˜ä¸€äº›ã€‚ï¼ˆå¯ä»¥ hardcode ç”Ÿæˆ hardcode ç±»å‹ã€å­—æ®µåç§°ç­‰ï¼Œä¸ç”¨èµ°åå°„ã€å‡å°‘å‡½æ•°è°ƒç”¨ç­‰ç­‰&amp;hellip;..ï¼‰&lt;/p>
&lt;p>æ­¤å¤–ï¼Œä¸€äº› Kitex çš„åŠŸèƒ½ç‰¹æ€§ä¹Ÿæ˜¯åŸºäºç”Ÿæˆçš„ä»£ç æ¥å®ç°çš„ï¼Œä¾‹å¦‚ Unknown Fields å’Œ Field Mask&lt;/p>
&lt;p>æ‰€ä»¥ï¼Œå¦‚æœä½ æƒ³è¿è¡Œä¸€ä¸ª Kitex RPC æœåŠ¡ï¼Œå°±éœ€è¦æ ¹æ® IDL æ¥ç”Ÿæˆè¿™äº›æ¡©ä»£ç ã€‚&lt;/p>
&lt;h3 id="ç”Ÿæˆä»£ç é‡Œæœ‰ä»€ä¹ˆ">ç”Ÿæˆä»£ç é‡Œæœ‰ä»€ä¹ˆ&lt;/h3>
&lt;p>ä»¥ Thrift åœºæ™¯ä¸ºä¾‹ï¼ŒKitex Tool ç”Ÿæˆå†…å®¹çš„ç›®å½•å¦‚ä¸‹ï¼š&lt;/p>
&lt;pre tabindex="0">&lt;code>kitex_gen/
â”œâ”€â”€ base
â”‚ â”œâ”€â”€ base.go // ç»“æ„ä½“æ¡©ä»£ç  + æ™®é€šçš„åºåˆ—åŒ–ä»£ç 
â”‚ â”œâ”€â”€ k-base.go // FastCodec åºåˆ—åŒ–ä»£ç 
â”‚ â””â”€â”€ k-consts.go
â””â”€â”€ test
â”œâ”€â”€ example.go // ç»“æ„ä½“æ¡©ä»£ç  + æ™®é€šçš„åºåˆ—åŒ–ä»£ç 
â”œâ”€â”€ k-consts.go
â”œâ”€â”€ k-example.go // FastCodec åºåˆ—åŒ–ä»£ç 
â””â”€â”€ myservice // åˆ›å»º Kitex Client/Server çš„è„šæ‰‹æ¶
â”œâ”€â”€ client.go
â”œâ”€â”€ invoker.go
â”œâ”€â”€ myservice.go
â””â”€â”€ server.go
&lt;/code>&lt;/pre>&lt;p>å…¶ä¸­ï¼Œç»“æ„ä½“ç›¸å…³çš„ä»£ç å æ®äº†å¤§éƒ¨åˆ†ä½“ç§¯ï¼Œä¾‹å¦‚ Getter Setterã€FastReadã€FastWriteï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>æ–¹æ³•å&lt;/th>
&lt;th>æè¿°&amp;amp;ç”¨é€”&lt;/th>
&lt;th>CodeGen å†…å®¹é•¿åº¦&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>InitDefault&lt;/td>
&lt;td>Frugal åœºæ™¯éœ€è¦&lt;/td>
&lt;td>çŸ­&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GetXXXField/SetXXXField/IsSetXXXX&lt;/td>
&lt;td>GetterSetterï¼Œéƒ¨åˆ† interface éœ€è¦&lt;/td>
&lt;td>çŸ­&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Read/ReadFieldX/Write/writeFieldX&lt;/td>
&lt;td>åŸç”Ÿ Apache Codec&lt;/td>
&lt;td>é•¿&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>String&lt;/td>
&lt;td>Stringer&lt;/td>
&lt;td>çŸ­&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>DeepEqual/FieldXXXDeepEqual&lt;/td>
&lt;td>set å»é‡æé€Ÿ&lt;/td>
&lt;td>é•¿&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>DeepCopy&lt;/td>
&lt;td>RPAL åœºæ™¯éœ€è¦&lt;/td>
&lt;td>çŸ­&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ThriftService æ¨¡æ¿&lt;/td>
&lt;td>ServiceInterface æè¿°æ¥å£å®šä¹‰&lt;/td>
&lt;td>çŸ­&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>XXXClientFactoryã€XXXClientProtocol&lt;/td>
&lt;td>æ—§çš„ ThriftClient ä»£ç ï¼Œä¸å†æœ‰ç”¨&lt;/td>
&lt;td>è¾ƒé•¿&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>XXXProcessor&lt;/td>
&lt;td>æ—§çš„ Thrift Processor ä»£ç ï¼Œä¸å†æœ‰ç”¨&lt;/td>
&lt;td>è¾ƒé•¿&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>XXXServiceMethodArgs/Result&lt;/td>
&lt;td>Thrift ä¸º Method çš„å…¥å‚å’Œè¿”å›å€¼å•ç‹¬ç”Ÿæˆçš„ç±»å‹&lt;/td>
&lt;td>çŸ­&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GetFirstArgument/GetResult&lt;/td>
&lt;td>argsã€result ä¸“ç”¨&lt;/td>
&lt;td>çŸ­&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>FastRead/FastReadFieldX/FastWrite/FastWriteNocopy/BLength/fastWriteFieldX/fieldXLength&lt;/td>
&lt;td>FastCodec ç¼–è§£ç &lt;/td>
&lt;td>é•¿&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GetOrSetBase/GetOrSetBaseResp&lt;/td>
&lt;td>ç‰¹æ®Šçš„ Base ç›¸å…³æ¥å£ï¼Œæ¡†æ¶å†…éƒ¨ä½¿ç”¨&lt;/td>
&lt;td>çŸ­&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="äº§ç‰©è¿‡å¤§ä¼šæ€ä¹ˆæ ·">äº§ç‰©è¿‡å¤§ä¼šæ€ä¹ˆæ ·&lt;/h3>
&lt;p>ç°åœ¨å¾ˆå¤šæœåŠ¡éƒ½æœ‰äº†è‡ªå·±çš„ IDL å¤§ä»“åº“ï¼Œåœ¨å­—èŠ‚çš„å†…éƒ¨åœºæ™¯ä¸­ï¼Œç”šè‡³å‡ºç°äº† 6.8G çš„è¶…å¤§å‹ IDL ä»“åº“ï¼ŒåŒ…å«äº†ä¸Šç™¾ä¸‡ä¸ª commit&lt;/p>
&lt;p>è¿™ç§æƒ…å†µä¸‹ï¼Œéšç€ä¸šåŠ¡è¿­ä»£ï¼ŒIDL çš„å†…å®¹æ–°å¢å’Œç›¸äº’å¼•ç”¨ä¸æ–­å¢åŠ ï¼ˆå¤§å®¶æ²¡äº‹éƒ½ä¸ä¼šå»åˆ  IDLï¼Œæ‰€ä»¥åªä¼šè¶Šæ¥è¶Šå¤§ï¼‰ï¼Œæ‰€ä»¥ç”Ÿæˆ kitex_gen ä¹‹åï¼Œä¸ç®¡æœ‰çš„æ²¡çš„ï¼Œäº§ç‰©ä½“ç§¯å¯èƒ½ä¼šéå¸¸å¤§&lt;/p>
&lt;p>ä½“ç§¯å¤ªå¤§äº†ï¼Œä¼šå¯¼è‡´ï¼š&lt;/p>
&lt;ol>
&lt;li>ç”Ÿæˆè€—æ—¶ä¹Ÿå¾ˆé•¿ï¼Œå½±å“ç ”å‘æ•ˆç‡&lt;/li>
&lt;li>Goland åŠ è½½ç´¢å¼•è¦å¾ˆä¹…ï¼Œæˆ–è€…æ ¹æœ¬æ— æ³•åŠ è½½ï¼Œæ²¡è‡ªåŠ¨è¡¥å…¨äº†ï¼Œä»£ç éƒ½ä¸çŸ¥é“æ€ä¹ˆå†™äº†&lt;/li>
&lt;li>Git æäº¤çš„æ—¶å€™å†…å®¹å·¨å¤§ï¼ŒGit ä»“åº“ä¹Ÿè¶Šæ¥è¶Šå¤§äº†ï¼Œå½“ Git ä»“åº“è¶…è¿‡ 500MB åï¼Œ&lt;a href="https://github.com/golang/go/issues/29210">ç”šè‡³å¯èƒ½ go get éƒ½æ‹‰ä¸ä¸‹æ¥äº†&lt;/a>&lt;/li>
&lt;li>ç¼–è¯‘å¾ˆæ…¢ã€ç”šè‡³ç¼–è¯‘æ—¶ç¬¦å·è¡¨è¿‡å¤§&lt;a href="https://github.com/golang/go/issues/17378">ç›´æ¥ç¼–è¯‘å¤±è´¥&lt;/a>&lt;/li>
&lt;/ol>
&lt;p>æ‰€ä»¥è¿™ç§æ—¶å€™ï¼Œä¸å¾—ä¸æåˆ°äº§ç‰©ä¼˜åŒ–æ²»ç†äº†ï¼ˆé¡ºä¾¿èƒ½è®©ç”Ÿæˆé€Ÿåº¦æ›´å¿«ï¼‰&lt;/p>
&lt;h2 id="ä¼˜åŒ–æ‰‹æ®µ">ä¼˜åŒ–æ‰‹æ®µ&lt;/h2>
&lt;p>è¿‡å»åŠå¹´ï¼Œæˆ‘ä»¬å¯¹ç”Ÿæˆé€Ÿåº¦å’Œä½“ç§¯ä¼˜åŒ–è¿›è¡Œäº†ä¸€è½®æ¢ç´¢ï¼Œæ€»ç»“äº†ä¸å°‘æœ‰ç”¨çš„æ‰‹æ®µã€‚&lt;/p>
&lt;p>è™½ç„¶ç”±äºå†å²åŒ…è¢±æˆ–å…¶ä»–åŸå› ï¼Œæˆ‘ä»¬æ²¡æŠŠè¿™äº›æ‰‹æ®µç›´æ¥ä½œä¸º kitex tool çš„é»˜è®¤è¡Œä¸ºï¼Œä½†ä¹Ÿç»è¿‡äº†ç¨³å®šçš„éªŒè¯å’Œä¸€äº›å­—èŠ‚å†…éƒ¨åœºæ™¯çš„è½åœ°æ¥å…¥&lt;/p>
&lt;p>å¦‚æœä½ çš„æœåŠ¡ä¹Ÿå—ä»£ç ç”Ÿæˆçš„å›°æ‰°ï¼Œä¸‹é¢çš„æ–¹æ³•æ€»æœ‰ä¸€æ¬¾é€‚åˆä½ ~&lt;/p>
&lt;h3 id="idl-è£åˆ‡">IDL è£åˆ‡&lt;/h3>
&lt;p>ç‰¹ç‚¹ï¼šå¤§å¹…å‡å°‘äº§ç‰©ä½“ç§¯ã€æé«˜ç”Ÿæˆé€Ÿåº¦&lt;/p>
&lt;h4 id="ç®€ä»‹">ç®€ä»‹&lt;/h4>
&lt;p>ç®€å•æ¥è¯´ï¼Œå¾ˆå¤šé¡¹ç›®çš„ Thrift IDL æœ‰å¤§é‡å†—ä½™å†…å®¹ï¼Œåªéœ€è¦ç”Ÿæˆæ‰€æœ‰ Method ç›´æ¥æˆ–è€…é—´æ¥å¼•ç”¨åˆ°çš„ç»“æ„ä½“å°±å¥½äº†ï¼Œå…¶ä»–æ— å…³å†…å®¹å¯ä»¥å‰”é™¤æ‰ã€‚&lt;/p>
&lt;p>IDL è£åˆ‡å·¥å…·èƒ½è‡ªåŠ¨å®Œæˆè¿™ä¸ªè¿‡ç¨‹ï¼Œä½¿å¾— Kitex ä»£ç ç”Ÿæˆé€Ÿåº¦å’Œäº§ç‰©ä½“ç§¯éƒ½å¾—åˆ°å¾ˆå¤§çš„ä¼˜åŒ–ã€‚æ ¹æ®ä¸€äº›å­—èŠ‚å†…éƒ¨å¤§ä»“åº“çš„è¯•ç‚¹ï¼Œç”Ÿæˆè€—æ—¶å‡åŠã€äº§ç‰©ä½“ç§¯å‡å°‘ 60%+ ï¼ˆä½ çš„ IDL è¶Šå¤§ï¼Œé‡Œé¢çš„å†—ä½™å†…å®¹è¶Šå¤šï¼Œæ•ˆæœè¶Šå¥½ï¼‰&lt;/p>
&lt;h4 id="ä½¿ç”¨">ä½¿ç”¨&lt;/h4>
&lt;p>åœ¨ kitex å‘½ä»¤æ‰§è¡Œæ—¶ï¼Œé¢å¤–æ·»åŠ  &lt;code>-thrift trim_idl&lt;/code>&lt;/p>
&lt;pre tabindex="0">&lt;code>kitex -module xx -thrift trim_idl xxxx.thrift
&lt;/code>&lt;/pre>&lt;p>å·¥å…·åœ¨æ‰§è¡Œæ—¶ï¼Œä¼šè§£æ IDL ç„¶ååªä¿ç•™æ‰€æœ‰ Method ç›´æ¥æˆ–é—´æ¥ç”¨åˆ°çš„ç»“æ„ä½“ï¼Œä»¥æœ€å¿«çš„é€Ÿåº¦ç”Ÿæˆæœ€ç®€æ´çš„äº§ç‰©ï¼Œå¹¶åŒæ—¶è¾“å‡ºä¸€ä¸ªè£åˆ‡æ•ˆæœçš„æŠ¥å‘Šï¼š&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Kitex_codegen_practices/wanring.jpg" alt="image">&lt;/p>
&lt;h4 id="è¿›é˜¶">è¿›é˜¶&lt;/h4>
&lt;blockquote>
&lt;p>æœ‰è¿™æ ·ä¸€ç§åœºæ™¯ï¼ŒæŸä¸ªè¶…å¤§ IDL æœ‰ 100 ä¸ª Methodï¼Œä½† A å›¢é˜Ÿåªç”¨å…¶ä¸­ 5 ä¸ª Methodï¼ŒB å›¢é˜Ÿåªç”¨å¦å¤– 10 ä¸ª Methodï¼Œå¯¹äºæ¯ä¸ªå›¢é˜Ÿè€Œè¨€ï¼Œä¸éœ€è¦ç”Ÿæˆ 100 ä¸ª Method ä»¥åŠæ‰€æœ‰çš„ç»“æ„ä½“&lt;/p>
&lt;/blockquote>
&lt;p>è£åˆ‡å·¥å…·æä¾›äº† -method ï¼Œç»†ç²’åº¦åˆ°æ–¹æ³•çº§åˆ«åšè£åˆ‡ï¼Œä»¥è§£å†³ä¸Šé¢æåˆ°çš„åœºæ™¯ï¼Œè¯¦è§&lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/code-gen/idl_trimmer">æŒ‡å®š Method è£åˆ‡&lt;/a>&lt;/p>
&lt;h3 id="no_fmt-æé€Ÿ">no_fmt æé€Ÿ&lt;/h3>
&lt;p>ç‰¹ç‚¹ï¼šä»£ç ç”Ÿæˆæé€Ÿ 50%&lt;/p>
&lt;h4 id="ç®€ä»‹-1">ç®€ä»‹&lt;/h4>
&lt;p>åœ¨åˆ†æä¸€äº›å¤æ‚ IDL åœºæ™¯ç”Ÿæˆæ…¢çš„ç«ç„°å›¾æ—¶ï¼Œå‘ç° Kitex Tool é‡Œæœ‰ä¸€ä¸ªæ¯”è¾ƒ interesting çš„æƒ…å†µï¼šç”Ÿæˆä»£ç åï¼Œå¯¹äº§ç‰©è¿›è¡Œ go fmt æ•´ç†çš„è€—æ—¶å±…ç„¶å äº†ä¸€åŠ&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Kitex_codegen_practices/profile.png" alt="image">&lt;/p>
&lt;p>æ‰€ä»¥ï¼Œå¦‚æœä½ ä¸æ˜¯å¾ˆå…³å¿ƒäº§ç‰©ä»£ç çš„æ ¼å¼æ•´ä¸æ•´é½ï¼Œå¯ä»¥ç›´æ¥è·³è¿‡è¿™ä¸ªæ“ä½œï¼Œç”Ÿæˆé€Ÿåº¦é©¬ä¸Šå°±å¿« 50% äº†&lt;/p>
&lt;p>è™½ç„¶å¾ˆç²—æš´ï¼Œä½†ç¡®å®å¾ˆæœ‰ç”¨ ğŸ˜‚&lt;/p>
&lt;p>ï¼ˆå½“ç„¶æˆ‘ä»¬ä¹Ÿè¯•è¿‡å¯¹ç«ç„°å›¾å·¦è¾¹çš„ template åº•å±‚çš„åå°„å¼€é”€åšä¼˜åŒ–ï¼Œé¢„ä¼°å¿« 20%ï¼Œä½†æ”¹é€ å’Œå½±å“æœ‰ç‚¹å¤§ã€‚ç›´æ¥æ— è„‘å»æ‰ no_fmt æé€Ÿ 50% åï¼Œé€Ÿåº¦å°±å·²ç»å¯ä»¥æ¥å—äº†ï¼Œæ‰€ä»¥å°±æ²¡ç»§ç»­æäº†ï¼‰&lt;/p>
&lt;p>å­—èŠ‚å†…éƒ¨çš„äº§ç‰©å¹³å°é€šè¿‡è¯¥æ–¹å¼ï¼Œä»£ç ç”Ÿæˆè€—æ—¶ P90 ä» 80s ä¸‹é™åˆ°äº† 20s ï¼ŒèŠ‚çº¦äº†äº† 60s (70%)&lt;/p>
&lt;h4 id="ä½¿ç”¨-1">ä½¿ç”¨&lt;/h4>
&lt;p>åœ¨ kitex å‘½ä»¤æ‰§è¡Œæ—¶ï¼Œé¢å¤–æ·»åŠ  &lt;code>-thrift no_fmt&lt;/code> å³å¯&lt;/p>
&lt;pre tabindex="0">&lt;code>kitex -module xx -thrift no_fmt xxxx.thrift
&lt;/code>&lt;/pre>&lt;p>äº§ç‰©ä¼šæœ‰ä¸€äº›ç©ºè¡Œæˆ–è€…ç¼©è¿›ä¸Šçš„ä¸æ•´é½ï¼Œä½†å¾€å¾€ kitex_gen é‡Œé¢çš„å¤§é‡å†…å®¹éƒ½æ˜¯æ²¡äººçœ‹çš„ï¼Œæ‰€ä»¥ä¹Ÿæ— æ‰€è°“äº†&lt;/p>
&lt;h3 id="åˆ é™¤-processor">åˆ é™¤ Processor&lt;/h3>
&lt;p>ç‰¹ç‚¹ï¼šäº§ç‰©ä½“ç§¯å‡å°çº¦ 10%ï¼Œé€Ÿåº¦ç­‰æ¯”æå‡&lt;/p>
&lt;p>v0.10.0+ åçš„ kitex tool å·²é»˜è®¤ä½¿ç”¨è¯¥ç­–ç•¥&lt;/p>
&lt;h4 id="ç®€ä»‹-2">ç®€ä»‹&lt;/h4>
&lt;p>å› ä¸ºä¸€äº›å†å²åŸå› ï¼ˆä»¥å‰å¯¹ç…§ apache thrift çš„ä¸€äº›æ— ç”¨å®ç°ï¼‰ï¼Œkitex_gen ä¼šæœ‰äº›æ²¡ç”¨çš„ä»£ç ï¼Œå½¢å¦‚ XXXClientFactoryã€XXXClientProtocolã€XXXProcessorï¼š&lt;/p>
&lt;p>è¿™éƒ¨åˆ†ä»£ç åŸæœ¬æ˜¯ apache thrift åœºæ™¯ç”¨æ¥åˆ›å»º service å’Œ client çš„ï¼Œä½†åœ¨ kitex ä¸­ï¼Œä¼šå•ç‹¬ç”Ÿæˆ xxxservice ç›®å½•ï¼Œä»¥åŠ client.goã€server.go è¿™äº› kitex server å’Œ kitex client çš„å®ç°ã€‚&lt;/p>
&lt;p>ç»ç¡®è®¤ï¼Œåœ¨ Kitex åœºæ™¯ä¸‹ï¼Œè¿™éƒ¨åˆ†å†…å®¹å·²ç»å®Œå…¨æ²¡è¢«ä½¿ç”¨äº†ï¼ˆä¸šåŠ¡ä»£ç é‡Œä¹Ÿä¸ä¼šå¼•ç”¨åˆ°ï¼‰ï¼Œæ‰€ä»¥å¯ä»¥ä»ç”Ÿæˆä»£ç é‡Œé€æ¸æŠŠè¿™äº›å†…å®¹ç§»é™¤æ‰ã€‚ä» IDL æµ‹è¯•çš„å¹³å‡å€¼æ¥çœ‹ï¼Œäº§ç‰©ä½“ç§¯ä¼˜åŒ–çº¦ 10%ï¼Œé€Ÿåº¦ç•¥å¾®æå‡&lt;/p>
&lt;h4 id="ä½¿ç”¨-2">ä½¿ç”¨&lt;/h4>
&lt;p>åœ¨ Kitex ä»£ç ç”Ÿæˆå·¥å…· v0.10.0 ä¹‹åï¼Œä¼šè‡ªåŠ¨ä¸ç”Ÿæˆè¿™éƒ¨åˆ†å†…å®¹&lt;/p>
&lt;p>å¦‚æœä½ çš„å·¥å…·æ˜¯æ—§ç‰ˆæœ¬ï¼Œæ·»åŠ  &lt;code>-thrift no_processor&lt;/code> å‚æ•°å³å¯&lt;/p>
&lt;pre tabindex="0">&lt;code>kitex -module xx -thrift no_processor xxxx.thrift
&lt;/code>&lt;/pre>&lt;p>è¡¥å……è¯´æ˜&lt;/p>
&lt;p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥æ”¾å¿ƒçš„å»æ‰è¿™éƒ¨åˆ†ä»£ç ï¼Œå› ä¸ºç¡®å®ç”¨ä¸åˆ°ã€‚ä½†ä»¥é˜²æ„å¤–ï¼Œå¦‚æœ v0.10.0 çš„é»˜è®¤å»é™¤è¡Œä¸ºç¡®å®å½±å“åˆ°ä½ çš„ä»£ç äº†ï¼Œå¯¼è‡´ç¼–è¯‘å¤±è´¥ç­‰æƒ…å†µï¼Œå¯ä»¥é€šè¿‡ &lt;code>-thrift no_processor=false&lt;/code> æ¥é˜»æ­¢è¿™ä¸€è¡Œä¸ºï¼š&lt;/p>
&lt;pre tabindex="0">&lt;code>kitex -module xx -thrift no_processor=false xxxx.thrift
&lt;/code>&lt;/pre>&lt;p>å¹¶è”ç³» Cloudwego ç¤¾åŒºï¼Œè¿›è¡Œåç»­æ”¯æŒ&lt;/p>
&lt;h3 id="åˆ é™¤-deep-equal">åˆ é™¤ Deep Equal&lt;/h3>
&lt;p>ç‰¹ç‚¹ï¼šäº§ç‰©ä½“ç§¯å‡å°çº¦ 20%ï¼Œé€Ÿåº¦ç­‰æ¯”ä¾‹æå‡&lt;/p>
&lt;h4 id="ç®€ä»‹-3">ç®€ä»‹&lt;/h4>
&lt;p>Kitex å¯¹ Thrift IDL çš„ set ç±»å‹ç”Ÿæˆæ˜¯æ•°ç»„ï¼Œä¼šè¿›è¡Œå»é‡æ£€æŸ¥&lt;/p>
&lt;p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä¼šä¸ºæ¯ä¸ªç»“æ„ä½“ç”Ÿæˆ DeepEqual æ–¹æ³•ï¼Œå› ä¸ºé™æ€ç”Ÿæˆçš„æ€§èƒ½å¥½ã€‚å¦‚æœä¸ç”Ÿæˆï¼Œå°±é»˜è®¤ç”¨åå°„åº“çš„ reflect.DeepEqual ï¼ˆæ€§èƒ½æ…¢ï¼‰&lt;/p>
&lt;p>å¦‚æœåœ¨ç”¨ä¸åˆ° set æˆ–ç”¨çš„ä¸å¤šçš„åœºæ™¯ä¸‹ï¼Œå¯ä»¥ä¸ç”Ÿæˆ DeepEqual æ–¹æ³•æ¥èŠ‚çº¦ä½“ç§¯&lt;/p>
&lt;h4 id="ä½¿ç”¨-3">ä½¿ç”¨&lt;/h4>
&lt;p>æ·»åŠ å‚æ•° &lt;code>-thrift gen_deep_equal=false&lt;/code>&lt;/p>
&lt;pre tabindex="0">&lt;code>kitex -module xxx -thrift gen_deep_equal=false xxx.thrift
&lt;/code>&lt;/pre>&lt;h4 id="æ³¨æ„">æ³¨æ„&lt;/h4>
&lt;p>å‰”é™¤è¿™ä¸ªæ¥ä¼˜åŒ–äº§ç‰©çš„å‰ææ˜¯ä¸å¯¹ set æœ‰å¤§é‡ä½¿ç”¨ï¼Œå¦‚æœ set ä½¿ç”¨çš„åœ°æ–¹å¾ˆå¤šï¼Œæˆ–è€… set é‡Œçš„å…ƒç´ æ•°é‡å¾ˆå¤§ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šæœ‰æ€§èƒ½ä¸‹é™çš„é—®é¢˜&lt;/p>
&lt;p>ä½†å¦‚æœä½ åœ¨ä½¿ç”¨ set ä¹‹å‰ï¼Œå·²ç»å¯¹å†™å…¥çš„å…ƒç´ åšäº†å»é‡æ£€æŸ¥ï¼Œé‚£å…¶å® Kitex æ¡†æ¶é‡Œçš„è¿™æ­¥äºŒæ¬¡æ£€æŸ¥å°±æ˜¯å¤šä½™çš„äº†ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ -thrift validate_set=false æ¥å…³é—­æ£€æŸ¥ï¼Œåè€ŒèŠ‚çº¦ä¸€æ¬¡å¤šä½™çš„è®¡ç®—å¼€é”€&lt;/p>
&lt;p>åç»­æˆ‘ä»¬ä¼šé’ˆå¯¹ Deep Equal ä»¥åŠ Set çš„å»é‡ç”¨æ³•åšæ›´åˆç†çš„å®ç°ï¼Œä¿è¯äº§ç‰©ç²¾ç®€é«˜æ•ˆ&lt;/p>
&lt;h3 id="åˆ é™¤-apache-codec">åˆ é™¤ Apache Codec&lt;/h3>
&lt;p>ç‰¹ç‚¹ï¼šäº§ç‰©ä½“ç§¯å‡å°çº¦ 50%ï¼Œé€Ÿåº¦ç­‰æ¯”ä¾‹æå‡&lt;/p>
&lt;h4 id="èƒŒæ™¯">èƒŒæ™¯&lt;/h4>
&lt;blockquote>
&lt;p>ä¸ºä»€ä¹ˆ Kitex ä»£ç é‡Œæœ‰ä¸¤å¥—ç¼–è§£ç &lt;/p>
&lt;/blockquote>
&lt;p>kitex_gen é‡Œä¼šç”Ÿæˆ Apache Codec å’Œ Fast Codec ä¸¤å¥—ç¼–è§£ç ã€‚Fast Codec æ€§èƒ½æ›´å¥½ï¼Œä½†éœ€è¦ä»åè®®é‡Œè¯»åˆ° payload size æ‰èƒ½ç”¨ï¼Œæ‰€ä»¥åªæœ‰ TTHeaderã€Framed åœºæ™¯èƒ½ç”¨
ç»å¤§å¤šæœåŠ¡éƒ½æ¥å…¥äº†ä½¿ç”¨ TTHeaderï¼Œæˆ–æ‰‹åŠ¨è®¾ç½®äº† Framedï¼Œæ‰€ä»¥ç›´æ¥ç”¨ Fast Codec&lt;/p>
&lt;p>è¿™å°±æœ‰äº†ä¸€ä¸ªæƒ³æ³•ï¼š å¯¹å¤§éƒ¨åˆ†æœåŠ¡ï¼ŒApache Codec å äº†å¿« 50% çš„ä½“ç§¯ï¼Œè€Œä¸”åŸºæœ¬æ²¡ç”¨ï¼Œåªæ˜¯ç”¨æ¥å…œåº•çš„
å¦‚æœèƒ½è®© Thrift Buffered ä¹Ÿèƒ½èµ° Fast Codecï¼Œå°±æ²¡å¿…è¦ä¿ç•™ Apache Codec äº†
å¯ä»¥æŠŠæœåŠ¡çš„é»˜è®¤åè®®ä» Buffered æ”¹ä¸º Framed&lt;/p>
&lt;h4 id="ç®€ä»‹-4">ç®€ä»‹&lt;/h4>
&lt;p>åœ¨ Kitex v0.10.0 é‡Œï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ª SkipDecoderï¼Œå¯ä»¥è®© Thrift Buffered åœºæ™¯ä¹Ÿèƒ½èµ° Fast Codec ç¼–è§£ç ï¼Œè€Œä¸éœ€è¦ Apache Codec å…œåº•äº†ï¼Œé€šè¿‡è¿™ä¸ªåŠŸèƒ½ï¼Œä½ å°±å¯ä»¥åœ¨ä»“åº“é‡Œå°‘ç”Ÿæˆä¸€åŠçš„ä»£ç &lt;/p>
&lt;p>åŒæ—¶ Kitex v0.10.0 ä¹ŸæŠŠé»˜è®¤åè®®è®¾ç½®ä¸ºäº† Framedï¼Œè¿›ä¸€æ­¥å‡å°‘äº†çº¿ä¸Šçš„ Apache Codec ä½¿ç”¨ç©ºé—´ã€‚&lt;/p>
&lt;h4 id="ä½¿ç”¨-4">ä½¿ç”¨&lt;/h4>
&lt;p>ä¿è¯ä½ çš„ Kitex ç‰ˆæœ¬é«˜äº v0.10.0
é‡æ–°åšä»£ç ç”Ÿæˆï¼Œæ·»åŠ  &lt;code>-thrift no_default_serdes&lt;/code> å‚æ•°&lt;/p>
&lt;pre tabindex="0">&lt;code>kitex -module xxx -thrift no_default_serdes xxx.thrift
&lt;/code>&lt;/pre>&lt;p>è¿™æ ·ç”Ÿæˆçš„ä»£ç å°±æ²¡æœ‰ Apache Codec å†…å®¹ï¼Œå°‘äº†ä¸€å¤§åŠä½“ç§¯
å¼€å¯ Skip Decoderï¼Œåœ¨ NewClient æˆ– NewServer çš„æ—¶å€™æ·»åŠ å¦‚ä¸‹å‚æ•°ï¼š&lt;/p>
&lt;pre tabindex="0">&lt;code>import (
&amp;#34;github.com/cloudwego/kitex/pkg/remote/codec/thrift&amp;#34;
&amp;#34;demo/kitex_gen/kitex/samples/echo/echoservice&amp;#34;
)
func main() {
cli := echoservice.MustNewClient(&amp;#34;kitex.samples.echo&amp;#34;,
client.WithPayloadCodec(thrift.NewThriftCodecWithConfig(thrift.FastRead|thrift.FastWrite|thrift.EnableSkipDecoder)),
)
srv := echoservice.NewServer(handler,
server.WithPayloadCodec(thrift.NewThriftCodecWithConfig(thrift.FrugalWrite|thrift.FrugalRead|thrift.EnableSkipDecoder)),
)
}
&lt;/code>&lt;/pre>&lt;p>è¿™æ ·ï¼Œå½“ä½ çš„æœåŠ¡æ”¶åˆ° Thrift Buffered æŠ¥æ–‡æ—¶ï¼Œä¼šé€šè¿‡ SkipDecoder + FastCodec å®Œæˆç¼–è§£ç ï¼Œä¸å†ä¾èµ– Apache Codec&lt;/p>
&lt;h4 id="æ³¨æ„-1">æ³¨æ„&lt;/h4>
&lt;p>Skip Decoder åŠŸèƒ½å·²ç»æ­£å¼å‘å¸ƒäº†ï¼Œä½†è¿˜éœ€æ‰‹åŠ¨å¼€å¯ã€‚åç»­è®¡åˆ’ Skip Decoder é»˜è®¤å¯ç”¨&lt;/p>
&lt;p>ä¸€æ—¦ä½¿ç”¨äº† &lt;code>-thrift no_default_serdes&lt;/code> ä»ç”Ÿæˆä»£ç é‡Œå»é™¤äº† Apache Codecï¼Œå¯¹åº”çš„ Kitex Client / Kitex Server è¦æ·»åŠ  Skip Decoder é…ç½®ï¼Œå¦åˆ™å½“æ”¶åˆ°å¯¹ç«¯çš„ Thrift Buffered æŠ¥æ–‡æ—¶ï¼Œä¼šæ— æ³•è§£æï¼Œæ‰€æœ‰è¯·æ±‚æŠ¥é”™å¤±è´¥ï¼&lt;/p>
&lt;p>Apache Codec çš„åºåˆ—åŒ–å®ç°æ˜¯è¯»ä¸€æ®µå†…å®¹è§£æä¸€æ®µå†…å®¹ï¼Œè€Œ Skip Decoder å’Œ Fast Codec çš„åºåˆ—åŒ–å®ç°éƒ½æ˜¯ä¸€æ¬¡è¯»å®Œæ‰€æœ‰å†…å®¹ç„¶åæ•´ä½“è§£æï¼Œè¿™æ ·è™½ç„¶é€Ÿåº¦æ›´å¿«äº†ï¼Œä½†å ç”¨å†…å­˜ä¼šå¤šä¸€äº›ã€‚ç»å¤§éƒ¨åˆ†æƒ…å†µæ— æ‰€è°“ã€‚ä½†å¦‚æœä½ çš„æœåŠ¡æ¯”è¾ƒç‰¹æ®Šï¼Œæ¯”å¦‚ä¸€æ¬¡è¯»çš„å†…å®¹éå¸¸å¤§ï¼Œä¸ºäº†é¿å…å†…å­˜è¿‡å¤§ï¼Œæ˜ç¡®è®¾ç½®è¿‡ç¦ç”¨ Fast Codecï¼Œé€šè¿‡ Apache Codec æ¥ç¼–è§£ç ï¼Œè¿™ç§åœºæ™¯ä¸‹ï¼Œè¯·è°¨æ…è€ƒè™‘è¿™ä¸ªç‰¹æ€§ã€‚&lt;/p>
&lt;h4 id="ä½ç‰ˆæœ¬å¦‚ä½•æ“ä½œ">ä½ç‰ˆæœ¬å¦‚ä½•æ“ä½œ&lt;/h4>
&lt;p>å¦‚æœ Kitex ç‰ˆæœ¬ä½äº v0.10.0ï¼Œæ²¡æœ‰ SkipDecoder èƒ½åŠ›æ¥å…œåº• Thrift Buffered åœºæ™¯ï¼Œä½†ä¹Ÿæƒ³åˆ é™¤ Apache Codec æ¥æ²»ç†äº§ç‰©ä½“ç§¯ï¼Œæ€è·¯å¦‚ä¸‹&lt;/p>
&lt;ol>
&lt;li>
&lt;p>ç¡®ä¿ä½ çš„æœåŠ¡ï¼Œä»¥åŠä¸Šä¸‹æ¸¸æœåŠ¡ï¼Œéƒ½ä¸é‡‡ç”¨ Thrift Buffered åè®®ï¼Œå¦‚æœæ˜¯ Kitexï¼Œé‚£ä¹ˆæŠŠä»–ä»¬è‡³å°‘éƒ½è®¾ç½®ä¸º Framed åè®®ï¼Œè¿™æ ·å°±èµ°ä¸åˆ° Apache Codec çš„é€»è¾‘äº†&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç”Ÿæˆä»£ç æ·»åŠ  &lt;code>-thrift no_default_serdes&lt;/code> æ¥å‡å°‘ä¸€åŠçš„äº§ç‰©ä½“ç§¯&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>è¿™æ ·åšæœ‰ä¸€äº›é£é™©ç‚¹ï¼š&lt;/p>
&lt;p>å¦‚æœæŸä¸ªæœåŠ¡è€ƒè™‘æ¼äº†ï¼Œå‘é€äº† Buffered åè®®ï¼Œé‚£ä¹ˆè¿™äº›è¯·æ±‚éƒ½ä¼šå¤±è´¥&lt;/p>
&lt;p>å¦‚æœä½ çš„ä¸‹æ¸¸æœ‰ä¸€äº›å¾ˆæ—§çš„å…¶ä»–æ¡†æ¶ï¼ˆä¾‹å¦‚è€ç‰ˆæœ¬çš„ Java æ¡†æ¶ï¼‰ï¼Œä¸æ”¯æŒ Buffered åè®®ï¼Œé‚£ä¹ˆè¿™æ¡é“¾è·¯å°±ä¸èƒ½è¿™ä¹ˆæ&lt;/p>
&lt;p>æ‰€ä»¥æ¨èè¿˜æ˜¯å‡çº§ Kitex ç‰ˆæœ¬åˆ° v0.10.0ï¼Œç”¨ Skip Decoder çš„èƒ½åŠ›æ¥å…œåº•&lt;/p>
&lt;h3 id="frugal">Frugal&lt;/h3>
&lt;p>ç‰¹ç‚¹ï¼šäº§ç‰©ä½“ç§¯å‡å°çº¦ 90%ï¼Œé€Ÿåº¦ç­‰æ¯”ä¾‹æå‡&lt;/p>
&lt;h4 id="ç®€ä»‹-5">ç®€ä»‹&lt;/h4>
&lt;p>Frugal æ˜¯ä¸€æ¬¾åŠ¨æ€çš„ä¸éœ€è¦ç¼–è§£ç ä»£ç çš„ Thrift ç¼–è§£ç å™¨ï¼Œé€šè¿‡å¯ç”¨ slim æ¨¡æ¿ï¼ŒKitex å¯ä»¥åªç”Ÿæˆ Golang Typesï¼Œä¸Šæ–‡æåˆ°çš„ Apache Codec å’Œ Fast Codec éƒ½ä¸éœ€è¦äº†ï¼Œç¼–è§£ç åœ¨è¿è¡Œæ—¶é€šè¿‡åå°„æˆ– JIT å®ç°ã€‚è¿™æ ·å¯ä»¥å¤§å¹…å‡å°‘ç”Ÿæˆçš„ä»£ç é‡ï¼Œå‡å°‘ IDE åŠ è½½æ—¶é—´ï¼Œç›¸æ¯”æ­£å¸¸çš„ kitex_genï¼Œä½“ç§¯ç¼©å° 90%ï¼Œä¸”æ€§èƒ½ä»ç„¶è¾ƒé«˜ã€‚&lt;/p>
&lt;h4 id="ä½¿ç”¨-5">ä½¿ç”¨&lt;/h4>
&lt;p>è¯´æ¥è¯é•¿ï¼Œæ­¥éª¤ç›¸å¯¹è¾ƒå¤šï¼Œè¯¦è§ï¼šhttps://github.com/cloudwego/frugal&lt;/p>
&lt;h4 id="æ³¨æ„-2">æ³¨æ„&lt;/h4>
&lt;p>ç›®å‰ Frugal æ˜¯åŸºäº JIT å®ç°çš„ï¼Œæ‰€ä»¥ï¼š&lt;/p>
&lt;ul>
&lt;li>JIT é¦–æ¬¡ç¼–è§£ç è€—æ—¶ä¼šé•¿ä¸€äº›ï¼Œå¯èƒ½ä¼šå½±å“é¦–æ‰¹è¯·æ±‚çš„è€—æ—¶&lt;/li>
&lt;li>ä¹Ÿå¯ä»¥åœ¨æœåŠ¡å¯åŠ¨æ—¶å°±é€šè¿‡ Pretouch é¢„çƒ­ï¼Œä½†å½“ IDL éå¸¸å¤æ‚çš„æ—¶å€™ï¼Œå¯åŠ¨æ—¶é—´ä¼šå¢åŠ &lt;/li>
&lt;li>ç›®å‰ä¸æ”¯æŒ Unknown Fields ç‰¹æ€§&lt;/li>
&lt;li>åœ¨ ARM64 åœºæ™¯è¿˜å¤„åœ¨è¯•éªŒæ€§çš„æ”¯æŒä¸­&lt;/li>
&lt;/ul>
&lt;h4 id="å…¶ä»–">å…¶ä»–&lt;/h4>
&lt;p>è¿‘æœŸæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªåŸºäº Golang åå°„ç‰ˆçš„ Frugalï¼Œå¯¹ä¸åŒç³»ç»Ÿçš„å…¼å®¹æ€§è¾ƒå¥½ï¼Œè€Œä¸”ä¹Ÿä¸ä¼šæœ‰å¤ªä¸¥é‡çš„é¦–æ¬¡è€—æ—¶ï¼Œåç»­ä¼šæ›´æ–°æ–‡æ¡£å’Œç›¸å…³ä½¿ç”¨æ–¹å¼&lt;/p>
&lt;p>é•¿æœŸè§„åˆ’ä¸­ï¼Œæˆ‘ä»¬æœŸæœ› Frugal èƒ½é€æ¸å¹¿æ³›è½åœ°ï¼Œè®©ç»å¤§å¤šæ•° Kitex é¡¹ç›®ä¸å†éœ€è¦ç”Ÿæˆå¤§é‡ä»£ç ï¼Œåªæœ‰å½“å¯¹æ€§èƒ½æœ‰æ›´é«˜è¦æ±‚çš„åœºæ™¯ï¼Œæ‰ä½¿ç”¨ FastCodec è¿™ç§é™æ€ç”Ÿæˆçš„ç¼–è§£ç ã€‚&lt;/p>
&lt;h3 id="è¿›é˜¶-å·¥å…·-sdk-åŒ–">è¿›é˜¶: å·¥å…· SDK åŒ–&lt;/h3>
&lt;p>é€Ÿåº¦é¢„è®¡ä¼˜åŒ– 10%~25%ï¼Œæ˜“ç”¨æ€§å’Œç»´æŠ¤æ€§æœ‰æå‡&lt;/p>
&lt;blockquote>
&lt;p>è¿™æ˜¯ä¸ªè¿›é˜¶åŠŸèƒ½ï¼Œå¦‚æœä½ æ˜¯æŸä¸ª Kitex Tool ç›¸å…³çš„ä»£ç ç”Ÿæˆé¡¹ç›®ç»´æŠ¤è€…ï¼Œå¯èƒ½ä¼šå¯¹ä½ æœ‰å¸®åŠ©&lt;/p>
&lt;/blockquote>
&lt;h4 id="ç®€ä»‹-6">ç®€ä»‹&lt;/h4>
&lt;p>å½“è¦ä½¿ç”¨ Kitex Tool ç”Ÿæˆä»£ç ï¼Œä»¥å¾€éƒ½åªèƒ½å®‰è£… Kitex Tool ï¼ˆä»¥åŠ Thriftgoã€Validator ç­‰å·¥å…·é“¾ï¼‰ï¼Œç„¶åæ‰§è¡Œå‘½ä»¤æ¥è§¦å‘ã€‚ä¸€äº›ä»£ç ç”Ÿæˆé¡¹ç›®ï¼Œæ˜¯é€šè¿‡åœ¨ Golang ä»£ç é‡Œèµ·ä¸€ä¸ªè¿›ç¨‹ï¼Œé€šè¿‡ os.Exec æ¥è°ƒç”¨æœ¬åœ°çš„ Kitex Toolï¼Œå®ç°ä»£ç ç”Ÿæˆçš„ã€‚&lt;/p>
&lt;p>ä¹‹å‰è¿™æ ·è®¾è®¡æ˜¯æƒ³ç€èƒ½è·¨è¯­è¨€ã€æ’ä»¶è¿›ç¨‹å¯æ‹”æ’ï¼Œä¸è¿‡å®é™…åœºæ™¯ç”¨åˆ°çš„å¾ˆå°‘ã€‚æ‰€ä»¥åœ¨ v0.11.0 ä¹‹åï¼ŒKitex Tool æä¾›äº† SDK åŒ–è°ƒç”¨çš„èƒ½åŠ›ï¼Œå¯ä»¥é€šè¿‡å¼•å…¥ä¾èµ–åŒ… + Golang å‡½æ•°æ¥ç”Ÿæˆä»£ç ï¼Œè€Œæ— éœ€å†å®‰è£… Kitex Toolã€Thriftgoã€Validator æ’ä»¶ç­‰ä¸€ç³»åˆ—å·¥å…·é“¾äº†&lt;/p>
&lt;h4 id="ä½¿ç”¨-6">ä½¿ç”¨&lt;/h4>
&lt;p>é¦–å…ˆå¼•å…¥ä¾èµ–åŒ…ï¼š &lt;code>import &amp;quot;github.com/cloudwego/kitex/tool/cmd/kitex/sdk&amp;quot;&lt;/code>&lt;/p>
&lt;p>æ¥å£ç­¾åå¦‚ä¸‹ï¼š&lt;/p>
&lt;pre tabindex="0">&lt;code>func RunKitexTool(wd string, plugins []plugin.SDKPlugin, kitexArgs ...string) error
&lt;/code>&lt;/pre>&lt;p>å‚æ•°å«ä¹‰ï¼š&lt;/p>
&lt;ul>
&lt;li>wdï¼šæƒ³åœ¨å“ªä¸ªè·¯å¾„ä¸‹æ‰§è¡Œ kitex tool å‘½ä»¤&lt;/li>
&lt;li>pluginsï¼šæƒ³åŒæ—¶å†…åµŒæ‰§è¡Œå“ªäº›æ’ä»¶ï¼Œä¾‹å¦‚ Validator æ’ä»¶ï¼Œä¹Ÿå®ç°äº†å¯¹åº”çš„æ¥å£ã€‚ä¸€èˆ¬ç”¨ä¸åˆ°ï¼Œå†™ nil å³å¯&lt;/li>
&lt;li>kitexArgsï¼šæƒ³æ‰§è¡Œå“ªäº›å‚æ•°ï¼ŒæŒ‰ kitex tool çš„å¸¸è§„å†™æ³•æ¥ï¼Œç„¶åç©ºæ ¼æ‹†åˆ†æˆæ•°ç»„ä¼ å…¥å³å¯&lt;/li>
&lt;li>ä¸€ä¸ªä¾‹å­ï¼šæƒ³åœ¨å½“å‰ç›®å½•æ‰§è¡Œ kitex -module my_mod xxx.thriftï¼ŒæŒ‰ä¸‹é¢æ–¹å¼å†™å°±å¯ä»¥äº†&lt;/li>
&lt;li>err := sdk.RunKitexTool(os.Getwd(), nil, &amp;ldquo;-module&amp;rdquo;, &amp;ldquo;my_mod&amp;rdquo;, &amp;ldquo;xxx.thrift&amp;rdquo;)&lt;/li>
&lt;/ul>
&lt;p>é€‚ç”¨åœºæ™¯&lt;/p>
&lt;blockquote>
&lt;p>æ™®é€šå¼€å‘è€…ä¸ç”¨å¤ªå…³å¿ƒï¼Œæ—¥å¸¸ç”¨ä¸åˆ°&lt;/p>
&lt;/blockquote>
&lt;p>è¿™ç§ä½¿ç”¨æ–¹å¼ä¸­ï¼Œä¸éœ€è¦å®‰è£… thriftgoï¼ˆè€Œä¸”ä¸ä¼šæœ‰è‡ªå‡çº§è¡Œä¸ºï¼‰ï¼Œç›´æ¥å†…åµŒ thriftgo å‡½æ•°è°ƒç”¨çœæ‰äº†è¿›ç¨‹è°ƒç”¨å’Œæ•°æ®ä¼ è¾“çš„å¼€é”€ï¼Œåœ¨ä¸€äº›å¤æ‚åœºæ™¯ï¼Œç”Ÿæˆé€Ÿåº¦èƒ½æé«˜ 10%~25%ï¼Œè€Œä¸”æ›´æ˜“äºç»´æŠ¤æˆ–é›†æˆä½¿ç”¨ã€‚&lt;/p>
&lt;p>å¦‚æœä½ åœ¨å¼€å‘æŸç§å°è£…äº† Kitex çš„ä»£ç ç”Ÿæˆå™¨æˆ–è€…ä»£ç ç”Ÿæˆå¹³å°ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥ä»£æ›¿ os.Exec è°ƒç”¨ Kitex å‘½ä»¤è¡Œï¼ŒåŒæ—¶ä¹Ÿçœå»äº†ç»´æŠ¤æœ¬åœ° kitex toolã€thriftgo äºŒè¿›åˆ¶æ–‡ä»¶ã€‚&lt;/p>
&lt;p>åç»­ Kitex Tool å°†é»˜è®¤å†…åµŒ Thriftgo SDKï¼Œå°±ä¸å†éœ€è¦å•ç‹¬å®‰è£… Thriftgo æˆ–è€…å…³ç³»å·¥å…·ç‰ˆæœ¬å…³ç³»äº†&lt;/p>
&lt;h2 id="æˆ‘ä»¬è¿˜åœ¨åšä»€ä¹ˆ">æˆ‘ä»¬è¿˜åœ¨åšä»€ä¹ˆ&lt;/h2>
&lt;p>ä¸€äº›è¿˜åœ¨æ¢ç´¢çš„äº§ç‰©ä¼˜åŒ–&amp;amp;ç”Ÿæˆæé€Ÿæ‰‹æ®µ&lt;/p>
&lt;h3 id="fastcodec-é«˜æ€§èƒ½é‡æ„">FastCodec é«˜æ€§èƒ½é‡æ„&lt;/h3>
&lt;p>æˆ‘ä»¬æ­£åœ¨é‡æ„ä¸€ç‰ˆ FastCodec çš„ä»£ç ç”Ÿæˆå®ç°ï¼Œé¢„æœŸä¼šå ç”¨æ›´å°‘çš„ä»£ç ä½“ç§¯ï¼Œå…·æœ‰æ›´å¥½çš„ç¼–è§£ç æ€§èƒ½ï¼Œå¹¶ä¸”ä¸ç°åœ¨çš„å®ç°å®Œå…¨å…¼å®¹ã€‚å¼€å‘å®Œæˆåï¼Œæˆ‘ä»¬ä¼šç”Ÿæˆè¿™å¥—æ›´å¥½çš„ FastCodec å†…å®¹ã€‚&lt;/p>
&lt;h3 id="å¢é‡ä»£ç æ›´æ–°">å¢é‡ä»£ç æ›´æ–°&lt;/h3>
&lt;p>æœ‰æ—¶å€™ä¸€ç»„ IDL æœ‰ä¸Šåƒä¸ªï¼Œä½†æ¯æ¬¡æ”¹åŠ¨ diff åªæœ‰ä¸€ç‚¹ï¼ˆæ¯”å¦‚æ·»åŠ äº†ä¸€ä¸ªå­—æ®µä¹‹ç±»çš„ï¼‰ï¼Œåˆ·æ–°ç”Ÿæˆä»£ç å°±è¦ç­‰ä¸Šå¾ˆä¹…ï¼Œå¤§éƒ¨åˆ†ç”Ÿæˆçš„å†…å®¹éƒ½å’Œä¹‹å‰æ²¡åŒºåˆ«ï¼Œåœ¨åšæ— ç”¨åŠŸã€‚å¦‚æœèƒ½å¯¹å˜åŠ¨çš„ IDL å•ç‹¬æ›´æ–°ï¼Œå°±èƒ½æå¤§ç¼©çŸ­æ—¶é—´&lt;/p>
&lt;p>ç›®å‰ Kitex Tool ä»æŠ€æœ¯ä¸Šæ˜¯å¯ä»¥åšåˆ°è¿™ç‚¹çš„ï¼Œä½†éœ€è¦ç»“åˆå…·ä½“çš„ç”Ÿæˆåœºæ™¯æ¥çœ‹å¦‚ä½•é›†æˆ&lt;/p>
&lt;h3 id="å†—ä½™å­—æ®µæ¶ˆé™¤">å†—ä½™å­—æ®µæ¶ˆé™¤&lt;/h3>
&lt;p>å½“å‰ç”±äºä»£ç äº§ç‰©è¿‡å¤§ã€ç‰ˆæœ¬ç®¡ç†å›°éš¾ç­‰åŸå› ï¼Œå„ä¸šåŠ¡çº¿å¾€å¾€ä½¿ç”¨ å…¬å…±ä»£ç ç”Ÿæˆä»“åº“æ¥ç®¡ç†ç”Ÿæˆäº§ç‰©ã€‚ä½†æ˜¯åŒä¸€å¥— IDL é¢å‘ä¸åŒæœåŠ¡åœºæ™¯å¾€å¾€æœ‰ä¸åŒçš„æ•°æ®å­—æ®µä¸‹å‘è§„åˆ™ï¼Œæ­¤æ—¶æŸä¸€ä½¿ç”¨å…¬å…±ç»“æ„ä½“çš„å®¢æˆ·ç«¯å°±ä¼šäº§ç”Ÿå†—ä½™å­—æ®µã€‚æ­¤å¤–ï¼Œéšç€ä¸šåŠ¡é€»è¾‘çš„è¿­ä»£ï¼ŒIDL ä¸­ä¹Ÿå¯èƒ½æœ‰å¤§é‡ äº‹å®ä¸Šæ— ç”¨ä½†æ˜¯å¹¶æœªåˆ é™¤çš„åºŸå¼ƒ Field å­—æ®µã€‚è¿™äº›æƒ…å†µéƒ½ä¼šè½¬åŒ–ä¸ºä¸å¿…è¦çš„ thrift ç¼–è§£ç å¼€é”€ï¼Œæœ€ç»ˆå¯¼è‡´æœåŠ¡æ€§èƒ½ä¸‹é™ã€‚å› æ­¤æˆ‘ä»¬å¸Œæœ›é€šè¿‡æŸç§æ–¹å¼æ¥åˆ¤æ–­ä¸šåŠ¡ä¸»è¿›ç¨‹ä¸­ å®é™…æ²¡æœ‰ä½¿ç”¨åˆ°çš„å­—æ®µï¼Œå‰ç½®åˆ° kitex tool ä¸­è¿›è¡Œé¢„å¤„ç†ï¼Œæœ€ç»ˆä¼˜åŒ–æ‰å…¶äº§ç”Ÿçš„ä¸å¿…è¦æ€§èƒ½å¼€é”€ã€‚ï¼ˆå‰æ–‡æåˆ°çš„ IDL è£åˆ‡æ˜¯åˆ å‡æ²¡ç”¨çš„ç»“æ„ä½“ï¼Œè€Œè¿™ç§æ‰‹åŠ¨èƒ½æ›´ç²¾å‡†çš„æ¸…ç†æ— ç”¨çš„ç»“æ„ä½“å­—æ®µã€å¹¶å‡å°‘ç¼–è¯‘å’Œåºåˆ—åŒ–å¼€é”€ï¼‰&lt;/p></description></item><item><title>Blog: Kitex Release v0.11.0</title><link>https://www.cloudwego.io/zh/blog/2024/09/12/kitex-release-v0.11.0/</link><pubDate>Thu, 12 Sep 2024 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2024/09/12/kitex-release-v0.11.0/</guid><description>
&lt;blockquote>
&lt;p>å»ºè®®ç›´æ¥å‡çº§ Kitex ç‰ˆæœ¬åˆ° v0.11.3, å› ä¸ºæˆ‘ä»¬å¯¹ v0.11.0 é‡Œçš„ä¸€äº›æ€§èƒ½é—®é¢˜è¿›è¡Œäº†ä¼˜åŒ–&lt;/p>
&lt;/blockquote>
&lt;h2 id="é‡è¦å˜æ›´ä»‹ç»">&lt;strong>é‡è¦å˜æ›´ä»‹ç»&lt;/strong>&lt;/h2>
&lt;h3 id="æ–°ç‰¹æ€§">æ–°ç‰¹æ€§&lt;/h3>
&lt;ol>
&lt;li>&lt;strong>é‡è¯•ï¼šæ–°å¢æ··åˆé‡è¯•åŠŸèƒ½&lt;/strong>ï¼šæ”¯æŒåŒæ—¶å¼€å¯ã€Œå¤±è´¥é‡è¯•ã€+ã€ŒBackup Requestã€ä¸¤ç§ç­–ç•¥ï¼Œèƒ½å¤Ÿåœ¨é™ä½é•¿å°¾è¯·æ±‚çš„åŒæ—¶æé«˜è¯·æ±‚çš„é‡è¯•æˆåŠŸç‡ï¼Œè¯¦è§ &lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/service-governance/retry/">è¯·æ±‚é‡è¯•&lt;/a>&lt;/li>
&lt;li>&lt;strong>è‡ªå®šä¹‰ Payload æ ¡éªŒ&lt;/strong>ï¼šä¸ºé¿å…ç¡¬ä»¶æ•…éšœæˆ–æ•°æ®ç¯¡æ”¹å¯¼è‡´æ”¶å‘çš„æ•°æ®ä¸ä¸€è‡´ï¼ŒKitex æä¾›äº†å¯¹ Payload æŠ¥æ–‡çš„æ ¡éªŒåŠŸèƒ½ï¼Œå¹¶æ”¯æŒè‡ªå®šä¹‰æ‰©å±•ï¼Œä½¿ç”¨æ–¹å¼å‚è§: &lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/advanced-feature/payload_validator/">payload æ ¡éªŒ&lt;/a>&lt;/li>
&lt;/ol>
&lt;h3 id="åŠŸèƒ½ä¼˜åŒ–">åŠŸèƒ½ä¼˜åŒ–&lt;/h3>
&lt;ol>
&lt;li>&lt;strong>Frugal ARM æ€§èƒ½ä¼˜åŒ–&lt;/strong>ï¼šFrugal æ”¯æŒäº†åŸºäºåå°„çš„é«˜æ€§èƒ½ç¼–è§£ç ï¼Œå‡çº§åˆ° Frugal v0.2.0 å³å¯&lt;/li>
&lt;li>&lt;strong>Kitex Tool ä»£ç ç”Ÿæˆæé€Ÿ&lt;/strong>ï¼šæä¾›äº† &lt;code>-rapid&lt;/code> å‚æ•°ï¼Œå¯ä»¥æ— éœ€å®‰è£… Thriftgo ï¼Œä¸”é€Ÿåº¦ç•¥æœ‰æé«˜ã€‚ä¸‹ä¸ªç‰ˆæœ¬ä¹‹åå°†ä½œä¸ºé»˜è®¤è¡Œä¸ºã€‚&lt;/li>
&lt;li>&lt;strong>å¤š Service å¤š Handler ç”Ÿæˆ&lt;/strong>ï¼šä»è¯¥ç‰ˆæœ¬å¼€å§‹ï¼ŒKitex Tool æ”¯æŒä¸ºæ¯ä¸ª service ç”Ÿæˆ handler å¹¶ç»Ÿä¸€æ³¨å†Œåˆ° serverï¼Œè¯¦è§ &lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/advanced-feature/multi_service/multi_handler/">å¤š Service å¤š Handler ç”Ÿæˆ&lt;/a>&lt;/li>
&lt;/ol>
&lt;h3 id="å…¶ä»–">å…¶ä»–&lt;/h3>
&lt;ol>
&lt;li>æ”¯æŒç‰ˆæœ¬ Go 1.18~1.23ï¼Œæœ€ä½æ”¯æŒå˜ä¸º Go 1.18ï¼Œå¦‚æœä½ çš„ Go ç‰ˆæœ¬è¿‡ä½ï¼Œç¼–è¯‘æ—¶ä¼šæœ‰æç¤ºï¼š&lt;code>note: module requires Go 1.18&lt;/code>&lt;/li>
&lt;li>é€æ­¥ç§»é™¤å¯¹ Apache Thrift çš„ä¾èµ–ï¼Œå°†å¯¹ Thrift ç¼–è§£ç ç›¸å…³çš„é€»è¾‘é€æ­¥æ”¶æ•›åˆ° github.com/cloudwego/gopkg/thrift åº“ä¸­&lt;/li>
&lt;/ol>
&lt;h2 id="è¯¦ç»†å˜æ›´">&lt;strong>è¯¦ç»†å˜æ›´&lt;/strong>&lt;/h2>
&lt;h3 id="feature">Feature:&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1509">#1509&lt;/a>] feat(retry): support Mixed Retry which integrating Failure Retry and Backup Request&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1478">#1478&lt;/a>] feat: customized payload validator&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1514">#1514&lt;/a>] feat(grpc): server returns cancel reason&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1513">#1513&lt;/a>] feat(tool): support updating import path for PkgInfo&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1425">#1425&lt;/a>] feat(tool): support generating multiple handlers for multiple services&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1491">#1491&lt;/a>] feat(grpc): add GetTrailerMetadataFromCtx&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1492">#1492&lt;/a>] feat: add GetCallee to kitexutil to get the service name of callee&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1479">#1479&lt;/a>] feat(tool): embed thriftgo into kitex tool&lt;/p>
&lt;h3 id="optimize">Optimize:&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1485">#1485&lt;/a>] optimize: add cachekey to discovery event for debug&lt;/p>
&lt;h3 id="fix">Fix:&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1525">#1525&lt;/a>] fix: move json-iterator back to support marshal &lt;code>map[any]any&lt;/code>&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1471">#1471&lt;/a>] fix(streaming): resolve ctx diverge in server-side streaming&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1515">#1515&lt;/a>] fix(gRPC): pass error when client transport is closed&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1501">#1501&lt;/a>] fix(generic): judge business error directly&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1503">#1503&lt;/a>] fix: return an unknown service/method exception to client correctly under multi_service server scenario&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1487">#1487&lt;/a>] fix(generic): fix a generic serviceInfo compatible issue&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1489">#1489&lt;/a>] fix(codec): wrap trans error for apache thrift read error&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1486">#1486&lt;/a>] fix(trans/netpoll): log when panic in onConnRead&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1476">#1476&lt;/a>] fix: fix GetServerConn interface assert for streamWithMiddleware&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1481">#1481&lt;/a>] fix(gonet): adjust gonet server read timeout to avoid read error&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1466">#1466&lt;/a>] fix: allow HEADERS frame with empty header block fragment&lt;/p>
&lt;h3 id="refactor">Refactor:&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1512">#1512&lt;/a>] refactor: thrift and generic codec uses bufiox interface for encoding and decoding&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1490">#1490&lt;/a>] refactor: optimized apache codec without reflection&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1483">#1483&lt;/a>] refactor: use github.com/cloudwego/gopkg/protocol/thrift/apache&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1474">#1474&lt;/a>] refactor: rm apache thrift in internal/mocks&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1470">#1470&lt;/a>] refactor: rm apache thrift in pkg/generic &amp;amp; netpollmux&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1450">#1450&lt;/a>] refactor(generic): remove apache thrift.TProtocol from generic&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1441">#1441&lt;/a>] refactor: deprecate bthrift, use cloudwego/gopkg&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1455">#1455&lt;/a>] refactor(test): perf optimize and log loc correct&lt;/p>
&lt;h3 id="tests">Tests:&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1469">#1469&lt;/a>] test: replace judgement of mem stats of client finalizer by closed count check&lt;/p>
&lt;h3 id="perf">Perf:&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1527">#1527&lt;/a>] perf(grpc): bdp ping rate limit&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1511">#1511&lt;/a>] perf(thrift): encodeBasicThrift write logic didn&amp;rsquo;t use kitex BinaryProtocol&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1504">#1504&lt;/a>] perf(grpc): zero allocation in hot path&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1497">#1497&lt;/a>] perf: add option to enable spancache for fastpb&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1495">#1495&lt;/a>] perf(thrift): use kitex BinaryProtocol replace apache BinaryProtocol for apache thrift codec&lt;/p>
&lt;h3 id="chore">Chore:&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1532">#1532&lt;/a>] chore: update dependency&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1522">#1522&lt;/a>] chore(generic): make generic streaming APIs internal&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1465">#1465&lt;/a>] chore(generic): add an external method to create service info for generic streaming client&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1468">#1468&lt;/a>] build: adapt to go1.23rc2&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1482">#1482&lt;/a>] chore(generic): add generic base using gopkg base&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1463">#1463&lt;/a>] chore: fix grpc keepalive test by start server responsiblly&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1462">#1462&lt;/a>] chore(test): fix xorshift64 in consist_test.go&lt;/p>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1454">#1454&lt;/a>] chore(ci): speed up multiple ci processes 8min -&amp;gt; 1min&lt;/p></description></item><item><title>Blog: Kitex Release v0.10.0</title><link>https://www.cloudwego.io/zh/blog/2024/06/12/kitex-release-v0.10.0/</link><pubDate>Wed, 12 Jun 2024 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2024/06/12/kitex-release-v0.10.0/</guid><description>
&lt;h2 id="é‡è¦å˜æ›´ä»‹ç»">&lt;strong>é‡è¦å˜æ›´ä»‹ç»&lt;/strong>&lt;/h2>
&lt;h3 id="æ€§èƒ½ä¼˜åŒ–">æ€§èƒ½ä¼˜åŒ–&lt;/h3>
&lt;p>æ–°ç‰ˆæœ¬æ¢ç´¢äº†æ›´å¤šæ€§èƒ½ä¼˜åŒ–çš„æ–¹å‘å’Œéå¸¸è§„çš„ä¸€äº›ä¼˜åŒ–æ‰‹æ®µã€‚&lt;/p>
&lt;ol>
&lt;li>é•¿è¿æ¥æ± : 100 å¹¶å‘ qps æå‡ 4%, p99 é™ä½ 18%&lt;/li>
&lt;li>å¤šè·¯å¤ç”¨: 100 å¹¶å‘ qps æå‡ 7%, p99 é™ä½ 24%&lt;/li>
&lt;li>gRPC: 100 å¹¶å‘ qpsä¼˜åŒ– 8%ï¼Œp99ä¼˜åŒ– 10%&lt;/li>
&lt;/ol>
&lt;h3 id="ä»£ç äº§ç‰©ç²¾ç®€ä¼˜åŒ–">ä»£ç äº§ç‰©ç²¾ç®€ä¼˜åŒ–&lt;/h3>
&lt;ol>
&lt;li>&lt;strong>ç§»é™¤éåºåˆ—åŒ–ä»£ç ï¼ˆé»˜è®¤ï¼‰&lt;/strong>ï¼šåŸ kitex_gen Thrift äº§ç‰©ä»£ç ä¸ºä¿æŒä¸ Apache çš„ä¸€è‡´æ€§ï¼Œä¼šç”Ÿæˆ Processor ä»£ç ï¼Œä½† Kitex å¹¶ä¸éœ€è¦è¿™äº›ä»£ç ã€‚ä¸ºè§£å†³å¤§å®¶çš„äº§ç‰©ç—›ç‚¹é—®é¢˜ï¼Œæ­¤ç‰ˆæœ¬é»˜è®¤å»é™¤è¿™éƒ¨åˆ†ä»£ç ï¼Œç”Ÿæˆé€Ÿåº¦æå‡çº¦10%ã€‚&lt;/li>
&lt;li>&lt;strong>ç§»é™¤ Apache Codec ä»£ç ï¼ˆé…ç½®ç§»é™¤ï¼‰&lt;/strong>ï¼šKitex æœ‰è‡ªå®šä¹‰çš„ FastCodec ä»£ç ï¼Œæ—§ç‰ˆæœ¬ä»…åœ¨ Buffered åŒ…éœ€è¦ä½¿ç”¨ Apache Codecã€‚Kitex æ–°ç‰ˆæœ¬å®ç° SkipDecoderï¼Œåœ¨å¼€å¯åå°±å¯ä»¥å®Œå…¨ä¸ä¾èµ– Apache Codecï¼Œè¿›è€Œç§»é™¤ä»£ç ï¼Œäº§ç‰©ä½“ç§¯å¯å‡å°‘çº¦50%ã€‚ä½¿ç”¨æ–¹å¼è§ &lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/code-gen/skip_decoder/">SkipDecoder&lt;/a>&lt;/li>
&lt;/ol>
&lt;h3 id="æ–°ç‰¹æ€§">æ–°ç‰¹æ€§&lt;/h3>
&lt;ol>
&lt;li>&lt;strong>Thrift æŒ‰éœ€åºåˆ—åŒ–&lt;/strong>ï¼šæ”¯æŒå®šä¹‰ FieldMask å®ç°æ•°æ®æŒ‰éœ€åºåˆ—åŒ–ï¼ˆå­—æ®µè£å‰ªã€åˆå¹¶ï¼ŒRPCæ€§èƒ½ä¼˜åŒ–ç­‰ï¼‰ï¼Œè¯¦è§ &lt;a href="https://github.com/cloudwego/thriftgo/tree/main/fieldmask">Thrift FieldMask RFC&lt;/a>&lt;/li>
&lt;/ol>
&lt;h3 id="åŠŸèƒ½ä¼˜åŒ–">åŠŸèƒ½ä¼˜åŒ–&lt;/h3>
&lt;ol>
&lt;li>&lt;strong>ç†”æ–­&lt;/strong>ï¼šæ”¯æŒè‡ªå®šä¹‰ç†”æ–­çš„é”™è¯¯ç±»å‹&lt;/li>
&lt;li>&lt;strong>å¼‚å¸¸é‡è¯•&lt;/strong>ï¼šä»£ç é…ç½®çš„è‡ªå®šä¹‰ç»“æœé‡è¯•å¢åŠ  ctx å‚æ•°ï¼Œæ–¹ä¾¿ç”¨æˆ·ç»“åˆ ctx ä¿¡æ¯åˆ¤æ–­æ˜¯å¦é‡è¯•&lt;/li>
&lt;li>&lt;strong>ç§»é™¤ä¸€è‡´æ€§å“ˆå¸Œä¸­çš„ç¼“å­˜&lt;/strong>ï¼šè§£å†³hash keyåˆ†æ•£å¯¼è‡´çš„å»¶è¿Ÿå˜é«˜ã€å†…å­˜ä¸Šæ¶¨çš„é—®é¢˜ã€‚ç§»é™¤ç¼“å­˜åï¼Œé¢å¯¹ Key ç‰¹åˆ«åˆ†æ•£ç”šè‡³æ¥è¿‘éšæœºåˆ†å¸ƒçš„åœºæ™¯ï¼Œå¯ä»¥æœ‰æ•ˆé™ä½å†…å­˜å ç”¨ä¸ç®¡ç†ç¼“å­˜çš„æ¶ˆè€—ã€‚&lt;/li>
&lt;/ol>
&lt;h3 id="ç”¨æˆ·ä½“éªŒä¼˜åŒ–">ç”¨æˆ·ä½“éªŒä¼˜åŒ–&lt;/h3>
&lt;ol>
&lt;li>&lt;strong>Kitex å·¥å…·å…¼å®¹æ€§æ£€æµ‹&lt;/strong>ï¼šä¼˜åŒ–è¿‡å»äº§ç‰©å¼•å…¥æ–°å®šä¹‰å¯¼è‡´çš„ undefined ç¼–è¯‘é—®é¢˜ã€‚Kitex å·¥å…·åœ¨ç”Ÿæˆä»£ç å‰ä¼šæ£€æŸ¥ go.mod ä¸­ä½¿ç”¨çš„ Kitex ç‰ˆæœ¬ã€‚è‹¥ Kitex å·¥å…·å’Œ Kitex ç‰ˆæœ¬ä¸å…¼å®¹ï¼Œåˆ™ä¸ä¼šç”Ÿæˆä»£ç å¹¶ç»™å‡ºç›¸åº”çš„å‡é™çº§æç¤ºã€‚&lt;/li>
&lt;/ol>
&lt;h2 id="è¯¦ç»†å˜æ›´">&lt;strong>è¯¦ç»†å˜æ›´&lt;/strong>&lt;/h2>
&lt;h3 id="feature">Feature:&lt;/h3>
&lt;ol>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1370">#1370&lt;/a>] feat(loadbalance): do not cache all the keys for Consistent Hash&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1359">#1359&lt;/a>] feat:(generic) jsonpb using dynamicgo support parse IDL from memory&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1353">#1353&lt;/a>] feat(retry): add ctx param for customized result retry funcs&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1352">#1352&lt;/a>] feat: add option to specify ip version for default HTTPResolver&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1316">#1316&lt;/a>] feat(kitex tool): support dependencies compatibility checking&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1346">#1346&lt;/a>] feat(generic): set dynamicgo parse mode&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1336">#1336&lt;/a>] feat(tool): fast-codec supports Thrift Fieldmask&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1313">#1313&lt;/a>, #1378] feat(thrift codec): implement skipDecoder to enable Frugal and FastCodec for standard Thrift Buffer Protocol&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1257">#1257&lt;/a>] feat: CBSuite custom GetErrorType func&lt;/li>
&lt;/ol>
&lt;h3 id="optimize">Optimize:&lt;/h3>
&lt;ol>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1349">#1349&lt;/a>] optimize(gRPC): gRPC onError uses CtxErrorf to print log with information in ctx&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1326">#1326&lt;/a>] optimize(tool): remove thrift processor for less codegen&lt;/li>
&lt;/ol>
&lt;h3 id="perf">Perf:&lt;/h3>
&lt;ol>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1369">#1369&lt;/a>] perf(thrift): optimized skip decoder&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1314">#1314&lt;/a>] perf: use dirtmake to reduce memclr cost&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1322">#1322&lt;/a>] perf(codec): support fast write nocopy when using netpoll link buffer&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1276">#1276&lt;/a>] perf: linear allocator for fast codec ReadString/ReadBinary&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1320">#1320&lt;/a>] perf(codec): fast codec use batch alloc&lt;/li>
&lt;/ol>
&lt;h3 id="fix">Fix:&lt;/h3>
&lt;ol>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1379">#1379&lt;/a>] fix: fix a bug &amp;ldquo;unknown service xxx&amp;rdquo; when using generic client by not writing IDLServiceName when it&amp;rsquo;s generic service&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1368">#1368&lt;/a>] fix(remote): modify the error message thrown when no target service is found&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1374">#1374&lt;/a>] fix: init default values when using liner allocator&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1361">#1361&lt;/a>] fix: span cache re-cap bytes when using Make&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1362">#1362&lt;/a>] fix(payloadCodec): replace the registered PayloadCodec if the type is same when using WithPayloadCodec for server-side&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1364">#1364&lt;/a>] fix: fix grpc compressor mcache free panic when data is empty&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1328">#1328&lt;/a>] fix(gRPC): release connection in DoFinish for grpc streaming to close the short connection&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1307">#1307&lt;/a>] fix(connpool): kitex long pool reset idleList element to nil to prevent conn leak&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1294">#1294&lt;/a>] fix(netpollmux): fix a bug that disables multi-service by assigning the first svcInfo to targetSvcInfo&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1308">#1308&lt;/a>] fix(generic): not write generic method name for binary generic exception to align with method names of services not using binary generic&lt;/li>
&lt;/ol>
&lt;h3 id="refactor">Refactor:&lt;/h3>
&lt;ol>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1344">#1344&lt;/a>] refactor(tool): export thriftgo template definition in kitextool&lt;/li>
&lt;/ol>
&lt;h3 id="chore">Chore:&lt;/h3>
&lt;ol>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1385">#1385&lt;/a>] chore: update dynamicgo to v0.2.8&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1383">#1383&lt;/a>] chore: upgrade netpoll to v0.6.1&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1376">#1376&lt;/a>] chore: integration test use go 1.20 to solve the compatibility issue of official gRPC in kitex-tests repo&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1355">#1355&lt;/a>] chore: upgrade netpoll to v0.6.1 pre-release version&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1338">#1338&lt;/a>] chore: correct the comment of FreezeRPCInfo&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1347">#1347&lt;/a>] chore: use runtimex to replace choleraehyq/pid&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1342">#1342&lt;/a>] chore: update sonic/loader to v0.1.1&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1334">#1334&lt;/a>] chore: update dynamicgo to v0.2.3&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1324">#1324&lt;/a>] chore: update dynamicgo and sonic version&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1317">#1317&lt;/a>] chore: frugal v0.1.15 (with migrated iasm)&lt;/li>
&lt;/ol>
&lt;hr>
&lt;p>&lt;strong>Thanks a lot to those community contributors who submit some pull requests or share your ideas for this version:&lt;/strong>
@XiaoYi-byte&lt;/p></description></item><item><title>Blog: kitexcallï¼šç”¨ JSON å‘èµ· RPC è¯·æ±‚çš„å‘½ä»¤è¡Œç¥å™¨</title><link>https://www.cloudwego.io/zh/blog/2024/05/31/kitexcall%E7%94%A8-json-%E5%8F%91%E8%B5%B7-rpc-%E8%AF%B7%E6%B1%82%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A5%9E%E5%99%A8/</link><pubDate>Fri, 31 May 2024 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2024/05/31/kitexcall%E7%94%A8-json-%E5%8F%91%E8%B5%B7-rpc-%E8%AF%B7%E6%B1%82%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A5%9E%E5%99%A8/</guid><description>
&lt;h2 id="èƒŒæ™¯">èƒŒæ™¯&lt;/h2>
&lt;p>Kitex æ˜¯å­—èŠ‚è·³åŠ¨åŸºç¡€æ¶æ„æœåŠ¡æ¡†æ¶å›¢é˜Ÿæ¨å‡ºçš„ Go å¾®æœåŠ¡ RPC æ¡†æ¶ï¼Œæ”¯æŒ Thriftã€Kitex Protobufã€gRPC ç­‰æ¶ˆæ¯åè®®ï¼Œå…·æœ‰é«˜æ€§èƒ½ã€å¼ºå¯æ‰©å±•çš„ç‰¹ç‚¹ã€‚Kitex äº 2021 å¹´ 9 æœˆæ­£å¼å¼€æºåï¼Œå·²åœ¨å¤šå®¶å¤–éƒ¨ä¼ä¸šæˆåŠŸè½åœ°ï¼Œä¸ºä»–ä»¬å¸¦æ¥äº†çœŸå®çš„æˆæœ¬ã€æ€§èƒ½å’Œç¨³å®šæ€§æ”¶ç›Šã€‚
ç„¶è€Œï¼Œå¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œæœ‰ä¸€ä¸ªç—›ç‚¹æ˜¯ï¼Œä¸ºäº†éªŒè¯ Server ç«¯ä»£ç ï¼Œå‘èµ· RPC æµ‹è¯•è¯·æ±‚çš„æµç¨‹æ¯”è¾ƒç¹çã€‚&lt;/p>
&lt;h2 id="ç—›ç‚¹">ç—›ç‚¹&lt;/h2>
&lt;p>ç»™ Kitex æœåŠ¡å‘é€ RPC æµ‹è¯•è¯·æ±‚çš„è¿‡ç¨‹é€šå¸¸åŒ…æ‹¬ï¼š&lt;/p>
&lt;ol>
&lt;li>ç”Ÿæˆå®¢æˆ·ç«¯ä»£ç ï¼šæ ¹æ® IDL æ–‡ä»¶ç”Ÿæˆ Kitex Client ç›¸å…³ä»£ç ã€‚&lt;/li>
&lt;li>æ„é€ æµ‹è¯•è¯·æ±‚ï¼šæ„å»ºè¯·æ±‚ã€è°ƒç”¨æ–¹æ³•ã€å¤„ç†å“åº”ã€‚&lt;/li>
&lt;li>é…ç½®å¤šç§é€‰é¡¹ï¼šè®¾ç½®ä¼ è¾“åè®®ã€å…ƒä¿¡æ¯ã€å¼‚å¸¸å¤„ç†ç­‰ã€‚
è¿™ä¸€è¿‡ç¨‹ä¸ä»…è€—æ—¶ï¼Œä¸”åœ¨é¢‘ç¹æµ‹è¯•æ—¶ï¼Œæ¯æ¬¡éƒ½éœ€ä¿®æ”¹å’Œç¼–è¯‘ä»£ç ï¼Œæ•ˆç‡è¾ƒä½ã€‚ä¸€ä¸ªèƒ½ç®€åŒ–è¿™äº›æ­¥éª¤ã€å¿«é€Ÿå‘é€ RPC è¯·æ±‚çš„å·¥å…·ï¼Œå°†å¤§å¹…æå‡å¼€å‘æ•ˆç‡ã€‚&lt;/li>
&lt;/ol>
&lt;h2 id="kitexcall-ä»‹ç»">kitexcall ä»‹ç»&lt;/h2>
&lt;blockquote>
&lt;p>è¯¦æƒ…å¯ä»¥å‚è€ƒï¼šhttps://github.com/kitex-contrib/kitexcall&lt;/p>
&lt;/blockquote>
&lt;p>ä¸ºäº†ç®€åŒ–å¼€å‘è€…çš„å·¥ä½œï¼Œç¤¾åŒºæ¨å‡ºäº† kitexcall è¿™ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼ŒåŸºäº Kitex æä¾›çš„ JSON æ³›åŒ–è°ƒç”¨ï¼Œæå¤§åœ°ç®€åŒ–äº† Kitex å®¢æˆ·ç«¯çš„ç¼–å†™è¿‡ç¨‹ã€‚å¼€å‘è€…åªéœ€é€šè¿‡ç®€å•çš„å‘½ä»¤è¡Œæ“ä½œï¼Œå°±å¯ä»¥è½»æ¾å‘èµ· Kitex è¯·æ±‚ï¼Œè€Œä¸å†éœ€è¦ç¼–å†™ç¹ççš„ä»£ç ã€‚&lt;/p>
&lt;p>kitexcall ç›®å‰å·²å‘å¸ƒ v0.1.1 ç‰ˆæœ¬ï¼Œå…·å¤‡ä»¥ä¸‹åŠŸèƒ½ç‰¹ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>æ”¯æŒ Thrift/Protobufï¼šå¯ä»¥å¤„ç† Thrift å’Œ Protobuf æ ¼å¼çš„ IDLã€‚&lt;/li>
&lt;li>æ”¯æŒå¤šç§ä¼ è¾“åè®®ï¼šåŒ…æ‹¬ Bufferedã€TTHeaderã€Framedã€TTHeaderFramedï¼Œæœªæ¥è¿˜å°†æ”¯æŒ gRPCã€‚&lt;/li>
&lt;li>çµæ´»çš„å®¢æˆ·ç«¯é€‰é¡¹ï¼šæ”¯æŒæŒ‡å®šå¸¸ç”¨çš„å®¢æˆ·ç«¯é€‰é¡¹ï¼Œå¦‚ &lt;code>client.WithHostPorts&lt;/code>ã€‚&lt;/li>
&lt;li>å¤šç§æ•°æ®è¾“å…¥æ–¹å¼ï¼šè¯·æ±‚æ•°æ®å¯ä»¥ä»å‘½ä»¤è¡Œå‚æ•°æˆ–æœ¬åœ°æ–‡ä»¶è¯»å–ã€‚&lt;/li>
&lt;li>å…ƒä¿¡æ¯ä¼ é€’ï¼šæ”¯æŒå•è·³é€ä¼ å’ŒæŒç»­é€ä¼ çš„å…ƒä¿¡æ¯ï¼Œå¹¶æ¥æ”¶æœåŠ¡å™¨è¿”å›çš„åå‘é€ä¼ å…ƒä¿¡æ¯ã€‚&lt;/li>
&lt;li>ä¸šåŠ¡å¼‚å¸¸å¤„ç†ï¼šæ¥æ”¶å¹¶å¤„ç†ä¸šåŠ¡è‡ªå®šä¹‰çš„å¼‚å¸¸é”™è¯¯ç å’Œä¿¡æ¯ã€‚&lt;/li>
&lt;li>å¤šç§è¾“å‡ºæ ¼å¼ï¼šé»˜è®¤è¾“å‡ºäººç±»å‹å¥½çš„å¯è¯»æ ¼å¼ï¼Œæœªæ¥å°†æ”¯æŒå¯è§£æçš„æ ¼å¼ï¼Œä¾¿äºä¸å…¶ä»–è‡ªåŠ¨åŒ–å·¥å…·é›†æˆã€‚
ä¸‹é¢ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨ kitexcall å‘èµ·ä¸€ä¸ª Kitex è¯·æ±‚ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="ä½¿ç”¨ç¤ºä¾‹">ä½¿ç”¨ç¤ºä¾‹&lt;/h2>
&lt;p>é¦–å…ˆå®‰è£… kitexcall å‘½ä»¤è¡Œå·¥å…·ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">go&lt;/span> &lt;span style="color:#000">install&lt;/span> &lt;span style="color:#000">github&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">com&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">/&lt;/span>&lt;span style="color:#000">kitex&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">contrib&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">/&lt;/span>&lt;span style="color:#000">kitexcall&lt;/span>&lt;span style="color:#a40000">@&lt;/span>&lt;span style="color:#000">latest&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä»¥ &lt;a href="https://github.com/cloudwego/kitex-examples">kitex-examples&lt;/a> çš„ Echo æœåŠ¡ä¸ºä¾‹ï¼Œå°†å…¶ IDL æ–‡ä»¶ä¿å­˜ä¸º echo.thriftã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">namespace&lt;/span> &lt;span style="color:#204a87;font-weight:bold">go&lt;/span> &lt;span style="color:#000">api&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">struct&lt;/span> &lt;span style="color:#000">Request&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">string&lt;/span> &lt;span style="color:#000">message&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">struct&lt;/span> &lt;span style="color:#000">Response&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">string&lt;/span> &lt;span style="color:#000">message&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">service&lt;/span> &lt;span style="color:#000">Echo&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">Response&lt;/span> &lt;span style="color:#000">Echo&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000">Request&lt;/span> &lt;span style="color:#000">req&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸ºæ–¹ä¾¿æµ‹è¯•ï¼Œä½ å¯ä»¥ç”¨å¦‚ä¸‹æ­¥éª¤åœ¨æœ¬æœºå¯åŠ¨è¿™ä¸ª Echo æœåŠ¡ï¼ˆé»˜è®¤ç›‘å¬ 8888 ç«¯å£ï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a40000">$&lt;/span> &lt;span style="color:#000">git&lt;/span> &lt;span style="color:#000">clone&lt;/span> &lt;span style="color:#000">https&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#8f5902;font-style:italic">//github.com/cloudwego/kitex-examples.git&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a40000">$&lt;/span> &lt;span style="color:#000">cd&lt;/span> &lt;span style="color:#000">kitex&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">examples&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">/&lt;/span>&lt;span style="color:#000">basic&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">/&lt;/span>&lt;span style="color:#000">server&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">/&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a40000">$&lt;/span> &lt;span style="color:#204a87;font-weight:bold">go&lt;/span> &lt;span style="color:#000">run&lt;/span> &lt;span style="color:#000;font-weight:bold">.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#000">Info&lt;/span>&lt;span style="color:#000;font-weight:bold">]&lt;/span> &lt;span style="color:#000">KITEX&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000">server&lt;/span> &lt;span style="color:#000">listen&lt;/span> &lt;span style="color:#000">at&lt;/span> &lt;span style="color:#000">addr&lt;/span>&lt;span style="color:#000;font-weight:bold">=[::]:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">8888&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä½¿ç”¨ kitexcall å‘èµ·è¯·æ±‚éå¸¸ç®€å•ï¼Œåªè¦åœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®š IDL æ–‡ä»¶ã€æ–¹æ³•åç§°ã€è¯·æ±‚æŠ¥æ–‡ï¼ˆJSON æ ¼å¼ï¼‰å’Œ Server åœ°å€å³å¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">kitexcall&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">idl&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">path&lt;/span> &lt;span style="color:#000">echo&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">thrift&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">m&lt;/span> &lt;span style="color:#000">echo&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">d&lt;/span> &lt;span style="color:#a40000">&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;message&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;hello&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#a40000">&amp;#39;&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">e&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">127.0.0.1&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">8888&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç„¶åå°±å¯ä»¥çœ‹åˆ° kitexcall è¾“å‡ºæœåŠ¡ç«¯è¿”å›çš„å“åº”æŠ¥æ–‡ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#000">Status&lt;/span>&lt;span style="color:#000;font-weight:bold">]:&lt;/span> &lt;span style="color:#000">Success&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;message&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;hello&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¦‚æœä½ å¸Œæœ›ä»æ–‡ä»¶ä¸­è¯»å…¥è¯·æ±‚æ•°æ®ï¼Œä¹Ÿå¯ä»¥å…ˆåˆ›å»ºè¯·æ±‚æ•°æ®æ–‡ä»¶ input.jsonï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;message&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;hello&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¹¶åœ¨ kitexcall çš„å‚æ•°ä¸­ç”¨ -f å‚æ•°æŒ‡å®šæ–‡ä»¶åï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">kitexcall&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">idl&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">path&lt;/span> &lt;span style="color:#000">echo&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">thrift&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">m&lt;/span> &lt;span style="color:#000">echo&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">f&lt;/span> &lt;span style="color:#000">input&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">json&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">e&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">127.0.0.1&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">8888&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="åŸç†ç®€ä»‹">åŸç†ç®€ä»‹&lt;/h2>
&lt;p>kitexcall å·¥å…·åŸºäº Kitex æä¾›çš„ JSON æ³›åŒ–è°ƒç”¨å®ç°ã€‚å…¶åŸç†ç®€å•ä»‹ç»å¦‚ä¸‹ï¼š&lt;/p>
&lt;ol>
&lt;li>Descriptor Provider&lt;/li>
&lt;/ol>
&lt;p>kitexcall ä½¿ç”¨ Kitex æä¾›çš„ DescriptorProvider æ¥å£æ¥è§£æ Thrift æˆ– Protobuf çš„ IDL æ–‡ä»¶ï¼Œè·å–æœåŠ¡å®šä¹‰ã€‚&lt;/p>
&lt;ol start="2">
&lt;li>æ³›åŒ–å¯¹è±¡åˆ›å»º&lt;/li>
&lt;/ol>
&lt;p>è§£æ IDL æ–‡ä»¶åï¼Œkitexcall åˆ›å»ºæ³›åŒ–å¯¹è±¡ï¼ˆå¦‚ JSONThriftGeneric æˆ– JSONPbGenericï¼‰ï¼Œå°† JSON æ•°æ®è½¬æ¢ä¸ºå†…éƒ¨è¯·æ±‚æ ¼å¼ï¼Œå¹¶å°†å“åº”æ•°æ®è½¬æ¢å› JSON æ ¼å¼ã€‚&lt;/p>
&lt;ol start="3">
&lt;li>å®¢æˆ·ç«¯åˆå§‹åŒ–&lt;/li>
&lt;/ol>
&lt;p>kitexcall ä½¿ç”¨æ³›åŒ–å¯¹è±¡å’Œå®¢æˆ·ç«¯é€‰é¡¹ï¼ˆå¦‚ä¼ è¾“åè®®ã€å…ƒä¿¡æ¯å¤„ç†ç­‰ï¼‰æ¥åˆ›å»ºæ³›åŒ–å®¢æˆ·ç«¯ã€‚è¯¥å®¢æˆ·ç«¯å¯ä»¥è°ƒç”¨ IDL æ–‡ä»¶ä¸­å®šä¹‰çš„ä»»ä½•æœåŠ¡æ–¹æ³•ã€‚&lt;/p>
&lt;ol start="4">
&lt;li>è¯·æ±‚æ„å»ºä¸å‘é€&lt;/li>
&lt;/ol>
&lt;p>kitexcall ä»å‘½ä»¤è¡Œè¾“å…¥æˆ–æ–‡ä»¶ä¸­è¯»å– JSON æ ¼å¼çš„è¯·æ±‚æ•°æ®ï¼Œæ„å»ºè¯·æ±‚å¯¹è±¡å¹¶å‘é€è¯·æ±‚ï¼ŒåŒæ—¶è®¾ç½®ä¼ è¾“åè®®å’Œå…ƒä¿¡æ¯ã€‚&lt;/p>
&lt;ol start="5">
&lt;li>å“åº”å¤„ç†
æ¥æ”¶åˆ°å“åº”åï¼Œkitexcall å°†å…¶æ ¼å¼åŒ–ä¸º JSON å¹¶è¾“å‡ºã€‚å¦‚æœå¯ç”¨äº†å…ƒä¿¡æ¯å›ä¼ æœºåˆ¶ï¼Œè¿˜ä¼šè¾“å‡ºä»æœåŠ¡ç«¯è¿”å›çš„å…ƒä¿¡æ¯ã€‚&lt;/li>
&lt;/ol>
&lt;h2 id="æœªæ¥å±•æœ›">æœªæ¥å±•æœ›&lt;/h2>
&lt;p>kitexcall ä½œä¸ºä¸€ä¸ªç¤¾åŒºé©±åŠ¨çš„é¡¹ç›®ï¼Œè‡´åŠ›äºç®€åŒ–å¼€å‘è€…ä½¿ç”¨ Kitex è¿›è¡Œ RPC è°ƒç”¨çš„è¿‡ç¨‹ã€‚æœªæ¥ï¼Œæˆ‘ä»¬è®¡åˆ’åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢è¿›è¡Œæ”¹è¿›å’Œæ‰©å±•ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>è®¡åˆ’æ”¯æŒ gRPCï¼ˆå«åŸºäº gRPC/HTTP2 çš„ Thrift Streamingï¼‰åè®®ï¼Œä»¥é€‚åº”æ›´å¤šçš„ä½¿ç”¨åœºæ™¯ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ”¯æŒé€šè¿‡æœåŠ¡å‘ç°è·å– Kitex Server åœ°å€ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨ Kitex Server æ”¯æŒ Reflection èƒ½åŠ›ä¹‹åï¼Œkitexcall å°†è·Ÿè¿›ï¼Œå®ç°æ— éœ€ IDL æ–‡ä»¶ï¼Œå³å¯è·å–æœåŠ¡è¯¦æƒ…å’Œè¿›è¡ŒæœåŠ¡è°ƒç”¨ï¼Œä½¿ç”¨å°†ä¼šæ›´åŠ ä¾¿æ·ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ”¯æŒå¯è§£æçš„è¾“å‡ºæ ¼å¼ï¼ˆå¦‚ JSONï¼‰ï¼Œä»¥ä¾¿ä¸å…¶ä»–è‡ªåŠ¨åŒ–å·¥å…·é›†æˆï¼ˆä¾‹å¦‚ CI/CDã€IDE æ’ä»¶ç­‰åœºæ™¯ï¼‰ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>æ¬¢è¿å¯¹ Kitex å’Œ kitexcall æ„Ÿå…´è¶£çš„å¼€å‘è€…åŠ å…¥ç¤¾åŒºï¼Œå…±åŒè´¡çŒ®ä»£ç å’Œåˆ›æ„ã€‚æˆ‘ä»¬ç›¸ä¿¡ï¼Œåœ¨å¤§å®¶çš„å…±åŒåŠªåŠ›ä¸‹ï¼Œkitexcall å°†æˆä¸º Kitex å¼€å‘è€…æ‰‹ä¸­çš„ä¸€æŠŠåˆ©å™¨ï¼Œè®©å¾®æœåŠ¡å¼€å‘å˜å¾—æ›´åŠ é«˜æ•ˆå’Œä¾¿æ·ã€‚è®¿é—® &lt;a href="https://github.com/kitex-contrib/kitexcall">kitexcall&lt;/a> äº†è§£æ›´å¤šä¿¡æ¯ï¼Œå¹¶åŠ å…¥æˆ‘ä»¬å§ï¼&lt;/p>
&lt;h3 id="é¡¹ç›®åœ°å€">é¡¹ç›®åœ°å€&lt;/h3>
&lt;p>GitHubï¼šhttps://github.com/cloudwego&lt;/p></description></item><item><title>Blog: Hertz v0.9.0 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2024/05/30/hertz-v0.9.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Thu, 30 May 2024 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2024/05/30/hertz-v0.9.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;p>Hertz v0.9.0 ç‰ˆæœ¬ä¸­ä¸»è¦æ”¯æŒå¸¸è§„è¿­ä»£ä¸ä¼˜åŒ–ã€‚&lt;/p>
&lt;h2 id="feature">Feature&lt;/h2>
&lt;ol>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/1101">#1101&lt;/a>] å¢åŠ ä¸€ä¸ªæ–¹æ³•èƒ½å¤Ÿæ”¾é€æ‰å½“å‰çš„ RequestContextï¼ˆè¯·æ±‚ç»“æŸä¸å…¥æ± ï¼‰&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/1056">#1056&lt;/a>] ä¸ºå‚æ•°ç»‘å®šæä¾›æ›´å¤šçš„é»˜è®¤ç±»å‹æ”¯æŒ&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/1057">#1057&lt;/a>] å½“è¯·æ±‚ç¼ºå°‘HostçŸ­è·¯æ—¶æˆ–è€…éæ³•pathæ—¶è®¾ç½®å…¨å±€ä¸­é—´ä»¶&lt;/li>
&lt;/ol>
&lt;h2 id="optimize">Optimize&lt;/h2>
&lt;ol>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/921">#921&lt;/a>] å¯¹è·¯ç”±è¿›è¡Œä¸¥æ ¼æ’åºï¼Œé˜²æ­¢ç”Ÿæˆä»£ç å‡ºç°å¤§é‡çš„ diff&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/1037">#1037&lt;/a>] åœ¨ trace ä¸­è¿‡æ»¤ shortConnErr é”™è¯¯&lt;/li>
&lt;/ol>
&lt;h2 id="fix">Fix&lt;/h2>
&lt;ol>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/1102">#1102&lt;/a>] ä¿®å¤å½“ä½¿ç”¨ ResponseHeader.Set/Add è®¾ç½® Trailer æ—¶ï¼Œæœ‰å¯èƒ½ä¼š panic çš„é—®é¢˜&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/1107">#1107&lt;/a>] ä¿®å¤è·¯ç”±æ’åºçš„å¤±æ•ˆé—®é¢˜&lt;/li>
&lt;/ol>
&lt;h2 id="refactor">Refactor&lt;/h2>
&lt;ol>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/1064">#1064&lt;/a>] é‡æ„ client query å¯¹äº enum ä¼ é€’çš„é…ç½®å½¢å¼&lt;/li>
&lt;/ol></description></item><item><title>Blog: Volo 0.10.0 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2024/04/08/volo-0.10.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Mon, 08 Apr 2024 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2024/04/08/volo-0.10.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;p>Volo 0.10.0 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬æ›´å¤šçš„å…³æ³¨åœ¨äº†å¯æ‰©å±•æ€§å’Œæ˜“ç”¨æ€§ä¸Šã€‚&lt;/p>
&lt;h2 id="break-change">Break Change&lt;/h2>
&lt;h3 id="é”™è¯¯å¤„ç†é‡æ„">é”™è¯¯å¤„ç†é‡æ„&lt;/h3>
&lt;p>åŸå…ˆçš„é”™è¯¯ç±»å‹å­˜åœ¨è¯¸å¦‚è¯­ä¹‰ä¸æ¸…æ™°ã€å¯ç»´æŠ¤æ€§ä¸å¼ºã€å¯æ‰©å±•æ€§ä¸å¼ºã€å®¹æ˜“è¯¯ç”¨ç­‰é—®é¢˜ï¼Œå› æ­¤åœ¨æ–°ç‰ˆä¸­ï¼Œæˆ‘ä»¬é‡æ„äº†æ•´ä¸ªé”™è¯¯å¤„ç†éƒ¨åˆ†ï¼Œæå¤§åŠ å¼ºäº†é”™è¯¯å¤„ç†éƒ¨åˆ†çš„è¯­ä¹‰æ¸…æ™°åº¦å’Œå¯ç»´æŠ¤æ€§ï¼Œå¹¶é€šè¿‡ç±»å‹ç³»ç»Ÿé™ä½è¯¯ç”¨æ¦‚ç‡ã€‚&lt;/p>
&lt;h4 id="è¿ç§»æŒ‡å—">è¿ç§»æŒ‡å—&lt;/h4>
&lt;h5 id="server-handler-è¿ç§»">Server Handler è¿ç§»&lt;/h5>
&lt;ol>
&lt;li>å¦‚æœåŸå…ˆä½¿ç”¨ &lt;code>anyhow::Result&lt;/code> çš„ï¼ŒæŠŠ &lt;code>anyhow:Result&lt;/code> æ”¹ä¸º &lt;code>volo_thrift::ServerResult&lt;/code> å³å¯ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">async&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">example&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req&lt;/span>: &lt;span style="color:#000">XReq&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#000">volo_thrift&lt;/span>::&lt;span style="color:#000">ServerResult&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">XResp&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>å¦‚æœåŸå…ˆä½¿ç”¨ &lt;code>Result&amp;lt;XResp, anyhow::Error&amp;gt;&lt;/code> çš„ï¼Œå°† &lt;code>anyhow::Error&lt;/code> æ”¹ä¸º &lt;code>volo_thrift::ServerError&lt;/code> å³å¯ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">async&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">example&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req&lt;/span>: &lt;span style="color:#000">XReq&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#204a87">Result&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">XResp&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">volo_thrift&lt;/span>::&lt;span style="color:#000">ServerError&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="3">
&lt;li>å¦‚æœåŸå…ˆä½¿ç”¨äº† &lt;code>Exception&lt;/code> çš„ç”¨æˆ·ï¼Œéœ€è¦å°†è¿”å›ç±»å‹ä» &lt;code>Result&amp;lt;XResp, volo_thrift::UserException&amp;lt;XException&amp;gt;&amp;gt;&lt;/code> æ”¹ä¸º &lt;code>Result&amp;lt;volo_thrift::MaybeException&amp;lt;XResp, XException&amp;gt;, volo_thrift::ServerError&amp;gt;&lt;/code>ï¼ŒåŒæ—¶å°†åŸå…ˆè¿”å› &lt;code>Err(UserError::UserException(exception))&lt;/code> çš„åœ°æ–¹æ”¹ä¸ºä½¿ç”¨ &lt;code>Ok(MaybeException::Exception(exception))&lt;/code> å³å¯ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">async&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">example&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req&lt;/span>: &lt;span style="color:#000">XReq&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#204a87">Result&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">volo_thrift&lt;/span>::&lt;span style="color:#000">MaybeException&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">XResp&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">XException&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">volo_thrift&lt;/span>::&lt;span style="color:#000">ServerError&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">..&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87">Ok&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">volo_thrift&lt;/span>::&lt;span style="color:#000">MaybeException&lt;/span>::&lt;span style="color:#000">Exception&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">exception&lt;/span>&lt;span style="color:#000;font-weight:bold">))&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="4">
&lt;li>å¦‚æœæ”¹å®Œä¹‹åï¼Œåœ¨è¿”å› &lt;code>anyhow::Error&lt;/code> æ—¶å‡ºç°æŠ¥é”™ï¼Œå¯ä»¥æ‰‹åŠ¨åŠ ä¸€ä¸ª &lt;code>.into()&lt;/code>ã€‚&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">return&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87">Err&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">anyhow&lt;/span>::&lt;span style="color:#000">anyhow!&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">xxx&lt;/span>&lt;span style="color:#000;font-weight:bold">).&lt;/span>&lt;span style="color:#000">into&lt;/span>&lt;span style="color:#000;font-weight:bold">())&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="5">
&lt;li>å¦‚æœæ”¹å®Œä¹‹åï¼Œåœ¨ &lt;code>?&lt;/code> è¿”å›é”™è¯¯å¤„å‡ºç°æŠ¥é”™ï¼Œå¯ä»¥å°è¯•å…ˆè½¬æ¢æˆ &lt;code>anyhow::Error&lt;/code> å†è¿”å›ã€‚&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">let&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">x&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">xxx&lt;/span>&lt;span style="color:#000;font-weight:bold">().&lt;/span>&lt;span style="color:#000">map_err&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">|&lt;/span>&lt;span style="color:#000">e&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">|&lt;/span>&lt;span style="color:#000">anyhow&lt;/span>::&lt;span style="color:#000">anyhow!&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">e&lt;/span>&lt;span style="color:#000;font-weight:bold">))&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">?&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h5 id="service-ä¸­é—´ä»¶è¿ç§»">Service ä¸­é—´ä»¶è¿ç§»&lt;/h5>
&lt;p>å¯¹äºä¸æ„ŸçŸ¥ç”¨æˆ·é”™è¯¯çš„ä¸­é—´ä»¶æ¥è¯´ï¼Œæœ¬æ¬¡ä¿®æ”¹åº”è¯¥ä¸å¸¦æ¥ break changeï¼›å¦‚æœæœ‰éœ€è¦æ„ŸçŸ¥ç”¨æˆ·é”™è¯¯ï¼Œé‚£ä¹ˆåªéœ€è¦æŠŠåŸæ¥çš„ &lt;code>volo_thrift::Error&lt;/code> æ”¹ä¸º &lt;code>volo_thrift::ServerError/ClientError&lt;/code> å³å¯ã€‚&lt;/p>
&lt;h5 id="client-è¿ç§»">Client è¿ç§»&lt;/h5>
&lt;p>client éƒ¨åˆ†çš„é”™è¯¯ä»åŸæ¥çš„ &lt;code>ResponseError&lt;/code> æ”¹ä¸ºäº† &lt;code>ClientError&lt;/code>ï¼ŒæŒ‰ç¼–è¯‘å™¨æŠ¥é”™æç¤ºåŒ¹é…æ–°çš„é”™è¯¯ variant å³å¯ã€‚&lt;/p>
&lt;h3 id="idl-ç®¡ç†æ–‡ä»¶-voloyml-æ ¼å¼é‡æ„">IDL ç®¡ç†æ–‡ä»¶ volo.yml æ ¼å¼é‡æ„&lt;/h3>
&lt;p>æ–°ç‰ˆ yml é…ç½®çš„ç»“æ„æ›´åŠ æ¸…æ™°ï¼Œä¸”æ›´æ˜“äºç»´æŠ¤ï¼Œå¹¶ä¸»è¦è§£å†³äº†æ—§ç‰ˆä¸­æ— æ³•æ”¯æŒ git è·¨ä»“åº“å¼•ç”¨çš„é—®é¢˜ï¼Œå…·ä½“çš„åŠŸèƒ½å’Œé…ç½®å‚æ•°è§ &lt;a href="https://www.cloudwego.io/zh/docs/volo/guide/config">config&lt;/a>ã€‚å¦å¤–ï¼Œå¯¹äº volo-cli å‘½ä»¤è¡Œå·¥å…·ï¼Œæˆ‘ä»¬å°†ä¹‹å‰çš„ idl å‘½ä»¤åå­—ä¿®æ”¹ä¸ºäº† repoã€‚&lt;/p>
&lt;h4 id="è¿ç§»æŒ‡å—-1">è¿ç§»æŒ‡å—&lt;/h4>
&lt;p>å®‰è£… volo-cli 0.10.0 ç‰ˆæœ¬ï¼Œå¹¶åœ¨ volo.yml ç›®å½•ä¸‹æ‰§è¡Œ volo migrate å‘½ä»¤å³å¯è‡ªåŠ¨è¿ç§»ã€‚&lt;/p>
&lt;h3 id="é»˜è®¤ç”Ÿæˆçš„-enum-ç±»å‹ä¿®æ”¹">é»˜è®¤ç”Ÿæˆçš„ Enum ç±»å‹ä¿®æ”¹&lt;/h3>
&lt;p>åœ¨æ–°ç‰ˆç”Ÿæˆä»£ç ä¸­ï¼Œé»˜è®¤ç”Ÿæˆçš„ Enum ç±»å‹ä¿®æ”¹ä¸ºäº† i32 wrapper çš„ newtype ç±»å‹ï¼Œä»¥ä¾¿äºæ›´å¥½çš„å‘å‰å…¼å®¹ IDL enum å­—æ®µä¸­æšä¸¾å€¼çš„ä¿®æ”¹ã€‚&lt;/p>
&lt;h4 id="è¿ç§»æŒ‡å—-2">è¿ç§»æŒ‡å—&lt;/h4>
&lt;p>å°† enum å­—æ®µä¸­æšä¸¾å€¼åå­—ä¿®æ”¹ä¸ºå¯¹åº”ç”Ÿæˆçš„åå­—å³å¯ï¼Œå¦‚ &lt;code>Foo::Bar&lt;/code> -&amp;gt; &lt;code>Foo::BAR&lt;/code>ã€‚&lt;/p>
&lt;h2 id="å®Œæ•´-release-note">å®Œæ•´ Release Note&lt;/h2>
&lt;p>å®Œæ•´çš„ Release Note å¯ä»¥å‚è€ƒï¼š&lt;a href="https://github.com/cloudwego/volo/compare/volo-0.9.0...volo-0.10.0">Volo Changelog&lt;/a>&lt;/p></description></item><item><title>Blog: Kitex æ”¯æŒ Dubbo åè®®ï¼šåŠ©åŠ›å¤šè¯­è¨€äº‘åŸç”Ÿç”Ÿæ€èåˆ</title><link>https://www.cloudwego.io/zh/blog/2024/03/16/kitex-%E6%94%AF%E6%8C%81-dubbo-%E5%8D%8F%E8%AE%AE%E5%8A%A9%E5%8A%9B%E5%A4%9A%E8%AF%AD%E8%A8%80%E4%BA%91%E5%8E%9F%E7%94%9F%E7%94%9F%E6%80%81%E8%9E%8D%E5%90%88/</link><pubDate>Sat, 16 Mar 2024 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2024/03/16/kitex-%E6%94%AF%E6%8C%81-dubbo-%E5%8D%8F%E8%AE%AE%E5%8A%A9%E5%8A%9B%E5%A4%9A%E8%AF%AD%E8%A8%80%E4%BA%91%E5%8E%9F%E7%94%9F%E7%94%9F%E6%80%81%E8%9E%8D%E5%90%88/</guid><description>
&lt;h2 id="èƒŒæ™¯">èƒŒæ™¯&lt;/h2>
&lt;p>Kitex æ˜¯å­—èŠ‚è·³åŠ¨åŸºç¡€æ¶æ„æœåŠ¡æ¡†æ¶å›¢é˜Ÿæ¨å‡ºçš„ Go å¾®æœåŠ¡ RPC æ¡†æ¶ï¼Œæ”¯æŒ Thriftã€Kitex Protobufã€gRPC ç­‰æ¶ˆæ¯åè®®ï¼Œå…·æœ‰é«˜æ€§èƒ½ã€å¼ºå¯æ‰©å±•çš„ç‰¹ç‚¹ã€‚äº 2021 å¹´ 9 æœˆæ­£å¼å¼€æºåï¼Œå·²åœ¨å¤šå®¶å¤–éƒ¨ä¼ä¸šæˆåŠŸè½åœ°ï¼Œä¸ºä»–ä»¬å¸¦æ¥äº†çœŸå®çš„æˆæœ¬ã€æ€§èƒ½å’Œç¨³å®šæ€§æ”¶ç›Šã€‚&lt;/p>
&lt;p>å¾ˆå¤šä¼ä¸šç”¨æˆ·åœ¨ä½¿ç”¨ Kitex æ”¹é€ æœåŠ¡çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ Kitex èƒ½ä¸ç°æœ‰çš„ Dubbo æ¡†æ¶å®ç°çš„æœåŠ¡è¿›è¡Œé€šä¿¡ï¼Œè¿™ä¸ CloudWeGo ç¤¾åŒºç§¯ææ‹“å±•ç”Ÿæ€çš„ç›®æ ‡ä¸è°‹è€Œåˆï¼Œå› æ­¤ Dubbo äº’é€šé¡¹ç›® &lt;a href="https://github.com/kitex-contrib/codec-dubbo">codec-dubbo&lt;/a> åº”è¿è€Œç”Ÿã€‚&lt;/p>
&lt;p>åœ¨ç¤¾åŒºåŒå­¦çš„çƒ­æƒ…å¸®åŠ©ä¸‹ï¼Œç›®å‰ codec-dubbo èƒ½åšåˆ° Kitex ä¸ Dubbo-Javaï¼ŒKitex ä¸ Dubbo-Go äº’é€šï¼Œæ”¯æŒ Dubbo ç”¨æˆ·å‘ Kitex è¿ç§»ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Kitex_Dubbo_interoperate/kitex_dubbo_interoperate.png" alt="image">&lt;/p>
&lt;p>æœ¬æ–‡å°†ä»¥æ–¹æ­£è¯åˆ¸åˆ©ç”¨ Kitex ä¸ codec-dubbo æˆåŠŸè¿›è¡ŒæœåŠ¡æ”¹é€ ä¸ºä¾‹ï¼Œå¯¹æ”¹é€ è¿‡ç¨‹ä¸­ä½¿ç”¨åˆ°çš„ codec-dubbo ä¸»è¦åŠŸèƒ½è¿›è¡Œé˜è¿°ï¼Œå¹¶ç®€è¦åˆ†æå…¶ä¸­çš„å®ç°ç»†èŠ‚ã€‚&lt;/p>
&lt;h2 id="ä¼ä¸šè½åœ°æ¡ˆä¾‹">ä¼ä¸šè½åœ°æ¡ˆä¾‹&lt;/h2>
&lt;p>æ–¹æ­£è¯åˆ¸åŸæœ‰çš„æœåŠ¡é‡‡ç”¨ Java å’Œ Dubbo æ¡†æ¶ç¼–å†™ï¼Œä¸¤è€…ç¨³å®šä¸”ç»è¿‡äº†å¤§é‡åœºæ™¯çš„éªŒè¯ï¼Œç¬¦åˆä»–ä»¬çš„ç”Ÿäº§å’Œå¼€å‘éœ€æ±‚ã€‚ä»¥è¯·æ±‚é‡è¾ƒå¤§çš„å°æ–¹ä¸ªè‚¡è¯¦æƒ…é¡µä¸ºä¾‹ï¼Œé«˜å³°æœŸçš„æ¥å£ QPS åœ¨ 3-4kï¼Œä½¿ç”¨ 16 å° 16 Core 64G è™šæ‹Ÿæœºè¿›è¡Œæ‰¿è½½ã€‚&lt;/p>
&lt;p>éšç€äº‘åŸç”Ÿæ¶æ„çš„å…´èµ·ï¼Œå‡­å€Ÿå†…å­˜å ç”¨ä¸æ‰§è¡Œæ•ˆç‡çš„ä¼˜åŠ¿ä»¥åŠå¤©ç„¶é€‚é…äº‘åŸç”Ÿï¼ŒGo é€æ¸æˆä¸ºæ„å»ºä¼ä¸šæœåŠ¡çš„é‡è¦æŠ€æœ¯é€‰é¡¹ã€‚ä¸ºäº†æ›´å¥½åœ°é™æœ¬å¢æ•ˆï¼Œç»¼åˆè€ƒè™‘æˆæœ¬ã€æ€§èƒ½å’Œç¨³å®šæ€§ç­‰å› ç´ åï¼Œä»–ä»¬å†³å®šåœ¨æ–°å»ºåº”ç”¨ä¸Šç”± Java è½¬å‘ Goï¼Œå¼•å…¥ Kitexï¼ŒHertz ç­‰ CloudWeGo é¡¹ç›®è¿›è¡ŒæœåŠ¡å¼€å‘ä¸é‡æ„ï¼Œå¹¶æ•´ä½“è¿ç§»è‡³ Kubernetes ç¯å¢ƒã€‚&lt;/p>
&lt;p>åœ¨é‡æ„è¿‡ç¨‹ä¸­ï¼Œcodec-dubbo å‡­å€Ÿæ¥è¿‘åŸç”Ÿ Kitex + Thrift çš„ä½¿ç”¨ä½“éªŒä»¥åŠå¯¹ Dubbo æ¦‚å¿µçš„è‰¯å¥½æ”¯æŒï¼Œé™ä½äº†ä½¿ç”¨å’Œç†è§£æˆæœ¬ï¼ŒæˆåŠŸå¸®åŠ©ä»–ä»¬è§£å†³äº† Kitex &amp;lt;-&amp;gt; Dubbo çš„äº’é€šé—®é¢˜ï¼Œè®© Kitex æœåŠ¡é¡ºåˆ©è°ƒç”¨åŸæœ‰çš„ Dubbo æœåŠ¡ã€‚&lt;/p>
&lt;p>ç›®å‰ï¼Œä½¿ç”¨äº† codec-dubbo çš„ Kitex æœåŠ¡å·²æˆåŠŸä¸Šçº¿ï¼Œç¨³å®šè¿è¡Œä¸¤ä¸ªæœˆã€‚è¿˜æ˜¯ä»¥å°æ–¹ä¸ªè‚¡è¯¦æƒ…é¡µä¸ºä¾‹ï¼ŒKitex å’Œ Hertz æ‰¿è½½äº†è¯¥é¡µé¢ä¸€åŠå·¦å³çš„æ¥å£ï¼Œåœ¨ QPS ä¸å˜çš„æƒ…å†µä¸‹ï¼Œåªéœ€è¦æä¾› 12 ä¸ª 4 Core 4G Podï¼Œé™ä½èµ„æºå ç”¨æ•ˆæœæ˜¾è‘—ã€‚&lt;/p>
&lt;h2 id="codec-dubbo-åŠŸèƒ½ç‰¹æ€§">codec-dubbo åŠŸèƒ½ç‰¹æ€§&lt;/h2>
&lt;h3 id="dubbo-åè®®ç¼–è§£ç å™¨">Dubbo åè®®ç¼–è§£ç å™¨&lt;/h3>
&lt;p>Dubbo æœåŠ¡ä¸»è¦ä½¿ç”¨ Dubbo åè®®è¿›è¡Œé€šä¿¡ï¼Œä¸ºäº†æ”¯æŒ Kitex &amp;lt;-&amp;gt; Dubbo äº’é€šï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Kitex ä¸­å®ç° Dubbo åè®®ã€‚å¾—ç›Šäº Kitex ä¼˜ç§€çš„æ‰©å±•æ€§ï¼Œcodec-dubbo æ ¹æ® Kitex æä¾›çš„ Codec æ¥å£å®ç°äº† DubboCodec è¿™ä¸€æ ¸å¿ƒç¼–è§£ç å™¨ï¼Œåªéœ€åœ¨åˆå§‹åŒ–æ—¶æ³¨å…¥ DubboCodec ä¾¿èƒ½ä½¿ç”¨ Dubbo åè®®ã€‚&lt;/p>
&lt;h3 id="ç±»å‹æ˜ å°„ä¸æ‹“å±•">ç±»å‹æ˜ å°„ä¸æ‹“å±•&lt;/h3>
&lt;h4 id="ç±»å‹æ˜ å°„">ç±»å‹æ˜ å°„&lt;/h4>
&lt;p>Dubbo ä¸»è¦ä½¿ç”¨ Hessian2 åºåˆ—åŒ–åè®®è¿›è¡Œ Payload çš„ç¼–è§£ç ï¼Œå®ƒæœ€å¤§çš„ç‰¹ç‚¹æ˜¯è‡ªæè¿°åºåˆ—åŒ–ç±»å‹ï¼Œå³ä¸ä¾èµ–å¤–éƒ¨ Schema æˆ–æ¥å£å®šä¹‰ã€‚åºåˆ—åŒ–è¿‡ç¨‹ä¾èµ–ç¼–ç¨‹è¯­è¨€ç±»å‹å’Œ Hessian2 ç±»å‹ä¹‹é—´çš„æ˜ å°„ï¼Œä»¥ Go ç±»å‹è½¬åŒ–ä¸º Java ç±»å‹ä¸ºä¾‹ï¼š&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Kitex_Dubbo_interoperate/types_convert_process.png" alt="image">&lt;/p>
&lt;p>ç»è¿‡åˆ†æï¼Œæˆ‘ä»¬å‘ç° Hessian2 çš„åŸºç¡€ç±»å‹ç³»ç»Ÿä¸ Thrift åŸºæœ¬é‡åˆã€‚ä¸ºäº†ä¿è¯ Kitex + codec-dubbo çš„ä½¿ç”¨ä½“éªŒä¸ Kitex + Thrift åŸºæœ¬ä¸€è‡´ï¼Œæˆ‘ä»¬åŸºäº Thrift IDL æ¥ç”Ÿæˆ Kitex Dubbo-Hessian2 è„šæ‰‹æ¶ä»£ç ï¼Œæ­¤æ—¶ç±»å‹è½¬åŒ–è¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Kitex_Dubbo_interoperate/types_convert_process_with_thrift.png" alt="image">&lt;/p>
&lt;p>å‚è€ƒ Dubbo å®˜æ–¹çš„ &lt;a href="https://github.com/apache/dubbo-go-hessian2">dubbo-go-hessian2&lt;/a> ç±»å‹æ˜ å°„ï¼Œcodec-dubbo æä¾›å¦‚ä¸‹ç±»å‹æ˜ å°„(æ­¤å¤„ä»…åŒ…å«éƒ¨åˆ†æ˜ å°„ï¼Œæ›´å¤šæ³¨æ„äº‹é¡¹è¯·å‚è€ƒ codec-dubbo Readme )ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">&lt;strong>THRIFT ç±»å‹&lt;/strong>&lt;/th>
&lt;th style="text-align: center">&lt;strong>Go ç±»å‹&lt;/strong>&lt;/th>
&lt;th style="text-align: center">&lt;strong>HESSIAN2 ç±»å‹&lt;/strong>&lt;/th>
&lt;th style="text-align: center">&lt;strong>JAVA ç±»å‹&lt;/strong>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">i32&lt;/td>
&lt;td style="text-align: center">int32&lt;/td>
&lt;td style="text-align: center">int&lt;/td>
&lt;td style="text-align: center">java.lang.Integer&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">double&lt;/td>
&lt;td style="text-align: center">float64&lt;/td>
&lt;td style="text-align: center">double&lt;/td>
&lt;td style="text-align: center">java.lang.Double&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">java.lang.String&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">list&lt;i32>&lt;/td>
&lt;td style="text-align: center">[]int32&lt;/td>
&lt;td style="text-align: center">list&lt;/td>
&lt;td style="text-align: center">List&lt;Integer>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">list&lt;double>&lt;/td>
&lt;td style="text-align: center">[]float64&lt;/td>
&lt;td style="text-align: center">list&lt;/td>
&lt;td style="text-align: center">List&lt;Double>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">list&lt;string>&lt;/td>
&lt;td style="text-align: center">[]string&lt;/td>
&lt;td style="text-align: center">list&lt;/td>
&lt;td style="text-align: center">List&lt;String>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">map&amp;lt;bool, i32&amp;gt;&lt;/td>
&lt;td style="text-align: center">map[bool]int32&lt;/td>
&lt;td style="text-align: center">map&lt;/td>
&lt;td style="text-align: center">Map&amp;lt;Boolean, Integer&amp;gt;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">map&amp;lt;bool, double&amp;gt;&lt;/td>
&lt;td style="text-align: center">map[bool]float64&lt;/td>
&lt;td style="text-align: center">map&lt;/td>
&lt;td style="text-align: center">Map&amp;lt;Boolean, Double&amp;gt;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">map&amp;lt;bool, string&amp;gt;&lt;/td>
&lt;td style="text-align: center">map[bool]string&lt;/td>
&lt;td style="text-align: center">map&lt;/td>
&lt;td style="text-align: center">Map&amp;lt;Boolean, String&amp;gt;&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>æ ¹æ® codec-dubbo æä¾›çš„ç±»å‹æ˜ å°„ï¼Œæˆ‘ä»¬èƒ½å¾ˆè½»æ¾åœ°å°† Dubbo æ¥å£å®šä¹‰è½¬åŒ–ä¸º Thrift IDLï¼Œå¹¶ä½¿ç”¨ Kitex å‘½ä»¤è¡Œå·¥å…·ç”Ÿæˆé¡¹ç›®è„šæ‰‹æ¶ä»£ç ï¼Œæœ€ç»ˆæ³¨å…¥ DubboCodec å®Œæˆ Kitex -&amp;gt; Dubbo çš„é€šä¿¡ã€‚ä»¥ä¸‹æ–¹ Dubbo æ¥å£å®šä¹‰ä¸ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">package&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">org.cloudwego.kitex.samples.api&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">public&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">interface&lt;/span> &lt;span style="color:#000">GreetProvider&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">GreetResponse&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Greet&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">GreetRequest&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">throws&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Exception&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">public&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">class&lt;/span> &lt;span style="color:#000">GreetRequest&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">implements&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Serializable&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">String&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">public&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">GreetRequest&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">String&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">this&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">req&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">public&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">class&lt;/span> &lt;span style="color:#000">GreetResponse&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">implements&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Serializable&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">String&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">resp&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">public&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">GreetResponse&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">String&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">resp&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">this&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">resp&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">resp&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¯¹åº”çš„ api.thrift æ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼Œéœ€è¦æ³¨æ„åˆ°å…¶ä¸­çš„ç»“æ„ä½“å®šä¹‰éƒ½éœ€è¦åŠ ä¸Š &lt;code>JavaClassName&lt;/code> çš„æ³¨è§£ï¼Œå¯¹åº” Dubbo æ¥å£å®šä¹‰ä¸­çš„ package + ç±»åã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-thrift" data-lang="thrift">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">struct&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">GreetRequest&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">required&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">string&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">JavaClassName&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;org.cloudwego.kitex.samples.api.GreetRequest&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">struct&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">GreetResponse&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">required&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">string&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">resp&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">JavaClassName&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;org.cloudwego.kitex.samples.api.GreetResponse&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">service&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">GreetService&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">GreetResponse&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Greet&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">GreetRequest&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä½¿ç”¨ Kitex å‘½ä»¤è¡Œå·¥å…·ï¼Œå¹¶æŒ‡å®šåè®®ä¸º Hessian2ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>kitex -module demo-client -protocol Hessian2 ./api.thrift
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¹‹ååˆå§‹åŒ– DubboCodec å¹¶å°†å…¶æ³¨å…¥ Kitex ï¼Œåˆ©ç”¨ç”Ÿæˆä»£ç ç¼–å†™ä»¥ä¸‹ Client ç«¯ä»£ç å³å¯å®ç° Kitex -&amp;gt; Dubbo è°ƒç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">javaClass&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">:=&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;org.cloudwego.kitex.samples.api.GreetProvider&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">cli&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">err&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">:=&lt;/span> &lt;span style="color:#000">greetservice&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">NewClient&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;helloworld&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// æŒ‡å®šæƒ³è¦è®¿é—®çš„æœåŠ¡ç«¯åœ°å€ï¼Œä¹Ÿæ”¯æŒ ZooKeeper æœåŠ¡å‘ç°&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">client&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">WithHostPorts&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;127.0.0.1:21000&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// é…ç½® DubboCodec&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">client&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">WithCodec&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// æŒ‡å®šæƒ³è¦è°ƒç”¨çš„ Dubbo Interface&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">dubbo&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">NewDubboCodec&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">dubbo&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">WithJavaClassName&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">javaClass&lt;/span>&lt;span style="color:#000;font-weight:bold">))&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">if&lt;/span> &lt;span style="color:#000">err&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">!=&lt;/span> &lt;span style="color:#204a87;font-weight:bold">nil&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87">panic&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">err&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">resp&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">err&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">:=&lt;/span> &lt;span style="color:#000">cli&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Greet&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">context&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Background&lt;/span>&lt;span style="color:#000;font-weight:bold">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#000">hello&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">GreetRequest&lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#000">Req&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;world&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">})&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">if&lt;/span> &lt;span style="color:#000">err&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">!=&lt;/span> &lt;span style="color:#204a87;font-weight:bold">nil&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">klog&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Error&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">err&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">return&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">klog&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Infof&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;resp: %s&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">resp&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Resp&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Kitex + codec-dubbo Server ç«¯æµç¨‹ä¸ Client ç«¯åŸºæœ¬ç±»ä¼¼ï¼Œå…·ä½“ä¾‹å­å¯å‚è€ƒé¡¹ç›®ä¸»é¡µã€‚&lt;/p>
&lt;h4 id="ç±»å‹æ‹“å±•">ç±»å‹æ‹“å±•&lt;/h4>
&lt;p>Hessian2 schema-free çš„ç‰¹æ€§å¯¼è‡´ Dubbo çš„å®ç°â€œè¿‡äºçµæ´»â€ï¼Œå¯ä»¥ä½¿ç”¨ä»»æ„ç±»å‹ã€‚ä¸ºäº†é€‚é… Dubbo Hessian2 çš„ç±»å‹ä½¿ç”¨çµæ´»æ€§ï¼Œcodec-dubbo æ”¯æŒç±»å‹æ‹“å±•ï¼Œå…¶ä¸­ä¸»è¦åŒ…æ‹¬è‡ªå®šä¹‰æ˜ å°„ä¸ Java å¸¸ç”¨ç±»å‹æ‹“å±•ã€‚&lt;/p>
&lt;h5 id="è‡ªå®šä¹‰æ˜ å°„">è‡ªå®šä¹‰æ˜ å°„&lt;/h5>
&lt;p>Java çš„åŸºç¡€ç±»å‹æœ‰ä¸ä¹‹å¯¹åº”çš„åŒ…è£…ç±»å‹ï¼Œä¾‹å¦‚ &lt;code>boolean&lt;/code> ä¸ &lt;code>java.lang.Boolean&lt;/code>ã€‚ç±»å‹æ˜ å°„ä¸­é»˜è®¤å°† Go çš„ ç±»å‹æ˜ å°„åˆ° Java çš„ &lt;code>java.lang.Boolean&lt;/code> ç±»å‹å¹¶ä¸èƒ½è¦†ç›–åˆ°ä½¿ç”¨ &lt;code>boolean&lt;/code> çš„æƒ…å†µã€‚&lt;/p>
&lt;p>ä¸ºäº†ç»Ÿä¸€ç”¨æˆ·ä½¿ç”¨ä½“éªŒï¼Œè®©ä»–ä»¬åœ¨ Kitex ä¾§åªéœ€ä½¿ç”¨ &lt;code>bool&lt;/code> ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Thrift çš„æ–¹æ³•å®šä¹‰åé¢åŠ ä¸Š &lt;code>hessian.argsType=&amp;quot;boolean&amp;quot;&lt;/code> æ³¨è§£ï¼Œåˆ©ç”¨ thriftgo çš„ IDL åå°„åŠŸèƒ½ï¼Œæå‰ç”Ÿæˆ IDL å…ƒä¿¡æ¯å¹¶æ³¨å…¥ codec-dubboï¼Œä¾¿å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°å°†é»˜è®¤æ˜ å°„ç±»å‹ &lt;code>java.lang.Boolean&lt;/code> æ”¹å†™æˆ &lt;code>boolean&lt;/code> ã€‚å…·ä½“ Thrift å®šä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-thrift" data-lang="thrift">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">service&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">EchoService&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">bool&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">EchoBoolean&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">bool&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">hessian.argsType&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;boolean&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸ &lt;code>boolean&lt;/code> å’Œ &lt;code>java.lang.Boolean&lt;/code> ç±»ä¼¼ï¼Œå…¶ä»– Java åŸºç¡€ç±»å‹å’ŒåŒ…è£…ç±»å‹ä¹Ÿèƒ½é€šè¿‡è¿™ç§æ–¹å¼è¿›è¡Œè‡ªå®šä¹‰æ˜ å°„ï¼Œæ­¤æ—¶ codec-dubbo æä¾›çš„å®Œæ•´ç±»å‹æ˜ å°„å¦‚ä¸‹ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">&lt;strong>THRIFT ç±»å‹&lt;/strong>&lt;/th>
&lt;th style="text-align: center">&lt;strong>GO ç±»å‹&lt;/strong>&lt;/th>
&lt;th style="text-align: center">&lt;strong>HESSIAN2 ç±»å‹&lt;/strong>&lt;/th>
&lt;th style="text-align: center">&lt;strong>é»˜è®¤ JAVA ç±»å‹&lt;/strong>&lt;/th>
&lt;th style="text-align: center">&lt;strong>å¯æ‹“å±• JAVA ç±»å‹&lt;/strong>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">i32&lt;/td>
&lt;td style="text-align: center">int32&lt;/td>
&lt;td style="text-align: center">int&lt;/td>
&lt;td style="text-align: center">java.lang.Integer&lt;/td>
&lt;td style="text-align: center">int&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">double&lt;/td>
&lt;td style="text-align: center">float64&lt;/td>
&lt;td style="text-align: center">double&lt;/td>
&lt;td style="text-align: center">java.lang.Double&lt;/td>
&lt;td style="text-align: center">double float / java.lang.Float&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">java.lang.String&lt;/td>
&lt;td style="text-align: center">-&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">list&lt;i32>&lt;/td>
&lt;td style="text-align: center">[]int32&lt;/td>
&lt;td style="text-align: center">list&lt;/td>
&lt;td style="text-align: center">List&lt;Integer>&lt;/td>
&lt;td style="text-align: center">int[] / ArrayList&lt;Integer>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">list&lt;double>&lt;/td>
&lt;td style="text-align: center">[]float64&lt;/td>
&lt;td style="text-align: center">list&lt;/td>
&lt;td style="text-align: center">List&lt;Double>&lt;/td>
&lt;td style="text-align: center">double[] / ArrayList&lt;Double> float[]&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">list&lt;string>&lt;/td>
&lt;td style="text-align: center">[]string&lt;/td>
&lt;td style="text-align: center">list&lt;/td>
&lt;td style="text-align: center">List&lt;String>&lt;/td>
&lt;td style="text-align: center">String[] / ArrayList&lt;String>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">map&amp;lt;bool, i32&amp;gt;&lt;/td>
&lt;td style="text-align: center">map[bool]int32&lt;/td>
&lt;td style="text-align: center">map&lt;/td>
&lt;td style="text-align: center">Map&amp;lt;Boolean, Integer&amp;gt;&lt;/td>
&lt;td style="text-align: center">HashMap&amp;lt;Boolean, Integer&amp;gt;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">map&amp;lt;bool, double&amp;gt;&lt;/td>
&lt;td style="text-align: center">map[bool]float64&lt;/td>
&lt;td style="text-align: center">map&lt;/td>
&lt;td style="text-align: center">Map&amp;lt;Boolean, Double&amp;gt;&lt;/td>
&lt;td style="text-align: center">HashMap&amp;lt;Boolean, Double&amp;gt;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">map&amp;lt;bool, string&amp;gt;&lt;/td>
&lt;td style="text-align: center">map[bool]string&lt;/td>
&lt;td style="text-align: center">map&lt;/td>
&lt;td style="text-align: center">Map&amp;lt;Boolean, String&amp;gt;&lt;/td>
&lt;td style="text-align: center">HashMap&amp;lt;Boolean, String&amp;gt;&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h5 id="java-å¸¸ç”¨ç±»å‹æ‹“å±•">java å¸¸ç”¨ç±»å‹æ‹“å±•&lt;/h5>
&lt;p>ç”±äº Thrift ç±»å‹çš„å±€é™æ€§ï¼Œæˆ‘ä»¬æ— æ³•ç›´æ¥ä½¿ç”¨ Java ç±»åº“ä¸­æä¾›çš„å¸¸ç”¨ç±»å‹ã€‚ä¸ºæ­¤ï¼Œcodec-dubbo åœ¨ &lt;a href="https://github.com/kitex-contrib/codec-dubbo/tree/main/java">codec-dubbo/java&lt;/a> åŒ…ä¸­ç»´æŠ¤äº† Thrift ä¸æ”¯æŒçš„ Java ç±»å‹(ä¾‹å¦‚ &lt;code>java.lang.Object&lt;/code> ã€ &lt;code>java.util.Date&lt;/code> )ä»¥åŠä¸ä¹‹å¯¹åº”çš„ &lt;a href="https://github.com/kitex-contrib/codec-dubbo/blob/main/java/java.thrift">java.thrift&lt;/a> ï¼ŒåŒæ—¶å€ŸåŠ© thriftgo æä¾›çš„ idl-ref åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ Thrift IDL ä¸­å¼•ç”¨è¿™äº›ç±»å‹å¹¶ç”Ÿæˆç›¸åº”ä»£ç ã€‚å½“å‰çš„ java.thrift å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-thrift" data-lang="thrift">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">struct&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Object&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">JavaClassName&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;java.lang.Object&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">struct&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Date&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">JavaClassName&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;java.util.Date&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">struct&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Exception&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">JavaClassName&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;java.lang.Exception&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸ºäº†å¯ç”¨è¿™äº›ç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Thrift IDL ä¸­ä½¿ç”¨ &lt;code>include &amp;quot;java.thrift&amp;quot;&lt;/code> å¯¼å…¥å®ƒä»¬ï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨ Kitex å‘½ä»¤è¡Œå·¥å…·ç”Ÿæˆä»£ç æ—¶æ·»åŠ  &lt;code>-hessian2 java_extension&lt;/code> å‚æ•°æ¥æ‹‰å–è¯¥æ‹“å±•åŒ…ã€‚&lt;/p>
&lt;p>Kitex å‘½ä»¤è¡Œå·¥å…·ä¼šè‡ªåŠ¨ä¸‹è½½ java.thrift ï¼Œä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨ä¸‹è½½åæ”¾åˆ°é¡¹ç›®çš„æ ¹ç›®å½•ã€‚å¼•ç”¨ java.thrift ä¸­ç±»å‹çš„ Thrift IDL ç¤ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-thrift" data-lang="thrift">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">include&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#34;java.thrift&amp;#34;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">service&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">EchoService&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">// java.lang.Object
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">i64&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">EchoString2ObjectMap&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">map&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">string&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">java.Object&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">// java.util.Date
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">i64&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">EchoDate&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">java.Date&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="æ–¹æ³•é‡è½½">æ–¹æ³•é‡è½½&lt;/h3>
&lt;p>Go åŸç”Ÿä¸æ”¯æŒæ–¹æ³•é‡è½½ï¼Œåªèƒ½é€šè¿‡å®šä¹‰å¤šä¸ªæ–¹æ³•æ¥è¾¾åˆ°ç±»ä¼¼é‡è½½çš„æ•ˆæœã€‚ä¸ºäº†å°† Go ä¸­çš„å¤šä¸ªæ–¹æ³•æ˜ å°„åˆ° Java ä¸­çš„é‡è½½æ–¹æ³•ï¼Œä¸è‡ªå®šä¹‰æ˜ å°„ä¸€èŠ‚ç±»ä¼¼ï¼Œæˆ‘ä»¬åœ¨ Thrift çš„æ–¹æ³•å®šä¹‰åé¢åŠ ä¸Š &lt;code>JavaMethodName&lt;/code> æ ‡ç­¾ï¼Œå€ŸåŠ© thriftgo çš„ IDL åå°„åŠŸèƒ½åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°å°† Go ä¾§åŸæœ¬çš„æ–¹æ³•åæ”¹å†™æˆ &lt;code>JavaMethodName&lt;/code> æŒ‡å®šçš„ Java ä¾§ä¸­çš„é‡è½½æ–¹æ³•ã€‚&lt;/p>
&lt;p>ä»¥ Java ä¾§çš„ EchoMethod ä¸ºä¾‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">String&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">EchoMethod&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">Boolean&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000">String&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">EchoMethod&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">Integer&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000">String&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">EchoMethod&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#204a87;font-weight:bold">int&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000">String&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">EchoMethod&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">Boolean&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req1&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Integer&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req2&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æˆ‘ä»¬ç¼–å†™å¦‚ä¸‹ Thrift å®šä¹‰ï¼Œå³å¯å®Œæˆ Go ä¸ Java é—´çš„é‡è½½æ–¹æ³•æ˜ å°„ï¼Œæ³¨æ„åˆ° &lt;code>JavaMethodName&lt;/code> å’Œ &lt;code>hessian.argsType&lt;/code> å¯ä»¥åŒæ—¶ä½¿ç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-thrift" data-lang="thrift">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">service&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">EchoService&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">string&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">EchoMethodA&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">bool&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">JavaMethodName&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;EchoMethod&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">string&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">EchoMethodB&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">i32&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">JavaMethodName&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;EchoMethod&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">string&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">EchoMethodC&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">i32&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">JavaMethodName&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;EchoMethod&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">hessian.argsType&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;int&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">string&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">EchoMethodD&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">bool&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req1&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">2&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">i32&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req2&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">JavaMethodName&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;EchoMethod&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="å¼‚å¸¸å¤„ç†">å¼‚å¸¸å¤„ç†&lt;/h3>
&lt;p>codec-dubbo å°† Java ä¸­çš„å¼‚å¸¸æ˜ å°„ä¸º Go ä¸­çš„é”™è¯¯ï¼Œè¿™äº›é”™è¯¯ç»Ÿä¸€å®ç°ä»¥ä¸‹æ¥å£ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Throwabler&lt;/span> &lt;span style="color:#204a87;font-weight:bold">interface&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">Error&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#204a87;font-weight:bold">string&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">JavaClassName&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#204a87;font-weight:bold">string&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">GetStackTrace&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#000;font-weight:bold">[]&lt;/span>&lt;span style="color:#000">StackTraceElement&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ ¹æ® Dubbo å®˜æ–¹æ¨èçš„å¼‚å¸¸å¤„ç†å®è·µä»¥åŠä¼ä¸šç”¨æˆ·ç›®å‰çš„éœ€æ±‚ï¼Œæˆ‘ä»¬å°†å¼‚å¸¸åˆ’åˆ†ä¸ºå¸¸è§å¼‚å¸¸ä¸è‡ªå®šä¹‰å¼‚å¸¸ï¼ŒåŒæ—¶å…¼é¡¾ç”¨æˆ·çš„åŸºç¡€éœ€æ±‚ä»¥åŠå¯æ‰©å±•éœ€æ±‚ã€‚&lt;/p>
&lt;h4 id="å¸¸è§å¼‚å¸¸">å¸¸è§å¼‚å¸¸&lt;/h4>
&lt;p>codec-dubbo åœ¨ &lt;a href="https://github.com/kitex-contrib/codec-dubbo/tree/main/pkg/hessian2/exception">pkg/hessian2/exception&lt;/a> åŒ…ä¸­æä¾›äº† Java å¸¸è§çš„å¼‚å¸¸ï¼Œç›®å‰æ”¯æŒ &lt;code>java.lang.Exception&lt;/code> ã€‚&lt;/p>
&lt;p>å¸¸è§å¼‚å¸¸æ— éœ€ Kitex å‘½ä»¤è¡Œå·¥å…·çš„æ”¯æŒï¼Œç›´æ¥å¼•ç”¨å³å¯ï¼Œä»¥ä¸‹æ˜¯ Client ç«¯æå–å¼‚å¸¸å’Œ Server ç«¯è¿”å›å¼‚å¸¸çš„ç¤ºä¾‹ã€‚&lt;/p>
&lt;h5 id="clientç«¯æå–å¼‚å¸¸">Clientç«¯æå–å¼‚å¸¸&lt;/h5>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">resp&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">err&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">:=&lt;/span> &lt;span style="color:#000">cli&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Greet&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">context&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Background&lt;/span>&lt;span style="color:#000;font-weight:bold">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#000">hello&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">GreetRequest&lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#000">Req&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;world&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">})&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">if&lt;/span> &lt;span style="color:#000">err&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">!=&lt;/span> &lt;span style="color:#204a87;font-weight:bold">nil&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// FromError è¿”å› Throwabler&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">exceptionRaw&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">ok&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">:=&lt;/span> &lt;span style="color:#000">hessian2_exception&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">FromError&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">err&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">if&lt;/span> &lt;span style="color:#000;font-weight:bold">!&lt;/span>&lt;span style="color:#000">ok&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// è§†ä½œå¸¸è§„é”™è¯¯å¤„ç†&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">}&lt;/span> &lt;span style="color:#204a87;font-weight:bold">else&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// è‹¥ä¸å…³å¿ƒ exceptionRaw çš„å…·ä½“ç±»å‹ï¼Œç›´æ¥è°ƒç”¨ Throwabler æä¾›çš„æ–¹æ³•å³å¯&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">klog&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Errorf&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;get %s type Exception&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">exceptionRaw&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">JavaClassName&lt;/span>&lt;span style="color:#000;font-weight:bold">())&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// è‹¥æƒ³è·å¾— exceptionRaw çš„å…·ä½“ç±»å‹ï¼Œéœ€è¦è¿›è¡Œç±»å‹è½¬æ¢ï¼Œä½†å‰ææ˜¯å·²çŸ¥è¯¥å…·ä½“ç±»å‹&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">exception&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">:=&lt;/span> &lt;span style="color:#000">exceptionRaw&lt;/span>&lt;span style="color:#000;font-weight:bold">.(&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">*&lt;/span>&lt;span style="color:#000">hessian2_exception&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Exception&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h5 id="serverç«¯è¿”å›å¼‚å¸¸">Serverç«¯è¿”å›å¼‚å¸¸&lt;/h5>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">func&lt;/span> &lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">s&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">*&lt;/span>&lt;span style="color:#000">GreetServiceImpl&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000">Greet&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ctx&lt;/span> &lt;span style="color:#000">context&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Context&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">req&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">*&lt;/span>&lt;span style="color:#000">hello&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">GreetRequest&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">resp&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">*&lt;/span>&lt;span style="color:#000">hello&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">GreetResponse&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">err&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#204a87;font-weight:bold">nil&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">hessian2_exception&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">NewException&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;Your detailed message&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="è‡ªå®šä¹‰å¼‚å¸¸">è‡ªå®šä¹‰å¼‚å¸¸&lt;/h4>
&lt;p>Java ä¸­çš„è‡ªå®šä¹‰å¼‚å¸¸å¾€å¾€ä¼šç»§æ‰¿ä¸€ä¸ªåŸºç¡€å¼‚å¸¸ï¼Œè¿™é‡Œä»¥ &lt;code>CustomizedException&lt;/code> ä¸ºä¾‹ï¼Œ&lt;code>CustomizedException&lt;/code> ç»§æ‰¿äº† &lt;code>java.lang.Exception&lt;/code> ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">public&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">class&lt;/span> &lt;span style="color:#000">CustomizedException&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">extends&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Exception&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">private&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">final&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">String&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">customizedMessage&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">public&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">CustomizedException&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">String&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">customizedMessage&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">super&lt;/span>&lt;span style="color:#000;font-weight:bold">();&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">this&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">customizedMessage&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">customizedMessage&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¾—ç›Šäº thriftgo æ”¯æŒç”ŸæˆåµŒå¥—ç»“æ„ä½“ï¼Œä¸ºäº†åœ¨ Kitex ä¾§å®šä¹‰ä¸ä¹‹å¯¹åº”çš„å¼‚å¸¸ï¼Œæˆ‘ä»¬åœ¨ Thrift ä¸­ç¼–å†™å¦‚ä¸‹å®šä¹‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-thrift" data-lang="thrift">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">exception&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">CustomizedException&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">// thrift.nested=â€œtrueâ€ æ³¨è§£è®© thriftgo ç”ŸæˆåµŒå¥—ç»“æ„ä½“
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">required&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">java.Exception&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">exception&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>&lt;span style="color:#000">thrift.nested&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;true&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">2&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">required&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">string&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">customizedMessage&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}(&lt;/span>&lt;span style="color:#000">JavaClassName&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;org.cloudwego.kitex.samples.api.CustomizedException&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ³¨æ„ &lt;code>exception&lt;/code> å­—æ®µçš„æ³¨è§£ &lt;code>thrift.nested=&amp;quot;true&amp;quot;&lt;/code> ï¼Œå®ƒè®© thriftgo ç”ŸæˆåµŒå¥—ç»“æ„ä½“ï¼Œè¾¾åˆ°ç±»ä¼¼ç»§æ‰¿çš„æ•ˆæœã€‚&lt;/p>
&lt;p>å’Œ Java å¸¸ç”¨ç±»å‹æ‰©å±•ä¸€æ ·ï¼Œéœ€è¦åœ¨ä½¿ç”¨ kitex è„šæ‰‹æ¶å·¥å…·ç”Ÿæˆä»£ç æ—¶æ·»åŠ  &lt;code>-hessian2 java_extension&lt;/code> å‚æ•°æ¥æ‹‰å–æ‹“å±•åŒ…ï¼Œç”Ÿæˆä»£ç å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">EchoCustomizedException&lt;/span> &lt;span style="color:#204a87;font-weight:bold">struct&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">java&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Exception&lt;/span> &lt;span style="color:#4e9a06">`thrift:&amp;#34;exception,1,required&amp;#34; frugal:&amp;#34;1,required,java.Exception&amp;#34; json:&amp;#34;exception&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">CustomizedMessage&lt;/span> &lt;span style="color:#204a87;font-weight:bold">string&lt;/span> &lt;span style="color:#4e9a06">`thrift:&amp;#34;customizedMessage,2,required&amp;#34; frugal:&amp;#34;2,required,string&amp;#34; json:&amp;#34;customizedMessage&amp;#34;`&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä½¿ç”¨æ–¹æ³•ä¸å¸¸è§å¼‚å¸¸ä¸€è‡´ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚&lt;/p>
&lt;h3 id="æœåŠ¡æ³¨å†Œä¸å‘ç°">æœåŠ¡æ³¨å†Œä¸å‘ç°&lt;/h3>
&lt;p>Dubbo åŒæ—¶æä¾›&lt;strong>æ¥å£çº§&lt;/strong>ä¸&lt;strong>åº”ç”¨çº§&lt;/strong>æœåŠ¡æ³¨å†Œå‘ç°æ¨¡å‹ï¼Œæ ¹æ®ä¼ä¸šç”¨æˆ·å½“å‰çš„ç”Ÿäº§ç¯å¢ƒéœ€è¦ï¼Œæˆ‘ä»¬é€‰æ‹©ä¼˜å…ˆå®ç°åŸºäº zookeeper çš„&lt;strong>æ¥å£çº§&lt;/strong>æ¨¡å‹ï¼šDubbo registry-zookeeperã€‚&lt;/p>
&lt;p>ä¸æˆ‘ä»¬ç†ŸçŸ¥çš„åº”ç”¨çº§æ¨¡å‹ä¸åŒï¼Œæ¥å£çº§æ¨¡å‹éœ€è¦ç»´æŠ¤æ¥å£å =&amp;gt; æœåŠ¡(ä¸åŒäºå¾®æœåŠ¡ï¼Œæ›´æ¥è¿‘ Handler )çš„æ˜ å°„å…³ç³»ï¼Œä¸€ä¸ªæ¥å£åä¼šæ˜ å°„åˆ°å¤šä¸ªæœåŠ¡ ï¼Œè¿™äº›æœåŠ¡å¯èƒ½ä¼šå­˜åœ¨äºåŒä¸€ä¸ªè¿›ç¨‹ä¸­ã€‚&lt;/p>
&lt;p>è€ƒè™‘åˆ° Dubbo çš„æ¥å£çº§æœåŠ¡æ¨¡å‹ä¸ Kitex çš„æœåŠ¡æ¨¡å‹å·®åˆ«è¾ƒå¤§ï¼Œä¸” Dubbo registry-zookeeper åº”ç»‘å®š codec-dubbo ä½¿ç”¨ï¼Œå› æ­¤ä¸è€ƒè™‘ä¿®æ”¹ kitex-contrib ä¸­åŸæœ‰çš„ registry-zookeeperï¼Œè®© dubbo registry-zookeeper æˆä¸º codec-dubbo çš„ä¸€ä¸ªå­ go module ç»Ÿä¸€è¿›è¡Œå¼€å‘ä¸ç»´æŠ¤ã€‚&lt;/p>
&lt;p>ç»¼åˆè€ƒè™‘ Dubbo æ¥å£çº§æœåŠ¡æ¨¡å‹ã€Kitex API ä¸ç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒï¼Œæˆ‘ä»¬æä¾›ä»¥ä¸‹çš„é…ç½®å±‚æ¬¡ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;a href="https://github.com/kitex-contrib/codec-dubbo/blob/main/registries/zookeeper/registry/options.go">registry/options.go&lt;/a> ä¸ &lt;a href="https://github.com/kitex-contrib/codec-dubbo/blob/main/registries/zookeeper/resolver/options.go">resolver/options.go&lt;/a> ä¸­çš„ WithServers å’Œ WithRegistryGroup å‡½æ•°æä¾›æ³¨å†Œä¸­å¿ƒçº§åˆ«çš„é…ç½®ï¼Œåˆ†åˆ«æŒ‡å®š zookeeper çš„åœ°å€å’Œè¿™äº› zookeeper æ‰€å±çš„ç»„ã€‚ç”¨æˆ·ä½¿ç”¨è¿™äº›å‡½æ•°ç”Ÿæˆ Kitex ä¸­ &lt;code>registry.Registry&lt;/code> å’Œ &lt;code>discovery.Resolver&lt;/code> å®ä¾‹ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æœåŠ¡çº§åˆ«çš„é…ç½®ç”± &lt;code>client.WithTag&lt;/code> ä¸ &lt;code>server.WithRegistryInfo&lt;/code> è¿›è¡Œä¼ é€’ï¼Œ&lt;a href="https://github.com/kitex-contrib/codec-dubbo/blob/main/registries/common.go">registries/common.go&lt;/a> æä¾› Tag keys ï¼Œè¿™äº› key ä¸ Dubbo ä¸­çš„æœåŠ¡å…ƒæ•°æ®ä¸€ä¸€å¯¹åº”ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h4 id="resolver-ç¤ºä¾‹">resolver ç¤ºä¾‹&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">intfName&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">:=&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;org.cloudwego.kitex.samples.api.GreetProvider&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">res&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">err&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">:=&lt;/span> &lt;span style="color:#000">resolver&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">NewZookeeperResolver&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// æŒ‡å®š zookeeper æœåŠ¡å™¨çš„åœ°å€ï¼Œå¯æŒ‡å®šå¤šä¸ªï¼Œè¯·è‡³å°‘æŒ‡å®šä¸€ä¸ª&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">resolver&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">WithServers&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;127.0.0.1:2181&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">if&lt;/span> &lt;span style="color:#000">err&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">!=&lt;/span> &lt;span style="color:#204a87;font-weight:bold">nil&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87">panic&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">err&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">cli&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">err&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">:=&lt;/span> &lt;span style="color:#000">greetservice&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">NewClient&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;helloworld&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// é…ç½® ZookeeperResolver&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">client&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">WithResolver&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">res&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// æŒ‡å®šæƒ³è¦è°ƒç”¨çš„ dubbo Interface&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">client&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">WithTag&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">registries&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">DubboServiceInterfaceKey&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">intfName&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">if&lt;/span> &lt;span style="color:#000">err&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">!=&lt;/span> &lt;span style="color:#204a87;font-weight:bold">nil&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87">panic&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">err&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">// ä½¿ç”¨ cli è¿›è¡Œ RPC è°ƒç”¨&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="registry-ç¤ºä¾‹">registry ç¤ºä¾‹&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">intfName&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">:=&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;org.cloudwego.kitex.samples.api.GreetProvider&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">reg&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">err&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">:=&lt;/span> &lt;span style="color:#000">registry&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">NewZookeeperRegistry&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// æŒ‡å®š zookeeper æœåŠ¡å™¨çš„åœ°å€ï¼Œå¯æŒ‡å®šå¤šä¸ªï¼Œè¯·è‡³å°‘æŒ‡å®šä¸€ä¸ª&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">registry&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">WithServers&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;127.0.0.1:2181&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">if&lt;/span> &lt;span style="color:#000">err&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">!=&lt;/span> &lt;span style="color:#204a87;font-weight:bold">nil&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87">panic&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">err&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">svr&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">:=&lt;/span> &lt;span style="color:#000">greetservice&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">NewServer&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#204a87">new&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">GreetServiceImpl&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">server&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">WithRegistry&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">reg&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// é…ç½®dubbo URLå…ƒæ•°æ®&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">server&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">WithRegistryInfo&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#000">kitex_registry&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Info&lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">Tags&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">map&lt;/span>&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#204a87;font-weight:bold">string&lt;/span>&lt;span style="color:#000;font-weight:bold">]&lt;/span>&lt;span style="color:#204a87;font-weight:bold">string&lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">registries&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">DubboServiceInterfaceKey&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000">intfName&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// applicationè¯·ä¸dubboæ‰€è®¾ç½®çš„ApplicationConfigä¿æŒä¸€è‡´ï¼Œæ­¤å¤„ä»…ä¸ºç¤ºä¾‹&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">registries&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">DubboServiceApplicationKey&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;application-name&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">}),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">// å¯åŠ¨ svr&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="æ€»ç»“">æ€»ç»“&lt;/h2>
&lt;p>Kitex æ”¯æŒäº† Dubbo åè®®ï¼Œæ˜¯ CloudWeGo åŠ©åŠ›å¤šè¯­è¨€äº‘åŸç”Ÿç”Ÿæ€èåˆçš„ä¸€å¤§æ­¥ï¼Œè§£å†³äº†ä¼—å¤šä¼ä¸šç”¨æˆ· Java è½¬ Go ã€ Java ä¸ Go å¹¶å­˜çš„ç—›ç‚¹ï¼Œæ¬¢è¿å¤§å®¶è¯•ç”¨å’Œæ¥å…¥ï¼›å¦‚æœåœ¨ä½¿ç”¨è¿‡ç¨‹é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œå¯ä»¥åŠ å…¥æˆ‘ä»¬çš„é£ä¹¦ç”¨æˆ·ç¾¤ï¼Œæˆ–è€…åœ¨ Github ä¸Šç»™æˆ‘ä»¬æåé¦ˆã€‚&lt;/p></description></item><item><title>Blog: Netpoll v0.6.0 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2024/03/04/netpoll-v0.6.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Mon, 04 Mar 2024 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2024/03/04/netpoll-v0.6.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;h2 id="feature">Feature&lt;/h2>
&lt;ol>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/306">#306&lt;/a>] feat: æ‡’åŠ è½½ pollers ä»¥é¿å…åœ¨ netpoll æ²¡æœ‰è¢«ä½¿ç”¨æ—¶ï¼Œåˆ›å»ºä»»ä½• poller goroutines&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/303">#303&lt;/a>] feat: æ”¯æŒ WithOnDisconnect å›è°ƒ&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/300">#300&lt;/a>] feat: netpoll exception å®ç° net.Error æ¥å£&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/294">#294&lt;/a>] feat: netpoll æ”¯æŒ SetRunner å‚æ•°&lt;/li>
&lt;/ol>
&lt;h2 id="fix">Fix&lt;/h2>
&lt;ol>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/307">#307&lt;/a>] fix: ä¿®å¤å½“ disconnect ä¸ connect å›è°ƒåŒæ—¶è¿è¡Œæ—¶ï¼Œè®¿é—® ctx race çš„é—®é¢˜&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/304">#304&lt;/a>] fix: å½“å¯¹ç«¯å…³é—­è¿æ¥ä½†æ˜¯ OnRequest å›è°ƒåˆšåˆšè¿”å›æ—¶ï¼Œè¿æ¥å¯èƒ½æ³„æ¼çš„é—®é¢˜&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/296">#296&lt;/a>] fix: å½“ readtrigger è¢« error è§¦å‘æ—¶å€™ï¼Œåœæ­¢ timer&lt;/li>
&lt;/ol>
&lt;h2 id="chore">Chore&lt;/h2>
&lt;ol>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/302">#302&lt;/a>] ci: å‡çº§ &lt;code>actions/checkout&lt;/code> å’Œ &lt;code>actions/setup-go&lt;/code> çš„ç‰ˆæœ¬&lt;/li>
&lt;/ol></description></item><item><title>Blog: Kitex Release v0.9.0</title><link>https://www.cloudwego.io/zh/blog/2024/03/04/kitex-release-v0.9.0/</link><pubDate>Mon, 04 Mar 2024 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2024/03/04/kitex-release-v0.9.0/</guid><description>
&lt;p>v0.9.0 é’ˆå¯¹ Thrift æä¾›äº†ä¸¤ä¸ªé‡è¦çš„åŠŸèƒ½ï¼šThrift Streaming å’Œ Multi-Serviceï¼Œå‘å¸ƒå¤šä¸ª RC ç‰ˆæœ¬åœ¨å†…éƒ¨è¯•ç‚¹æ”¶é›†åé¦ˆï¼Œæ‰€ä»¥æ­£å¼ç‰ˆæœ¬å§—å§—æ¥è¿Ÿã€‚&lt;/p>
&lt;p>ä¸‹é¢å°±é‡è¦å˜æ›´åšä¸€äº›ä»‹ç»ï¼š&lt;/p>
&lt;h2 id="é‡è¦å˜æ›´ä»‹ç»">&lt;strong>é‡è¦å˜æ›´ä»‹ç»&lt;/strong>&lt;/h2>
&lt;h3 id="åŠŸèƒ½">åŠŸèƒ½&lt;/h3>
&lt;p>&lt;strong>1. Thrift Streaming&lt;/strong>&lt;/p>
&lt;p>åŸºäº gRPC(HTTP2) çš„ Thrift Streaming åŠŸèƒ½æ­£å¼ Releaseï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ Thrift IDL å®šä¹‰è‡ªå·±çš„ Streaming è¯·æ±‚ï¼Œä¸ºä¿æŒ IDL è§£æçš„å…¼å®¹æ€§ï¼ŒKitex çš„ Streaming æ–¹æ³•çš„å®šä¹‰é€šè¿‡æ³¨è§£çš„æ–¹å¼ï¼Œä½¿ç”¨æ–¹å¼è§ &lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/basic-feature/protocol/streaming/grpc/thrift_streaming/">Thrift Streaming Usage&lt;/a>ã€‚æœ¬ç‰ˆæœ¬ä¹Ÿå¯¹ Streaming è¯·æ±‚çš„ç›‘æ§ä¸ŠæŠ¥åšäº†æ”¹è¿›ï¼ŒåŒæ ·é€‚ç”¨äº gRPC-Protobufã€‚æ³¨æ„ï¼ŒThrift ä¸»è¦ç”¨äºç»“æ„ä½“åºåˆ—åŒ–ï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨ Thrift æ¶ˆæ¯åè®®ã€‚&lt;/p>
&lt;p>ç”±äº HTTP2 åè®®çš„å¤æ‚æ€§å¯¹æ€§èƒ½æœ‰ä¸€å®šæœ‰å½±å“ï¼Œåç»­è®¡åˆ’å‘å¸ƒè‡ªç ” Streaming åè®®æå‡æ€§èƒ½ã€‚&lt;/p>
&lt;p>&lt;strong>2. å®Œæ•´çš„ Thrift MultiService æ”¯æŒ&lt;/strong>&lt;/p>
&lt;p>åœ¨ v0.8.0 ç‰ˆæœ¬ä¸­ï¼ŒKitex å¯¹ gRPC å¯¹é½äº†å¤š Service çš„èƒ½åŠ›ï¼Œè€Œ Thrift å¤š Service ä¹‹å‰ä¸ºä¿è¯åè®®çš„å…¼å®¹æ€§æä¾›äº† &lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/code-gen/combine_service/">Combine Service&lt;/a> æ”¯æŒï¼Œä½†è¯¥åŠŸèƒ½çš„ä½¿ç”¨è¦æ±‚ä¸åŒ IDL Service çš„æ–¹æ³•ä¸èƒ½ç›¸åŒï¼Œå¹¶ä¸æ˜¯çœŸæ­£çš„å¤š Serviceã€‚æœ¬æ¬¡ç‰ˆæœ¬ä¸­ Kitex åŸºäº TTHeader æä¾›äº†åè®®å±‚é¢çœŸæ­£çš„å¤š Service åŠŸèƒ½ï¼Œæ”¯æŒåœ¨ä¸€ä¸ª Server é‡Œæ³¨å†Œå¤šä¸ª Thrift IDL Serviceï¼ŒåŒæ—¶å…¼å®¹æ—§çš„ CombineServiceã€‚ä½¿ç”¨æ–¹å¼è§ &lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/advanced-feature/multi_service/">Multi-Service&lt;/a>ã€‚&lt;/p>
&lt;p>æ³¨ï¼šThrift Multi-Service éœ€ä½¿ç”¨ TTHeader ä¼ è¾“åè®®ã€‚&lt;/p>
&lt;p>&lt;strong>3. Frugal å¯¹ ARM64 çš„å®éªŒæ€§æ”¯æŒ&lt;/strong>&lt;/p>
&lt;p>æ”¯æŒåœ¨ ARM64 æœºå™¨ä¸Šä½¿ç”¨ Frugalï¼Œæš‚æ—¶æ˜¯ Fallback æ”¯æŒã€‚&lt;/p>
&lt;p>&lt;strong>4. æœåŠ¡ç«¯è¶…æ—¶&lt;/strong>&lt;/p>
&lt;p>å¢åŠ  &lt;code>server.WithEnableContextTimeout&lt;/code> option æ”¯æŒåœ¨æœåŠ¡ç«¯ç»™ context å¢åŠ  timeoutï¼ŒåŒæ—¶æ–°ç‰ˆæœ¬é‡Œï¼ŒKitex ä¼šé»˜è®¤é€ä¼  Client è¶…æ—¶é…ç½®ç»™ä¸‹æ¸¸ Serverã€‚è¯¦è§ &lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/service-governance/timeout/">è¶…æ—¶é…ç½®&lt;/a>ã€‚&lt;/p>
&lt;p>æ³¨ï¼šéœ€ä½¿ç”¨ TTHeader ä¼ è¾“åè®®ã€‚&lt;/p>
&lt;p>&lt;strong>5. KitexProtobuf åè®®æ”¯æŒ JSON æ³›åŒ–è°ƒç”¨&lt;/strong>&lt;/p>
&lt;p>ä¸ Thrift çš„ JSON æ³›åŒ–è°ƒç”¨ä½¿ç”¨æ–¹å¼ä¸€æ ·ï¼Œæ–°ç‰ˆæœ¬å¯¹ KitexProtobuf ä¹Ÿåšäº†åŒæ ·çš„æ”¯æŒã€‚è§ &lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/advanced-feature/generic-call/basic_usage/#jsonpbgeneric">JSONPbGeneric&lt;/a>ã€‚&lt;/p>
&lt;p>æ³¨ï¼šéœ€ä½¿ç”¨ TTHeader ä¼ è¾“åè®®ã€‚&lt;/p>
&lt;p>&lt;strong>6. è´Ÿè½½å‡è¡¡æ–°å¢ç­–ç•¥&lt;/strong>&lt;/p>
&lt;p>æ–°å¢ Alias Method çš„è´Ÿè½½å‡è¡¡æ–¹æ³•ï¼Œæ¥å‡å°‘æƒé‡éšæœºè´Ÿè½½å‡è¡¡ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ã€‚é€šè¿‡ &lt;code>client.WithLoadBalancer(loadbalance.NewWeightedRandomWithAliasMethodBalancer())&lt;/code> æŒ‡å®šã€‚&lt;/p>
&lt;h3 id="ç‰¹åˆ«çš„å˜æ›´">ç‰¹åˆ«çš„å˜æ›´&lt;/h3>
&lt;p>v0.9.0 è¦æ±‚ Go ç‰ˆæœ¬å¿…é¡» &amp;gt;= 1.17ï¼Œä¸å†å…¼å®¹ Go &amp;lt;= v1.16 (ç¨³å®šæ€§è¦æ±‚å¿…é¡»å‡çº§ golang.org/x/ åº“å¼•å…¥çš„ Go ç‰ˆæœ¬é™åˆ¶)&lt;/p>
&lt;h2 id="é…ç½®ä¸­å¿ƒçš„æ‰©å±•ç”Ÿæ€å®Œå–„">&lt;strong>é…ç½®ä¸­å¿ƒçš„æ‰©å±•ç”Ÿæ€å®Œå–„&lt;/strong>&lt;/h2>
&lt;blockquote>
&lt;p>æ³¨æ„ä¸ v0.9.0 ç‰ˆæœ¬æ— å…³ï¼Œä»…åŒæ­¥ç¤¾åŒºæ‰©å±•çš„çŠ¶æ€&lt;/p>
&lt;/blockquote>
&lt;p>&lt;strong>ä¸»æµçš„é…ç½®ä¸­å¿ƒå¯¹æ¥å‡å®Œæˆ Release&lt;/strong>&lt;/p>
&lt;p>Kitex å¯¹è¶…æ—¶ã€é‡è¯•ã€ç†”æ–­ã€é™æµçš„ç­–ç•¥æ”¯æŒé€šè¿‡è¿œç¨‹é…ç½®ä¸­å¿ƒæ¥æ§åˆ¶ï¼Œæ„Ÿè°¢ç¤¾åŒºçš„è´¡çŒ®è€…ä»¬ï¼Œç›®å‰&lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/third-party/config-center/">ä¸»æµçš„é…ç½®ä¸­å¿ƒ&lt;/a>å‡å·²å®Œæˆæ‰©å±•å¯¹æ¥å¹¶ Releaseï¼Œè¯¦è§ &lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/third-party/config-center/">é…ç½®ä¸­å¿ƒ&lt;/a>ã€‚&lt;/p>
&lt;h2 id="è¯¦ç»†å˜æ›´">&lt;strong>è¯¦ç»†å˜æ›´&lt;/strong>&lt;/h2>
&lt;h3 id="feature">Feature:&lt;/h3>
&lt;ol>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1208">#1208&lt;/a>, &lt;a href="https://github.com/cloudwego/kitex/pull/1251">#1251&lt;/a>, &lt;a href="https://github.com/cloudwego/kitex/pull/1230">#1230&lt;/a>, &lt;a href="https://github.com/cloudwego/kitex/pull/1226">#1226&lt;/a>] feat: support thrift streaming (replacing the protobuf payload of GRPC/HTTP2 with thrift binary)&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1217">#1217&lt;/a>] feat: support thrift and pb multi service&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1268">#1268&lt;/a>] feat(thrift): support frugal fallback for arm&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/951">#951&lt;/a>] feat(bizerr): support returning biz status error for json/map generic server&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1199">#1199&lt;/a>] feat(loadbalance): add loadbalancer using Alias Method (#1184)&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1244">#1244&lt;/a>] feat(timeout): add option server.WithEnableContextTimeout to enable server timeout&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1228">#1228&lt;/a>] feat(streaming): Adding Recv/End events to streaming requests to improve trace information&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1062">#1062&lt;/a>] feat(generic): supports JSON and Map generic call for the KitexProtobuf protocol, &lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/advanced-feature/generic-call/basic_usage/#jsonpbgeneric">doc&lt;/a>&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1225">#1225&lt;/a>] feat(timeout): support timeout transparent transmission by default when using TTHeader transport protocol&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1211">#1211&lt;/a>] feat(hessian2): support nested struct for hessian2 customized Exception&lt;/li>
&lt;/ol>
&lt;h3 id="optimize">Optimize:&lt;/h3>
&lt;ol>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1222">#1222&lt;/a>] optimize(frugal): enable frugal by default when the generated code is using slim template&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1209">#1209&lt;/a>] optimize: split encoder interface to customize meta and payload encoding implementation&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1206">#1206&lt;/a>] optimize(tool): add IsDir judge in readTemplate and add template register func&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1198">#1198&lt;/a>] optimize(kitexutil): add util api for getting real request and response&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1197">#1197&lt;/a>] optimize(kitexutil): add GetCallerIP util method in kitexutil to fetch Caller IP&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1195">#1195&lt;/a>] optimize(error): more specific instruction when panic in server handler&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1235">#1235&lt;/a>] optimize(tool): add IDLName field in PackageInfo for cwgo tool rendering&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1238">#1238&lt;/a>] optimize(bizerr): support biz status error for streaming mode&lt;/li>
&lt;/ol>
&lt;h3 id="fix">Fix:&lt;/h3>
&lt;ol>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1236">#1236&lt;/a>] fix(hessian2): correct code-ref behavior when thrift file is not in project dir&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1234">#1234&lt;/a>] fix(hessian2): still perform replacement on handler.go when -service is not specified for hessian2&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1232">#1232&lt;/a>] fix(gRPC): append &amp;ldquo;h2&amp;rdquo; to next proto in gRPC tlsConfig to enable protocol negotiation in TLS&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1215">#1215&lt;/a>] fix: bugfix for hessian2 tpl codegen&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1203">#1203&lt;/a>, &lt;a href="https://github.com/cloudwego/kitex/pull/1205">#1205&lt;/a>] fix: fix the issue where disabling rpcinfo reuse on the server side does not take effect&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1227">#1227&lt;/a>] fix: idl-ref overwritten when using hessian2&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1194">#1194&lt;/a>] fix(retry): always set RespOp &amp;amp;&amp;amp; preventive panic to avoid dead loop&lt;/li>
&lt;/ol>
&lt;h3 id="chore--tests">Chore &amp;amp; Tests&lt;/h3>
&lt;ol>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1273">#1273&lt;/a>] chore: upgrade netpoll to v0.6.0&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1263">#1263&lt;/a>] chore: update sonic to v1.11.1&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1255">#1255&lt;/a>] chore: upgrade netpoll to v0.6.0 pre-release version&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1252">#1252&lt;/a>] chore: upgrade golang.org/x/net&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1254">#1254&lt;/a>] chore: upgrade sonic to v1.11.0 to support go1.22&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1231">#1231&lt;/a>] chore: frugal support go1.22&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1220">#1220&lt;/a>] test: correct the cachekey in the benchmark test of balancer&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1196">#1196&lt;/a>] test: add just biz handler message error&lt;/li>
&lt;/ol>
&lt;hr>
&lt;p>&lt;strong>Thanks a lot to those community contributors who submit some pull requests or share your ideas for this version:&lt;/strong>
@DMwangnima @jizhuozhi @NX-Official @jieqiboh @Lvnszn @Skyenought&lt;/p></description></item><item><title>Blog: Hertz v0.8.0 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2024/01/12/hertz-v0.8.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Fri, 12 Jan 2024 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2024/01/12/hertz-v0.8.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;p>Hertz v0.8.0 ç‰ˆæœ¬ä¸­ï¼Œé™¤äº†å¸¸è§„è¿­ä»£ä¼˜åŒ–ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¸¦æ¥äº†ä¸€ä¸ªé‡è¦ featureã€‚&lt;/p>
&lt;h2 id="partitioned-cookies">Partitioned cookies&lt;/h2>
&lt;p>åœ¨ Hertz v0.8.0 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬æ”¯æŒäº† partitioned cookies ç‰¹æ€§ã€‚&lt;/p>
&lt;blockquote>
&lt;p>&lt;a href="https://github.com/cloudwego/hertz/pull/1041">https://github.com/cloudwego/hertz/pull/1041&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;h3 id="èƒŒæ™¯">èƒŒæ™¯&lt;/h3>
&lt;p>ä¸‰æ–¹ Cookie ä¸º Web æä¾›äº†è·¨ç«™ç‚¹è·Ÿè¸ªçš„èƒ½åŠ›ï¼Œå®ƒçš„å­˜åœ¨ä¸º Web ç”¨æˆ·çš„éšç§å’Œå®‰å…¨éƒ½å¸¦æ¥äº†å·¨å¤§å¨èƒã€‚Chrome ä» 2024 å¹´ç¬¬ä¸€å­£åº¦å¼€å§‹å¯¹ 1% çš„ç”¨æˆ·ç¦ç”¨ç¬¬ä¸‰æ–¹ Cookieï¼Œä» 2024 å¹´ç¬¬ä¸‰å­£åº¦å¼€å§‹é€æ­¥å°†ç¦ç”¨èŒƒå›´æ‰©å¤§åˆ° 100%ã€‚
Partitioned Cookies Cookies Having Independent Partitioned State (CHIPS) ä½œä¸ºä¸‰æ–¹Cookieçš„æ›¿ä»£æ–¹æ¡ˆï¼Œæä¾›äº†è·¨ç«™ï¼ˆcross-siteï¼‰è¯·æ±‚æºå¸¦ä¸‰æ–¹ Cookie çš„èƒ½åŠ›ã€‚&lt;/p>
&lt;h4 id="é€šè¿‡-set-cookie-header-è®¾ç½®-partitioned-cookie">é€šè¿‡ Set-Cookie Header è®¾ç½® Partitioned Cookie&lt;/h4>
&lt;pre tabindex="0">&lt;code>Set-Cookie header:
Set-Cookie: __Host-name=value; Secure; Path=/; SameSite=None; Partitioned;
&lt;/code>&lt;/pre>&lt;h3 id="how-to">How to&lt;/h3>
&lt;h4 id="å‡çº§-hertz-ç‰ˆæœ¬">å‡çº§ Hertz ç‰ˆæœ¬&lt;/h4>
&lt;p>Hertz åœ¨ v0.8.0 æ·»åŠ äº†å¯¹ Partitioned Cookies çš„æ”¯æŒï¼Œä½ éœ€è¦å‡çº§åˆ°&amp;gt;=v0.8.0æ¥ä½¿ç”¨ Partitioned Cookieã€‚&lt;/p>
&lt;h4 id="å¦‚ä½•ä½¿ç”¨-partitioned-cookies">å¦‚ä½•ä½¿ç”¨ Partitioned Cookies&lt;/h4>
&lt;p>ç›®å‰ Hertz æ”¯æŒ Partitioned Cookiesï¼Œä½†è¿˜ä¸æ”¯æŒé€šè¿‡ SetCookie ä¼ å…¥æ˜¯å¦ä¸º Partitionedï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹ä¸ªå°ç‰ˆæœ¬å¢åŠ æ­¤åŠŸèƒ½ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œä½ å¯ä»¥å‚è€ƒä¸‹é¢çš„ä»£ç ç¤ºä¾‹æ¥ä½¿ç”¨ Partitioned Cookiesã€‚&lt;/p>
&lt;pre tabindex="0">&lt;code>func SetPartitionedCookie(c *app.RequestContext, name, value string, maxAge int, path, domain string, sameSite protocol.CookieSameSite, secure, httpOnly bool) {
if path == &amp;#34;&amp;#34; {
path = &amp;#34;/&amp;#34;
}
cookie := protocol.AcquireCookie()
defer protocol.ReleaseCookie(cookie)
cookie.SetKey(name)
cookie.SetValue(url.QueryEscape(value))
cookie.SetMaxAge(maxAge)
// å¦‚æœ name å‰ç¼€ä¸º __Hostï¼Œåˆ™ Path å¿…é¡»ä¸º/
cookie.SetPath(path)
cookie.SetDomain(domain)
// Secure å¿…é¡»ä¸º trueã€‚
cookie.SetSecure(secure)
cookie.SetHTTPOnly(httpOnly)
cookie.SetSameSite(sameSite)
cookie.SetPartitioned(true)
c.Response.Header.SetCookie(cookie)
}
func main() {
h := server.Default()
h.GET(&amp;#34;/partitioned&amp;#34;, func(ctx context.Context, c *app.RequestContext) {
SetPartitionedCookie(c, &amp;#34;user&amp;#34;, &amp;#34;hertz&amp;#34;, 1, &amp;#34;/&amp;#34;, &amp;#34;localhost&amp;#34;, protocol.CookieSameSiteNoneMode, true, true)
c.JSON(consts.StatusOK, utils.H{&amp;#34;partitioned&amp;#34;: &amp;#34;yes&amp;#34;})
})
h.Spin()
}
&lt;/code>&lt;/pre>&lt;p>éªŒè¯ Set-Cookie Header&lt;/p>
&lt;pre tabindex="0">&lt;code>curl -v http://localhost:8888/partitioned
* Trying [::1]:8888...
* Connected to localhost (::1) port 8888
&amp;gt; GET /partitioned HTTP/1.1
&amp;gt; Host: localhost:8888
&amp;gt; User-Agent: curl/8.4.0
&amp;gt; Accept: */*
&amp;gt;
&amp;lt; HTTP/1.1 200 OK
&amp;lt; Server: hertz
&amp;lt; Date: Fri, 12 Jan 2024 07:01:02 GMT
&amp;lt; Content-Type: application/json; charset=utf-8
&amp;lt; Content-Length: 21
&amp;lt; Set-Cookie: user=hertz; max-age=1; domain=localhost; path=/; HttpOnly; secure; SameSite=None; Partitioned
&amp;lt;
* Connection #0 to host localhost left intact
{&amp;#34;partitioned&amp;#34;:&amp;#34;yes&amp;#34;}%
&lt;/code>&lt;/pre></description></item><item><title>Blog: Volo 0.9.0 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2024/01/04/volo-0.9.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Thu, 04 Jan 2024 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2024/01/04/volo-0.9.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;p>Volo 0.9.0 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦å°†é»˜è®¤ç”Ÿæˆçš„ HashSet/HashMap ç±»å‹ä¿®æ”¹ä¸ºäº† AHashMap/AHashSet, é¢„æœŸä¼šå¸¦æ¥ä¸€å®šçš„æ€§èƒ½æå‡ã€‚æ­¤å¤–ï¼Œéšç€ &lt;a href="https://blog.rust-lang.org/2023/12/28/Rust-1.75.0.html">Rust 1.75&lt;/a> çš„å‘å¸ƒï¼ŒVolo å·²ç»å¯ä»¥åœ¨ stable rust ä¸­ä½¿ç”¨äº†ã€‚&lt;/p>
&lt;h2 id="break-change">Break Change&lt;/h2>
&lt;h3 id="é»˜è®¤ç”Ÿæˆçš„-hashset--hashmap-ç±»å‹ä¿®æ”¹">é»˜è®¤ç”Ÿæˆçš„ HashSet / HashMap ç±»å‹ä¿®æ”¹&lt;/h3>
&lt;p>åœ¨æ–°ç‰ˆç”Ÿæˆä»£ç ä¸­ï¼Œé»˜è®¤ç”Ÿæˆçš„ HashMap/HashSet ç±»å‹ä¿®æ”¹ä¸ºäº† AHashMap/AHashSetï¼Œè¿™ç›¸æ¯” std çš„ map ä¼šå¸¦æ¥æ›´é«˜çš„æ€§èƒ½ï¼Œå‚è€ƒ &lt;a href="https://github.com/tkaitchuck/aHash/blob/master/compare/readme.md">ahash&lt;/a>ã€‚åœ¨ç”¨æˆ·ä»£ç ä¸­ï¼Œå¯ä»¥æ ¹æ®ç¼–è¯‘å™¨æŠ¥é”™ï¼Œå°†åŸæ¥ä½¿ç”¨ &lt;code>std::collections::HashMap&lt;/code> çš„åœ°æ–¹ï¼Œç›´æ¥æ›¿æ¢ä¸º &lt;code>pilota::AHashMap&lt;/code> æˆ–è€… &lt;code>ahash::AHashMap&lt;/code> å³å¯ï¼ˆpilota æœ¬è´¨ä¸Šæ˜¯ re-export äº† ahash çš„ AHashMap, æ‰€ä»¥æ˜¯åŒä¸€ä¸ªç±»å‹ï¼‰ã€‚&lt;/p>
&lt;h3 id="rpcinfo-å­—æ®µç±»å‹å»æ‰-option">RpcInfo å­—æ®µç±»å‹å»æ‰ Option&lt;/h3>
&lt;p>åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å°† RpcInfo çš„å­—æ®µå»æ‰äº† Option åŒ…è£…ï¼Œé¢„è®¡å¯¹ç»å¤§å¤šæ•°æ²¡æœ‰è‡ªå·±å†™ layer çš„ç”¨æˆ·æ— æ„Ÿã€‚å¦‚æœæœ‰ä½¿ç”¨åˆ° cx å†™ layer çš„ç”¨æˆ·ï¼Œå¯ä»¥ç›´æ¥å»æ‰å¯¹ Option çš„å¤„ç†å³å¯ã€‚&lt;/p>
&lt;h3 id="æ–°å¢-basicerror">æ–°å¢ BasicError&lt;/h3>
&lt;p>åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­ï¼Œvolo-thrift é”™è¯¯è¿”å›çš„æšä¸¾ç±»å‹ä¸­æ–°å¢äº† BasicError åˆ†æ”¯, ä¸»è¦ç”¨äºå­˜æ”¾æ¡†æ¶å†…éƒ¨è‡ªèº«çš„é”™è¯¯ã€‚é¢„è®¡å¯¹ç»å¤§å¤šæ•°ç”¨æˆ·æ²¡æœ‰å½±å“ï¼Œå¦‚æœç”¨æˆ·æœ‰å¯¹é”™è¯¯ç±»å‹è¿›è¡Œ match çš„åœ°æ–¹ï¼Œéœ€è¦æ–°å¢å¯¹ BasicError çš„å¤„ç†ã€‚&lt;/p>
&lt;h3 id="å»é™¤-max_frame_size-æ–¹æ³•">å»é™¤ max_frame_size æ–¹æ³•&lt;/h3>
&lt;p>volo-thrift client ä¸­çš„ max_frame_size ç”±äºè¿­ä»£ä¸­æ¥å£å˜æ›´ï¼Œå¹¶æ²¡æœ‰è¢«å®é™…ç”¨åˆ°ï¼Œåœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­å·²ç»åˆ é™¤ã€‚å¦‚æœç”¨æˆ·æœ‰éœ€æ±‚è®¾ç½® max_frame_size, å¯ä»¥ä½¿ç”¨ make_codec æ–¹æ³•ä¼ å…¥è‡ªå®šä¹‰çš„ codecï¼Œå¹¶åœ¨ MakeFramedCodec é‚£ä¸€å±‚ä¸­ä½¿ç”¨ &lt;a href="https://github.com/cloudwego/volo/blob/main/volo-thrift/src/codec/default/framed.rs#L33">with_max_frame_size&lt;/a> æ–¹æ³•è®¾ç½® max_frame_sizeã€‚&lt;/p>
&lt;h3 id="hyper-å‡çº§åˆ°-10-ç‰ˆæœ¬">hyper å‡çº§åˆ° 1.0 ç‰ˆæœ¬&lt;/h3>
&lt;p>hyper åœ¨ 1.0 ç‰ˆæœ¬ä¸­ç§»é™¤äº† hyper::Bodyï¼Œå¹¶å¼•å…¥äº† hyper::body::Incoming ç”¨ä½œè¯·æ±‚çš„ Body ç±»å‹ã€‚åœ¨ volo-grpc ä¸­ï¼Œæˆ‘ä»¬è·Ÿè¿›äº†è¿™ä¸€æ”¹åŠ¨ï¼Œé¢„è®¡å¯¹ç»å¤§å¤šæ•°æ²¡æœ‰è‡ªå·±å†™ layer çš„ç”¨æˆ·æ— æ„Ÿã€‚å¦‚æœæœ‰ä½¿ç”¨åˆ°å®Œæ•´ Service æ³›å‹çš„ç”¨æˆ·ï¼Œå°† &lt;code>Service&amp;lt;ServerContext, Request&amp;lt;hyper::Body&amp;gt;&amp;gt;&lt;/code> ä¿®æ”¹ä¸º &lt;code>Service&amp;lt;ServerContext, Request&amp;lt;hyper::body::Incoming&amp;gt;&amp;gt;&lt;/code> å³å¯ã€‚&lt;/p>
&lt;h2 id="å®Œæ•´-release-note">å®Œæ•´ Release Note&lt;/h2>
&lt;p>å®Œæ•´çš„ Release Note å¯ä»¥å‚è€ƒï¼š&lt;a href="https://github.com/cloudwego/volo/compare/volo-0.8.0...volo-0.9.0">Volo Changelog&lt;/a>&lt;/p></description></item><item><title>Blog: CloudWeGo æ˜“ç”¨æ€§å»ºè®¾ï¼šæå‡ Go è¯­è¨€äº‘åŸç”Ÿå·¥ç¨‹æ•ˆç‡ä¹‹è·¯</title><link>https://www.cloudwego.io/zh/blog/2023/12/21/cloudwego-%E6%98%93%E7%94%A8%E6%80%A7%E5%BB%BA%E8%AE%BE%E6%8F%90%E5%8D%87-go-%E8%AF%AD%E8%A8%80%E4%BA%91%E5%8E%9F%E7%94%9F%E5%B7%A5%E7%A8%8B%E6%95%88%E7%8E%87%E4%B9%8B%E8%B7%AF/</link><pubDate>Thu, 21 Dec 2023 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2023/12/21/cloudwego-%E6%98%93%E7%94%A8%E6%80%A7%E5%BB%BA%E8%AE%BE%E6%8F%90%E5%8D%87-go-%E8%AF%AD%E8%A8%80%E4%BA%91%E5%8E%9F%E7%94%9F%E5%B7%A5%E7%A8%8B%E6%95%88%E7%8E%87%E4%B9%8B%E8%B7%AF/</guid><description>
&lt;blockquote>
&lt;p>æœ¬ç¯‡æ–‡ç« æ˜¯ CloudWeGo ä¸¤å‘¨å¹´åº†å…¸ç³»åˆ—çš„ç¬¬äºŒç¯‡ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>è¿™æ¬¡åˆ†äº«ä¼šé¦–å…ˆç»™å¤§å®¶åŒæ­¥ä¸‹ CloudWeGo æ˜“ç”¨æ€§å»ºè®¾çš„ä¸€ä¸ªç®€å•èƒŒæ™¯ï¼Œç„¶åä¼šä»‹ç»æˆ‘ä»¬é’ˆå¯¹æ˜“ç”¨æ€§å»ºè®¾åšäº†å“ªäº›å·¥ä½œï¼Œæœ€åä¼šå¯¹æœªæ¥çš„å·¥ä½œè¿›è¡Œå±•æœ›ã€‚&lt;/p>
&lt;h2 id="èƒŒæ™¯">èƒŒæ™¯&lt;/h2>
&lt;p>CloudWeGo æ˜¯ä¸€å¥—ç”±å­—èŠ‚è·³åŠ¨åŸºç¡€æ¶æ„æœåŠ¡æ¡†æ¶å›¢é˜Ÿå¼€æºçš„ã€å¯å¿«é€Ÿæ„å»ºä¼ä¸šçº§äº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„çš„ä¸­é—´ä»¶é›†åˆã€‚
CloudWeGo ä¸‹çš„é¡¹ç›®ä¸»è¦æœ‰ä¸‰ä¸ªç‰¹ç‚¹ï¼š&lt;strong>é«˜æ€§èƒ½&lt;/strong>ã€&lt;strong>é«˜æ‰©å±•æ€§&lt;/strong>ä»¥åŠ&lt;strong>é«˜å¯é æ€§&lt;/strong>ï¼›å¹¶ä¸”ï¼Œåœ¨å¼€æºåæˆ‘ä»¬ä¹Ÿæ›´åŠ é‡è§†æ˜“ç”¨æ€§çš„å»ºè®¾ï¼Œæˆ‘ä»¬æ„è¯†åˆ°æ˜“ç”¨æ€§å¯ä»¥ç»™ç¤¾åŒºå¸¦æ¥å¾ˆå¤šç”¨æˆ·ã€è¿›è€Œå½¢æˆæ´»è·ƒçš„ç¤¾åŒºæ°›å›´ï¼Œæ¨åŠ¨ç¤¾åŒºæŒç»­å‘å±•ï¼Œè€Œä¸”æ˜“ç”¨æ€§å¯å¸®åŠ©ç”¨æˆ·å¿«é€Ÿå®Œæˆä¸šåŠ¡é€»è¾‘å¼€å‘ï¼Œæå‡æ•ˆç‡ã€‚&lt;/p>
&lt;p>é’ˆå¯¹æ˜“ç”¨æ€§ï¼Œæˆ‘ä»¬åœ¨ç ”å‘ä½“éªŒã€ç”¨æˆ·ä½“éªŒä»¥åŠç¤¾åŒºå®£ä¼ ç­‰å‡åšäº†è¯¸å¤šå·¥ä½œï¼Œä¸‹é¢æˆ‘æ¥ä¸€ä¸€ä»‹ç»ã€‚å¦å¤–è¿™æ¬¡åˆ†äº«ä¸»è¦ä¼šé‡ç‚¹ä»‹ç» &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> ä»¥åŠå›´ç»• &lt;a href="https://github.com/cloudwego/cwgo">cwgo&lt;/a> çš„æ˜“ç”¨æ€§å»ºè®¾ã€‚&lt;/p>
&lt;h2 id="æ˜“ç”¨æ€§-feature-å»ºè®¾">æ˜“ç”¨æ€§ Feature å»ºè®¾&lt;/h2>
&lt;p>&lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> ä½œä¸ºä¼ä¸šçº§çš„ HTTP æ¡†æ¶ï¼Œæ˜“ç”¨æ€§ä¸€ç›´æ˜¯æˆ‘ä»¬éå¸¸é‡è§†çš„æ–¹é¢ï¼Œå› ä¸ºå®ƒèƒ½å¤Ÿæå¤§æå‡ç ”å‘ä½“éªŒã€‚å› æ­¤ï¼Œè‡ªä»å¼€æºä»¥æ¥ï¼Œæˆ‘ä»¬ä¸€ç›´éå¸¸é‡è§†ç”¨æˆ·æå‡ºçš„å„ç§å…³äºæ˜“ç”¨æ€§çš„å»ºè®®ï¼Œå¹¶è¿›è¡Œäº†æ€»ç»“ï¼šç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯æˆ‘ä»¬åœ¨ä¸€äº› Feature çš„ä½¿ç”¨ä¸Šä¸å¸¸è§çš„æ¡†æ¶æœ‰äº›å·®åˆ«ï¼Œå¯¼è‡´è¿ç§»è¿‡æ¥çš„ç”¨æˆ·å¯èƒ½ä¼šä¸ä¹ æƒ¯ï¼›
ç¬¬äºŒä¸ªé—®é¢˜æ˜¯æ¡†æ¶çš„è„šæ‰‹æ¶å·¥å…·è¾ƒå¤šï¼Œä¾‹å¦‚ CloudWeGo ä¸‹å°±æœ‰ hz å’Œ kitex ä¸¤ä¸ªè„šæ‰‹æ¶ï¼Œè¿™æ— ç–‘å¢åŠ äº†ç”¨æˆ·çš„å­¦ä¹ æˆæœ¬ï¼›ç¬¬ä¸‰ä¸ªé—®é¢˜æ˜¯æ–‡æ¡£çš„é—®é¢˜ï¼Œæˆ‘ä»¬åœ¨ issue å’Œç”¨æˆ·ç¾¤çš„ç”¨æˆ·åé¦ˆä¸­çœ‹å‡ºï¼Œç›®å‰æˆ‘ä»¬çš„æ–‡æ¡£å­˜åœ¨æè¿°ä¸æ¸…æ™°ï¼Œå†…å®¹ç¼ºå¤±ç­‰é—®é¢˜ï¼Œå¯¼è‡´ç”¨æˆ·é‡åˆ°é—®é¢˜ï¼Œå¾€å¾€æ— æ³•å¿«é€Ÿè§£å†³ã€‚&lt;/p>
&lt;p>é’ˆå¯¹ä»¥ä¸Šé—®é¢˜ï¼Œæˆ‘ä»¬å¼€å‘äº†å¤šç§èƒ½åŠ›ä»¥å¿«é€Ÿæ”¯æŒç”¨æˆ·éœ€æ±‚ã€‚&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>å¤šåè®®æ”¯æŒ&lt;/strong>ï¼šé¦–å…ˆéœ€è¦ä»‹ç»çš„æ˜¯ Hertz å¯æ”¯æŒæ— ç¼åˆ‡æ¢å¤šåè®®ï¼Œç›®å‰ä¸€äº›å¼€æºçš„æ¡†æ¶å·²ç»æ”¯æŒäº† h2/h3 åè®®äº†ï¼Œå› æ­¤æˆ‘ä»¬åŸºäº Hertz åè®®å±‚çš„æ‹“å±•èƒ½åŠ›ï¼Œå®Œæˆäº† http2/http3 çš„å®ç°ï¼Œå¹¶æ”¾åˆ°äº† hertz-contrib ä¸‹ã€‚å…¶ä½¿ç”¨æ–¹å¼éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨ Hertz engine ä¸Šå°†å¯¹åº”çš„åè®®æ³¨å†Œä¸Šå°±å¯ä»¥å•¦ã€‚ http3 åè®®çš„æ”¯æŒä¹Ÿç±»ä¼¼ï¼Œä¸è¿‡æˆ‘ä»¬éœ€è¦å°†ä¼ è¾“å±‚æŒ‡å®šä¸º Hertz æ‹“å±•çš„ quic åè®®çš„ä¼ è¾“å±‚ï¼Œå…¶ä»–çš„æ“ä½œå°±å’Œ http2 ä¸€æ ·äº†ã€‚
&lt;img src="https://www.cloudwego.io/img/blog/CloudWeGo_Usability_Construction/multi_protocols.png" alt="image">&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Response Writer åŠ«æŒ&lt;/strong>ï¼šæ¥ä¸‹æ¥ï¼Œå†ç»™å¤§å®¶ä»‹ç»ä¸€ä¸‹ Response Writer åŠ«æŒèƒ½åŠ›ã€‚åœ¨ä»‹ç» Writer åŠ«æŒå‰ï¼Œå…ˆè¯´ä¸€ä¸‹ Hertz è¯»å†™æŠ¥æ–‡çš„æµç¨‹(å›¾ä¸­æ•°å­—éƒ¨åˆ†)ï¼ŒHertz ä¼šå…ˆåœ¨è¿æ¥ä¸­è¯»æ•°æ®&amp;amp;è§£æï¼Œç„¶åä¼šæ ¹æ®è¯·æ±‚å†…å®¹è¿›è¡Œè·¯ç”±åŒ¹é…ã€ä¸šåŠ¡é€»è¾‘å¤„ç†ã€åˆ›å»ºå“åº”æ•°æ®ç­‰ï¼Œå¹¶åœ¨è¿™äº›å·¥ä½œç»“æŸåï¼Œç”±æ¡†æ¶å°†æ•°æ®å‘é€ç»™å¯¹ç«¯ã€‚è¿™ä¹ˆåšå¯å®Œå…¨ç®€åŒ–ç”¨æˆ·æ“ä½œï¼Œä¸è¿‡åœ¨ä¸€äº›åœºæ™¯ä¸‹å´å­˜åœ¨é—®é¢˜ï¼Œé¦–å…ˆæ˜¯ç”¨æˆ·æ— æ³•æ§åˆ¶å“åº”çœŸæ­£ flush åˆ°å¯¹ç«¯çš„æ—¶æœºï¼Œå› æ­¤åœ¨ä¸€äº›å¢é‡ç”Ÿæˆæ•°æ®ã€å®æ—¶æ€§è¦æ±‚é«˜çš„åœºæ™¯ï¼Œç”¨æˆ·é™åˆ¶è¾ƒå¤šã€‚
&lt;img src="https://www.cloudwego.io/img/blog/CloudWeGo_Usability_Construction/response_writer.png" alt="image">&lt;/p>
&lt;p>å› æ­¤ï¼Œæˆ‘ä»¬å¼€å‘äº† Response Writer åŠ«æŒèƒ½åŠ›ï¼Œåœ¨åŸæ¥å†™å“åº”æµç¨‹çš„åŸºç¡€ä¹‹ä¸Šï¼Œæ”¯æŒç”¨æˆ·åœ¨ä¸šåŠ¡ handler/ä¸­é—´ä»¶ä¸­åŠ«æŒ Response Writerï¼Œæå‰å°†å“åº”æ•°æ®å‘å›åˆ°å¯¹ç«¯ï¼Œå®ç°æ›´åŠ çµæ´»çš„å†™è¯·æ±‚æ–¹å¼ã€‚ æˆ‘ä»¬å·²ç»åŸºäº Response Writer çš„èƒ½åŠ›å®ç°äº† handler flushã€SSEã€æµå¼ Gzip ç­‰èƒ½åŠ›ï¼Œæ›´å¤šèƒ½åŠ›ä¹ŸæœŸå¾…å¤§å®¶è´¡çŒ®ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å‚æ•°ç»‘å®šé‡æ„ï¼šä»‹ç»å®Œ Writer åŠ«æŒåï¼Œå†æ¥ç»™å¤§å®¶ä»‹ç»ä¸€ä¸ªé‡è¦çš„ Feature - å‚æ•°ç»‘å®šã€‚é‡æ„ä¹‹å‰ Hertz çš„å‚æ•°ç»‘å®šä¾èµ–äº†ç¬¬ä¸‰æ–¹çš„å®ç°ï¼Œè¿™ä¼šå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š&lt;/p>
&lt;ul>
&lt;li>ä¾èµ–ç¬¬ä¸‰æ–¹å®ç°ï¼Œç”¨æˆ·çš„éœ€æ±‚éœ€è¦è¯‰è¯¸äºå¼€å‘è€…&lt;/li>
&lt;li>æä¾›æ¥å£è¾ƒå°‘ï¼Œè¿ç§»è¿‡æ¥çš„åŒå­¦ä¼šå¢åŠ å­¦ä¹ æˆæœ¬&lt;/li>
&lt;li>æ€§èƒ½å·®ï¼Œä¹‹å‰çš„å®ç°é€‚é…çš„æ˜¯æ ‡å‡† http åº“çš„å­˜å‚¨æ¨¡å‹ï¼ŒHertz ç”¨éœ€è¦å¤šä¸€æ¬¡è½¬æ¢ï¼Œæ€§èƒ½å·®&lt;/li>
&lt;/ul>
&lt;p>ä¸ºè§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬é‡æ„äº†å‚æ•°ç»‘å®šçš„èƒ½åŠ›ï¼Œå°†å…¶å®ç°æ”¾åˆ° Hertz å†…éƒ¨ï¼Œä½œä¸ºæˆ‘ä»¬åº”ç”¨å±‚çš„ä¸€ä¸ªé‡è¦å®ç°ï¼Œé‡æ„åå®ƒæ”¯æŒå’Œä¹‹å‰ä¸€æ ·çš„ç»‘å®šè§„åˆ™å’Œä½¿ç”¨æ–¹æ³•ï¼Œå¹¶ä¸”æ€§èƒ½ä¹Ÿä¼šå®Œå…¨ä¼˜äºä¹‹å‰ã€‚å¦å¤–è¿˜æ”¯æŒäº†è‡ªå®šä¹‰ binder å’Œ Validatorï¼Œæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨å…¶ç†Ÿæ‚‰çš„è¯­æ³•ã€‚å¦å¤–ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰çš„é…ç½®ç»Ÿä¸€æ”¶æ•›åˆ°ä¸€ä¸ªç»“æ„ä½“ï¼Œä½¿ç”¨ withOption çš„å½¢å¼æ³¨å…¥åˆ° Hertz engine ä¸Šã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>ä»¥ä¸Š 3 ä¸ªå°±æ˜¯ &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> æ¯”è¾ƒé‡è¦çš„æ˜“ç”¨æ€§å»ºè®¾æ–¹é¢çš„ Featureã€‚&lt;/p>
&lt;h2 id="ç”Ÿæ€å»ºè®¾">ç”Ÿæ€å»ºè®¾&lt;/h2>
&lt;p>æ¥ä¸‹æ¥ç»™å¤§å®¶ä»‹ç»ä¸€ä¸‹ Hertz ç›¸å…³çš„&lt;a href="https://github.com/hertz-contrib">ç”Ÿæ€å»ºè®¾&lt;/a>ã€‚&lt;/p>
&lt;p>ç›®å‰æˆ‘ä»¬å°†ä¸€äº›é€šç”¨çš„èƒ½åŠ›ä»¥ä¸­é—´ä»¶çš„å½¢å¼æä¾›ç»™äº†å¤§å®¶ï¼Œè¿™æ ·å¼€å‘è€…å¯ä»¥æ›´å¥½çš„å…³æ³¨ä¸šåŠ¡é€»è¾‘äº†ï¼Œåªéœ€è¦è°ƒç”¨ä¸­é—´ä»¶å°±å¯ä»¥ä½¿ç”¨è¿™äº›é€šç”¨çš„èƒ½åŠ›ã€‚
æˆªæ­¢å½“å‰ï¼Œæˆ‘ä»¬å·²ç»æä¾›äº†åŒ…æ‹¬è®¤è¯/æˆæƒã€å®‰å…¨ã€æ€§èƒ½ã€HTTP é€šç”¨èƒ½åŠ›ã€æ²»ç†è§‚æµ‹æ‹“å±•èƒ½åŠ›ç­‰å„ç±»è¶…è¿‡ 20 ä¸ªä¸­é—´ä»¶æ‹“å±•ï¼ŒåŸºæœ¬å¯æ»¡è¶³å¤§éƒ¨åˆ†çš„ä¸šåŠ¡éœ€æ±‚ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/CloudWeGo_Usability_Construction/middleware_1.png" alt="image">&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/CloudWeGo_Usability_Construction/middleware_2.png" alt="image">&lt;/p>
&lt;p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿä¼šç»§ç»­æŠ•å…¥è¿™äº›ä¸­é—´ä»¶ç”Ÿæ€çš„å»ºè®¾ï¼Œä¹Ÿæ¬¢è¿å¤§å®¶æ¥å‚ä¸åˆ°æˆ‘ä»¬çš„ç¤¾åŒºå¼€å‘ä¸­æ¥ã€‚&lt;/p>
&lt;h2 id="è„šæ‰‹æ¶ä¼˜åŒ–">è„šæ‰‹æ¶ä¼˜åŒ–&lt;/h2>
&lt;p>ä¸‹é¢æˆ‘æ¥é’ˆå¯¹è„šæ‰‹æ¶å·¥å…·çš„ä¼˜åŒ–è¿›è¡Œä»‹ç»ã€‚&lt;/p>
&lt;h3 id="hz">Hz&lt;/h3>
&lt;p>åœ¨å¼€æºçš„æ—¶å€™ï¼ŒHertz çš„è„šæ‰‹æ¶å·¥å…· &lt;a href="https://www.cloudwego.io/zh/docs/hertz/tutorials/toolkit/">hz&lt;/a> å·²ç»æä¾›åŸºäº IDL ç”Ÿæˆ server çš„èƒ½åŠ›ï¼Œä¹Ÿå°±æ˜¯å›¾ä¸­çš„ 3ã€4ã€5 éƒ¨åˆ†æˆ‘ä»¬å·²ç»æ”¯æŒäº†ï¼Œç›®å‰å¯ä»¥æ ¹æ® IDL çš„æ¥å£å®šä¹‰æ¥è‡ªåŠ¨ç”Ÿæˆè·¯ç”±æ³¨å†Œã€handler ä»£ç ç­‰åŠŸèƒ½ï¼›
ä½†æ˜¯ä½œä¸ºä¸€ä¸ªé€šä¿¡æ¡†æ¶ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å®Œæˆ client ç«¯çš„ç”Ÿæˆå·¥ä½œï¼Œä¹Ÿå°±æ˜¯å›¾ä¸­çš„ 1ã€2ã€6 è¿‡ç¨‹ï¼Œå› æ­¤ hz åœ¨å¼€æºåæ”¯æŒäº†ç”Ÿæˆ client ä»£ç çš„èƒ½åŠ›ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/CloudWeGo_Usability_Construction/hz.png" alt="image">&lt;/p>
&lt;p>Client ç«¯ç”Ÿæˆçš„ç›®çš„ä¸»è¦æ˜¯å¯ä»¥å±è”½æ‰åˆå§‹åŒ– Hertz client ã€å‘é€è¯·æ±‚ç­‰ä¸€ç³»åˆ—å›ºå®šçš„æ“ä½œã€ä¸ºç”¨æˆ·æä¾›ä¸€ä¸ªç±»ä¼¼ HTTP è¯·æ±‚ä¸€é”®å‘é€çš„èƒ½åŠ›ï¼Œå¹¶èƒ½å¤Ÿå’Œ hz ç”Ÿæˆçš„ server ç›´æ¥è¿›è¡Œé€šä¿¡ã€‚&lt;/p>
&lt;h3 id="cwgo">CWGO&lt;/h3>
&lt;p>ä¸‹é¢æˆ‘æ¥ä»‹ç»å¦å¤–ä¸€ä¸ªå·¥å…· &lt;a href="https://github.com/cloudwego/cwgo">cwgo&lt;/a>ã€‚cwgo æ˜¯æˆ‘ä»¬é’ˆå¯¹ CloudWeGo Golang æ¡†æ¶æ¨å‡ºçš„ä¸€ä¸ªç»Ÿä¸€çš„å·¥å…·ã€‚&lt;/p>
&lt;p>å¤§å®¶å¯ä»¥çœ‹ä¸‹å›¾ï¼ŒCloudWeGo åœ¨ Golang ä¸‹å­˜åœ¨å¤šä¸ªä»£ç ç”Ÿæˆå·¥å…·ï¼Œè™½ç„¶æˆ‘ä»¬çš„ Kitex å’Œ Hertz å‡å·²ç»æä¾›äº†ä¸€å±‚å°è£…ï¼Œä½†æ˜¯ä»–ä»¬çš„ä½¿ç”¨è¿˜æ˜¯ç•¥æœ‰ä¸åŒï¼Œå¯¼è‡´ç”¨æˆ·çš„å­¦ä¹ æˆæœ¬åé«˜ã€‚ è¿™ä¸ªé—®é¢˜æ­£æ˜¯ cwgo è¦è§£å†³çš„é—®é¢˜ä¹‹ä¸€ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/CloudWeGo_Usability_Construction/cwgo.png" alt="image">&lt;/p>
&lt;p>æ­¤å¤–ï¼Œç›®å‰ CloudWeGo ç¤¾åŒºçš„ Go é¡¹ç›®è¿˜é¢ä¸´å¦‚ä¸‹é—®é¢˜ï¼š&lt;/p>
&lt;ol>
&lt;li>API ç®¡ç†èƒ½åŠ›ç›¸å¯¹è–„å¼±ï¼Œ IDL æœ¬èº«èƒ½å¤Ÿä½œä¸ºæ¥å£æè¿°/å®šä¹‰å·¥å…·è´¯ç©¿æ•´ä¸ªä¸šåŠ¡å¼€å‘è¿­ä»£è¿‡ç¨‹ï¼Œä½†å®é™… CloudWeGo å¯¹å¤–å¹¶æ²¡æœ‰ä¸€ä¸ªæ˜ç¡®çš„å®è·µæ–¹æ¡ˆï¼Œç›®å‰å’Œä¼ä¸šç”¨æˆ·å¯¹æ¥æ—¶åŸºæœ¬ä¸Šæ˜¯è¦æ±‚ä¸šåŠ¡æ–¹è‡ªè¡Œå›´ç»• IDL è¿›è¡Œ API ç›¸å…³çš„ç®¡ç†&lt;/li>
&lt;li>å„ä¸ªç»„ä»¶ç›¸å¯¹ç‹¬ç«‹ï¼Œåœ¨å…±åŒä½¿ç”¨çš„æ—¶å€™ä¸èƒ½æ— ç¼çš„é…åˆ&lt;/li>
&lt;li>ç¼ºå°‘å¸¸ç”¨çš„å•æµ‹ã€DB ç­‰ä»£ç çš„ç”ŸæˆåŠé…ç½®&lt;/li>
&lt;/ol>
&lt;p>éšç€æœªæ¥ CloudWeGo å¼€æºç»„ä»¶ä¸æ–­å¢å¤šï¼Œé›¶ç¢çš„ç”¨æˆ·ä½“éªŒä¹Ÿä¼šä¸æ–­åœ°å‰²è£‚ï¼Œå› æ­¤æˆ‘ä»¬å‘å¸ƒäº† CloudWeGo all in one å·¥å…· cwgoï¼Œæ—¨åœ¨ä»ä¸€ä¸ªå…¨å±€çš„è§†è§’å»è§£å†³ä»¥ä¸Šé—®é¢˜ã€‚æä¾›ä¸€ä¸ªæ›´ç®€å•ã€æ˜“ç”¨çš„å¾®æœåŠ¡ç”Ÿæˆã€ç®¡ç†å½¢å¼ã€‚&lt;/p>
&lt;p>ä¸‹é¢æ¥ä»‹ç» cwgo çš„å‡ ä¸ªç‰¹æ€§&lt;/p>
&lt;ol>
&lt;li>cwgo é›†æˆäº† hz/kitex è„šæ‰‹æ¶çš„èƒ½åŠ›ï¼Œå¹¶å°†ä»–ä»¬çš„å‘½ä»¤è¿›è¡ŒæŠ½è±¡ã€ç®€åŒ–ï¼Œç»Ÿä¸€åœ¨ cwgo å·¥å…·ä¸Šå±•ç¤ºï¼Œå¹¶ä¸”ä¼šæ‰“é€šç”Ÿæˆçš„ç»“æ„ä½“ã€æ³¨è§£ã€Validator ç­‰åŠŸèƒ½ï¼Œæ— è®ºç”¨æˆ·ä½¿ç”¨ RPC è¿˜æ˜¯ HTTPï¼Œéƒ½èƒ½ä¸ºç”¨æˆ·æä¾›ä¸€ä¸ªç»Ÿä¸€çš„ç”Ÿæˆä»£ç ä½“éªŒ&lt;/li>
&lt;li>äº¤äº’å¼å‘½ä»¤è¡Œï¼Œè¿™ä¸ªèƒ½åŠ›æ³¨æ„æ˜¯é¢å‘åˆé˜¶ç”¨æˆ·ï¼Œä»¥äº¤äº’å¼çš„å½¢å¼ä¸ºç”¨æˆ·ç”Ÿæˆç›®æ ‡ä»£ç ï¼Œæå¤§å‡å°‘å­¦ä¹ æˆæœ¬ï¼Œç”¨æˆ·åªéœ€è¦ç‚¹ç‚¹ç‚¹å°±å¯ä»¥å®Œæˆå¾®æœåŠ¡çš„ç”Ÿæˆã€‚&lt;/li>
&lt;li>æˆ‘ä»¬ä¼šç”Ÿæˆæ›´åŠ æœåŠ¡ä¼ä¸šéœ€æ±‚çš„ mvc æ¨¡ç‰ˆï¼Œå¦‚å³å›¾æ‰€ç¤ºï¼ŒååŠ©ä¸šåŠ¡çš„å¿«é€Ÿå¼€å‘è½åœ°ï¼Œå¹¶æ–¹ä¾¿æ—¥åçš„è¿­ä»£åŠç»´æŠ¤ï¼›å¹¶ä¸”ï¼Œcwgo æ”¯æŒè‡ªå®šä¹‰æ¨¡ç‰ˆã€æ¨¡ç‰ˆæ‰˜ç®¡ç­‰èƒ½åŠ›ï¼Œä¹Ÿæ›´ä¾¿äºå®Œæˆæ¨¡æ¿çš„ç®¡ç†ä»¥åŠå¿«é€Ÿæ›¿æ¢ã€‚&lt;/li>
&lt;li>æˆ‘ä»¬åœ¨ cwgo ä¸Šæä¾›äº†ä¸€ä¸ªå…¨æ–°çš„ å¾®æœåŠ¡éƒ¨ç½²å½¢æ€ï¼Œç›®å‰å‘½åä¸º hex è®¡åˆ’ï¼Œæ˜¯ Hertz å’Œ Kitex çš„ç¼©å†™ã€‚Hex è®¡åˆ’çš„ç›®æ ‡æ˜¯åœ¨å¾®æœåŠ¡å¯åœ¨åŒä¸€ä¸ªç«¯å£åŒæ—¶ç›‘å¬ HTTP/RPC è¯·æ±‚ï¼ŒåŸºäºåè®®å—…æ¢å®ç°é›¶ overhead çš„è¯·æ±‚åˆ†å‘ï¼Œ å°†è¯·æ±‚åˆ†å‘ç»™ Hertz å’Œ Kitex è¿›è¡Œå¤„ç†ã€‚ä»è€Œå¯ä»¥è§£å†³ä¸šåŠ¡åœ¨ rpc æœåŠ¡åŒæ—¶éœ€è¦æä¾› HTTP API æ¥å£æ—¶åœ¨ç ”å‘æ•ˆç‡ã€å¤æ‚åº¦ä»¥åŠæ€§èƒ½ä¸Šçš„è¯¸å¤šå¦¥åï¼Œç›®å‰è¯¥èƒ½åŠ›å·²ç»åœ¨ cwgo æ­£å¼å‘å¸ƒï¼Œå¤§å®¶å¯æŒ‰éœ€ä½“éªŒã€‚&lt;/li>
&lt;/ol>
&lt;h2 id="ç”¨æˆ·ä½“éªŒä¼˜åŒ–">ç”¨æˆ·ä½“éªŒä¼˜åŒ–&lt;/h2>
&lt;h3 id="æ–‡æ¡£ä¼˜åŒ–">æ–‡æ¡£ä¼˜åŒ–&lt;/h3>
&lt;p>è‡ªä»å¼€æºæ¥ï¼ŒCloudWeGo ä¸‹çš„é¡¹ç›®ä¸€ç›´éƒ½æ³¨é‡æ–‡æ¡£çš„é—®é¢˜ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½æ˜¯å“ªé‡Œæœ‰é—®é¢˜ä¿®å“ªé‡Œï¼Œæ— æ³•å…¨é¢è§£å†³é—®é¢˜&lt;/p>
&lt;p>å› æ­¤ï¼Œæˆ‘ä»¬å‚ä¸ CCF GLCC é¡¹ç›®å‘èµ·äº†æ–‡æ¡£ä¼˜åŒ–ä¸“é¡¹çš„å·¥ä½œï¼Œåœ¨è¯¥ä¸“é¡¹ä¸­æˆ‘ä»¬ä¸»è¦åšäº†ä»¥ä¸‹å·¥ä½œï¼š&lt;/p>
&lt;ol>
&lt;li>å…¨æ–¹ä½åœ°å¯¹æ–‡æ¡£è¿›è¡Œé‡æ–°ä½“éªŒï¼ŒåŒ…æ‹¬ä»£ç ã€å›¾ç‰‡ã€å†…å®¹ç­‰ï¼Œå¹¶è®°å½•ç›¸å…³é—®é¢˜&lt;/li>
&lt;li>æ ¹æ®è®°å½•çš„ç›¸å…³é—®é¢˜ï¼Œæˆ‘ä»¬æœ‰ä¸“äººæ¥å¯¹æ–‡æ¡£è¿›è¡Œä¼˜åŒ–ï¼Œè§£å†³äº†ä¸€äº›é€»è¾‘æ··ä¹±ã€æè¿°ä¸æ¸…æ™°ç­‰é—®é¢˜ï¼Œå¹¶ç€é‡ä¼˜åŒ–äº† æ–°äººæ•™ç¨‹ã€Hertz æ ¸å¿ƒèƒ½åŠ›ç­‰å¸¸ç”¨æ–‡æ¡£ã€‚æ ¹æ®åé¦ˆï¼Œä¼˜åŒ–åçš„æ–‡æ¡£å·²ç»å¯ä»¥è§£å†³åŸºæœ¬æ‰€æœ‰å¸¸è§é—®é¢˜&lt;/li>
&lt;li>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯¹æ–‡æ¡£æ ¼å¼ã€ç›®å½•ç»“æ„è¿›è¡Œäº†ç»Ÿä¸€çš„è°ƒæ•´ï¼Œæä¾›æ›´å¥½çš„è§†è§‰ä½“éªŒ
ç›®å‰ï¼Œè¯¥ä¼˜åŒ–ä¸“é¡¹ç›®å‰å·²åœ¨ CloudWeGo å…¶ä»–é¡¹ç›®ä¸‹è¿›è¡Œï¼Œä¹Ÿæ¬¢è¿å¤§å®¶å¤šå¤šç»™æˆ‘ä»¬åé¦ˆæ–‡æ¡£çš„é—®é¢˜ã€‚&lt;/li>
&lt;/ol>
&lt;h3 id="ç¤ºä¾‹ä»£ç åº“">ç¤ºä¾‹ä»£ç åº“&lt;/h3>
&lt;p>å…¶æ¬¡ï¼Œæˆ‘ä»¬æä¾›äº†ä¸°å¯Œçš„ç¤ºä¾‹ä»£ç åº“ã€‚&lt;/p>
&lt;p>ç›®å‰ï¼Œæˆ‘ä»¬æä¾›äº† &lt;a href="https://github.com/cloudwego/hertz-examples">hertz-example&lt;/a>ã€&lt;a href="https://github.com/cloudwego/kitex-examples">kitex-example&lt;/a> ä»£ç åº“ï¼Œè¿™é‡ŒåŒ…å«äº†æ‰€æœ‰å¸¸ç”¨ Feature çš„å¯æ‰§è¡Œçš„ä½¿ç”¨å®ä¾‹ï¼Œå¹¶ä¸”å®šæœŸæ›´æ–°ã€ç»´æŠ¤ã€‚&lt;/p>
&lt;p>å¦å¤–ï¼Œä¸ºäº†ä½¿å¾—ä¸šåŠ¡æ›´å¿«åœ°èƒ½ä½¿ç”¨ CloudWeGo é¡¹ç›®å®Œæˆä¸šåŠ¡é€»è¾‘å¼€å‘ï¼Œæˆ‘ä»¬æä¾›äº†è‹¥å¹²ä¸ªçœŸå®åœºæ™¯çš„ demoï¼Œç›®å‰æä¾›äº†å¦‚ä¸‹çš„ demoï¼Œå…¶ä¸­ä¸‹é¢çš„å‡ ä¸ªä¸šåŠ¡ä»£ç éƒ½æ˜¯ä½¿ç”¨äº† Hertz å’Œ Kitex è¿›è¡Œå¼€å‘æˆ–è€…é‡æ„ï¼Œå¤§å®¶å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šæ‹“å±•è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ï¼Œå®Œæˆä¸šåŠ¡çš„å¿«é€Ÿä¸Šçº¿ã€‚&lt;/p>
&lt;ol>
&lt;li>&lt;a href="https://github.com/cloudwego/biz-demo/tree/main/bookinfo">Bookinfo&lt;/a>: ä½¿ç”¨ Hertz+Kitex é‡æ–°å®ç° IstioBookinfo&lt;/li>
&lt;li>&lt;a href="https://github.com/cloudwego/biz-demo/tree/main/easy_note">Easy Note&lt;/a>: ä½¿ç”¨ Hertz+Kitex å¾®æœåŠ¡çš„å½¢å¼å®ç°ä¸€ä¸ªç¬”è®°æœåŠ¡&lt;/li>
&lt;li>&lt;a href="https://github.com/cloudwego/biz-demo/tree/main/book-shop">Book Shop&lt;/a>: ä½¿ç”¨ Hertz+Kitex å®ç°ä¸€ä¸ªç”µå•†ç¤ºä¾‹&lt;/li>
&lt;li>&lt;a href="https://github.com/cloudwego/biz-demo/tree/main/open-payment-platform">Open Payment Platform&lt;/a>: ä½¿ç”¨ Hertz+Kitex å®ç°æ”¯æŒå¤šå•†æˆ·çš„å¼€æ”¾å¼æ”¯ä»˜å¹³å°&lt;/li>
&lt;/ol>
&lt;h3 id="csg-æ´»åŠ¨">CSG æ´»åŠ¨&lt;/h3>
&lt;p>æˆ‘ä»¬è¿˜å®šæœŸä¸¾åŠ CSG æ´»åŠ¨ï¼ŒCSG æ´»åŠ¨æ—¨åœ¨å¸®åŠ©å¼€å‘è€…äº†è§£æ¡†æ¶çš„æºç ä»¥åŠæœ€ä½³ç”¨æ³•ã€‚&lt;/p>
&lt;p>æˆªæ­¢ç›®å‰ï¼ŒCSG æ´»åŠ¨å·²ç»ä¸¾åŠäº† 5 æœŸï¼Œåˆ†åˆ«å¸¦å¤§å®¶äº†è§£äº† Hertz/kitex/volo æ¡†æ¶çš„è¯¸å¤šæºç å’Œæœ€ä½³å®è·µï¼Œå¸®åŠ©å¼€å‘è€…æ›´å¥½çš„äº†è§£å’Œä½¿ç”¨æ¡†æ¶ã€‚å¤§å®¶å¯ä»¥åœ¨ &lt;a href="https://github.com/cloudwego/community">cloudwego/community&lt;/a> ä»“åº“çš„ issue æŸ¥çœ‹å¾€æœŸæ´»åŠ¨çš„ issue ä»‹ç»ä¸å›æ”¾ã€‚&lt;/p>
&lt;h2 id="å±•æœ›">å±•æœ›&lt;/h2>
&lt;p>æœªæ¥ï¼Œæˆ‘ä»¬è¿˜å°†ç»§ç»­å¯¹ CloudWeGo çš„æ˜“ç”¨æ€§è¿›è¡ŒæŒç»­æ€§çš„æŠ•å…¥å’Œæ‰“ç£¨ï¼Œä¸ºç”¨æˆ·æä¾›æ›´å¥½çš„ç ”å‘ä½“éªŒ&lt;/p>
&lt;ol>
&lt;li>é€šç”¨ç ”å‘æµç¨‹ï¼šä¸ºç”¨æˆ·ä¸€å¥—å¯ç›´æ¥ä½¿ç”¨çš„ä¼ä¸šçº§ç ”å‘æµç¨‹ï¼Œå¹¶åä½œå„ä¸ªæ¡†æ¶ï¼Œå®Œæˆä¸šåŠ¡é«˜æ•ˆå¼€å‘å…¨æµç¨‹
&lt;ul>
&lt;li>API ä¸€ç«™å¼ç®¡ç†ï¼šç»Ÿä¸€ CloudWeGo é¡¹ç›®çš„ API ç®¡ç†æ–¹å¼ï¼Œä¸€ç«™å¼å®Œæˆæè¿°ã€å¼€å‘ã€æµ‹è¯•å…¨æµç¨‹&lt;/li>
&lt;li>åˆ†å¸ƒå¼ IDL ç®¡ç†ï¼šIDL&amp;amp; äº§ç‰©ä¸ä¸šåŠ¡ä»£ç åˆ†å¼€ç®¡ç†ï¼Œé™ä½ç»´æŠ¤æˆæœ¬&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>CWGO x LLMï¼šåŸºäº LLM æä¾›æ›´å¤šæ™ºèƒ½çš„è¾…åŠ©èƒ½åŠ›
&lt;ul>
&lt;li>æ™ºèƒ½ä»£ç ç”Ÿæˆï¼šåœ¨ IDL ä¸­æ·»åŠ ä¸šåŠ¡æè¿°ï¼Œåœ¨ç”Ÿæˆä»£ç æ—¶ç»“åˆ LLM å¡«å……ä¸šåŠ¡ä»£ç é€»è¾‘&lt;/li>
&lt;li>æ–‡æ¡£è‡ªåŠ¨åŒ–ï¼šæ–‡æ¡£è‡ªåŠ¨æ’°å†™ã€ä¼˜åŒ–ã€ç¿»è¯‘ã€çº é”™ç­‰&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol></description></item><item><title>Blog: Kitex ä¸¤å‘¨å¹´å›é¡¾ â€” èƒ½åŠ›å‡çº§ã€ç¤¾åŒºåˆä½œä¸æœªæ¥å±•æœ›</title><link>https://www.cloudwego.io/zh/blog/2023/11/30/kitex-%E4%B8%A4%E5%91%A8%E5%B9%B4%E5%9B%9E%E9%A1%BE-%E8%83%BD%E5%8A%9B%E5%8D%87%E7%BA%A7%E7%A4%BE%E5%8C%BA%E5%90%88%E4%BD%9C%E4%B8%8E%E6%9C%AA%E6%9D%A5%E5%B1%95%E6%9C%9B/</link><pubDate>Thu, 30 Nov 2023 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2023/11/30/kitex-%E4%B8%A4%E5%91%A8%E5%B9%B4%E5%9B%9E%E9%A1%BE-%E8%83%BD%E5%8A%9B%E5%8D%87%E7%BA%A7%E7%A4%BE%E5%8C%BA%E5%90%88%E4%BD%9C%E4%B8%8E%E6%9C%AA%E6%9D%A5%E5%B1%95%E6%9C%9B/</guid><description>
&lt;blockquote>
&lt;p>æœ¬ç¯‡æ–‡ç« æ˜¯ CloudWeGo ä¸¤å‘¨å¹´åº†å…¸ç³»åˆ—çš„ç¬¬ä¸€ç¯‡ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>ä»Šå¤©çš„åˆ†äº«ä¸»è¦åˆ†æˆä¸‰ä¸ªéƒ¨åˆ†ï¼Œé¦–å…ˆæ˜¯ &lt;a href="http://github.com/cloudwego/kitex">Kitex&lt;/a> çš„èƒ½åŠ›å‡çº§ï¼Œçœ‹ä¸€ä¸‹è¿‡å»ä¸€å¹´åœ¨&lt;strong>æ€§èƒ½&lt;/strong>ã€&lt;strong>åŠŸèƒ½&lt;/strong>å’Œ&lt;strong>æ˜“ç”¨æ€§&lt;/strong>è¿™ä¸ªæ–¹é¢ä¸Šçš„ä¸€äº›è¿›å±•ã€‚ç¬¬äºŒä¸ªæ˜¯ç¤¾åŒºåˆä½œé¡¹ç›®çš„è¿›å±•ï¼Œç‰¹åˆ«æ˜¯å…¶ä¸­ä¸¤ä¸ªé‡ç‚¹é¡¹ç›® &lt;strong>Kitex-Dubbo äº’é€š&lt;/strong>ä»¥åŠ&lt;strong>é…ç½®ä¸­å¿ƒé›†æˆ&lt;/strong>ã€‚ç¬¬ä¸‰ä¸ªæ˜¯ç»™å¤§å®¶å‰§é€ä¸€ä¸‹æˆ‘ä»¬ç›®å‰åœ¨åšä»¥åŠè®¡åˆ’åšçš„ä¸€äº›äº‹æƒ…ã€‚&lt;/p>
&lt;h2 id="èƒ½åŠ›å‡çº§">èƒ½åŠ›å‡çº§&lt;/h2>
&lt;h3 id="æ€§èƒ½">æ€§èƒ½&lt;/h3>
&lt;p>åœ¨2021å¹´9æœˆï¼Œæˆ‘ä»¬æ›¾å‘å¸ƒäº†ä¸€ç¯‡&lt;a href="https://www.cloudwego.io/zh/blog/2020/05/24/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8%E5%9C%A8-go-%E7%BD%91%E7%BB%9C%E5%BA%93%E4%B8%8A%E7%9A%84%E5%AE%9E%E8%B7%B5/">å­—èŠ‚è·³åŠ¨ Go RPCæ¡†æ¶ Kitex æ€§èƒ½ä¼˜åŒ–å®è·µ&lt;/a>ï¼Œ
è¿™ç¯‡æ–‡ç« ä»‹ç»äº†å¦‚ä½•é€šè¿‡è‡ªç ”ç½‘ç»œåº“ &lt;a href="http://github.com/cloudwego/netpoll">Netpoll&lt;/a>ã€åŠè‡ªç ”çš„ Thrift ç¼–è§£ç å™¨ fastCodec æ¥ä¼˜åŒ– &lt;a href="http://github.com/cloudwego/kitex">Kitex&lt;/a> çš„æ€§èƒ½ã€‚&lt;/p>
&lt;p>è‡ªé‚£æ—¶èµ·ï¼Œæå‡ Kitex æ ¸å¿ƒè¯·æ±‚é“¾è·¯ä¸Šçš„æ€§èƒ½å°±éå¸¸å›°éš¾äº†ï¼Œå®é™…ä¸Šæˆ‘ä»¬æ˜¯è¦åŠªåŠ›ï¼Œåœ¨ä¸æ–­åœ°æ·»åŠ æ–°åŠŸèƒ½çš„åŒæ—¶ï¼Œé¿å… Kitex æ€§èƒ½ä¸‹é™ã€‚&lt;/p>
&lt;p>å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘ä»¬ä¸€ç›´æ²¡æœ‰åœæ­¢ä¼˜åŒ– Kitex æ€§èƒ½çš„å°è¯•ã€‚åœ¨å­—èŠ‚å†…éƒ¨ï¼Œæˆ‘ä»¬å·²ç»åœ¨è¯•éªŒã€æ¨å¹¿ä¸€äº›åœ¨æ ¸å¿ƒé“¾è·¯ä¸Šçš„æ€§èƒ½æå‡ï¼Œç¨åä¼šå†ç»™å„ä½ä»‹ç»ã€‚&lt;/p>
&lt;h4 id="åŸºäº-dynamicgo-çš„æ³›åŒ–è°ƒç”¨">åŸºäº DynamicGo çš„æ³›åŒ–è°ƒç”¨&lt;/h4>
&lt;p>é¦–å…ˆä»‹ç»ä¸€ä¸ªå·²ç»å‘å¸ƒçš„æ€§èƒ½ä¼˜åŒ–ï¼šåŸºäº &lt;a href="http://github.com/cloudwego/dynamicgo">DynamicGo&lt;/a> çš„æ³›åŒ–è°ƒç”¨ã€‚&lt;strong>æ³›åŒ–è°ƒç”¨&lt;/strong>æ˜¯ Kitex çš„ä¸€ä¸ªé«˜çº§ç‰¹æ€§ï¼Œèƒ½å¤Ÿåœ¨ä¸é¢„å…ˆç”Ÿæˆ SDK ä»£ç ï¼ˆä¹Ÿå°±æ˜¯ Kitex Clientï¼‰çš„å‰æä¸‹ï¼Œä½¿ç”¨ Kitex Generic Client ç›´æ¥è°ƒç”¨ç›®æ ‡æœåŠ¡çš„ APIã€‚&lt;/p>
&lt;p>ä¾‹å¦‚å­—èŠ‚è·³åŠ¨å†…éƒ¨çš„ æ¥å£æµ‹è¯•å·¥å…·ã€API ç½‘å…³ç­‰ï¼Œå°±ä½¿ç”¨äº† Kitex çš„æ³›åŒ– Clientï¼Œèƒ½å¤Ÿæ¥æ”¶ä¸€ä¸ª HTTP è¯·æ±‚ï¼ˆè¯·æ±‚ä½“æ˜¯ JSON æ ¼å¼ï¼‰ï¼Œè½¬æ¢æˆ Thrift Binary åï¼Œå‘é€ç»™ Kitex Serverã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/2nd_Kitex_retrospect/generic_call.jpeg" alt="image">&lt;/p>
&lt;p>å…¶å®ç°æ–¹æ¡ˆæ˜¯ä¾èµ–ä¸€ä¸ª &lt;code>map[string]interface{}&lt;/code> ä½œä¸ºæ³›å‹å®¹å™¨ï¼Œè¯·æ±‚æ—¶å…ˆå°† json è½¬æ¢ä¸º mapï¼Œåœ¨åŸºäº Thrift IDL å®Œæˆ map -&amp;gt; thrift çš„è½¬æ¢ï¼›å¯¹å“åº”çš„å¤„ç†åˆ™åè¿‡æ¥ã€‚&lt;/p>
&lt;ul>
&lt;li>è¿™æ ·åšçš„å¥½å¤„æ˜¯çµæ´»æ€§é«˜ï¼Œä¸éœ€è¦ä¾èµ–é¢„å…ˆç”Ÿæˆçš„é™æ€ä»£ç ï¼Œåªéœ€è¦æœ‰ IDL å°±å¯ä»¥è¯·æ±‚ç›®æ ‡æœåŠ¡ï¼›&lt;/li>
&lt;li>ä½†æ˜¯å…¶ä»£ä»·æ˜¯æ€§èƒ½è¾ƒå·®ï¼Œè¿™æ ·ä¸€ä¸ªæ³›å‹å®¹å™¨ä¾èµ– Go çš„ GC å’Œ å†…å­˜ç®¡ç†ï¼Œå¼€é”€å·¨å¤§ï¼Œä¸ä»…éœ€è¦åˆ†é…å¤§é‡å†…å­˜ï¼Œè¿˜éœ€è¦å¤šæ¬¡æ•°æ®æ‹·è´ã€‚&lt;/li>
&lt;/ul>
&lt;p>å› æ­¤æˆ‘ä»¬å¼€å‘äº† &lt;a href="http://github.com/cloudwego/dynamicgo">DynamicGo&lt;/a>ï¼Œå¯ç”¨äºæå‡åè®®è½¬æ¢çš„æ€§èƒ½ã€‚é¡¹ç›® &lt;a href="https://github.com/cloudwego/dynamicgo/blob/main/introduction.md">introduction&lt;/a> é‡Œæœ‰éå¸¸è¯¦ç»†çš„ä»‹ç»ï¼Œè¿™é‡Œåªç»™å¤§å®¶ä»‹ç»å…¶æ ¸å¿ƒè®¾è®¡æ€è·¯ï¼šåŸºäº&lt;strong>åŸå§‹å­—èŠ‚æµ&lt;/strong>ï¼ŒåŸåœ°å®Œæˆ&lt;strong>æ•°æ®å¤„ç†å’Œè½¬æ¢&lt;/strong>ã€‚&lt;/p>
&lt;p>&lt;a href="http://github.com/cloudwego/dynamicgo">DynamicGo&lt;/a> é€šè¿‡æ± åŒ–æŠ€æœ¯ï¼Œèƒ½å®ç°åªéœ€è¦é¢„åˆ†é…ä¸€æ¬¡å†…å­˜ï¼Œå¹¶ä½¿ç”¨ SSEã€AVX ç­‰ SIMD æŒ‡ä»¤é›†è¿›è¡ŒåŠ é€Ÿï¼Œæœ€ç»ˆå®ç°äº†éå¸¸å¯è§‚çš„æ€§èƒ½æå‡ã€‚&lt;/p>
&lt;p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç›¸æ¯”åŸæ³›åŒ–è°ƒç”¨çš„å®ç°ï¼Œåœ¨ 6KB æ•°æ®çš„ç¼–è§£ç æµ‹è¯•ä¸­ï¼Œæ€§èƒ½æå‡äº† &lt;strong>4~9 å€&lt;/strong>ï¼Œç”šè‡³ä¼˜äºé¢„å…ˆç”Ÿæˆçš„é™æ€ä»£ç ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/2nd_Kitex_retrospect/dynamicgo.png" alt="image">&lt;/p>
&lt;p>å…¶å®é™…åŸç†å¾ˆç®€å•ï¼šæ ¹æ®è§£æ IDL ç”Ÿæˆç±»å‹æè¿°ç¬¦ Descriptorï¼Œæ‰§è¡Œå¦‚ä¸‹åè®®è½¬æ¢è¿‡ç¨‹&lt;/p>
&lt;ol>
&lt;li>æ¯æ¬¡ä» JSON å­—èŠ‚æµä¸­è¯»å–ä¸€ä¸ª Key/Value pairï¼›&lt;/li>
&lt;li>æ ¹æ® IDL Descriptor é‡Œæ‰¾åˆ° key å¯¹åº”çš„ Thrift å­—æ®µï¼›&lt;/li>
&lt;li>æŒ‰ç›¸åº”ç±»å‹çš„ Thrift ç¼–ç è§„èŒƒå®Œæˆ Value çš„ç¼–ç ï¼Œå¹¶å†™å…¥è¾“å‡ºå­—èŠ‚æµï¼›&lt;/li>
&lt;li>å¾ªç¯è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°å¤„ç†å®Œæ•´ä¸ª JSONã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;a href="http://github.com/cloudwego/dynamicgo">DynamicGo&lt;/a> é™¤äº†å¯ä»¥ä¼˜åŒ– JSON/Thrift çš„åè®®è½¬æ¢ï¼Œè¿˜æä¾›äº† Thrift DOM æ–¹å¼ç”¨äºä¼˜åŒ–æ•°æ®ç¼–æ’åœºæ™¯çš„æ€§èƒ½ã€‚ä¾‹å¦‚æŠ–éŸ³æŸä¸šåŠ¡å›¢é˜Ÿéœ€è¦æ“¦é™¤è¯·æ±‚ä¸­çš„è¿è§„æ•°æ®ï¼Œä½†ä»…é™è¯·æ±‚ä¸­çš„æŸä¸€ä¸ªå­—æ®µï¼›ä½¿ç”¨ DynamicGo çš„ Thrift DOM API å°±éå¸¸é€‚åˆï¼Œå¯ä»¥å®ç° 10 å€çš„æ€§èƒ½æå‡ï¼Œè¯¦æƒ…å¯å‚è€ƒ DynamicGo çš„æ–‡æ¡£ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ã€‚&lt;/p>
&lt;h4 id="frugal---åŸºäº-jit-çš„é«˜æ€§èƒ½-thrift-ç¼–è§£ç å™¨">Frugal - åŸºäº JIT çš„é«˜æ€§èƒ½ Thrift ç¼–è§£ç å™¨&lt;/h4>
&lt;p>&lt;a href="http://github.com/cloudwego/frugal">Frugal&lt;/a> æ˜¯ä¸€ä¸ª åŸºäº &lt;strong>JIT&lt;/strong> ç¼–è¯‘æŠ€æœ¯çš„é«˜æ€§èƒ½ Thrift ç¼–è§£ç å™¨ã€‚&lt;/p>
&lt;p>Thrift å®˜æ–¹ä»¥åŠ Kitex é»˜è®¤çš„ç¼–è§£ç å™¨éƒ½æ˜¯åŸºäºè§£æ Thrift IDLï¼Œç”Ÿæˆç›¸åº”çš„ç¼–è§£ç  Go ä»£ç ã€‚é€šè¿‡ JIT æŠ€æœ¯ï¼Œæˆ‘ä»¬èƒ½å¤Ÿåœ¨&lt;strong>è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆ&lt;/strong>æ€§èƒ½æ›´å¥½çš„ç¼–è§£ç ä»£ç ï¼š
ç”Ÿæˆæ›´ç´§å‡‘çš„æœºå™¨ç ã€å‡å°‘ cache missã€å‡å°‘ branch missï¼Œç”¨ &lt;strong>SIMD&lt;/strong> æŒ‡ä»¤æ¥åŠ é€Ÿï¼Œä½¿ç”¨åŸºäºå¯„å­˜å™¨çš„å‡½æ•°è°ƒç”¨ï¼ˆGo é»˜è®¤æ˜¯åŸºäºæ ˆï¼‰ã€‚&lt;/p>
&lt;p>è¿™é‡Œç»™å‡ºäº†ç¼–è§£ç æµ‹è¯•çš„æ€§èƒ½æŒ‡æ ‡ï¼š&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/2nd_Kitex_retrospect/frugal_performance.png" alt="image">&lt;/p>
&lt;p>å¯ä»¥çœ‹åˆ°ï¼Œ&lt;a href="http://github.com/cloudwego/frugal">Frugal&lt;/a> æ€§èƒ½æ˜¾è‘—é«˜äºä¼ ç»Ÿæ–¹å¼ã€‚&lt;/p>
&lt;p>é™¤äº†æ€§èƒ½ä¸Šçš„ä¼˜åŠ¿ï¼Œç”±äºå¯ä»¥ä¸ç”Ÿæˆç¼–è§£ç ä»£ç ï¼Œä¹Ÿæœ‰é¢å¤–çš„å¥½å¤„ã€‚&lt;/p>
&lt;p>ä¸€æ–¹é¢&lt;strong>ä»“åº“æ›´ç®€æ´&lt;/strong>äº†ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªé¡¹ç›®ï¼Œç”Ÿæˆçš„ä»£ç æœ‰ 700MBï¼Œåˆ‡æ¢åˆ° frugal ååªæœ‰ 37Mï¼Œå¤§çº¦åªæœ‰åŸæ¥çš„ 5%ï¼Œåœ¨ä»“åº“ç»´æŠ¤æ–¹é¢å‹åŠ›å¤§å¹…ç¼©å°ï¼Œä¿®æ”¹ IDL ä»¥åä¹Ÿä¸ä¼šç”Ÿæˆä¸€å¤§å †å®é™…ä¸Šæ— æ³• review çš„ä»£ç ï¼›
å¦ä¸€æ–¹é¢ IDE çš„&lt;strong>åŠ è½½é€Ÿåº¦&lt;/strong>ã€é¡¹ç›®çš„&lt;strong>ç¼–è¯‘é€Ÿåº¦&lt;/strong>ä¹Ÿèƒ½æ˜¾è‘—æé«˜ã€‚&lt;/p>
&lt;p>å…¶å® Frugal å»å¹´å°±å·²ç»å‘å¸ƒäº†ï¼Œä½†æ˜¯å½“æ—¶çš„æ—©æœŸç‰ˆæœ¬è¦†ç›–ä¸å¤Ÿå……åˆ†ã€‚ä»Šå¹´æˆ‘ä»¬é‡ç‚¹ä¼˜åŒ–äº†å®ƒçš„ç¨³å®šæ€§ï¼Œä¿®å¤äº†æ‰€æœ‰å·²çŸ¥é—®é¢˜ï¼Œ
æœ€è¿‘å‘ç‰ˆçš„ v0.1.12 ç‰ˆæœ¬ï¼Œå¯ä»¥ç¨³å®šåœ°ä½¿ç”¨åœ¨ç”Ÿäº§ä¸šåŠ¡ä¸Šã€‚ä¾‹å¦‚å­—èŠ‚è·³åŠ¨ç”µå•†ä¸šåŠ¡çº¿ï¼ŒæŸæœåŠ¡çš„å³°å€¼ QPS çº¦ 25Kï¼Œå·²ç»å…¨é‡åˆ‡æ¢åˆ° Frugalï¼Œç¨³å®šè¿è¡Œäº†æ•°æœˆã€‚&lt;/p>
&lt;p>&lt;a href="http://github.com/cloudwego/frugal">Frugal&lt;/a> ç›®å‰æ”¯æŒ Go1.16 ~ Go1.21ï¼Œæš‚æ—¶åªæ”¯æŒ AMD64 æ¶æ„ï¼Œæœªæ¥ä¹Ÿå°†æ”¯æŒ ARM64 æ¶æ„ï¼›æˆ‘ä»¬å¯èƒ½ä¼šåœ¨æœªæ¥æŸä¸ªç‰ˆæœ¬å°† Frugal ä½œä¸º Kitex çš„é»˜è®¤ç¼–è§£ç å™¨ã€‚&lt;/p>
&lt;h3 id="åŠŸèƒ½">åŠŸèƒ½&lt;/h3>
&lt;p>Kitex åœ¨è¿‡å»ä¸€å¹´ä¸­ä» v0.4.3 å‡çº§åˆ° v0.7.2ï¼Œå…¶ä¸­ Feature ç›¸å…³çš„ Pull Request å…±æœ‰ 40 å¤šä¸ªï¼Œæ¶µç›–äº†&lt;strong>å‘½ä»¤è¡Œå·¥å…·&lt;/strong>ã€&lt;strong>gRPC&lt;/strong>ã€&lt;strong>Thrift ç¼–è§£ç &lt;/strong>ã€&lt;strong>é‡è¯•&lt;/strong>ã€&lt;strong>æ³›åŒ–è°ƒç”¨&lt;/strong>ã€&lt;strong>æœåŠ¡æ²»ç†é…ç½®&lt;/strong>ç­‰å¤šä¸ªæ–¹é¢ï¼Œè¿™é‡Œé‡ç‚¹ä»‹ç»å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„ç‰¹æ€§ã€‚&lt;/p>
&lt;h4 id="fallback---ä¸šåŠ¡è‡ªå®šä¹‰é™çº§">Fallback - ä¸šåŠ¡è‡ªå®šä¹‰é™çº§&lt;/h4>
&lt;p>é¦–å…ˆæ˜¯ Kitex åœ¨ v0.5.0 ç‰ˆæœ¬æ–°å¢çš„ fallback åŠŸèƒ½ã€‚&lt;/p>
&lt;p>éœ€æ±‚èƒŒæ™¯æ˜¯ï¼Œä¸šåŠ¡ä»£ç åœ¨ RPC è¯·æ±‚å¤±è´¥ã€æ— æ³•è·å¾—å“åº”æ—¶ï¼Œå¾€å¾€éœ€è¦æ‰§è¡Œä¸€äº›é™çº§ç­–ç•¥ã€‚&lt;/p>
&lt;p>ä¾‹å¦‚ä¿¡æ¯æµä¸šåŠ¡ï¼ŒAPI æ¥å…¥å±‚åœ¨è¯·æ±‚æ¨èæœåŠ¡æ—¶ï¼Œå¦‚é‡åˆ°å¶å‘é”™è¯¯ï¼ˆä¾‹å¦‚è¶…æ—¶ï¼‰ï¼Œç®€å•ç²—æš´çš„åšæ³•æ˜¯å‘Šè¯‰ç”¨æˆ·å‡ºé”™äº†ï¼Œè®©ç”¨æˆ·é‡è¯•ï¼Œä½†è¿™æ ·ä½“éªŒå°±å¾ˆå·®ã€‚ä¸€ä¸ªæ¯”è¾ƒå¥½çš„é™çº§ç­–ç•¥æ˜¯ï¼Œå°è¯•è¿”å›ä¸€äº›çƒ­é—¨æ¡ç›®ï¼Œç”¨æˆ·å‡ ä¹æ— æ„Ÿï¼Œä½“éªŒç›¸å¯¹å°±å¥½äº†å¾ˆå¤šã€‚&lt;/p>
&lt;p>æ—§ç‰ˆ Kitex çš„é—®é¢˜æ˜¯ï¼Œä¸šåŠ¡è‡ªå®šä¹‰çš„ ä¸­é—´ä»¶ åœ¨ç†”æ–­ã€è¶…æ—¶ç­‰å†…ç½®ä¸­é—´ä»¶ä¹‹åï¼Œå› æ­¤æ— æ³•åœ¨ middleware é‡Œå®ç°é™çº§ç­–ç•¥ï¼Œåªèƒ½ç›´æ¥ä¿®æ”¹ä¸šåŠ¡ä»£ç ï¼Œä¾µå…¥æ€§è¾ƒå¤§ï¼Œä¸”éœ€è¦ä¿®æ”¹æ¯ä¸€å¤„æ–¹æ³•è°ƒç”¨ï¼Œå®¹æ˜“é—æ¼ã€‚åœ¨æ–°å¢è°ƒç”¨æŸæ–¹æ³•çš„ä¸šåŠ¡é€»è¾‘æ—¶ï¼Œæ²¡æœ‰æœºåˆ¶ä¿è¯ä¸è¢«é—æ¼ã€‚&lt;/p>
&lt;p>é€šè¿‡æ–°å¢çš„ fallback åŠŸèƒ½ï¼Œ å…è®¸ä¸šåŠ¡&lt;strong>åœ¨åˆå§‹åŒ– Client æ—¶æŒ‡å®šä¸€ä¸ª fallback æ–¹æ³•&lt;/strong>æ¥å®ç°é™çº§ç­–ç•¥ã€‚&lt;/p>
&lt;p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/2nd_Kitex_retrospect/fallback_example.png" alt="image">&lt;/p>
&lt;p>åˆå§‹åŒ– client æ—¶æŒ‡å®šçš„è¿™ä¸ªæ–¹æ³•ä¼šåœ¨æ¯æ¬¡è¯·æ±‚ç»“æŸå‰è¢«è°ƒç”¨ï¼Œå¯ä»¥è·å¾—è¿™æ¬¡è¯·æ±‚çš„ contextã€è¯·æ±‚å‚æ•°ã€å“åº”ï¼ŒåŸºäºæ­¤å®ç°è‡ªå®šä¹‰çš„é™çº§ç­–ç•¥ï¼Œè¿™æ ·å°±æŠŠç­–ç•¥çš„å®ç°éƒ½æ”¶æ•›èµ·æ¥äº†ã€‚&lt;/p>
&lt;h4 id="thrift-fastcodec---æ”¯æŒ-unknown-fields">Thrift FastCodec - æ”¯æŒ unknown fields&lt;/h4>
&lt;p>åœ¨å®é™…çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œä¸€ä¸ªè¯·æ±‚é“¾è·¯å¾€å¾€æ¶‰åŠå¤šä¸ªèŠ‚ç‚¹ã€‚&lt;/p>
&lt;p>ä»¥é“¾è·¯ A -&amp;gt; B -&amp;gt; C -&amp;gt; D ä¸ºä¾‹ï¼ŒA èŠ‚ç‚¹çš„æŸä¸ª struct éœ€è¦é€šè¿‡ Bã€C é€ä¼ åˆ° D èŠ‚ç‚¹ã€‚åœ¨ä»¥å¾€çš„å®ç°é‡Œï¼Œå¦‚æœåœ¨ A æ–°å¢ä¸€ä¸ªå­—æ®µï¼Œä¾‹å¦‚ &lt;code>Extra&lt;/code>ï¼Œ
æˆ‘éœ€è¦ä½¿ç”¨&lt;strong>æ–°çš„ IDL é‡æ–°ç”Ÿæˆæ‰€æœ‰èŠ‚ç‚¹çš„ä»£ç &lt;/strong>ï¼Œé‡æ–°éƒ¨ç½²ï¼Œæ‰èƒ½åœ¨ D èŠ‚ç‚¹è·å¾— Extra å­—æ®µçš„å€¼ã€‚æ•´ä¸ªæµç¨‹æ¯”è¾ƒå¤æ‚ï¼Œæ›´æ–°å‘¨æœŸä¹Ÿæ¯”è¾ƒé•¿ï¼Œå¦‚æœä¸­é—´èŠ‚ç‚¹æ˜¯å…¶ä»–å›¢é˜Ÿçš„æœåŠ¡ï¼Œè¿˜éœ€è¦è·¨å›¢é˜Ÿåè°ƒï¼Œéå¸¸åƒåŠ›ã€‚&lt;/p>
&lt;p>åœ¨ Kitex v0.5.2 é‡Œï¼Œæˆ‘ä»¬åœ¨è‡ªç ”çš„ fastCodec é‡Œå®ç°äº† Unknown Fields è¿™ä¸ªç‰¹æ€§ï¼Œå¯ä»¥å¾ˆå¥½åœ°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚&lt;/p>
&lt;p>ä¾‹å¦‚åŒæ ·æ˜¯ A -&amp;gt; B -&amp;gt; C -&amp;gt; D è¿™ä¸ªé“¾è·¯ï¼ŒBã€CèŠ‚ç‚¹ä»£ç ä¸å˜ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ï¼Œåœ¨è§£ææ—¶ï¼Œå‘ç°æœ‰ä¸ªå­—æ®µ id=2ï¼Œåœ¨ struct é‡Œæ‰¾ä¸åˆ°å¯¹åº”çš„å­—æ®µï¼Œäºæ˜¯å°±å†™å…¥è¿™ä¸ªæœªå¯¼å‡ºçš„ &lt;code>_unknownFields&lt;/code> å­—æ®µï¼ˆå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ª byte slice çš„åˆ«åï¼‰ï¼›&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/2nd_Kitex_retrospect/old_code.png" alt="image">&lt;/p>
&lt;p>è€Œ Aã€D æœåŠ¡æ˜¯ç”¨æ–° IDL é‡æ–°ç”Ÿæˆè¿‡çš„ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ï¼ŒåŒ…å«äº† Extra å­—æ®µï¼Œå› æ­¤è§£æåˆ° id=2 çš„å­—æ®µæ—¶ï¼Œå¯ä»¥å†™åˆ°è¿™ä¸ª Extra å­—æ®µï¼Œä¸šåŠ¡ä»£ç å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/2nd_Kitex_retrospect/new_code.png" alt="image">&lt;/p>
&lt;p>æ­¤å¤–ï¼Œæˆ‘ä»¬åœ¨ v0.7.0 è¿˜å¯¹è¿™ä¸ªç‰¹æ€§è¿›è¡Œäº†ä¸€æ¬¡æ€§èƒ½ä¼˜åŒ–ï¼Œä½¿ç”¨ã€Œæ— åºåˆ—åŒ–ã€ï¼ˆç›´æ¥æ‹·è´å­—èŠ‚æµï¼‰çš„æ–¹å¼ï¼Œå°† unknown fields çš„ç¼–è§£ç æ€§èƒ½æå‡äº†çº¦ 6~7 å€ã€‚&lt;/p>
&lt;h4 id="åŸºäº-gls-çš„-session-ä¼ é€’æœºåˆ¶">åŸºäº GLS çš„ Session ä¼ é€’æœºåˆ¶&lt;/h4>
&lt;p>å¦ä¸€ä¸ªå€¼å¾—ç»™å„ä½ä»‹ç»çš„ç‰¹æ€§ä¹Ÿå’Œé•¿é“¾è·¯æœ‰å…³ã€‚&lt;/p>
&lt;p>åœ¨å­—èŠ‚å†…éƒ¨ï¼Œæˆ‘ä»¬ç”¨ LogID æ¥è¿½è¸ªæ•´ä¸ªè°ƒç”¨é“¾ï¼Œè¿™å°±è¦æ±‚é“¾è·¯ä¸­æ‰€æœ‰èŠ‚ç‚¹éƒ½èƒ½æŒ‰è¦æ±‚é€ä¼ è¿™ä¸ªç¥¨æ®ã€‚åœ¨æˆ‘ä»¬çš„å®ç°ä¸­ï¼ŒLogID ä¸æ˜¯æ”¾åœ¨è¯·æ±‚ä½“é‡Œï¼Œè€Œæ˜¯ä»¥ metadataï¼ˆå…ƒæ•°æ®ï¼‰çš„å½¢å¼é€ä¼ ã€‚&lt;/p>
&lt;p>ä»¥ A -&amp;gt; B -&amp;gt; C è¿™ä¸ªé“¾è·¯ä¸ºä¾‹ï¼ŒA è°ƒç”¨ B çš„ &lt;code>A_Call_B&lt;/code> æ–¹æ³•ï¼Œä¼ å…¥çš„ LogID ä¼šå­˜æ”¾åœ¨ handler å…¥å‚çš„ &lt;code>ctx&lt;/code> é‡Œï¼›B åœ¨è¯·æ±‚ C æ—¶ï¼Œæ­£ç¡®çš„ç”¨æ³•æ˜¯ï¼Œå°†è¿™ä¸ª &lt;code>ctx&lt;/code> ä¼ ç»™ &lt;code>clientC.B_Call_C&lt;/code> æ–¹æ³•ï¼Œè¿™æ ·æ‰èƒ½æŠŠ LogID ç»§ç»­ä¼ é€’ä¸‹å»ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/2nd_Kitex_retrospect/call_example.png" alt="image">&lt;/p>
&lt;p>ä½†æ˜¯å®é™…æƒ…å†µå¾€å¾€æ˜¯ï¼Œè¯·æ±‚ C æœåŠ¡çš„ä»£ç è¢«å¤šå±‚åŒ…è£…ï¼Œ&lt;strong>ctx çš„é€ä¼ å°±å®¹æ˜“è¢«é—æ¼&lt;/strong>ï¼›æˆ‘ä»¬é‡åˆ°çš„æƒ…å†µæ›´éº»çƒ¦ï¼Œå¯¹ C æœåŠ¡çš„è¯·æ±‚æ˜¯ç”±ç¬¬ä¸‰æ–¹åº“å®Œæˆçš„ï¼Œè€Œè¯¥åº“çš„æ¥å£å°±ä¸æ”¯æŒä¼ å…¥ ctxï¼Œè€Œè¿™æ ·çš„ä»£ç æ”¹é€ æˆæœ¬å¾ˆé«˜ï¼Œå¯èƒ½éœ€è¦åè°ƒå¤šä¸ªå›¢é˜Ÿæ‰èƒ½å®Œæˆã€‚&lt;/p>
&lt;p>ä¸ºäº†è§£å†³è¿™ä¸ªç—›ç‚¹ï¼Œæˆ‘ä»¬å¼•å…¥äº†åŸºäº GLSï¼ˆgoroutine local storageï¼‰çš„ session ä¼ é€’æœºåˆ¶ã€‚å…·ä½“æ–¹æ¡ˆæ˜¯ï¼š&lt;/p>
&lt;ol>
&lt;li>åœ¨ Kitex Server è¿™è¾¹ï¼Œæ”¶åˆ°è¯·æ±‚åï¼Œå…ˆå°† context å¤‡ä»½åœ¨ GLS é‡Œï¼Œç„¶åå†è°ƒç”¨ Handler ï¼Œä¹Ÿå°±æ˜¯ä¸šåŠ¡ä»£ç ï¼›&lt;/li>
&lt;li>åœ¨ä¸šåŠ¡ä»£ç é‡Œè°ƒç”¨ client å‘é€è¯·æ±‚æ—¶ï¼Œå…ˆæ£€æŸ¥å…¥å‚çš„ ctx é‡Œæ˜¯å¦åŒ…å«æœŸæœ›çš„ç¥¨æ®ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ä» GLS çš„å¤‡ä»½é‡Œå–å‡ºï¼Œå†å‘å‡ºè¯·æ±‚ã€‚&lt;/li>
&lt;/ol>
&lt;p>ä¸‹é¢æ˜¯ä¸€ä¸ªå…·ä½“ä¾‹å­ï¼š&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/2nd_Kitex_retrospect/GLS_example.png" alt="image">&lt;/p>
&lt;p>è¯´æ˜ï¼š&lt;/p>
&lt;ol>
&lt;li>åˆå§‹åŒ– Server çš„æ—¶å€™æ‰“å¼€ &lt;code>ContextBackup&lt;/code> å¼€å…³&lt;/li>
&lt;li>åˆå§‹åŒ– Client çš„æ—¶å€™æŒ‡å®šä¸€ä¸ª &lt;code>backupHandler&lt;/code>&lt;/li>
&lt;li>æ¯æ¬¡å‘å‡ºè¯·æ±‚å‰ï¼Œä¼šè°ƒç”¨è¯¥ handlerï¼Œæ£€æŸ¥å…¥å‚æ˜¯å¦åŒ…å«äº† &lt;code>LogID&lt;/code>&lt;/li>
&lt;li>å¦‚æœä¸åŒ…å«ï¼Œä»å¤‡ä»½çš„ &lt;code>ctx&lt;/code> é‡Œè¯»å‡ºï¼Œåˆå¹¶åˆ°å½“å‰ &lt;code>ctx&lt;/code> é‡Œè¿”å›ï¼ˆè¿”å› &lt;code>useNewCtx = true&lt;/code> è¡¨ç¤º Kitex åº”ä½¿ç”¨è¿™ä¸ªæ–°çš„ &lt;code>ctx&lt;/code> å‘è¯·æ±‚ï¼‰&lt;/li>
&lt;/ol>
&lt;p>åœ¨å¼€å¯ä¸Šè¿°è®¾ç½®åï¼Œå³ä½¿ä¸šåŠ¡ä»£ç ä½¿ç”¨äº†é”™è¯¯çš„ contextï¼Œä¹Ÿèƒ½å¤Ÿä¸²è”èµ·æ•´ä¸ªé“¾è·¯ã€‚&lt;/p>
&lt;p>æœ€åå†ä»‹ç»ä¸‹ server åˆå§‹åŒ–çš„ async å‚æ•°ï¼Œå®ƒè§£å†³çš„æ˜¯åœ¨ handler é‡Œæ–°å»º goroutine é‡Œå‘é€è¯·æ±‚çš„æƒ…å†µã€‚
ç”±äºä¸æ˜¯åŒä¸€ä¸ª goroutineï¼Œæ— æ³•ç›´æ¥å…±äº« Local Storageï¼›æˆ‘ä»¬å€Ÿé‰´ pprof ç»™ goroutine æŸ“è‰²çš„æœºåˆ¶ï¼Œå°†å¤‡ä»½çš„ ctx ä¹Ÿä¼ é€’ç»™æ–°çš„ goroutineï¼Œè¿™æ ·å°±å®ç°äº†åœ¨&lt;strong>å¼‚æ­¥åœºæ™¯&lt;/strong>ä¹Ÿèƒ½&lt;strong>éšå¼ä¼ é€’ç¥¨æ®&lt;/strong>çš„èƒ½åŠ›ã€‚&lt;/p>
&lt;h3 id="æ˜“ç”¨æ€§">æ˜“ç”¨æ€§&lt;/h3>
&lt;p>é™¤äº†é«˜æ€§èƒ½å’Œä¸°å¯Œçš„åŠŸèƒ½ï¼Œæˆ‘ä»¬ä¹Ÿå¾ˆæ³¨é‡æé«˜ Kitex çš„æ˜“ç”¨æ€§ã€‚&lt;/p>
&lt;h4 id="æ–‡æ¡£">æ–‡æ¡£&lt;/h4>
&lt;p>ä¼—æ‰€çš†çŸ¥ï¼Œç¨‹åºå‘˜æœ€è®¨åŒçš„ä¸¤ä»¶äº‹ï¼šä¸€æ˜¯å†™æ–‡æ¡£ï¼ŒäºŒæ˜¯åˆ«äººä¸å†™æ–‡æ¡£ã€‚å› æ­¤æˆ‘ä»¬å¾ˆæ³¨é‡é™ä½ç¼–å†™æ–‡æ¡£çš„å¯åŠ¨æˆæœ¬ï¼Œå¹¶åŠªåŠ›æ¨è¿›æ–‡æ¡£å»ºè®¾ã€‚&lt;/p>
&lt;p>åœ¨å­—èŠ‚è·³åŠ¨å†…éƒ¨ï¼ŒKitex çš„æ–‡æ¡£æ˜¯ä»¥é£ä¹¦çŸ¥è¯†åº“çš„å½¢å¼ç»„ç»‡çš„ï¼Œèƒ½å¤Ÿæ›´å¥½åœ°é›†æˆåˆ°é£ä¹¦çš„æœç´¢ï¼Œæ–¹ä¾¿å­—èŠ‚å‘˜å·¥æŸ¥è¯¢ï¼›ç”±äºé£ä¹¦æ–‡æ¡£æ›´æ–°æ–¹ä¾¿ï¼Œå› æ­¤æ¯”å®˜ç½‘æ–‡æ¡£æ›´æ–°æ›´åŠæ—¶ï¼›æ–°åŠŸèƒ½åœ¨å¼€å‘æ—¶å¾€å¾€ä¹Ÿæ˜¯å…ˆåœ¨é£ä¹¦çŸ¥è¯†åº“ä¸­æ’°å†™æ–‡æ¡£ï¼Œæœ‰äº›æ²¡æœ‰åŠæ—¶åŒæ­¥åˆ°å®˜ç½‘ã€‚å„ç§åŸå› å¯¼è‡´å†…å¤–ä¸¤ä¸ªåˆ†æ”¯å·®åˆ«è¶Šæ¥è¶Šå¤§ã€‚&lt;/p>
&lt;p>å› æ­¤æœ€è¿‘ä¸¤ä¸ªå­£åº¦ï¼Œæˆ‘ä»¬å‘èµ·äº†æ–°ä¸€è½®æ–‡æ¡£ä¼˜åŒ–å·¥ä½œï¼šæ ¹æ®ç”¨æˆ·çš„åé¦ˆï¼Œé‡æ–°æ•´ç†æ‰€æœ‰æ–‡æ¡£ï¼Œæ·»åŠ æ›´å¤šç¤ºä¾‹ï¼›å°†æ‰€æœ‰æ–‡æ¡£ç¿»è¯‘æˆè‹±æ–‡ï¼ŒåŒæ­¥åˆ°å®˜ç½‘ã€‚è¿™é¡¹å·¥ä½œé¢„è®¡ä»Šå¹´èƒ½å®Œæˆï¼Œç›®å‰å·²ç»èƒ½åœ¨å®˜ç½‘çœ‹åˆ°ä¸€äº›æ›´æ–°åçš„æ–‡æ¡£äº†ï¼Œä¾‹å¦‚è¶…æ—¶æ§åˆ¶ã€Frugalã€panic å¤„ç†ç­‰ï¼Œæ¬¢è¿å„ä½åˆ°å®˜ç½‘å›´è§‚ã€å¸®å¿™æ‰è™«ã€‚&lt;/p>
&lt;p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜åœ¨æ­å»ºä¸€å¥—æœºåˆ¶ï¼Œç”¨äºè‡ªåŠ¨åŒ–å°†å†…éƒ¨æ–‡æ¡£åŒæ­¥åˆ°å®˜ç½‘ï¼Œå¸Œæœ›èƒ½è®©å¼€æºç”¨æˆ·ä»¥åä¹Ÿèƒ½åƒå†…éƒ¨ç”¨æˆ·ä¸€æ ·å¾—åˆ°åŠæ—¶æ›´æ–°çš„æ–‡æ¡£ã€‚&lt;/p>
&lt;h4 id="å…¶ä»–ä¼˜åŒ–">å…¶ä»–ä¼˜åŒ–&lt;/h4>
&lt;p>é™¤äº†æ–‡æ¡£ï¼Œ Kitex è¿˜åšäº†ä¸€äº›å…¶ä»–æ˜“ç”¨æ€§ç›¸å…³çš„å·¥ä½œã€‚&lt;/p>
&lt;p>æˆ‘ä»¬å‘å¸ƒäº†ä¸€ä¸ªç¤ºä¾‹é¡¹ç›®&lt;a href="https://github.com/cloudwego/kitex-examples/tree/main/bizdemo/easy_note">ç¬”è®°æœåŠ¡&lt;/a>ï¼Œåœ¨å®ä¾‹ä¸­å±•ç¤ºä¸­é—´ä»¶ã€é™æµã€é‡è¯•ã€è¶…æ—¶æ§åˆ¶ç­‰å„ç§ç‰¹æ€§çš„ç”¨æ³•ï¼Œé€šè¿‡çœŸå®çš„é¡¹ç›®ä»£ç ç»™ Kitex ç”¨æˆ·æä¾›å‚è€ƒã€‚&lt;/p>
&lt;p>å…¶æ¬¡æˆ‘ä»¬ä¹Ÿåœ¨åŠªåŠ›æé«˜é—®é¢˜æ’æŸ¥çš„æ•ˆç‡ï¼Œä¾‹å¦‚æˆ‘ä»¬æ ¹æ®æ—¥å¸¸ oncall çš„éœ€æ±‚ï¼Œåœ¨æŠ¥é”™ä¿¡æ¯é‡Œæ·»åŠ äº†æ›´å…·ä½“çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆè¯¸å¦‚è¶…æ—¶æŠ¥é”™å¢åŠ å…·ä½“åŸå› ã€panic ä¿¡æ¯å¢åŠ  method nameã€thrift ç¼–è§£ç é”™è¯¯ä¿¡æ¯å¢åŠ å…·ä½“å­—æ®µåç§°ç­‰ï¼‰ï¼Œæ–¹ä¾¿å¿«é€Ÿå®šä½åˆ°å…·ä½“çš„é—®é¢˜ç‚¹ã€‚&lt;/p>
&lt;p>æ­¤å¤–ï¼ŒKitex å‘½ä»¤è¡Œå·¥å…·ä¹Ÿåœ¨æŒç»­æ”¹è¿›ã€‚&lt;/p>
&lt;ul>
&lt;li>ä¾‹å¦‚å¾ˆå¤šä¼ä¸šç”¨æˆ·æ˜¯åœ¨ Windows ä¸Šå¼€å‘ï¼Œä¹‹å‰ Kitex æ— æ³•æ­£å¸¸åœ¨ Windows ä¸‹ç”Ÿæˆä»£ç ï¼Œå¯¼è‡´è¿™äº›ç”¨æˆ·è¿˜éœ€è¦ä¸€ä¸ª Linux ç¯å¢ƒæ¥è¾…åŠ©ï¼Œéå¸¸ä¸æ–¹ä¾¿ï¼Œæˆ‘ä»¬æ ¹æ®è¿™äº›ç”¨æˆ·çš„åé¦ˆåšäº†ä¼˜åŒ–ã€‚&lt;/li>
&lt;li>æˆ‘ä»¬è¿˜å®ç°äº†ä¸€ä¸ª IDL è£å‰ªå·¥å…·ï¼Œèƒ½å¤Ÿè¯†åˆ«å‡ºæ²¡æœ‰è¢«å¼•ç”¨çš„ç»“æ„ä½“ï¼Œåœ¨ç”Ÿæˆä»£ç æ—¶ç›´æ¥è¿‡æ»¤æ‰ï¼Œè¿™å¯¹äºä¸€äº›åŒ…æµ†çš„è€é¡¹ç›®éå¸¸æœ‰å¸®åŠ©ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="ç¤¾åŒºåˆä½œé¡¹ç›®">ç¤¾åŒºåˆä½œé¡¹ç›®&lt;/h2>
&lt;p>è¿‡å»çš„ä¸€å¹´é‡Œï¼Œåœ¨ CloudWeGo ç¤¾åŒºçš„æ”¯æŒä¸‹ï¼Œæˆ‘ä»¬ä¹Ÿå–å¾—äº†å¾ˆå¤šæˆæœï¼Œç‰¹åˆ«æ˜¯ Dubbo äº’é€šå’Œé…ç½®ä¸­å¿ƒé›†æˆè¿™ä¸¤ä¸ªé¡¹ç›®ã€‚&lt;/p>
&lt;h3 id="dubbo-äº’é€š">Dubbo äº’é€š&lt;/h3>
&lt;p>è™½ç„¶ Kitex æœ€åˆæ˜¯ä¸€ä¸ª Thrift RPC æ¡†æ¶ï¼Œä½†æ˜¯å…¶æ¶æ„è®¾è®¡æœ‰è¾ƒå¥½çš„æ‰©å±•æ€§ï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œå¢åŠ æ–°çš„åè®®ï¼Œæ ¸å¿ƒå·¥ä½œæ˜¯æŒ‰ Codec æ¥å£å®ç°ä¸€ä¸ªå¯¹åº”çš„åè®®ç¼–è§£ç å™¨ï¼ˆCodec æˆ–è€… PayloadCodecï¼‰ï¼š&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/2nd_Kitex_retrospect/kitex_transport.png" alt="image">&lt;/p>
&lt;p>Dubbo äº’é€šé¡¹ç›®æºäºæŸä¼ä¸šç”¨æˆ·æå‡ºçš„éœ€æ±‚ï¼Œä»–ä»¬æœ‰ä¸€äº›ä¾›åº”å•†æ˜¯ç”¨ Dubbo Java å®ç°çš„å¤–å›´æœåŠ¡ï¼Œä»–ä»¬å¸Œæœ›ä¹Ÿèƒ½å¤Ÿä½¿ç”¨ Kitex æ¥è¯·æ±‚è¿™äº›æœåŠ¡ï¼Œé™ä½é¡¹ç›®çš„ç®¡ç†æˆæœ¬ã€‚&lt;/p>
&lt;p>è¿™ä¸ªé¡¹ç›®å¾—åˆ°äº†ç¤¾åŒºåŒå­¦çš„çƒ­æƒ…æ”¯æŒï¼Œæœ‰å¾ˆå¤šåŒå­¦å‚ä¸åˆ°è¿™ä¸ªé¡¹ç›®ä¸­ã€‚ç‰¹åˆ«åœ°ï¼Œæ‰¿æ‹…æ ¸å¿ƒä»»åŠ¡ä¹‹ä¸€çš„ @&lt;a href="https://github.com/DMwangnima">DMwangnima&lt;/a> åŒå­¦ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ Dubbo ç¤¾åŒºçš„å¼€å‘è€…ï¼Œç”±äºä»–å¯¹ Dubbo æ¯”è¾ƒç†Ÿæ‚‰ï¼Œå¼€å‘è¿‡ç¨‹ä¹Ÿå°‘èµ°äº†å¾ˆå¤šå¼¯è·¯ã€‚&lt;/p>
&lt;p>åœ¨å…·ä½“å®ç°æ–¹æ¡ˆä¸Šï¼Œæˆ‘ä»¬é‡‡ç”¨äº†å’Œ Dubbo å®˜æ–¹ä¸åŒçš„æ€è·¯ã€‚æ ¹æ®å¯¹ hessian2 åè®®çš„åˆ†æï¼Œå…¶åŸºç¡€ç±»å‹ç³»ç»ŸåŸºæœ¬ä¸Šæ˜¯å’Œ Thrift é‡åˆçš„ï¼Œå› æ­¤æˆ‘ä»¬åŸºäº Thrift IDL æ¥ç”Ÿæˆ Kitex Dubbo-Hessian2 é¡¹ç›®è„šæ‰‹æ¶ã€‚&lt;/p>
&lt;p>ä¸€æœŸä¸ºäº†å¿«é€Ÿå®ç°åŠŸèƒ½ï¼Œæˆ‘ä»¬ç›´æ¥å€Ÿç”¨äº† Dubbo-go æ¡†æ¶çš„ hessian2 åº“æ¥åšåºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œå¹¶å‚è€ƒ Dubbo å®˜æ–¹æ–‡æ¡£å’Œ Dubbo-Go çš„æºç ï¼Œå®ç°äº† Kitex è‡ªå·±çš„ DubboCodecï¼›&lt;/p>
&lt;p>åœ¨ 10 æœˆæˆ‘ä»¬å·²ç»å®Œæˆäº†ç¬¬ä¸€ç‰ˆä»£ç ï¼Œé¡¹ç›®åœ°å€æ˜¯ &lt;a href="https://github.com/kitex-contrib/codec-dubbo">code-dubbo&lt;/a> ï¼Œæ„Ÿå…´è¶£çš„ç”¨æˆ·å¯ä»¥æŒ‰ç…§ä¸Šé¢çš„æ–‡æ¡£è¯•ç”¨ï¼Œåœ¨å…·ä½“çš„ä½¿ç”¨ä¸Šï¼Œå’Œ Kitex Thrift ç±»ä¼¼ï¼Œå†™å¥½ Thrift IDLï¼Œç”¨ kitex å‘½ä»¤è¡Œç”Ÿæˆè„šæ‰‹æ¶ï¼ˆæ³¨æ„éœ€è¦æŒ‡å®š Protocol ä¸º hessian2ï¼‰ï¼Œç„¶ååœ¨ä»£ç é‡Œåˆå§‹åŒ– clientã€server çš„åœ°æ–¹æŒ‡å®š DubboCodecï¼Œå°±å¯ä»¥å¼€å§‹ç¼–å†™ä¸šåŠ¡ä»£ç äº†ã€‚&lt;/p>
&lt;p>è¿™ä¸ä»…é™ä½äº†ç”¨æˆ·ä½¿ç”¨é—¨æ§›ï¼Œè€Œä¸”ç”¨ IDL æ¥ç®¡ç†æ¥å£ç›¸å…³ä¿¡æ¯ï¼Œå¯ç»´æŠ¤æ€§ä¹Ÿæ›´å¥½ã€‚&lt;/p>
&lt;p>ç›®å‰æˆ‘ä»¬å·²ç»èƒ½å¤Ÿåšåˆ° &lt;strong>Kitex å’Œ Dubbo-Java&lt;/strong>ã€&lt;strong>Kitex å’Œ Dubbo-Go&lt;/strong> äº’é€šï¼š&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/2nd_Kitex_retrospect/kitex_dubbo.jpeg" alt="image">&lt;/p>
&lt;p>æœªæ¥è®¡åˆ’ï¼š&lt;/p>
&lt;ul>
&lt;li>é¦–å…ˆæ˜¯æé«˜ä¸ dubbo-java çš„å…¼å®¹æ€§ï¼Œä»¥åŠå…è®¸ç”¨æˆ·åœ¨ IDL æ³¨è§£é‡ŒæŒ‡å®šå¯¹åº”çš„ Java ç±»å‹ã€‚&lt;/li>
&lt;li>å…¶æ¬¡æ˜¯ä¸æ³¨å†Œä¸­å¿ƒçš„å¯¹æ¥ã€‚è™½ç„¶ Kitex å·²ç»æœ‰å¯¹åº”çš„æ³¨å†Œä¸­å¿ƒæ¨¡å—ï¼Œä½†å…·ä½“çš„æ•°æ®æ ¼å¼å’Œ Dubbo ä¸ä¸€è‡´ï¼Œè¿™å—è¿˜éœ€è¦ä¸€äº›æ”¹é€ ï¼Œç›¸å…³å·¥ä½œå³å°†å®Œæˆã€‚&lt;/li>
&lt;li>æœ€åæ˜¯æ€§èƒ½é—®é¢˜ï¼Œç›®å‰å’Œ Kitex Thrift ç›¸æ¯”æœ‰è¾ƒå¤§å·®è·ï¼Œå› ä¸º dubbo-go-hessian2 è¿™ä¸ªåº“å®Œå…¨åŸºäºåå°„å®ç°ï¼Œæ€§èƒ½è¿˜æœ‰å¾ˆå¤§ä¼˜åŒ–ç©ºé—´ã€‚è®¡åˆ’å®ç° Hessian2 çš„ FastCodecï¼Œä»è€Œè§£å†³ç¼–è§£ç çš„æ€§èƒ½ç“¶é¢ˆã€‚&lt;/li>
&lt;/ul>
&lt;p>åœ¨è¿™ä¸ªé¡¹ç›®çš„æ¨è¿›è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ·±åˆ‡ä½“éªŒåˆ°è·¨ç¤¾åŒºåˆä½œçš„ç§¯æå½±å“ï¼ŒKitex å¸æ”¶äº† Dubbo ç¤¾åŒºçš„æˆæœï¼ŒåŒæ—¶ä¹Ÿå‘ç°äº† Dubbo-go é¡¹ç›®å¯ä»¥æ”¹è¿›çš„åœ°æ–¹ï¼Œä¸Šé¢è¯´åˆ°çš„å…¼å®¹æ€§å’Œæ€§èƒ½çš„è§£å†³æ–¹æ¡ˆï¼Œé¢„è®¡ä¹Ÿèƒ½åå“º dubbo ç¤¾åŒºã€‚&lt;/p>
&lt;p>åœ¨æ­¤ä¹Ÿç‰¹åˆ«å‘è¿™ä¸ªé¡¹ç›®çš„ç¤¾åŒºè´¡çŒ®è€… @&lt;a href="https://github.com/DMwangnima">DMwangnima&lt;/a>ã€@&lt;a href="https://github.com/Lvnszn">Lvnszn&lt;/a>ã€@&lt;a href="https://github.com/ahaostudy">ahaostudy&lt;/a>ã€@&lt;a href="https://github.com/jasondeng1997">jasondeng1997&lt;/a>ã€@&lt;a href="https://github.com/VaderKai">VaderKai&lt;/a> ç­‰åŒå­¦è‡´è°¢ï¼Œæ„Ÿè°¢ä»–ä»¬æŠ½å‡ºå¤§é‡ä¸šä½™æ—¶é—´å®Œæˆè¿™ä¸ªé¡¹ç›®ã€‚&lt;/p>
&lt;h3 id="é…ç½®ä¸­å¿ƒé›†æˆ">é…ç½®ä¸­å¿ƒé›†æˆ&lt;/h3>
&lt;p>å¦ä¸€ä¸ªç¤¾åŒºåˆä½œçš„é‡ç‚¹é¡¹ç›®æ˜¯ã€Œé…ç½®ä¸­å¿ƒé›†æˆã€ã€‚&lt;/p>
&lt;p>Kitex æä¾›äº†å¯åŠ¨æ€é…ç½®çš„æœåŠ¡æ²»ç†èƒ½åŠ›ï¼ŒåŒ…æ‹¬å®¢æˆ·ç«¯çš„è¶…æ—¶ã€é‡è¯•ã€ç†”æ–­ï¼Œä»¥åŠæœåŠ¡ç«¯çš„é™æµã€‚&lt;/p>
&lt;p>è¿™äº›æœåŠ¡æ²»ç†èƒ½åŠ›åœ¨å­—èŠ‚å†…éƒ¨éƒ½æ˜¯è¢«é‡åº¦ä½¿ç”¨çš„ï¼Œå¾®æœåŠ¡çš„å¼€å‘è€…å¯ä»¥åœ¨å­—èŠ‚è‡ªå»ºçš„æœåŠ¡æ²»ç†é…ç½®å¹³å°ä¸Šç¼–è¾‘è¿™äº›é…ç½®ï¼Œç²’åº¦ç»†åŒ–åˆ°è¿™ä¸ªäº”å…ƒç»„ï¼Œå¹¶ä¸”æ˜¯å‡†å®æ—¶ç”Ÿæ•ˆï¼Œè¿™äº›èƒ½åŠ›å¯¹æé«˜å¾®æœåŠ¡çš„ SLA éå¸¸æœ‰å¸®åŠ©ã€‚&lt;/p>
&lt;p>ç„¶è€Œæˆ‘ä»¬å’Œä¼ä¸šç”¨æˆ·æ²Ÿé€šï¼Œå‘ç°è¿™äº›èƒ½åŠ›é€šå¸¸åªæœ‰éå¸¸ç®€å•çš„ä½¿ç”¨ï¼Œç²’åº¦å¾ˆç²—ï¼Œè€Œä¸”æ—¶æ•ˆæ€§è¾ƒå·®ï¼Œå¯èƒ½åªæ˜¯ç¡¬ç¼–ç æŒ‡å®šé…ç½®ï¼Œæˆ–è€…é€šè¿‡ç®€å•çš„æ–‡ä»¶é…ç½®ï¼Œéœ€è¦é‡å¯æ‰èƒ½ç”Ÿæ•ˆã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/2nd_Kitex_retrospect/config_cases.png" alt="image">&lt;/p>
&lt;p>ä¸ºäº†è®©ç”¨æˆ·èƒ½å¤Ÿæ›´å¥½åœ°ç”¨ä¸Š Kitex çš„æœåŠ¡æ²»ç†èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯åŠ¨äº†é…ç½®ä¸­å¿ƒé›†æˆé¡¹ç›®ï¼Œè®© Kitex èƒ½å¤Ÿä»ç”¨æˆ·çš„é…ç½®ä¸­å¿ƒ&lt;strong>åŠ¨æ€è·å–æœåŠ¡æ²»ç†é…ç½®&lt;/strong>ï¼Œå¹¶å‡†å®æ—¶ç”Ÿæ•ˆã€‚&lt;/p>
&lt;p>æˆ‘ä»¬å·²ç»å‘å¸ƒäº† &lt;a href="https://github.com/kitex-contrib/config-nacos">config-nacos&lt;/a> çš„ v0.1.1 ç‰ˆæœ¬ï¼ˆæ³¨ï¼šæˆªè‡³å‘æ–‡æ—¶å·²æ›´æ–°è‡³ v0.3.0ï¼Œæ„Ÿè°¢ @&lt;a href="https://github.com/whalecold">whalecold&lt;/a> åŒå­¦çš„æŒç»­æŠ•å…¥ï¼‰ï¼Œé€šè¿‡åœ¨ç°æœ‰ Kitex é¡¹ç›®ä¸Šç»™ client å¢åŠ  NacosClientSuiteï¼Œå¯ä»¥å¾ˆç®€å•åœ°è®© Kitex ä» Nacos åŠ è½½å¯¹åº”çš„æœåŠ¡æ²»ç†é…ç½®ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/2nd_Kitex_retrospect/nacos_code.png" alt="image">&lt;/p>
&lt;p>ç”±äºæˆ‘ä»¬ä½¿ç”¨ nacos client æœ¬èº«æä¾›çš„ watch èƒ½åŠ›ï¼Œå¯ä»¥å‡†å®æ—¶åœ°æ”¶åˆ°é…ç½®çš„å˜æ›´é€šçŸ¥ï¼Œå› æ­¤æ—¶æ•ˆæ€§ä¹Ÿå¾ˆå¼ºï¼Œä¸éœ€è¦é‡å¯æœåŠ¡ã€‚&lt;/p>
&lt;p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜é¢„ç•™äº†ä¿®æ”¹é…ç½®ç²’åº¦çš„èƒ½åŠ›ï¼Œä¾‹å¦‚é»˜è®¤çš„é…ç½®ç²’åº¦æ˜¯ client + serverï¼Œåœ¨ Nacos çš„ data id é‡ŒæŒ‰è¿™ä¸ªæ ¼å¼å¡«å†™å³å¯ï¼›ç”¨æˆ·ä¹Ÿå¯ä»¥é€šè¿‡æŒ‡å®šè¿™ä¸ª data id çš„æ¨¡æ¿ï¼Œä¾‹å¦‚åŠ ä¸Šæœºæˆ¿ã€é›†ç¾¤ç­‰ï¼Œä»è€Œæ›´ç²¾ç»†åŒ–åœ°è°ƒæ•´è¿™äº›é…ç½®ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/2nd_Kitex_retrospect/nacos_config.png" alt="image">&lt;/p>
&lt;p>æˆ‘ä»¬è®¡åˆ’å®Œæˆå¯¹æ¥å¸¸è§çš„é…ç½®ä¸­å¿ƒï¼Œåœ¨è¿™ä¸ª &lt;a href="https://github.com/cloudwego/kitex/issues/973">issue&lt;/a> é‡Œæœ‰æ›´è¯¦ç»†çš„è¯´æ˜ï¼Œæ¬¢è¿å¤§å®¶å›´è§‚ã€‚
ç›®å‰çš„è¿›å±•æ˜¯ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/kitex-contrib/config-file">file&lt;/a>ã€&lt;a href="https://github.com/kitex-contrib/config-apollo">apollo&lt;/a>ã€&lt;a href="https://github.com/kitex-contrib/config-etcd">etcd&lt;/a>ã€&lt;a href="https://github.com/kitex-contrib/config-zookeeper">zookeeper&lt;/a> å·²ç»å®Œæˆï¼›&lt;/li>
&lt;li>&lt;a href="https://github.com/kitex-contrib/config-consul">consul&lt;/a> æ­£åœ¨å¼€å‘ä¸­ï¼›&lt;/li>
&lt;/ul>
&lt;p>æ„Ÿå…´è¶£çš„åŒå­¦çš„åŒå­¦ä¹Ÿå¯ä»¥å‚ä¸è¿›æ¥ï¼Œä¸€èµ· reviewã€æµ‹è¯•éªŒè¯è¿™äº›æ‰©å±•æ¨¡å—ã€‚&lt;/p>
&lt;h2 id="æœªæ¥å±•æœ›">æœªæ¥å±•æœ›&lt;/h2>
&lt;p>æœ€åç»™å¤§å®¶å‰§é€ä¸€ä¸‹æˆ‘ä»¬ç›®å‰æ­£åœ¨å°è¯•çš„ä¸€äº›æ–¹å‘ã€‚&lt;/p>
&lt;h3 id="åˆå¹¶éƒ¨ç½²">åˆå¹¶éƒ¨ç½²&lt;/h3>
&lt;h4 id="äº²å’Œæ€§éƒ¨ç½²">äº²å’Œæ€§éƒ¨ç½²&lt;/h4>
&lt;p>æˆ‘ä»¬ä¹‹å‰çš„ä¼˜åŒ–å¤§å¤šæ˜¯é’ˆå¯¹æœåŠ¡å†…ï¼Œè€Œéšç€å¯ä¼˜åŒ–ç‚¹é€æ¸å‡å°‘ï¼Œæˆ‘ä»¬å¼€å§‹è€ƒè™‘å…¶ä»–ç›®æ ‡ï¼Œæ¯”å¦‚ä¼˜åŒ– RPC è¯·æ±‚åœ¨ç½‘ç»œé€šä¿¡ä¸Šçš„å¼€é”€ã€‚
å…·ä½“çš„æ–¹æ¡ˆå¦‚ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>é¦–å…ˆæ˜¯äº²å’Œæ€§è°ƒåº¦ï¼Œé€šè¿‡ä¿®æ”¹å®¹å™¨åŒ–è°ƒåº¦æœºåˆ¶ï¼Œæˆ‘ä»¬å°† Client å’Œ Server å°½é‡è°ƒåº¦åˆ°ç›¸åŒçš„ç‰©ç†æœºä¸Šï¼›&lt;/li>
&lt;li>äºæ˜¯æˆ‘ä»¬å°±å¯ä»¥ç”¨åŒæœºé€šä¿¡æ¥é™ä½å¼€é”€ã€‚&lt;/li>
&lt;/ul>
&lt;p>ç›®å‰æˆ‘ä»¬å·²ç»å®ç°çš„åŒæœºé€šä¿¡åŒ…æ‹¬å¦‚ä¸‹ä¸‰ç§ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Unix Domain Socket&lt;/strong>ï¼Œæ¯”æ ‡å‡†çš„ TCP Socket æ€§èƒ½è¦å¥½ä¸€äº›ï¼Œä½†ä¸å¤ªå¤šï¼›&lt;/li>
&lt;li>&lt;a href="https://github.com/cloudwego/shmipc-go">ShmIPC&lt;/a>ï¼ŒåŸºäºå…±äº«å†…å­˜çš„è¿›ç¨‹é—´é€šä¿¡ï¼Œè¿™ä¸ªå¯ä»¥ç›´æ¥çœç•¥åºåˆ—åŒ–æ•°æ®çš„ä¼ é€’ï¼Œåªéœ€è¦æŠŠå†…å­˜åœ°å€å‘Šè¯‰æ¥æ”¶æ–¹å³å¯ï¼›&lt;/li>
&lt;li>æœ€åæ˜¯ &lt;strong>RPAL&lt;/strong> è¿™ä¸ªã€Œé»‘ç§‘æŠ€ã€ï¼Œè¿™æ˜¯ Run Process As Library çš„ç¼©å†™ï¼Œæˆ‘ä»¬å’Œå­—èŠ‚çš„å†…æ ¸ç»„åˆä½œï¼Œé€šè¿‡å®šåˆ¶åŒ–çš„å†…æ ¸ï¼Œå°†ä¸¤ä¸ªè¿›ç¨‹æ”¾åœ¨åŒä¸€ä¸ªåœ°å€ç©ºé—´ï¼Œåœ¨æ»¡è¶³ä¸€å®šæ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥ä¸éœ€è¦åšåºåˆ—åŒ–ï¼›&lt;/li>
&lt;/ul>
&lt;p>ç›®å‰æˆ‘ä»¬å·²ç»åœ¨ 100 å¤šä¸ªæœåŠ¡ä¸Šå¼€å¯äº†è¿™ä¸ªèƒ½åŠ›ï¼Œä¹Ÿå–å¾—äº†ä¸€äº›æ€§èƒ½æ”¶ç›Šï¼Œå¯¹äºæ•ˆæœæ¯”è¾ƒå¥½çš„æœåŠ¡ï¼Œèƒ½å¤ŸèŠ‚çœçº¦ 5&lt;del>10% çš„ CPUï¼Œè€—æ—¶ä¹Ÿèƒ½å‡å°‘ 10&lt;/del>70%ï¼›å½“ç„¶å®é™…è¡¨ç°å–å†³äºæœåŠ¡çš„ä¸€äº›ç‰¹æ€§ï¼Œä¾‹å¦‚æ•°æ®åŒ…çš„å¤§å°ç­‰ã€‚&lt;/p>
&lt;h4 id="ç¼–è¯‘æœŸåˆå¹¶">ç¼–è¯‘æœŸåˆå¹¶&lt;/h4>
&lt;p>å¦ä¸€ä¸ªæ€è·¯æ˜¯ç¼–è¯‘æœŸåˆå¹¶ã€‚&lt;/p>
&lt;p>è¯¥æ–¹æ¡ˆçš„å‡ºå‘ç‚¹æ˜¯ï¼Œæˆ‘ä»¬å‘ç°å¾®æœåŠ¡è™½ç„¶æå‡äº†å›¢é˜Ÿåä½œçš„æ•ˆç‡ï¼Œä½†æ˜¯ä¹Ÿå¢åŠ äº†ç³»ç»Ÿæ•´ä½“å¤æ‚æ€§ï¼Œå°¤å…¶æ˜¯åœ¨æœåŠ¡éƒ¨ç½²ã€èµ„æºå ç”¨ã€é€šä¿¡å¼€é”€ç­‰æ–¹é¢ã€‚&lt;/p>
&lt;p>å› æ­¤æˆ‘ä»¬å¸Œæœ›å®ç°ä¸€ç§æ–¹æ¡ˆï¼šè®©ä¸šåŠ¡æ—¢èƒ½å¤Ÿä»¥å¾®æœåŠ¡çš„å½¢å¼å¼€å‘ï¼Œåˆèƒ½å¤ŸæŒ‰å•ä½“æœåŠ¡çš„å½¢å¼éƒ¨ç½²ï¼Œä¿—ç§°æ—¢è¦åˆè¦ã€‚&lt;/p>
&lt;p>ç„¶åæˆ‘ä»¬æŠŠè¿™ä¸ªæ–¹æ¡ˆåšå‡ºæ¥äº† â€”â€” æˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ªå·¥å…·ï¼Œèƒ½å¤ŸæŠŠä¸¤ä¸ªå¾®æœåŠ¡çš„ git repo åˆå¹¶åœ¨ä¸€èµ·ï¼Œå¹¶é€šè¿‡ namespace éš”ç¦»å¯èƒ½æœ‰å†²çªçš„èµ„æºï¼Œç„¶åç¼–è¯‘æˆä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºï¼Œç”¨äºéƒ¨ç½²ã€‚&lt;/p>
&lt;p>ç›®å‰åœ¨å­—èŠ‚è·³åŠ¨å†…éƒ¨ï¼Œå·²ç»æœ‰æ•°åç»„æœåŠ¡æ¥å…¥ï¼Œæ•ˆæœæœ€å¥½çš„æœåŠ¡ï¼ŒCPU èŠ‚çœçº¦80%ï¼Œå»¶è¿Ÿåˆ™èƒ½é™ä½æœ€å¤š 67%;å½“ç„¶ï¼Œå®é™…è¡¨ç°ä¹Ÿå–å†³äºè¯¥æœåŠ¡çš„ç‰¹æ€§ï¼Œæ¯”å¦‚è¯·æ±‚åŒ…çš„å¤§å°ã€‚&lt;/p>
&lt;p>ä»¥ä¸Šæ˜¯æˆ‘ä»¬åœ¨äº²å’Œæ€§æ–¹é¢çš„å°è¯•ã€‚&lt;/p>
&lt;h3 id="åºåˆ—åŒ–">åºåˆ—åŒ–&lt;/h3>
&lt;p>åœ¨åºåˆ—åŒ–æ–¹é¢ï¼Œæˆ‘ä»¬ä¹Ÿè¿˜åœ¨åšä¸€äº›åŠªåŠ›å’Œå°è¯•ã€‚&lt;/p>
&lt;h4 id="frugal---ssa-backend">Frugal - SSA Backend&lt;/h4>
&lt;p>é¦–å…ˆæ˜¯ Frugalï¼Œå‰é¢ä»‹ç»è¿‡å®ƒçš„æ€§èƒ½å·²ç»æ˜¾è‘—ä¼˜äºä¼ ç»Ÿçš„ Thrift ç¼–è§£ç ä»£ç ï¼Œä½†å®ƒè¿˜æœ‰æå‡ç©ºé—´ã€‚&lt;/p>
&lt;p>ç›®å‰ Frugal çš„å®ç°æ˜¯ç”¨ Go ç›´æ¥ç”Ÿæˆå¯¹åº”çš„æ±‡ç¼–ä»£ç ã€‚æˆ‘ä»¬åœ¨å…·ä½“å®ç°ä¸­ä¹Ÿåº”ç”¨äº†ä¸€äº›ä¼˜åŒ–æ‰‹æ®µï¼Œä¾‹å¦‚ç”Ÿæˆæ›´ç´§å‡‘çš„ä»£ç ï¼Œå‡å°‘åˆ†æ”¯ç­‰ï¼›ä½†å…‰é æˆ‘ä»¬è‡ªå·±è¿™æ ·å†™ï¼Œæ— æ³•å……åˆ†åˆ©ç”¨ç°æœ‰çš„ç¼–è¯‘å™¨ä¼˜åŒ–æŠ€æœ¯ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/2nd_Kitex_retrospect/frugal_current.png" alt="image">&lt;/p>
&lt;p>æˆ‘ä»¬è®¡åˆ’å°† Frugal é‡æ„åï¼Œèƒ½å¤ŸåŸºäºˆ go struct å…ˆç”Ÿæˆç¬¦åˆ SSA çš„ LLVM IRï¼ˆå³ Intermediate Representationï¼Œä¸­é—´è¡¨ç¤ºï¼‰ï¼Œè¿™æ ·å°±èƒ½å¤Ÿå……åˆ†åˆ©ç”¨ LLVM çš„ç¼–è¯‘ä¼˜åŒ–èƒ½åŠ›ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/2nd_Kitex_retrospect/frugal_future.png" alt="image">&lt;/p>
&lt;p>é¢„è®¡è¿™æ ·æ”¹é€ åï¼Œæ€§èƒ½å¯ä»¥æå‡è‡³å°‘ 30%ã€‚&lt;/p>
&lt;h4 id="æŒ‰éœ€åºåˆ—åŒ–">æŒ‰éœ€åºåˆ—åŒ–&lt;/h4>
&lt;p>åœ¨å¦å¤–ä¸€ä¸ªæ¢ç´¢æ–¹å‘æ˜¯æŒ‰éœ€åºåˆ—åŒ–ï¼Œå…·ä½“åˆå¯ä»¥åˆ†æˆä¸‰å—ã€‚&lt;/p>
&lt;p>é¦–å…ˆæ˜¯ç¼–è¯‘å‰ã€‚æˆ‘ä»¬ç›®å‰å·²ç»å‘å¸ƒäº†ä¸€ä¸ª IDL è£å‰ªå·¥å…·ï¼Œèƒ½å¤Ÿè¯†åˆ«å‡ºæ²¡æœ‰è¢«å¼•ç”¨çš„ç±»å‹ï¼›ä½†æ˜¯è¢«å¼•ç”¨çš„ç±»å‹ä¹Ÿå¯èƒ½æ˜¯ä¸éœ€è¦çš„ï¼Œä¾‹å¦‚Aã€Bä¸¤ä¸ªæœåŠ¡ä¾èµ–åŒä¸€ä¸ªç±»å‹ï¼Œä½†å…¶ä¸­æœ‰ä¸€ä¸ªå­—æ®µå¯èƒ½Aéœ€è¦ï¼ŒBä¸éœ€è¦ã€‚æˆ‘ä»¬è€ƒè™‘åœ¨è¿™ä¸ªå·¥å…·ä¸Šå¢åŠ ç”¨æˆ·æ ‡æ³¨èƒ½åŠ›ï¼Œå…è®¸ç”¨æˆ·æŒ‡å®šä¸éœ€è¦çš„å­—æ®µï¼Œä»è€Œè¿›ä¸€æ­¥é™ä½åºåˆ—åŒ–å¼€é”€ã€‚&lt;/p>
&lt;p>å…¶æ¬¡æ˜¯ç¼–è¯‘ä¸­ã€‚å…¶æ€è·¯æ˜¯æ ¹æ®ç¼–è¯‘å™¨çš„ç¼–è¯‘æŠ¥å‘Šæ¥è·å–å®é™…è¿èƒŒä¸šåŠ¡ä»£ç å¼•ç”¨çš„å­—æ®µè¿›è¡Œè£å‰ªã€‚å…·ä½“çš„æ–¹æ¡ˆå’Œæ­£ç¡®æ€§è¿˜éœ€è¦ä¸€äº›éªŒè¯ã€‚&lt;/p>
&lt;p>æœ€åæ˜¯ç¼–è¯‘åï¼Œåœ¨è¿è¡Œæ—¶ï¼Œä¹Ÿå…è®¸ä¸šåŠ¡é€šè¿‡æŒ‡å®šä¸éœ€è¦çš„å­—æ®µï¼Œä»è€ŒèŠ‚çœç¼–è§£ç çš„å¼€é”€ã€‚&lt;/p>
&lt;h2 id="æ€»ç»“">æ€»ç»“&lt;/h2>
&lt;p>æœ€åæˆ‘ä»¬æ•´ä½“å›é¡¾ä¸€ä¸‹ï¼š&lt;/p>
&lt;p>åœ¨èƒ½åŠ›å‡çº§æ–¹é¢ï¼Œ&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://github.com/cloudwego/kitex">Kitex&lt;/a> é€šè¿‡ &lt;a href="http://github.com/cloudwego/dynamicgo">DynamicGo&lt;/a> ä¼˜åŒ–äº†æ³›åŒ–è°ƒç”¨çš„æ€§èƒ½ï¼Œé«˜æ€§èƒ½ &lt;a href="http://github.com/cloudwego/frugal">Frugal&lt;/a> ç¼–è§£ç å™¨ä¹Ÿå·²ç»ç¨³å®šï¼Œå¯ç”¨äºç”Ÿäº§ç¯å¢ƒäº†ï¼›&lt;/li>
&lt;li>è¿‡å»ä¸€å¹´æ–°å¢äº† fallback æ–¹ä¾¿ä¸šåŠ¡å®ç°è‡ªå®šä¹‰é™çº§ç­–ç•¥ï¼Œå¹¶é€šè¿‡ unknown fields å’Œ session ä¼ é€’æœºåˆ¶æ¥è§£å†³é•¿é“¾è·¯çš„æ”¹é€ é—®é¢˜ï¼›&lt;/li>
&lt;li>æˆ‘ä»¬è¿˜é€šè¿‡æ–‡æ¡£ä¼˜åŒ–ã€demo é¡¹ç›®ã€é—®é¢˜æ’æŸ¥æ•ˆç‡æ”¹é€  å’Œ å¢å¼ºå‘½ä»¤è¡Œå·¥å…·ç­‰æ–¹å¼æå‡äº† Kitex çš„æ˜“ç”¨æ€§ï¼›&lt;/li>
&lt;/ul>
&lt;p>åœ¨ç¤¾åŒºåˆä½œæ–¹é¢ï¼Œ&lt;/p>
&lt;ul>
&lt;li>æˆ‘ä»¬é€šè¿‡ Kitex - Dubbo &lt;a href="https://github.com/kitex-contrib/codec-dubbo">äº’é€šé¡¹ç›®&lt;/a>æ”¯æŒäº† Dubbo çš„ hessian2 åè®®ï¼Œå¯ä»¥å’Œ Dubbo Javaã€Dubbo-Go æ¡†æ¶äº’é€šï¼Œå¹¶ä¸”è¿˜æœ‰åç»­çš„ä¼˜åŒ–ï¼Œä¹Ÿèƒ½åå“º Dubbo ç¤¾åŒºï¼›&lt;/li>
&lt;li>åœ¨é…ç½®ä¸­å¿ƒé›†æˆé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å‘å¸ƒäº† &lt;a href="https://github.com/kitex-contrib/config-nacos">Nacos&lt;/a> æ‰©å±•ï¼Œæ–¹ä¾¿ç”¨æˆ·é›†æˆï¼Œç›®å‰è¿˜åœ¨ç»§ç»­æ¨è¿›å…¶ä»–é…ç½®ä¸­å¿ƒçš„å¯¹æ¥ï¼›&lt;/li>
&lt;/ul>
&lt;p>æœªæ¥è¿˜æœ‰ä¸€äº›æ¢ç´¢æ–¹å‘ï¼Œ&lt;/p>
&lt;ul>
&lt;li>åœ¨åˆå¹¶éƒ¨ç½²æ–¹é¢ï¼Œæˆ‘ä»¬é€šè¿‡äº²å’Œæ€§éƒ¨ç½²ã€ç¼–è¯‘å…¶åˆå¹¶è¿™ä¸¤ç§æ–¹å¼ï¼Œæ—¢èƒ½ä¿ç•™å¾®æœåŠ¡çš„å¥½å¤„ï¼Œåˆèƒ½äº«å—ä¸€éƒ¨åˆ†å•ä½“ä¸æœåŠ¡çš„ä¼˜åŠ¿ï¼›&lt;/li>
&lt;li>åœ¨åºåˆ—åŒ–æ–¹é¢ï¼Œæˆ‘ä»¬è¿˜ç»§ç»­è¿›ä¸€æ­¥ä¼˜åŒ– &lt;a href="http://github.com/cloudwego/frugal">Frugal&lt;/a>ï¼Œå¹¶ä¸”é€šè¿‡ç¼–è¯‘å‰ä¸­åå„ç¯èŠ‚æ¥å®ç°æŒ‰éœ€åºåˆ—åŒ–çš„èƒ½åŠ›ï¼›&lt;/li>
&lt;/ul>
&lt;p>ä»¥ä¸Šæ˜¯åœ¨ CloudWeGo ä¸¤å‘¨å¹´ä¹‹é™…ï¼Œå…³äº &lt;a href="http://github.com/cloudwego/kitex">Kitex&lt;/a> çš„å›é¡¾å’Œå±•æœ›ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰å¸®åŠ©ï¼Œè°¢è°¢ã€‚&lt;/p></description></item><item><title>Blog: Kitex Release v0.8.0</title><link>https://www.cloudwego.io/zh/blog/2023/11/30/kitex-release-v0.8.0/</link><pubDate>Thu, 30 Nov 2023 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2023/11/30/kitex-release-v0.8.0/</guid><description>
&lt;h2 id="é‡è¦å˜æ›´ä»‹ç»">&lt;strong>é‡è¦å˜æ›´ä»‹ç»&lt;/strong>&lt;/h2>
&lt;h3 id="åŠŸèƒ½">åŠŸèƒ½&lt;/h3>
&lt;p>&lt;strong>1. gRPC åè®®æ”¯æŒå¤š Service&lt;/strong>&lt;/p>
&lt;p>Kitex gRPC æ”¯æŒå¤š Service çš„èƒ½åŠ›ï¼Œè¯¦è§ &lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/advanced-feature/multi_service/">Multiple Services&lt;/a>.&lt;/p>
&lt;p>&lt;strong>2. Acquire Kitex RPCInfo&lt;/strong>&lt;/p>
&lt;p>æä¾› kitexutil æ–¹æ³•ä»¥æ–¹ä¾¿ä» RPCInfo è·å– rpc ä¿¡æ¯, è¯¦è§ &lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/basic-feature/acquire_rpcinfo/">Acquire RPC information&lt;/a>.&lt;/p>
&lt;h3 id="ä¼˜åŒ–">ä¼˜åŒ–&lt;/h3>
&lt;p>&lt;strong>1. Map æ³›åŒ–è°ƒç”¨&lt;/strong>&lt;/p>
&lt;p>Map æ³›åŒ–æ”¯æŒé€šè¿‡ SetBinaryWithByteSlice è®¾ç½®å¯¹ binary å­—æ®µè¿”å› []byteã€‚&lt;/p>
&lt;p>&lt;strong>2. RPCInfo å¼‚æ­¥ä½¿ç”¨&lt;/strong>&lt;/p>
&lt;p>å…è®¸å…³é—­ RPCInfo å¤ç”¨ï¼Œç®€åŒ–å¼‚æ­¥ä½¿ç”¨æ–¹å¼ï¼Œè¯¦è§ &lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/basic-feature/acquire_rpcinfo/#12-%E5%BC%82%E6%AD%A5%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F">Acquire RPC information&lt;/a>.&lt;/p>
&lt;h3 id="å…¶å®ƒ">å…¶å®ƒ&lt;/h3>
&lt;p>å‡çº§ Frugal &lt;a href="https://github.com/cloudwego/frugal/releases/tag/v0.1.12">v0.1.12&lt;/a>, ä¿®å¤åŒæ—¶ä½¿ç”¨ frugal å’Œ sonic æ—¶æå°æ¦‚ç‡å‡ºç°çš„å¹¶å‘é—®é¢˜ã€‚
å¼ºçƒˆå»ºè®®åŒæ—¶å‡çº§ frugal å’Œ sonic åˆ°è¾ƒæ–°çš„ç‰ˆæœ¬ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span> go get github.com/cloudwego/frugal@latest
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> go get github.com/bytedance/sonic@latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="è¯¦ç»†å˜æ›´">&lt;strong>è¯¦ç»†å˜æ›´&lt;/strong>&lt;/h2>
&lt;h3 id="feature">Feature:&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1051">#1051&lt;/a>] feat(grpc): support gRPC multi-service on a server&lt;br>
[&lt;a href="https://github.com/cloudwego/kitex/pull/1189">#1189&lt;/a>] feat(rpcinfo): add kitexutil methods for the convenience to fetch rpc information from RPCInfo&lt;br>
[&lt;a href="https://github.com/cloudwego/kitex/pull/1176">#1176&lt;/a>] feat(tool): add an environment variable to make it easier to debug kitex tool&lt;br>
[&lt;a href="https://github.com/cloudwego/kitex/pull/1173">#1173&lt;/a>] feat(rpcinfo): allow disable rpcinfo reuse for async reference&lt;br>
[&lt;a href="https://github.com/cloudwego/kitex/pull/1172">#1172&lt;/a>] feat(retry): client.WithSpecifiedResultRetry should have higher priority&lt;br>
[&lt;a href="https://github.com/cloudwego/kitex/pull/1150">#1150&lt;/a>] feat(proxy): add an interface to customize proxy middleware to replace the default implementation&lt;br>
[&lt;a href="https://github.com/cloudwego/kitex/pull/1159">#1159&lt;/a>] feat(generic): support returning []byte for binary fields in map generic&lt;br>
[&lt;a href="https://github.com/cloudwego/kitex/pull/1153">#1153&lt;/a>] feat(retry): add Extra for retry.FailurePolicy for better extension&lt;/p>
&lt;h3 id="optimize">Optimize:&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1187">#1187&lt;/a>] optimize(tool): add an option to keep resp for kitex tool&lt;br>
[&lt;a href="https://github.com/cloudwego/kitex/pull/1183">#1183&lt;/a>] optimize(meshheader): retrieve rip from meshheader and write it to TransInfo&lt;br>
[&lt;a href="https://github.com/cloudwego/kitex/pull/1178">#1178&lt;/a>] optimize(bizErr): recurse to obtain BizErr to avoid additional Error encapsulation in the middle, resulting in unwrap results that are not BizErr&lt;/p>
&lt;h3 id="fix">Fix:&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1126">#1126&lt;/a>] fix(generic): the issue of structs cache of generic call has dirty data under multiple services scene&lt;br>
[&lt;a href="https://github.com/cloudwego/kitex/pull/1168">#1168&lt;/a>] fix(tool): remove the pointer to java.Object in generated file for &lt;a href="https://github.com/kitex-contrib/codec-dubbo">CodecDubbo&lt;/a>&lt;br>
[&lt;a href="https://github.com/cloudwego/kitex/pull/1169">#1169&lt;/a>] fix(tool): empty struct generate wrong struct&lt;br>
[&lt;a href="https://github.com/cloudwego/kitex/pull/1166">#1166&lt;/a>] fix(generic): issue of deep copy function generation when map key type is binary&lt;br>
[&lt;a href="https://github.com/cloudwego/kitex/pull/1155">#1155&lt;/a>] fix(tool): add import package &amp;lsquo;context&amp;rsquo; for gRPC client.go&lt;/p>
&lt;h3 id="tests">Tests:&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1177">#1177&lt;/a>] test: avoid port conflict&lt;/p>
&lt;h3 id="chore">Chore:&lt;/h3>
&lt;p>[&lt;a href="https://github.com/cloudwego/kitex/pull/1190">#1190&lt;/a>] chore: update thriftgo version to v0.3.3&lt;br>
[&lt;a href="https://github.com/cloudwego/kitex/pull/1186">#1186&lt;/a>] chore: update readme with examples and new blogs&lt;br>
[&lt;a href="https://github.com/cloudwego/kitex/pull/1185">#1185&lt;/a>] chore: add ci for windows&lt;br>
[&lt;a href="https://github.com/cloudwego/kitex/pull/1182">#1182&lt;/a>] chore: update dynamicgo to v0.1.6&lt;br>
[&lt;a href="https://github.com/cloudwego/kitex/pull/1152">#1152&lt;/a>] chore: update dynamicgo and sonic version&lt;br>
[&lt;a href="https://github.com/cloudwego/kitex/pull/1164">#1164&lt;/a>] chore: update frugal to v0.1.12 and allow disable frugal by build tag&lt;br>
[&lt;a href="https://github.com/cloudwego/kitex/pull/1161">#1161&lt;/a>] chore: update frugal to v0.1.10&lt;br>
[&lt;a href="https://github.com/cloudwego/kitex/pull/1157">#1157&lt;/a>] chore: update frugal to v0.1.9&lt;br>
[&lt;a href="https://github.com/cloudwego/kitex/pull/1151">#1151&lt;/a>] chore(test): upgrade mockey to latest to compatible with Go1.21&lt;/p></description></item><item><title>Blog: Volo 0.8.0 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2023/10/23/volo-0.8.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Mon, 23 Oct 2023 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2023/10/23/volo-0.8.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;p>Volo 0.8.0 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦ä½¿ç”¨äº† AFITï¼ˆAsync Fn In Traitï¼‰ å’Œ RPITITï¼ˆReturn Position Impl Trait In Traitsï¼‰ è¿™ä¸¤ä¸ªåˆšåˆš stabilized çš„ feature é‡æ„äº† Service trait å’Œä¹‹å‰æ‰€æœ‰ç”¨äº† async_trait çš„åœ°æ–¹ï¼Œé™¤äº†ä¼šæœ‰ç•¥å¾®çš„æ€§èƒ½æå‡å¤–ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œæ¥ä¸‹æ¥å†™ Service å¯ä»¥ç›´æ¥å†™ async fn call äº†ï¼Œæ˜“ç”¨æ€§ä¼šæœ‰è¾ƒå¤§çš„æå‡ã€‚&lt;/p>
&lt;h2 id="break-change">Break Change&lt;/h2>
&lt;h3 id="service-trait-é‡æ„">Service trait é‡æ„&lt;/h3>
&lt;p>åœ¨æœ€æ–°çš„ nightly ä¸­ï¼ŒRust å¤‡å—ç©ç›®çš„ä¸¤ä¸ªé‡é‡çº§ feature AFITï¼ˆAsync Fn In Traitï¼‰å’Œ RPITITï¼ˆReturn Position Impl Trait In Traitsï¼‰å·²ç»ç¨³å®šäº†ï¼Œä¹Ÿå°±æ„å‘³ç€ä¸¤ä¸ªæœˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ stable rust ä¸­ä½¿ç”¨ volo äº†ã€‚&lt;/p>
&lt;p>è¿™é‡Œå…ˆç®€å•ä»‹ç»ä¸€ä¸‹è¿™ä¸¤ä¸ª featureï¼š&lt;/p>
&lt;h4 id="rpitit">RPITIT&lt;/h4>
&lt;p>RPITIT çš„æ„æ€æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ trait é‡Œé¢ï¼Œåœ¨å‡½æ•°è¿”å›çš„åœ°æ–¹å†™ impl trait äº†ï¼Œä¹‹å‰æˆ‘ä»¬åªèƒ½åœ¨æ™®é€šçš„å‡½æ•°é‡Œé¢å†™ï¼Œæ¯”å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">fetch&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">key&lt;/span>: &lt;span style="color:#000">FastStr&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#000">impl&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Future&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Output&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87">Result&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Item&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è€Œç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ trait é‡Œé¢å†™äº†ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">trait&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Fetcher&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">fetch&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">key&lt;/span>: &lt;span style="color:#000">FastStr&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#000">impl&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Future&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Output&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87">Result&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Item&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&amp;gt;&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="afit">AFIT&lt;/h4>
&lt;p>AFIT çš„åŠŸèƒ½å°±æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ trait é‡Œé¢å®šä¹‰ async fn äº†ï¼ˆå…¶å®æœ¬è´¨ä¸Šæ˜¯ RPITIT çš„è¯­æ³•ç³–ï¼‰ï¼Œå¹¶ä¸”ä¸éœ€è¦ä½¿ç”¨ #[async_trait] è¿™ä¸ªå®äº†ï¼Œæ¯”å¦‚ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">trait&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Fetcher&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">async&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">fetch&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">key&lt;/span>: &lt;span style="color:#000">FastStr&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#204a87">Result&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Item&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å®é™…ä¸Šï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œç¼–è¯‘å™¨ä¼šå°†è¿™ä¸ª async fn è½¬æ¢æˆä¸Šè¿°çš„ RPITIT çš„å½¢å¼ã€‚&lt;/p>
&lt;p>å¦‚éœ€äº†è§£æ›´å¤šï¼Œå¯ä»¥å‚è€ƒï¼šhttps://github.com/rust-lang/rust/pull/115822&lt;/p>
&lt;h4 id="service-æ–°å®šä¹‰">Service æ–°å®šä¹‰&lt;/h4>
&lt;p>æ–°ç‰ˆ Service Trait çš„åŸå§‹å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">pub&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">trait&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Service&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Cx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Request&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">/// Responses given by the service.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Response&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">/// Errors produced by the service.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Error&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">/// Process the request and return the response asynchronously.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">call&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;s&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#c4a000">&amp;#39;cx&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;s&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">cx&lt;/span>: &lt;span style="color:#204a87;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;cx&lt;/span> &lt;span style="color:#000">mut&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Cx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req&lt;/span>: &lt;span style="color:#000">Request&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#000">impl&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Future&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Output&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87">Result&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#3465a4">Self&lt;/span>::&lt;span style="color:#000">Response&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#3465a4">Self&lt;/span>::&lt;span style="color:#000">Error&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87">Send&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸€ä¸ªæ›´å®¹æ˜“ç†è§£çš„å®šä¹‰æ˜¯è¿™æ ·çš„ï¼Œå¤§å®¶ç›´æ¥è¿™ä¹ˆç†è§£å³å¯ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">pub&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">trait&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Service&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Cx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Request&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">/// Responses given by the service.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Response&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">/// Errors produced by the service.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Error&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">/// Process the request and return the response asynchronously.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">async&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">call&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;s&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#c4a000">&amp;#39;cx&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;s&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">cx&lt;/span>: &lt;span style="color:#204a87;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;cx&lt;/span> &lt;span style="color:#000">mut&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Cx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req&lt;/span>: &lt;span style="color:#000">Request&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#204a87">Result&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#3465a4">Self&lt;/span>::&lt;span style="color:#000">Response&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#3465a4">Self&lt;/span>::&lt;span style="color:#000">Error&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸ä¹‹å‰çš„å®šä¹‰å¯¹æ¯”ï¼Œå»æ‰äº† type Future å…³è”ç±»å‹ï¼ŒåŒæ—¶ä¿®æ”¹äº† call ä¸­ç”Ÿå‘½å‘¨æœŸçš„é¡ºåºï¼ˆä¹‹å‰çš„é¡ºåºä¸º&lt;code>call&amp;lt;'cx, 's&amp;gt;&lt;/code>ï¼Œæ˜¯ä¸€å¼€å§‹å†™çš„æ—¶å€™ typo å†™åäº†ï¼Œè¶è¿™ä¸ªæœºä¼šæ”¹å›æ¥ï¼‰ã€‚&lt;/p>
&lt;h4 id="è¿ç§»æŒ‡å—">è¿ç§»æŒ‡å—&lt;/h4>
&lt;ol>
&lt;li>Rust ç¼–è¯‘å™¨æ›´æ–°åˆ°æœ€æ–° nightlyï¼ˆrustup updateï¼‰åŠæ‰€æœ‰ä¾èµ–ï¼ˆvoloã€pilotaã€motoreï¼‰å‡çº§åˆ°æœ€æ–°ç‰ˆ&lt;/li>
&lt;li>cargo check çœ‹çœ‹å“ªé‡ŒæŠ¥é”™ï¼Œå¯èƒ½ä¼šé‡åˆ°æ¯”å¦‚&lt;code>type Future is not a member&lt;/code>ã€&lt;code>associated type Future not found&lt;/code>ç­‰ç±»ä¼¼é”™è¯¯ï¼Œæˆ‘ä»¬ä»¥å¦‚ä¸‹&lt;code>Service&lt;/code>ä¸ºä¾‹ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">impl&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Cx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Req&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">S&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Service&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Cx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Req&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">for&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">LogService&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">S&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">where&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">S&lt;/span>: &lt;span style="color:#000">Service&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Cx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Req&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87">Send&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87">&amp;#39;static&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87">Sync&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Cx&lt;/span>: &lt;span style="color:#000">Context&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Config&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">volo_grpc&lt;/span>::&lt;span style="color:#000">context&lt;/span>::&lt;span style="color:#000">Config&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87">&amp;#39;static&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87">Send&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Req&lt;/span>: &lt;span style="color:#204a87">Send&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87">&amp;#39;static&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Response&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">S&lt;/span>::&lt;span style="color:#000">Response&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Error&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">S&lt;/span>::&lt;span style="color:#000">Error&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Future&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;cx&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">impl&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Future&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Output&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87">Result&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#3465a4">Self&lt;/span>::&lt;span style="color:#000">Response&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#3465a4">Self&lt;/span>::&lt;span style="color:#000">Error&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#c4a000">&amp;#39;cx&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">call&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;cx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#c4a000">&amp;#39;s&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;s&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">cx&lt;/span>: &lt;span style="color:#204a87;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;cx&lt;/span> &lt;span style="color:#000">mut&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Cx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req&lt;/span>: &lt;span style="color:#000">Req&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#000">Self&lt;/span>::&lt;span style="color:#000">Future&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;cx&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">where&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#c4a000">&amp;#39;s&lt;/span>: &lt;span style="color:#c4a000">&amp;#39;cx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">async&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">move&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">let&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">tick&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">quanta&lt;/span>::&lt;span style="color:#000">Instant&lt;/span>::&lt;span style="color:#000">now&lt;/span>&lt;span style="color:#000;font-weight:bold">();&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">let&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">ret&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">inner&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">call&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">cx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req&lt;/span>&lt;span style="color:#000;font-weight:bold">).&lt;/span>&lt;span style="color:#204a87;font-weight:bold">await&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">let&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">elapsed&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">quanta&lt;/span>::&lt;span style="color:#000">Instant&lt;/span>::&lt;span style="color:#000">now&lt;/span>&lt;span style="color:#000;font-weight:bold">().&lt;/span>&lt;span style="color:#000">duration_since&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">tick&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">tracing&lt;/span>::&lt;span style="color:#000">info!&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">rpc_type&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#34;rpcAccess&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">cost&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">elapsed&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">as_micros&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">as&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">i64&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">ret&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="3">
&lt;li>æŠŠ&lt;code>type Future&lt;/code>è¿™è¡Œç›´æ¥å»æ‰&lt;/li>
&lt;li>æŠŠ&lt;code>fn call&amp;lt;'cx, 's&amp;gt;&lt;/code>ä¸­çš„ç”Ÿå‘½å‘¨æœŸä½ç½®å¯¹è°ƒï¼Œå¹¶å»æ‰ä¸‹é¢çš„&lt;code>where&lt;/code>è¯­å¥&lt;/li>
&lt;li>åœ¨&lt;code>fn call&lt;/code>å‰é¢åŠ ä¸ª&lt;code>async&lt;/code>ï¼Œç„¶åæŠŠ&lt;code>Self::Future&amp;lt;'cx&amp;gt;&lt;/code>è¿™éƒ¨åˆ†ï¼Œæ”¹æˆ&lt;code>Result&amp;lt;Self::Response, Self::Error&amp;gt;&lt;/code>ï¼Œå¹¶å»æ‰å‡½æ•°ä½“é‡Œé¢çš„&lt;code>async move&lt;/code>&lt;/li>
&lt;li>æœ€ç»ˆæ”¹å®Œçš„&lt;code>Service&lt;/code>å¦‚ä¸‹ï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">impl&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Cx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Req&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">S&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Service&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Cx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Req&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">for&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">LogService&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">S&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">where&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">S&lt;/span>: &lt;span style="color:#000">Service&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Cx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Req&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87">Send&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87">&amp;#39;static&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87">Sync&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Cx&lt;/span>: &lt;span style="color:#000">Context&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Config&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">volo_grpc&lt;/span>::&lt;span style="color:#000">context&lt;/span>::&lt;span style="color:#000">Config&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87">&amp;#39;static&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87">Send&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Req&lt;/span>: &lt;span style="color:#204a87">Send&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87">&amp;#39;static&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Response&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">S&lt;/span>::&lt;span style="color:#000">Response&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Error&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">S&lt;/span>::&lt;span style="color:#000">Error&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">async&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">call&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;s&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#c4a000">&amp;#39;cx&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;s&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">cx&lt;/span>: &lt;span style="color:#204a87;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;cx&lt;/span> &lt;span style="color:#000">mut&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Cx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req&lt;/span>: &lt;span style="color:#000">Req&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#204a87">Result&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#3465a4">Self&lt;/span>::&lt;span style="color:#000">Response&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#3465a4">Self&lt;/span>::&lt;span style="color:#000">Error&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">let&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">tick&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">quanta&lt;/span>::&lt;span style="color:#000">Instant&lt;/span>::&lt;span style="color:#000">now&lt;/span>&lt;span style="color:#000;font-weight:bold">();&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">let&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">ret&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">inner&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">call&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">cx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req&lt;/span>&lt;span style="color:#000;font-weight:bold">).&lt;/span>&lt;span style="color:#204a87;font-weight:bold">await&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">let&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">elapsed&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">quanta&lt;/span>::&lt;span style="color:#000">Instant&lt;/span>::&lt;span style="color:#000">now&lt;/span>&lt;span style="color:#000;font-weight:bold">().&lt;/span>&lt;span style="color:#000">duration_since&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">tick&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">tracing&lt;/span>::&lt;span style="color:#000">info!&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">rpc_type&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#34;rpcAccess&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">cost&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">elapsed&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">as_micros&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">as&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">i64&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">ret&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="handler-é‡æ„">Handler é‡æ„&lt;/h3>
&lt;p>ä¹‹å‰ç‰ˆæœ¬ä¸­ï¼ŒVolo ç”Ÿæˆçš„ç”¨æˆ·çš„ handler ä¸ºäº†æ˜“ç”¨æ€§ä½¿ç”¨äº† async_traitï¼Œä½†å¾—ç›Šäº AFITï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ trait ä¸­å†™ async fn äº†ï¼Œå› æ­¤æˆ‘ä»¬å»æ‰äº† async traitï¼ˆå¯ä»¥å‡å°‘ä¸€æ¬¡ Box å¼€é”€ï¼‰ã€‚&lt;/p>
&lt;p>å› æ­¤ï¼Œå‡çº§åå¯èƒ½ä¸€å¼€å§‹ä¼šé‡åˆ°ç±»ä¼¼â€œlifetime parameters or bounds not matchâ€çš„é”™è¯¯ï¼Œé‡åˆ°è¿™ç§é—®é¢˜ç›´æ¥å»æ‰&lt;code>#[async_trait]&lt;/code>å®å³å¯ã€‚&lt;/p>
&lt;h2 id="å®Œæ•´-release-note">å®Œæ•´ Release Note&lt;/h2>
&lt;p>å®Œæ•´çš„ Release Note å¯ä»¥å‚è€ƒï¼š&lt;a href="https://github.com/cloudwego/volo/compare/volo-0.5.4...volo-0.8.0">Volo Changelog&lt;/a>&lt;/p></description></item><item><title>Blog: Netpoll v0.5.1 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2023/10/18/netpoll-v0.5.1-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Wed, 18 Oct 2023 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2023/10/18/netpoll-v0.5.1-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;h2 id="fix">Fix&lt;/h2>
&lt;ol>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/289">#289&lt;/a>] fix: è§£å†³å½“å»ºç«‹å»ºç«‹è¶…æ—¶æ—¶ï¼Œé‡åˆ° panic æˆ– fault é”™è¯¯&lt;/li>
&lt;/ol>
&lt;h2 id="optimise">Optimise&lt;/h2>
&lt;ol>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/290">#290&lt;/a>] optimise: ç§»é™¤å·²ç»ä¸ä½¿ç”¨çš„ inputBarrier&lt;/li>
&lt;/ol></description></item><item><title>Blog: Kitex v0.7.2 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2023/09/27/kitex-v0.7.2-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Wed, 27 Sep 2023 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2023/09/27/kitex-v0.7.2-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;h2 id="é‡è¦å˜æ›´ä»‹ç»">é‡è¦å˜æ›´ä»‹ç»&lt;/h2>
&lt;h3 id="åŠŸèƒ½">åŠŸèƒ½&lt;/h3>
&lt;p>&lt;strong>1. é‡è¯•: é™åˆ¶é‡è¯•è¯·æ±‚å æ¯”&lt;/strong>&lt;/p>
&lt;p>è¯¥ç‰¹æ€§ä¼˜åŒ–äº†å¤‡ç”¨è¯·æ±‚çš„å¯ç”¨æ€§ï¼šå¦‚æŸä¸ªè¯·æ±‚è¶…è¿‡é‡è¯•ç­‰å¾…æ—¶é—´ï¼Œä¼šè§¦å‘ä¸€ä¸ªå¤‡ç”¨è¯·æ±‚ï¼Œä½†å¦‚æœè¯¥è¯·æ±‚åœ¨RPCè¶…æ—¶é˜ˆå€¼ä¹‹å†…ï¼Œæœ€ç»ˆå¯ä»¥æ­£å¸¸å¤„ç†ï¼Œå› è€Œä¸ä¼šè¢«å½“åšå¤±è´¥è¯·æ±‚ï¼Œè¿™ä¼šåœ¨å¶å‘ç½‘ç»œå¼‚å¸¸æ—¶å¯¼è‡´å¤§é‡é‡è¯•è¯·æ±‚ï¼Œå¢åŠ æœåŠ¡ç«¯å‹åŠ›ç”šè‡³å¼•èµ·é›ªå´©ã€‚&lt;/p>
&lt;p>å»ºè®®æ›´æ–°ç°æœ‰ä»£ç ï¼š&lt;/p>
&lt;ol>
&lt;li>ä½¿ç”¨ &lt;code>retry.NewRetryContainerWithPercentageLimit()&lt;/code> æ¥æ„é€  RetryContainerï¼Œé™åˆ¶é‡è¯•è¯·æ±‚å æ¯”ï¼›&lt;/li>
&lt;li>åœ¨ Client åˆå§‹åŒ–æ—¶æ·»åŠ é€‰é¡¹ &lt;code>client.WithCloseCallbacks(container.Close)&lt;/code>ï¼Œä»¥ä¾¿åœ¨ client è¢«å›æ”¶æ—¶é‡Šæ”¾ç›¸å…³èµ„æºã€‚&lt;/li>
&lt;/ol>
&lt;h3 id="ä¼˜åŒ–">ä¼˜åŒ–&lt;/h3>
&lt;p>&lt;strong>1. gRPC&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>unary è¯·æ±‚å‘é€ END_STREAM flag&lt;/li>
&lt;li>ä¿®å¤ grpc streaming ååä¸‹é™ä¸å‹ç¼©å™¨é€‰æ‹©é€»è¾‘&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>2. é•¿è¿æ¥æ± &lt;/strong>&lt;/p>
&lt;p>å¦‚æœæ²¡æœ‰æŒ‡å®š &lt;code>MaxIdleGlobal&lt;/code> åˆ™é»˜è®¤ä¸é™åˆ¶ï¼Œç®€åŒ–é•¿è¿æ¥æ± çš„ä½¿ç”¨é…ç½®ã€‚&lt;/p>
&lt;h3 id="å…¶ä»–">å…¶ä»–&lt;/h3>
&lt;ul>
&lt;li>æ›´æ–° netpoll è‡³ &lt;a href="https://github.com/cloudwego/netpoll/releases/tag/v0.5.0">v0.5.0&lt;/a>&lt;/li>
&lt;li>å‡çº§ frugal åˆ° &lt;a href="https://github.com/cloudwego/frugal/releases/tag/v0.1.8">v0.1.8&lt;/a>ï¼Œæ”¯æŒåœ¨ go1.21 ç¼–è¯‘æ—¶ä½¿ç”¨ frugal (æ³¨: frugal æ—§ç‰ˆæœ¬ä¸æ”¯æŒ go1.21)&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="è¯¦ç»†å˜æ›´">è¯¦ç»†å˜æ›´&lt;/h2>
&lt;h3 id="feature">Feature:&lt;/h3>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1117">#1117&lt;/a>] feat(retry): support retry percentage limit&lt;/li>
&lt;/ul>
&lt;h3 id="optimize">Optimize:&lt;/h3>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1033">#1033&lt;/a>] optimize: no need to check svcInfo twice&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1115">#1115&lt;/a>] optimize: rm outdated framed suggestion&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1095">#1095&lt;/a>] optimize: add K_METHOD in serviceinline ctx&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1107">#1107&lt;/a>] optimize(connpool): set maxIdleGlobal to no limit if not set&lt;/li>
&lt;/ul>
&lt;h3 id="fix">Fix:&lt;/h3>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1116">#1116&lt;/a>] fix: use the last rpcinfo to trace&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1104">#1104&lt;/a>] fix: move limiter handler to the last of the inbound handler to get rpcinfo in custom limiter&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1103">#1103&lt;/a>] fix: reset all fields of netpoll byte buffer when recycle it&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1106">#1106&lt;/a>] fix(grpc): fix grpc streaming tps decreasing and the selection logic of compressor&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1114">#1114&lt;/a>] fix(gRPC): client send END_STREAM flag in unary call (#1066)&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1096">#1096&lt;/a>] fix(tool): add backquote to handle filepath string invalid syntax under windows os&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1098">#1098&lt;/a>] fix(tool): fix import for codegen template when using slim and unknown fields&lt;/li>
&lt;/ul>
&lt;h3 id="tests">Tests:&lt;/h3>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1124">#1124&lt;/a>] test: fix codegen script&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1122">#1122&lt;/a>] test: add codegen test&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1119">#1119&lt;/a>] test(connpool): modify the idleTimeout&lt;/li>
&lt;/ul>
&lt;h2 id="chore">Chore:&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1133">#1133&lt;/a>] chore: update version v0.7.2&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1125">#1125&lt;/a>] chore: upgrade netpoll to v0.5.0&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1123">#1123&lt;/a>] perf: replace concurrent string builder with lock&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1118">#1118&lt;/a>] perf: optimize remote addr setter interface to reduce lock cost of Address()&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1110">#1110&lt;/a>] chore: upgrade netpoll to v0.4.2 pre-release&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1061">#1061&lt;/a>] chore: netpoll pre release v0.4.2&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1100">#1100&lt;/a>] chore: enable frugal on go1.21&lt;/li>
&lt;/ul></description></item><item><title>Blog: Netpoll v0.5.0 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2023/09/26/netpoll-v0.5.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Tue, 26 Sep 2023 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2023/09/26/netpoll-v0.5.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;h2 id="optimize">Optimize&lt;/h2>
&lt;ol>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/274">#274&lt;/a>] optimize: æ·»åŠ åˆå§‹ bookSize åˆ° 8KB ä»¥å‡å°‘è¿æ¥æœ€åˆè¯»å–æ—¶çš„å¼€é”€&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/273">#273&lt;/a>] optimize: å½“è¯»å–ä¸€ä¸ªå·²ç»å…³é—­è¿æ¥æ—¶ï¼Œå¿½ç•¥ EOF é”™è¯¯&lt;/li>
&lt;/ol>
&lt;h2 id="fix">Fix&lt;/h2>
&lt;ol>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/283">#283&lt;/a>] fix: ä¿æŠ¤ operator ä¸è¢« detach ä¸¤æ¬¡&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/280">#280&lt;/a>] fix: ä¿®å¤ detach operator race é—®é¢˜&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/278">#278&lt;/a>] fix: OnRequest åº”è¯¥ç­‰å¾…æ‰€æœ‰ readable æ•°æ®éƒ½è¢«æ¶ˆè´¹å®Œæ¯•&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/276">#276&lt;/a>] fix: ç¼ºå°‘ import åº“å¼•å…¥çš„ç¼–è¯‘é”™è¯¯&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/238">#238&lt;/a>] fix: å½“ server çš„ OnRequest panic æ—¶ï¼Œåº”è¯¥å…³é—­è¿æ¥&lt;/li>
&lt;/ol>
&lt;h2 id="docs">Docs&lt;/h2>
&lt;ol>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/243">#243&lt;/a>] docs: ç§»é™¤è¿‡æ—¶ä¿¡æ¯&lt;/li>
&lt;/ol></description></item><item><title>Blog: Hertz v0.7.0 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2023/09/26/hertz-v0.7.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Tue, 26 Sep 2023 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2023/09/26/hertz-v0.7.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;p>Hertz v0.7.0 ç‰ˆæœ¬ä¸­ï¼Œé™¤äº†å¸¸è§„è¿­ä»£ä¼˜åŒ–ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¸¦æ¥äº†ä¸€ä¸ªé‡è¦ featureã€‚&lt;/p>
&lt;h2 id="å‚æ•°ç»‘å®šé‡æ„">å‚æ•°ç»‘å®šé‡æ„&lt;/h2>
&lt;p>åœ¨ Hertz v0.7.0 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬é‡æ„äº† hertz å‚æ•°ç»‘å®š&lt;/p>
&lt;blockquote>
&lt;p>&lt;a href="https://github.com/cloudwego/hertz/pull/541">https://github.com/cloudwego/hertz/pull/541&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;h3 id="é‡æ„è¯´æ˜">é‡æ„è¯´æ˜&lt;/h3>
&lt;p>åœ¨ Hertz v0.7.0 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬é‡æ„äº†å‚æ•°ç»‘å®šèƒ½åŠ›ï¼Œå°†å‚æ•°ç»‘å®šèƒ½åŠ›æ”¶æ•›åˆ°æ¡†æ¶æœ¬èº«ï¼Œä»¥æ›´å¥½åœ°æ”¯æŒç”¨æˆ·çš„éœ€æ±‚ã€‚æœ¬æ¬¡é‡æ„ä¸»è¦æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>åŠŸèƒ½ä¸€è‡´ï¼š
&lt;ul>
&lt;li>Binderï¼šé‡æ„ååœ¨ Hertz å†…éƒ¨å®ç°äº†ä¸€ä¸ªé»˜è®¤çš„ Binderï¼Œå…¶åŠŸèƒ½ä¸é‡æ„å‰å®Œå…¨å¯¹é½ï¼Œå¹¶å°†é‡æ„å‰çš„ç»‘å®šèƒ½åŠ›ä»¥æ‹“å±•çš„å½¢å¼å®ç°åœ¨ hertz-contrib ä¸‹&lt;/li>
&lt;li>Validatorï¼š ä»ä½¿ç”¨ go-tagexpr ä½œä¸ºé»˜è®¤å®ç°ï¼Œä¿è¯åŠŸèƒ½ä¸€è‡´&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>é…ç½®æ”¶æ•›ï¼š
&lt;ul>
&lt;li>é‡æ„å‰ï¼šå‚æ•°ç»‘å®šçš„è¡Œä¸ºå¤§å¤šé€šè¿‡å…¨å±€å‚æ•°çš„å½¢å¼è¿›è¡Œé…ç½®ï¼Œå¯èƒ½å¯¼è‡´å¤šä¸ªç»„ä»¶å‡ºç°é…ç½®å†²çª&lt;/li>
&lt;li>é‡æ„åï¼šä»¥ BindConfig å’Œ ValidateConfig çš„ç»“æ„é€šè¿‡ &amp;lsquo;WithOption&amp;rsquo; çš„å½¢å¼æ³¨å…¥åˆ° Hertz Engine ä¸­ï¼Œæ—¢èƒ½ç»Ÿä¸€é…ç½®å½¢å¼ï¼Œåˆèƒ½é¿å…é…ç½®å†²çªçš„é—®é¢˜&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>å¯è‡ªå®šä¹‰ Binder å’Œ Validatorï¼š
&lt;ul>
&lt;li>è‡ªå®šä¹‰ Binderï¼šå¯ä½¿ç”¨ &amp;ldquo;WithCustomBinder&amp;rdquo; æ¥æ³¨å…¥è‡ªå®šä¹‰çš„ Binderï¼Œç›®å‰å·²æœ‰æ‹“å±• hertz-contrib/binding/go_tagexpr&lt;/li>
&lt;li>è‡ªå®šä¹‰ Validatorï¼šå¯ä½¿ç”¨ &amp;ldquo;WithCustomValidator&amp;rdquo; æ¥æ³¨å…¥è‡ªå®šä¹‰çš„ Validatorï¼Œç›®å‰å·²ç»å°† go-playground/validator è¿›è¡Œäº†æ‹“å±•&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>æ€§èƒ½æå‡ï¼šé‡æ„åç»‘å®šæ€§èƒ½è¾ƒä¹‹å‰æœ‰æå‡ï¼Œè¯¦è§åæ–‡å‹æµ‹æ•°æ®&lt;/li>
&lt;/ul>
&lt;h3 id="ä½¿ç”¨æ–¹æ³•">ä½¿ç”¨æ–¹æ³•&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">package&lt;/span> &lt;span style="color:#000">main&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">import&lt;/span> &lt;span style="color:#000;font-weight:bold">(&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;github.com/cloudwego/hertz/pkg/app/server/binding&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;github.com/cloudwego/hertz/pkg/app/server&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">func&lt;/span> &lt;span style="color:#000">main&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">bindConfig&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">:=&lt;/span> &lt;span style="color:#000">binding&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">NewBindConfig&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">bindConfig&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">LooseZeroMode&lt;/span> &lt;span style="color:#000;font-weight:bold">=&lt;/span> &lt;span style="color:#204a87;font-weight:bold">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">h&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">:=&lt;/span> &lt;span style="color:#000">server&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">New&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">server&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">WithBindConfig&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">bindConfig&lt;/span>&lt;span style="color:#000;font-weight:bold">))&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ce5c00;font-weight:bold">...&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">h&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Spin&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="å‹æµ‹æ•°æ®">å‹æµ‹æ•°æ®&lt;/h3>
&lt;p>&lt;a href="https://github.com/cloudwego/hertz-benchmark/tree/main/binding">https://github.com/cloudwego/hertz-benchmark/tree/main/binding&lt;/a>&lt;/p>
&lt;p>å®Œæ•´çš„ Release Note å¯ä»¥å‚è€ƒï¼š&lt;/p>
&lt;ul>
&lt;li>Hertz: &lt;a href="https://github.com/cloudwego/hertz/releases/tag/v0.7.0">https://github.com/cloudwego/hertz/releases/tag/v0.7.0&lt;/a>&lt;/li>
&lt;li>Hz(è„šæ‰‹æ¶): &lt;a href="https://github.com/cloudwego/hertz/releases/tag/cmd%2Fhz%2Fv0.7.0">https://github.com/cloudwego/hertz/releases/tag/cmd%2Fhz%2Fv0.7.0&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Blog: Volo 0.5.4 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2023/08/28/volo-0.5.4-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Mon, 28 Aug 2023 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2023/08/28/volo-0.5.4-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;p>Volo 0.5.4 ç‰ˆæœ¬ä¸­ï¼Œé™¤äº†å¸¸è§„ bugfix ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›æ–°çš„ feature å¼•å…¥ã€‚&lt;/p>
&lt;h2 id="thrift-åè®®æ”¯æŒ-unknown-fields">Thrift åè®®æ”¯æŒ Unknown Fields&lt;/h2>
&lt;h3 id="motivation">Motivation&lt;/h3>
&lt;p>ä¿ç•™ Thrift è§£ç ä¸­æœªè¢«è¯†åˆ«çš„å­—æ®µï¼Œä½¿ç”¨åœºæ™¯æ¯”å¦‚ä»£ç†ä½¿ç”¨IDLçš„å­é›†è§£æå®Œæ•´æ•°æ®ï¼Œå…¶ä¸­æœªè¯†åˆ«çš„æ•°æ®å°†ä¿ç•™æˆä¸ºæœªè¯†åˆ«å­—æ®µï¼Œå¹¶é€ä¼ åˆ°ä¸‹æ¸¸ï¼Œå¯ä»¥å‡å°‘æœ¬æœåŠ¡ä¸å¿…è¦çš„ IDL æ›´æ–°æˆ–è€…åªè§£æå…³å¿ƒçš„å­é›†éƒ¨åˆ†ã€‚&lt;/p>
&lt;h3 id="solution">Solution&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>åœ¨è§£ç  read æ­¥éª¤æ—¶ï¼Œå¯¹äºæœªè¯†åˆ«çš„å­—æ®µé€’å½’è¿›è¡Œskipå¾—åˆ°é•¿åº¦åï¼Œå°†å¯¹åº”é•¿åº¦çš„ä¸€æ®µ bytes ç›´æ¥å­˜å…¥ç”Ÿæˆçš„ _unknown_fields ç»“æ„ä¸­ï¼Œçœå»å…·ä½“ç±»å‹çš„ååºåˆ—åŒ–å¼€é”€ï¼ˆåœ¨ volo å®ç°ä¸­è¿™ä¸€å—é»˜è®¤æ˜¯ zerocopy çš„å®ç°ï¼‰ã€‚å¦‚æœæ˜¯æå‰æŠŠå·²çŸ¥å­—æ®µè¯»å®Œï¼Œä¼šç›´æ¥æŠŠå‰©ä½™ bytes å…¨å­˜èµ·æ¥ï¼Œä»è€Œä¸å†éœ€è¦é€’å½’è§£æé•¿åº¦ï¼Œæ€§èƒ½æ›´ä¼˜ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åœ¨ç¼–ç  write æ­¥éª¤æ—¶ï¼Œç›´æ¥å°† _unknown_fields æ•´å— bytes å†™å…¥ï¼Œçœå»åºåˆ—åŒ–çš„å¼€é”€ï¼ˆåœ¨ volo å®ç°ä¸­è¿™ä¸€å—æ˜¯ zerocopy çš„å®ç°ï¼‰ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-thrift" data-lang="thrift">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">struct&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Test&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">required&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Hello&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">hello&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">union&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Hello&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">string&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">a&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">2&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">binary&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">b&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Pilota ç”Ÿæˆä»£ç &lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">// Generated code
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">pub&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">struct&lt;/span> &lt;span style="color:#000">Test&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">pub&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">hello&lt;/span>: &lt;span style="color:#000">Hello&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">pub&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">_unknown_fields&lt;/span>: ::&lt;span style="color:#000">pilota&lt;/span>::&lt;span style="color:#000">LinkedBytes&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">pub&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Enum&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Hello&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">A&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>::&lt;span style="color:#000">pilota&lt;/span>::&lt;span style="color:#000">FastStr&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">B&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>::&lt;span style="color:#000">pilota&lt;/span>::&lt;span style="color:#000">Bytes&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">_UnknownFields&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>::&lt;span style="color:#000">pilota&lt;/span>::&lt;span style="color:#000">LinkedBytes&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="how-to">How To&lt;/h3>
&lt;p>åœ¨ volo.yml ä¸­å¯¹è¦ç”Ÿæˆ _unknown_fields çš„ thrift æ–‡ä»¶è¿›è¡Œé…ç½®ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">entries&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">thrift&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">protocol&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">thrift&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">filename&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">volo_gen.rs&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">idls&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#204a87;font-weight:bold">source&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">local&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">path&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">path/to/idl/*.thrift&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">keep_unknown_fields&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="thrift-binary-fast-skip">Thrift Binary Fast Skip&lt;/h2>
&lt;h3 id="motivation-1">Motivation&lt;/h3>
&lt;p>ä¼˜åŒ–æå‡ Skip é€»è¾‘çš„æ€§èƒ½ï¼Œåœ¨ä»£ç†å’Œ Unknown Fields ç­‰åœºæ™¯ä¸‹ Skip æ˜¯å…³é”®è·¯å¾„ã€‚&lt;/p>
&lt;h3 id="solution-1">Solution&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>Thrift Binary Protocol Scalar Types æ˜¯å®šé•¿ç¼–ç ï¼Œæ¯”å¦‚ i32 ç¼–ç  4 Bytes ï¼Œé‚£ä¹ˆ map/list/set å’Œå®šé•¿ç±»å‹ç»„æˆçš„è¿™äº›å¤åˆç±»å‹ï¼ˆCompound Typesï¼‰å°±å¯ä»¥ç‰¹æ®Šå¤„ç†ï¼Œæ¯”å¦‚ list&lt;i32>ï¼ŒæŒ‰ä¹‹å‰çš„ Skip ç®—æ³•æ˜¯ O(n) æ“ä½œå¾ªç¯ Skipï¼Œå¯ä»¥æå‰è®¡ç®—æ€»é•¿åº¦ç›´æ¥è·³è¿‡ï¼Œç®—æ³•å¤æ‚åº¦å˜æˆäº† O(1)ï¼›&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä½¿ç”¨å¾ªç¯æ›¿æ¢é€’å½’ï¼›&lt;/p>
&lt;ol>
&lt;li>
&lt;p>PS1: é€’å½’ä¸€å®šèƒ½æ”¹æˆå¾ªç¯ï¼Œä½†å¾ªç¯æ›¿æ¢é€’å½’æœªå¿…æœ‰æ€§èƒ½æ”¶ç›Šï¼›&lt;/p>
&lt;/li>
&lt;li>
&lt;p>PS2ï¼šå¤æ‚çš„é€’å½’è°ƒç”¨æ”¹å¾ªç¯è¿˜æ˜¯éœ€è¦è®¾è®¡ä¸€ä¸ªæ ˆæ¥å­˜å‚¨ä¸­é—´çŠ¶æ€ï¼Œæ ˆè®¾è®¡çš„å¥½åç›´æ¥å½±å“æ€§èƒ½æ”¶ç›Šï¼›&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;p>cargo bench æ€§èƒ½å¯¹æ¯”ï¼š&lt;/p>
&lt;pre tabindex="0">&lt;code>cargo bench result(the old version is baseline):
Thrift Binary Skip Bench/binary_unsafe skip list&amp;lt;i32&amp;gt;
time: [32.492 ns 32.665 ns 32.859 ns]
change: [-93.907% -93.787% -93.682%] (p = 0.00 &amp;lt; 0.05)
Performance has improved.
Found 7 outliers among 100 measurements (7.00%)
4 (4.00%) high mild
3 (3.00%) high severe
Thrift Binary Skip Bench/binary_unsafe skip struct
time: [342.44 ns 346.33 ns 350.27 ns]
change: [-6.1207% -4.4530% -2.6464%] (p = 0.00 &amp;lt; 0.05)
Performance has improved.
Found 10 outliers among 100 measurements (10.00%)
5 (5.00%) high mild
5 (5.00%) high severe
&lt;/code>&lt;/pre>&lt;h2 id="hot-restart">Hot Restart&lt;/h2>
&lt;h3 id="motivation-2">Motivation&lt;/h3>
&lt;p>æ”¯æŒhot restartå‡çº§å¯¹äºç»´æŠ¤ç³»ç»Ÿå¯ç”¨æ€§ã€æœ€å¤§é™åº¦åœ°å‡å°‘åœæœºæ—¶é—´ä»¥åŠåœ¨å‡çº§è¿‡ç¨‹ä¸­æä¾›æ— ç¼çš„ç”¨æˆ·ä½“éªŒè‡³å…³é‡è¦ã€‚åœ¨å­—èŠ‚ä¸»è¦åœ¨sidecarçƒ­å‡çº§ä½¿ç”¨ã€‚&lt;/p>
&lt;h3 id="solution-2">Solution&lt;/h3>
&lt;p>çƒ­é‡å¯çš„å…³é”®æ˜¯å¦‚ä½•ä½¿ä¸¤ä¸ªä¸åŒçš„è¿›ç¨‹å…±äº«åŒä¸€ä¸ª TCP / UNIX Domain Socketã€‚å¦‚æœæ˜¯æ–°æ—§è¿›ç¨‹æ˜¯çˆ¶å­è¿›ç¨‹å…³ç³»ï¼Œç”±äº fork åˆ›å»ºå­è¿›ç¨‹ä¼šæ‹·è´æ–‡ä»¶æè¿°ç¬¦è¡¨ï¼Œé‚£çˆ¶è¿›ç¨‹å¯ä»¥ç®€å•çš„é€šè¿‡Envç¯å¢ƒå˜é‡å‘ŠçŸ¥å­è¿›ç¨‹ç›‘å¬çš„Listener Fdï¼Œå­è¿›ç¨‹ç›´æ¥é€šè¿‡fdåˆ›å»ºsocketå³å¯ï¼Œè¿™ä¸ªä»£è¡¨æ˜¯Nginxã€‚æˆ‘ä»¬é‡åˆ°çš„åœºæ™¯æˆ–è€…è¯´è€ƒè™‘æ›´é€šç”¨çš„åœºæ™¯ï¼Œä¸€èˆ¬ä¹Ÿæœ‰ä¸¤ç§è§£æ³•ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>é€šè¿‡SO_REUSEADDR å’Œ SO_REUSEPORT&lt;/p>
&lt;ol>
&lt;li>å¦‚æœåªéœ€è¦ç›‘å¬ TCP / UDP ç«¯å£ï¼Œå¯ä»¥ç›´æ¥åœ¨ç›‘å¬æ—¶å¼€å¯ SO_REUSEADDR ä¸ SO_REUSRPORTã€‚å½“ä¸¤ä¸ª è¿›ç¨‹åŒæ—¶ç›‘å¬åœ¨ä¸€ä¸ªåœ°å€ä¸Šæ—¶ï¼Œå†…æ ¸ä¼šè‡ªåŠ¨åœ¨ä¸¤ä¸ªä¸»è¿›ç¨‹ä¹‹é—´åš round-robinã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>
&lt;p>é€šè¿‡SCM_RIGHTS&lt;/p>
&lt;ol>
&lt;li>UNIX/LINUXç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ UNIX Domain Socket å’Œ SCM_RIGHTS æœºåˆ¶åœ¨åº”ç”¨ç¨‹åºä¹‹é—´ä¼ é€’æ–‡ä»¶æè¿°ç¬¦ï¼›&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;p>é€šè¿‡UDSé™¤äº†é€šç”¨æ€§æ›´ä½³å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªå¥½å¤„æ˜¯å¯ä»¥å‘é€æ›´å¤šä¿¡æ¯ï¼Œä¸°å¯Œæ‰©å±•åŠŸèƒ½ï¼ˆæ¯”å¦‚é€šçŸ¥æ—§è¿›ç¨‹å…³é—­çš„æ—¶æœºï¼Œæ¯”å¦‚é“¾æ¥çƒ­è¿ç§»ç­‰ç­‰ï¼‰ï¼Œå¼€æºä½¿ç”¨SCM_RIGHTS æ–¹æ¡ˆçš„ä»£è¡¨æœ‰Envoyã€Mosnï¼Œæˆ‘ä»¬è¿™æ¬¡ä¹Ÿé‡‡ç”¨è¿™ä¸ªæ–¹æ¡ˆã€‚ä¸€äº›å…³é”®æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>è¦ä½¿ç”¨çƒ­é‡å¯ï¼Œéœ€è¦åˆå§‹åŒ–çƒ­é‡å¯æœºåˆ¶ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è¯¥è¿›ç¨‹é¦–å…ˆå°è¯•è¿æ¥åˆ° parent_sockã€‚å¦‚æœè¿æ¥å¤±è´¥ï¼Œåˆ™è¯´æ˜è¯¥è¿›ç¨‹æ˜¯åŸæ¥çš„çˆ¶è¿›ç¨‹ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œè¿›ç¨‹åº”è¯¥ç»‘å®š parent_sock å’Œ parent_handleï¼Œç­‰å¾…å­è¿›ç¨‹å‘é€æ¶ˆæ¯ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å¦‚æœå­è¿›ç¨‹æˆåŠŸè¿æ¥åˆ° parent_sockï¼Œå®ƒå°†ä½¿ç”¨ dup_parent_listener_sock å¤åˆ¶æ–‡ä»¶æè¿°ç¬¦ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä¸€æ—¦æ‰€æœ‰ç›‘å¬å™¨å¥—æ¥å­—éƒ½è¢«å¤åˆ¶ï¼Œå­è¿›ç¨‹å°±ä¼šå‘çˆ¶è¿›ç¨‹å‘é€ç»ˆæ­¢çˆ¶è¿›ç¨‹è¯·æ±‚ï¼Œçˆ¶è¿›ç¨‹æ”¶åˆ°è¯·æ±‚åå¯åŠ¨ç»ˆæ­¢ä¿¡å·ï¼ˆkill sigtermï¼‰å¹¶èµ°gracefully exitæµç¨‹å®Œå…¨é€€å‡ºè¿›ç¨‹ã€‚&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="how-to-1">How To&lt;/h3>
&lt;p>åœ¨ Server å¯åŠ¨ï¼ˆrunï¼‰å‰åˆå§‹åŒ– hotrestart å³å¯ï¼Œcode exampleï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">#[volo::main]&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">async&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">main&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">let&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">addr&lt;/span>: &lt;span style="color:#000">SocketAddr&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#34;[::]:8080&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">parse&lt;/span>&lt;span style="color:#000;font-weight:bold">().&lt;/span>&lt;span style="color:#000">unwrap&lt;/span>&lt;span style="color:#000;font-weight:bold">();&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">// hotrestart initialize
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">volo&lt;/span>::&lt;span style="color:#000">hotrestart&lt;/span>::&lt;span style="color:#000">DEFAULT_HOT_RESTART&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">initialize&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">Path&lt;/span>::&lt;span style="color:#000">new&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;/tmp&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#204a87;font-weight:bold">await&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">unwrap&lt;/span>&lt;span style="color:#000;font-weight:bold">();&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">volo_gen&lt;/span>::&lt;span style="color:#000">nthrift&lt;/span>::&lt;span style="color:#000">test&lt;/span>::&lt;span style="color:#000">idl&lt;/span>::&lt;span style="color:#000">LearnServiceServer&lt;/span>::&lt;span style="color:#000">new&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">S&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">byted&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">run&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">addr&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#204a87;font-weight:bold">await&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">unwrap&lt;/span>&lt;span style="color:#000;font-weight:bold">();&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ³¨æ„äº‹é¡¹ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>voloçƒ­å‡çº§ä¸ä»…ä»…æ”¯æŒVolo-Thrift ä½¿ç”¨ï¼Œä¹Ÿæ”¯æŒVolo-gRPCä½¿ç”¨ï¼Œæœªæ¥åŸºäºvoloçš„Serverç†è®ºä¸Šéƒ½å¯ä»¥æ”¯æŒï¼›&lt;/p>
&lt;/li>
&lt;li>
&lt;p>initialize æ–¹æ³•ä¸¤ä¸ªå‚æ•°ï¼š&lt;/p>
&lt;ol>
&lt;li>
&lt;p>sock_dir_path: å­˜å‚¨ hot_restart ä½¿ç”¨çš„UDSç›‘å¬åœ°å€çˆ¶ç›®å½•ï¼Œä¸€èˆ¬ç”±æ‰˜ç®¡è¿›ç¨‹åˆ†é…åœ°å€ï¼Œæ³¨æ„éš”ç¦»æ€§ï¼ˆå°¤å…¶æ˜¯ç‰©ç†æœºç­‰ééš”ç¦»ç¯å¢ƒä¸‹è¿è¡Œä½¿ç”¨ï¼‰ï¼›&lt;/p>
&lt;/li>
&lt;li>
&lt;p>server_listener_num: æ€»å…±serverç›‘å¬æ•°é‡ï¼ŒæŒ‡å¯åŠ¨çš„åŸºäºvoloçš„server listeneræ•°é‡ï¼Œä¸€èˆ¬æœåŠ¡åªæœ‰ä¸€ä¸ªserverï¼Œæ¯”å¦‚Volo-Thrift Serverï¼Œè®¾ç½®1å³å¯ï¼›&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;h2 id="å®Œæ•´-release-note">å®Œæ•´ Release Note&lt;/h2>
&lt;p>å®Œæ•´çš„ Release Note å¯ä»¥å‚è€ƒï¼š&lt;a href="https://github.com/cloudwego/volo/compare/volo-0.5.0...volo-0.5.4">Volo Changelog&lt;/a>&lt;/p></description></item><item><title>Blog: Kitex v0.7.0 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2023/08/14/kitex-v0.7.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Mon, 14 Aug 2023 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2023/08/14/kitex-v0.7.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;h2 id="é‡è¦å˜æ›´ä»‹ç»">é‡è¦å˜æ›´ä»‹ç»&lt;/h2>
&lt;h3 id="åŠŸèƒ½">åŠŸèƒ½&lt;/h3>
&lt;p>&lt;strong>1. gRPC å‹ç¼©æ”¯æŒ&lt;/strong>&lt;/p>
&lt;p>å®ç°äº† KiteX gRPC çš„å‹ç¼©åŠŸèƒ½æ”¯æŒï¼Œå¯ä»¥ä½¿ç”¨ä¾‹å¦‚ gzip ç­‰å‹ç¼©æ–¹æ³•å‡å° payload ä½“ç§¯&lt;/p>
&lt;p>&lt;strong>2. GLS&lt;/strong>&lt;/p>
&lt;p>ä½¿ç”¨ &lt;a href="https://github.com/cloudwego/localsession">local-session&lt;/a> ç»„ä»¶å…œåº•è¯·æ±‚ä¸Šä¸‹æ–‡ä¼ é€’ï¼Œè§£å†³ç”¨æˆ·æ²¡æœ‰ä¼ é€’ ctx å¯¼è‡´çš„å¾®æœåŠ¡æ–­é“¾é—®é¢˜&lt;/p>
&lt;h3 id="ä¼˜åŒ–">ä¼˜åŒ–&lt;/h3>
&lt;p>&lt;strong>1. Unknown Fields æ— åºåˆ—åŒ–ä¼˜åŒ–&lt;/strong>&lt;/p>
&lt;p>å®ç°æ— åºåˆ—åŒ–çš„ unknown field åŠŸèƒ½ï¼Œæ— åºåˆ—åŒ–unknown fieldsæ–¹æ¡ˆåœ¨FastCodecä¸Šæ€§èƒ½æå‡çº¦6x ~ 7xï¼Œè¯¦è§ï¼š&lt;a href="https://github.com/cloudwego/kitex/pull/1017">#1017&lt;/a>&lt;/p>
&lt;p>&lt;strong>2. DynamicGo é›†æˆ&lt;/strong>&lt;/p>
&lt;p>åœ¨ KiteX çš„æ³›åŒ–æ¨¡å—ä¸­é›†æˆ &lt;a href="https://github.com/cloudwego/dynamicgo">dynamicgo&lt;/a> ä»¥æå‡ JSON\HTTP æ³›åŒ–è°ƒç”¨æ€§èƒ½ ï¼ˆ+50%ï½200%ï¼‰&lt;/p>
&lt;h3 id="å…¶ä»–">å…¶ä»–&lt;/h3>
&lt;p>å‡çº§ Thriftgo åº“ä¾èµ–è‡³ v0.3.0 ï¼Œæ”¯æŒäº† Thriftgo åå°„åŠŸèƒ½ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶è·å– IDL å…ƒä¿¡æ¯&lt;/p>
&lt;hr>
&lt;h2 id="è¯¦ç»†å˜æ›´">è¯¦ç»†å˜æ›´&lt;/h2>
&lt;h3 id="feature">Feature:&lt;/h3>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1053">#1053&lt;/a>] feat(retry): support to distinguish local retry request&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1058">#1058&lt;/a>] feat(retry): support delete retry policy dynamically&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1000">#1000&lt;/a>] feat(grpc): support grpc compress&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1018">#1018&lt;/a>] feat: use local-session to backup request context in case of missing&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1045">#1045&lt;/a>] feat(generic): support base64 codec for map generic&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1035">#1035&lt;/a>] feat(config): provide the ability to dynamically configure the rpctimeout config on the method hierarchy&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/825">#825&lt;/a>] feat(generic): integrate dynamicgo into kitex generic call&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1019">#1019&lt;/a>] feat(lb): interleaved weighted round-robin load balancer&lt;/li>
&lt;/ul>
&lt;h3 id="optimize">Optimize:&lt;/h3>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1064">#1064&lt;/a>] optimize: check header max size when ttheader encode&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1017">#1017&lt;/a>] optimize: implement unknown field function without serialization&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1036">#1036&lt;/a>] optimize(protobuf): ignore err when (un)marshal empty req/resp&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1056">#1056&lt;/a>] optimize(tool): optimize struct ref&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1043">#1043&lt;/a>] optimize: add method info to the error message of the server handler panic for easy troubleshooting&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1025">#1025&lt;/a>] optimize: use Tags of ServerBasicInfo as default Tags of RegistryInfo&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1020">#1020&lt;/a>] optimize: add nil check for MethodInfo which get from ServiceInfo in client.Call to ignore panic&lt;/li>
&lt;/ul>
&lt;h3 id="fix">Fix:&lt;/h3>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1073">#1073&lt;/a>] fix: fix failure retryer dump panic&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1067">#1067&lt;/a>] fix: slim template with deepcopy&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1055">#1055&lt;/a>] fix: ignore SIGHUP when run with nohup&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1048">#1048&lt;/a>] fix(retry): keep the behavior of retry policy consistent between initing and updating&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1047">#1047&lt;/a>] fix(tool): cli warning for unknown suffix&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1038">#1038&lt;/a>] fix(config): correct the function signature of the rpcinfo.TimeoutProvider implementation&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1034">#1034&lt;/a>] fix(generic): add case int16 into buildinTypeIntoString&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1023">#1023&lt;/a>] fix(generic): avoid dead-loop when marshal self-referenced struct&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1028">#1028&lt;/a>] fix:modify .licenserc.yaml&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1012">#1012&lt;/a>] fix: skip frugal on go 1.21&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/992">#992&lt;/a>] fix(grpc): use mcache to fix memory leak caused by grpc codec buffer to reuse memory incorrectly&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/994">#994&lt;/a>] fix(tool): fix kitex tool git repo pulling logic&lt;/li>
&lt;/ul>
&lt;h3 id="chore">Chore:&lt;/h3>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1074">#1074&lt;/a>] chore: update thriftgo to v0.3.0&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1031">#1031&lt;/a>] chore: remove wechat group in readme&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1008">#1008&lt;/a>] chore: update dynamicgo to v0.1.1&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1006">#1006&lt;/a>] chore: remove unnecessary replace for frugal&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/1007">#1007&lt;/a>] chore: upgrade netpoll to v0.4.1&lt;/li>
&lt;/ul></description></item><item><title>Blog: Hertz æ”¯æŒ QUIC &amp; HTTP/3</title><link>https://www.cloudwego.io/zh/blog/2023/08/02/hertz-%E6%94%AF%E6%8C%81-quic-http/3/</link><pubDate>Wed, 02 Aug 2023 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2023/08/02/hertz-%E6%94%AF%E6%8C%81-quic-http/3/</guid><description>
&lt;h2 id="æ¦‚è¿°">æ¦‚è¿°&lt;/h2>
&lt;p>æ ¹æ® Hertz çš„åˆ†å±‚è®¾è®¡åŸåˆ™å°† QUIC å’Œ HTTP3 çš„å®ç°é›†æˆåˆ°æ¡†æ¶ä¸­æ¥ï¼Œå¯¹å¤–æä¾›çµæ´»çš„å¤šåè®®æ”¯æŒï¼Œå¯¹å†…ä¿æŒè¶³å¤Ÿçµæ´»çš„æ‰©å±•æ€§å’Œæ¸…æ™°çš„æ¶æ„ã€‚
è¦ä»å¤´å®ç°ä¸€ä¸ªå®Œæ•´çš„ QUIC åè®®æ¶‰åŠåˆ°çš„å·¥ä½œé‡æ¯”è¾ƒå¤§ä¸”æŠ•å…¥äº§å‡ºæ¯”ç›¸å¯¹è¾ƒä½ï¼Œç›®å‰é‡‡å–æ›´åˆç†çš„æ–¹å¼ï¼šé¦–å…ˆå®šä¹‰æ ‡å‡†ç½‘ç»œä¼ è¾“å±‚æ¥å£ï¼Œä¹‹åå°†å¼€æºç¤¾åŒºä¸»æµçš„ä¸€ä¸ªæˆ–å¤šä¸ªæˆç†Ÿçš„
QUIC åè®®å®ç°ç»è¿‡ç®€å•çš„é€‚é…å’Œå°è£…é€šè¿‡æ¨¡å—åŒ–çš„æ–¹å¼æ¥å…¥åˆ° Hertz ä¸­æ¥ï¼ŒåŒæ—¶ä¹Ÿä¿ç•™æœªæ¥ç‹¬ç«‹å®ç° QUIC åè®®çš„ç©ºé—´ã€‚ç±»ä¼¼ç›®å‰çš„ç½‘ç»œä¼ è¾“å±‚æ¶æ„ã€‚HTTP/3
åŒç†ã€‚
æ˜ç¡®äº†å®ç°è·¯å¾„ä¹‹åï¼Œæœ¬æ–‡æ¡£è®¨è®ºçš„ä¸»é¢˜ä¹Ÿå°±åŸºæœ¬ä¸Šæ¸…æ™°äº†ï¼Œä¸»è¦ä¸ºï¼š&lt;/p>
&lt;ol>
&lt;li>ç½‘ç»œä¼ è¾“å±‚ç°çŠ¶å’Œ QUIC è®¾è®¡å±‚é¢ç»Ÿä¸€ï¼šæ˜ç¡®åŠ å…¥ QUIC çš„ç½‘ç»œä¼ è¾“å±‚æ¥å£å½¢æ€&lt;/li>
&lt;li>åè®®å±‚æ‰©å±• HTTP/3ï¼šåœ¨æ˜ç¡®ç½‘ç»œä¼ è¾“å±‚å½¢æ€ä¹‹åï¼ŒåŸºäºç½‘ç»œä¼ è¾“å±‚æ¥å£å®ç° HTTP/3&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://www.cloudwego.io/img/docs/hertz.png" alt="HERTZ">&lt;/p>
&lt;h2 id="è®¾è®¡">è®¾è®¡&lt;/h2>
&lt;h3 id="ç½‘ç»œä¼ è¾“å±‚">ç½‘ç»œä¼ è¾“å±‚&lt;/h3>
&lt;h4 id="ç°çŠ¶">ç°çŠ¶&lt;/h4>
&lt;p>å½“å‰çš„ç½‘ç»œä¼ è¾“å±‚è®¾è®¡ä¸»è¦è¿˜æ˜¯åŸºäº TCP åè®®ï¼ŒåŸºæœ¬è¯­ä¹‰ä¸ºï¼šå½“è¿æ¥å»ºç«‹å®Œæˆï¼ˆåŒ…æ‹¬ TLSï¼‰åä¸ºä¸Šå±‚æä¾›ä¸€ä¸ªå¤„ç†åè®®çš„å›è°ƒå‡½æ•°ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">// Callback when data is ready on the connection&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Serve&lt;/span> &lt;span style="color:#204a87;font-weight:bold">func&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ctx&lt;/span> &lt;span style="color:#000">context&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Context&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">conn&lt;/span> &lt;span style="color:#000">Conn&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å½“å‰ç½‘ç»œä¼ è¾“å±‚æä¾›çš„æ ‡å‡†ç½‘ç»œåº“å’Œ Netpoll éƒ½æ˜¯åœ¨è¿™å¥—æ¥å£ä¸‹é¢å±•å¼€çš„ï¼›å› æ­¤åè®®å±‚åªéœ€è¦ä¾èµ–è¿™ä¸ªæ¥å£è¿›è¡Œå®ç°ï¼Œè€Œæ— éœ€å…³å¿ƒç½‘ç»œä¼ è¾“å±‚å…·ä½“æ­£åœ¨æä¾›çš„å®ç°æ˜¯ä»€ä¹ˆã€‚
åœ¨ TCP åè®®æä¾›çš„æ¡†æ¶å’Œè¯­ä¹‰ä¸‹é¢ï¼Œè¿™å¥—æ¥å£æ˜¯å®Œå…¨å¤Ÿç”¨çš„ï¼Œç›®å‰ Hertz åŸºäºæ­¤æ¥å£æ„å»ºçš„ HTTP/1.1ã€HTTP/2 è¶³ä»¥è¯æ˜è¿™ä¸€ç‚¹ã€‚&lt;/p>
&lt;h5 id="è¯¦ç»†æè¿°">è¯¦ç»†æè¿°&lt;/h5>
&lt;p>Conn çš„å®šä¹‰ä¸ºï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Conn&lt;/span> &lt;span style="color:#204a87;font-weight:bold">interface&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">net&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Conn&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">Reader&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">Writer&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// SetReadTimeout should work for every Read process&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">SetReadTimeout&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">t&lt;/span> &lt;span style="color:#000">time&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Duration&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸»ä½“ç”± Readerï¼ˆæä¾›ä»è¿æ¥ä¸Šè¯»æ•°æ®çš„èƒ½åŠ›ï¼‰/Writerï¼ˆæä¾›å¾€è¿æ¥ä¸Šå†™æ•°æ®çš„èƒ½åŠ›ï¼‰æ„æˆã€‚
åŒæ—¶ä¹Ÿæ˜¯å½“å‰ Hertz ç½‘ç»œä¼ è¾“å±‚é«˜æ€§èƒ½åº“å®ç°çš„æ‰¿è½½ï¼Œå…·ä½“å®šä¹‰ä¸ºï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Reader&lt;/span> &lt;span style="color:#204a87;font-weight:bold">interface&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// Peek returns the next n bytes without advancing the reader.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">Peek&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">n&lt;/span> &lt;span style="color:#204a87;font-weight:bold">int&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">([]&lt;/span>&lt;span style="color:#204a87;font-weight:bold">byte&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// Skip discards the next n bytes.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">Skip&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">n&lt;/span> &lt;span style="color:#204a87;font-weight:bold">int&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// Release the memory space occupied by all read slices. This method needs to be executed actively to&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// recycle the memory after confirming that the previously read data is no longer in use.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// After invoking Release, the slices obtained by the method such as Peek will&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// become an invalid address and cannot be used anymore.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">Release&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// Len returns the total length of the readable data in the reader.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">Len&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#204a87;font-weight:bold">int&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// ReadByte is used to read one byte with advancing the read pointer.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">ReadByte&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#204a87;font-weight:bold">byte&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// ReadBinary is used to read next n byte with copy, and the read pointer will be advanced.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">ReadBinary&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">n&lt;/span> &lt;span style="color:#204a87;font-weight:bold">int&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">p&lt;/span> &lt;span style="color:#000;font-weight:bold">[]&lt;/span>&lt;span style="color:#204a87;font-weight:bold">byte&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">err&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Writer&lt;/span> &lt;span style="color:#204a87;font-weight:bold">interface&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// Malloc will provide a n bytes buffer to send data.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">Malloc&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">n&lt;/span> &lt;span style="color:#204a87;font-weight:bold">int&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">buf&lt;/span> &lt;span style="color:#000;font-weight:bold">[]&lt;/span>&lt;span style="color:#204a87;font-weight:bold">byte&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">err&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// WriteBinary will use the user buffer to flush.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// NOTE: Before flush successfully, the buffer b should be valid.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">WriteBinary&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">b&lt;/span> &lt;span style="color:#000;font-weight:bold">[]&lt;/span>&lt;span style="color:#204a87;font-weight:bold">byte&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">n&lt;/span> &lt;span style="color:#204a87;font-weight:bold">int&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">err&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// Flush will send data to the peer end.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">Flush&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="å¼•å…¥-quic">å¼•å…¥ QUIC&lt;/h4>
&lt;p>UDP + QUIC å¤§è‡´å¯ä»¥å¯¹åº”åˆ° TCP + TLSï¼ˆä¸¥æ ¼çš„å±‚çº§å…³ç³»å¯ä»¥å‚è€ƒä¸‹å›¾ï¼‰ï¼ŒæŒ‰ç…§å½“å‰çš„åˆ†å±‚ç»“æ„ï¼ŒåŒå±äº Hertz çš„ç½‘ç»œä¼ è¾“å±‚ã€‚ä¸è¿‡ QUIC
çš„ç¼–ç¨‹æ¨¡å‹å¤©ç„¶åŸºäºæµï¼ˆStreamï¼‰æ¥è¿›è¡Œçš„ï¼Œè€Œå½“å‰åŸºäº TCP çš„ç½‘ç»œä¼ è¾“å±‚æä¾›çš„ Reader /Writer æœ¬è´¨ä¸Šæ˜¯åŸºäºå­—èŠ‚æµçš„ç¼–ç¨‹æ¨¡å‹ã€‚è™½ç„¶
HTTP/2 éå¸¸ç±»ä¼¼åœ°æ‹¥æœ‰æµï¼ˆStreamï¼‰çš„æ¦‚å¿µï¼Œä½†å®é™…ä¸Šæ˜¯åœ¨ TCP çš„å­—èŠ‚æµä¹‹ä¸Šï¼ˆåº”ç”¨åè®®å±‚ä¸­ï¼‰è¿›è¡Œçš„å°è£…ï¼Œå¹¶éå¦‚ QUIC
è¿™æ ·åŸç”Ÿå®ç°åˆ°äº†ä¼ è¾“åè®®å†…éƒ¨ã€‚æˆ‘ä»¬æ— æ³•è¦æ±‚ TCP ç›´æ¥å†…ç½®æµï¼ˆStreamï¼‰çš„å®ç°ï¼ˆè¿™å¯èƒ½ä¹Ÿæ˜¯ HTTP/2 çš„æ„¿æœ›ï¼‰ï¼Œæ¢å¥è¯è¯´ï¼Œè¦æƒ³æŠŠ HTTP/2
å’Œ HTTP/3 ä¸­æµçš„æ¦‚å¿µåœ¨å½“ä¸‹ Hertz çš„æŸä¸€å±‚ä¸­ç»Ÿä¸€èµ·æ¥ï¼Œé€»è¾‘ä¸Šå…¶å®æ˜¯åŠä¸åˆ°çš„ï¼ˆè™½ç„¶å®ƒä»¬æœ¬è´¨ä¸Šæ˜¯é‚£ä¹ˆçš„ç›¸ä¼¼ï¼‰ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/docs/quic_http3.png" alt="quic &amp;amp; http3">&lt;/p>
&lt;p>æ˜ç¡®äº†ä¸Šè¿°é—®é¢˜ä¹‹åï¼Œå¼•å…¥ QUIC åçš„ç½‘ç»œåº“å½¢æ€å…¶å®ä¹Ÿå°±æ¯”è¾ƒæ¸…æ™°äº†ï¼šåŸºäº TCP çš„ç½‘ç»œæŠ½è±¡æ¥å£ä»ç„¶ä¿æŒåŸæ ·ï¼Œæ–°å¢ä¸€å¥—åŸºäº
QUICï¼ˆUDPï¼‰çš„ç½‘ç»œä¼ è¾“å±‚æŠ½è±¡ï¼Œåè®®å±‚å¯¹åº”æä¾›ä¸€ä¸ªåŸºäº QUICï¼ˆUDPï¼‰ç½‘ç»œæŠ½è±¡çš„å¤„ç†æ¥å£ã€‚å…³é”®ç‚¹åœ¨äºï¼Œä¸å¼ºåˆ¶å°† QUICï¼ˆUDPï¼‰èåˆè‡³å½“å‰åŸºäº
TCP çš„ç½‘ç»œ/åè®®å±‚æŠ½è±¡å½“ä¸­æ¥ã€‚&lt;/p>
&lt;h5 id="æ¥å£è®¾è®¡">æ¥å£è®¾è®¡&lt;/h5>
&lt;p>ä¸å½“å‰ TCP çš„æŠ½è±¡æ¥å£ç±»ä¼¼ï¼ŒQUIC å’Œ HTTP/3 çš„åˆ†ç•Œå…¶å®å°±æ˜¯ï¼š&lt;/p>
&lt;ol>
&lt;li>ç½‘ç»œä¼ è¾“å±‚è¯­ä¹‰è¦†ç›– QUIC åè®®çš„è¿æ¥å‡†å¤‡ã€è¿æ¥å»ºç«‹è¿‡ç¨‹ï¼›è¯·æ±‚å¯¹åº”çš„æµå®Œæˆå‡†å¤‡ä¹‹åå°±è¾¾åˆ°ç½‘ç»œä¼ è¾“å±‚çš„è¾¹ç•Œ&lt;/li>
&lt;li>åè®®å±‚å…³æ³¨ä» QUIC è¿æ¥ä¸Šæ‰“å¼€çš„æµï¼ˆStreamï¼‰å¼€å§‹ï¼Œé€šè¿‡è¿™ä¸ªæ‰“å¼€çš„æµå®Œæˆè¯·æ±‚çš„è§£æï¼Œhandler çš„å¤„ç†ï¼Œåˆ°å°†ç›¸åº”é€šè¿‡è¿™æ¡æµå†™å›å¯¹ç«¯ï¼ˆServer è§†è§’ï¼ŒClient åŒç†ï¼Œå¯¹è°ƒå³å¯ï¼‰&lt;/li>
&lt;/ol>
&lt;p>ç½‘ç»œä¼ è¾“å±‚å’Œåè®®å±‚æ‹†åˆ†çš„ä¼˜åŠ¿éå¸¸æ˜æ˜¾ï¼Œç›®å‰çš„ Hertz æ”¯æŒ ET/LT è§¦å‘æ–¹å¼ã€æ ‡å‡†ç½‘ç»œåº“å’Œ Netpoll ç›¸äº’è¡¥å……ï¼Œä¸°å¯Œåº”ç”¨åœºæ™¯ç­‰éƒ½æ˜¯å¾ˆå¥½çš„ä¾‹å­ã€‚&lt;/p>
&lt;h5 id="æ–¹æ¡ˆ-a">æ–¹æ¡ˆ A&lt;/h5>
&lt;p>åŸºäºä¸Šè¿°åˆ†å±‚æ€æƒ³ï¼Œä¸€ä¸ªå’Œç½‘ç»œä¼ è¾“å±‚ Serve ç›¸å¯¹åº”çš„ QUIC æŠ½è±¡å…¶å®å°±å‡ºå…·é›å½¢äº†ï¼Œå‘½åä¸º OnStreamï¼Œè¯­ä¹‰å’Œ Serve åŸºæœ¬ä¸€è‡´*
ï¼šå½“æµå®Œæˆå‡†å¤‡ã€‚å…·ä½“éœ€è¦æä¾›çš„å®ç°å°±æ˜¯ä¸Šå±‚åè®®ï¼ˆè¿™é‡Œæ˜¯ HTTP/3ï¼‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">ServeStream&lt;/span> &lt;span style="color:#204a87;font-weight:bold">func&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ctx&lt;/span> &lt;span style="color:#000">context&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Context&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">stream&lt;/span> &lt;span style="color:#000">Stream&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>*æ³¨ï¼šServeStream è¯­ä¹‰å’Œ Serve ä¸€è‡´å…·ä½“æŒ‡ HTTP/1 çš„ Serve å¯¹åº”çš„å…¶å®å°±æ˜¯â€œä¸‹ä¸€ä¸ªè¯·æ±‚çš„æ•°æ®å·²ç»å‡†å¤‡å¥½â€ï¼›é€šè¿‡å®ç°è¯¥æ¥å£å°±å¯ä»¥å®Œæˆåè®®å¤„ç†ã€‚
å¦‚æœè¿›ä¸€æ­¥æ·±å…¥ï¼Œå…¶å®å’Œå½“å‰ Hertz HTTP/2 çš„å®ç°å…¶å®å¹¶ä¸å®Œå…¨å¯¹åº”ï¼Œç©¶å…¶åŸå› åœ¨äºï¼š&lt;/p>
&lt;ol>
&lt;li>HTTP/2
çš„æµå®ç°åœ¨åè®®å±‚ä¸Šï¼Œæœ¬è´¨ä¸Šå…¶å®åªæ˜¯å¯¹å¼•å…¥çš„æ›´å°ä¼ è¾“å•å…ƒå¸§ï¼ˆFrameï¼‰çš„é€»è¾‘æ‰¿è½½ï¼›&lt;/li>
&lt;li>ç†æƒ³å½¢æ€åº”è¯¥æ˜¯å°† HTTP/2
çš„å®ç°è¿›è¡Œæ‹†åˆ†ï¼šæµï¼ˆStreamï¼‰å‡†å¤‡é€»è¾‘ä¸‹å±‚åˆ°ç½‘ç»œä¼ è¾“å±‚ &amp;amp; åŸºäºæµï¼ˆStreamï¼‰çš„åè®®å¤„ç†é€»è¾‘ä¿ç•™åœ¨åè®®å±‚ã€‚&lt;/li>
&lt;/ol>
&lt;h6 id="è¯¦ç»†è®¾è®¡">è¯¦ç»†è®¾è®¡&lt;/h6>
&lt;p>æš‚ç•¥&lt;/p>
&lt;h6 id="ä¼˜ç‚¹">ä¼˜ç‚¹&lt;/h6>
&lt;p>æ–¹æ¡ˆ A æœ€å¤§çš„ç‰¹ç‚¹æ˜¯ç†æƒ³åŒ–çš„å°†åº”ç”¨åè®®å’Œç½‘ç»œåè®®è¿›è¡Œåˆ†ç¦»ã€‚
ç”±äºå„ç§å†å²åŸå› çš„å åŠ ï¼ŒTCPã€HTTP/1ã€Websocketã€HTTP/2ã€QUICã€HTTP/3 å„è‡ªçš„æ¶æ„è®¾è®¡å­˜åœ¨å¾ˆå¤šé‡å å’ŒèŒè´£ç•Œå®šä¸æ¸…æ™°çš„åœ°æ–¹ï¼Œä¸”å½“ä¸‹çš„å¾ˆå¤šå®ç°å¯èƒ½è¿˜å¹¶æœªå½¢æˆæ ‡å‡†ï¼Œé€šè¿‡åˆç†çš„è§£æ„ï¼Œèƒ½å¤Ÿå¸®åŠ©
Hertz åœ¨é¢å¯¹æœªæ¥å¯èƒ½çš„åè®®å˜è¿ã€å®ç°å˜è¿çš„è¿‡ç¨‹ä¸­ä»ç„¶èƒ½å¤Ÿèšç„¦åœ¨ HTTP æœ¬èº«è¿™ä¸ªæ ¸å¿ƒé—®é¢˜ä¹‹ä¸Šï¼Œæœ€ç»ˆè¾¾æˆâ€œæ³› HTTP æ¡†æ¶â€çš„ç»ˆæç›®æ ‡ã€‚&lt;/p>
&lt;h6 id="ç¼ºç‚¹">ç¼ºç‚¹&lt;/h6>
&lt;p>æ–¹æ¡ˆ A çš„ç¼ºç‚¹å…¶å®å°±æ˜¯ä¼´éšæ¸…æ™°çš„è¾¹ç•Œäº§ç”Ÿçš„ï¼Œè¿™ä¹Ÿæ˜¯åè®®è®¾è®¡å’Œå‘å±•ä¸­çš„å¦¥åå’Œä¸å½»åº•å¸¦æ¥çš„ä¸€ä¸ªç°å®é—®é¢˜ã€‚
å…¶ä¸­ï¼ŒåŸºäºæµï¼ˆStreamï¼‰çš„åè®®å±‚èƒ½å¾ˆå¥½çš„å¤„ç†ä¸€ä¸ªæµï¼ˆStreamï¼‰ä¸Šçš„æ¶ˆæ¯äº¤äº’ï¼Œä½†æ˜¯åŒæ—¶ä¹Ÿæ˜¯ç”±äºå¯¹äºåè®®å±‚æ¥è¯´ï¼Œä»…ä»…æ˜¾ç¤ºæš´éœ²äº†æµï¼ˆStreamï¼‰è¿™æ ·ä¸€ä¸ªè¯·æ±‚çº§åˆ«çš„æ¥å£ï¼Œä½†ç±»ä¼¼
HTTP/2ï¼ŒHTTP/3 è¿™æ ·åŸºäºæµï¼ˆStreamï¼‰çš„åº”ç”¨å±‚åè®®ï¼Œä¸€ä¸ªæ ¸å¿ƒç‰¹ç‚¹åœ¨äºè¿æ¥æœ¬èº«çš„å¤šè·¯å¤ç”¨ï¼Œæ¢å¥è¯è¯´ï¼Œåº•å±‚è¿æ¥å’Œæµçš„å¯¹åº”å…³ç³»å¾€å¾€æ˜¯ 1:N çš„ã€‚å› æ­¤ï¼Œå¦‚æœæ˜¯åœ¨åè®®å¤„ç†è¿‡ç¨‹ä¸­å­˜åœ¨å¯¹æ‰¿è½½æµï¼ˆStreamï¼‰çš„è¿æ¥æœ¬èº«çš„æ§åˆ¶éœ€æ±‚ï¼ˆåº”è¯¥éš¾ä»¥é¿å…ï¼‰ï¼Œå°±ä¼šæ¯”è¾ƒéš¾åŠï¼ˆå®ç°ä¸Šæ²¡é—®é¢˜ï¼‰ï¼Œæ¦‚å¿µä¸Šä¼šå’Œæ–¹æ¡ˆ A çš„åˆ†å±‚æŠ½è±¡å­˜åœ¨ç›¸æŠµçš„åœ°æ–¹ã€‚
æè‡´çš„ç†æƒ³æ€å¯èƒ½å¹¶ä¸å¤ªé€‚ç”¨äºå½“ä¸‹çš„çœŸå®ç¯å¢ƒã€‚&lt;/p>
&lt;h5 id="æ–¹æ¡ˆ-b">æ–¹æ¡ˆ B&lt;/h5>
&lt;p>å¹³è¡¡ç†æƒ³å½¢æ€å’Œäº‹å®ç°çŠ¶ï¼Œå®¹æ˜“æƒ³åˆ°çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼šé¢å¤–æŠ½è±¡ä¸€ä¸ªè¿æ¥å±‚å‡ºæ¥ï¼Œè¿™ä¸ªè¿æ¥èƒ½å¤Ÿæ‹¥æœ‰æ“ä½œæµï¼ˆStreamï¼‰çš„è¯­ä¹‰ã€‚ç½‘ç»œä¼ è¾“å±‚å’Œåè®®å±‚çš„è¾¹ç•Œä»æµï¼ˆStreamï¼‰ç§»åŠ¨åˆ°è¿™ä¸ªè¿æ¥ä¸Šé¢æ¥ï¼š&lt;/p>
&lt;ol>
&lt;li>ç½‘ç»œä¼ è¾“å±‚è´Ÿè´£è¿™ä¸ªè¿æ¥çš„å‡†å¤‡å·¥ä½œï¼Œå½“è¿æ¥å»ºç«‹å®Œæˆåç›´æ¥å°†è¿æ¥äº¤ç»™åè®®å±‚&lt;/li>
&lt;li>åè®®å±‚ç›´æ¥æ“ä½œå»ºè¿å®Œæˆåçš„é“¾æ¥ï¼Œä¸è¿‡å’Œ Hertz
å½“å‰çš„ç½‘ç»œä¼ è¾“å±‚è¿æ¥æŠ½è±¡ä¸åŒï¼Œè¿™ä¸ªè¿æ¥ä¸å…·å¤‡ç›´æ¥ï¼ˆç†è®ºä¸Šï¼‰è¯»/å†™æ•°æ®çš„æ¥å£å’Œèƒ½åŠ›ï¼Œæ¶‰åŠåˆ°æ•°æ®äº¤äº’çš„æ“ä½œéœ€è¦é€šè¿‡è¿æ¥æä¾›çš„æµï¼ˆStreamï¼‰ç›¸å…³æ“ä½œè¿›è¡Œï¼Œæ¯”å¦‚è¦æƒ³è¯»å–æ•°æ®ï¼Œéœ€è¦é€šè¿‡è¿æ¥æ¥å£å¼€å¯ä¸€ä¸ªåŒ/å•å‘çš„æµï¼Œä¹‹åçš„æ•°æ®äº¤æ¢æ“ä½œé€šè¿‡è¿™ä¸ªå¼€å¯çš„æµæ¥å®Œæˆ&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">ServeStream&lt;/span> &lt;span style="color:#204a87;font-weight:bold">func&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ctx&lt;/span> &lt;span style="color:#000">context&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Context&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">streamConn&lt;/span> &lt;span style="color:#000">StreamConn&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h6 id="è¯¦ç»†è®¾è®¡-1">è¯¦ç»†è®¾è®¡&lt;/h6>
&lt;p>æ˜ç¡®æ–°å¢æ¥å£çš„å½¢æ€ä¹‹åï¼ŒStreamConn å…·ä½“èƒ½å¤Ÿæ”¯æŒçš„è¯­ä¹‰å°±æ¯”è¾ƒæ¸…æ™°äº†ï¼Œå…·ä½“æ¥è¯´ï¼Œåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š&lt;/p>
&lt;ul>
&lt;li>æ”¯æŒè¿æ¥çº§åˆ«æ§åˆ¶èƒ½åŠ›&lt;/li>
&lt;li>æ”¯æŒæµï¼ˆStreamï¼‰ç›¸å…³æ§åˆ¶èƒ½åŠ›&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// StreamConn is interface for stream-based connection abstraction.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">StreamConn&lt;/span> &lt;span style="color:#204a87;font-weight:bold">interface&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">GetRawConnection&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#204a87;font-weight:bold">interface&lt;/span>&lt;span style="color:#000;font-weight:bold">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// HandshakeComplete blocks until the handshake completes (or fails).&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">HandshakeComplete&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#000">context&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Context&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// CloseWithError closes the connection with an error.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// The error string will be sent to the peer.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">CloseWithError&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">err&lt;/span> &lt;span style="color:#000">ApplicationError&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">errMsg&lt;/span> &lt;span style="color:#204a87;font-weight:bold">string&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// LocalAddr returns the local address.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">LocalAddr&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#000">net&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Addr&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// RemoteAddr returns the address of the peer.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">RemoteAddr&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#000">net&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Addr&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// The context is cancelled when the connection is closed.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">Context&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#000">context&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Context&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// Streamer is the interface for stream operations.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">Streamer&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Streamer&lt;/span> &lt;span style="color:#204a87;font-weight:bold">interface&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// AcceptStream returns the next stream opened by the peer, blocking until one is available.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// If the connection was closed due to a timeout, the error satisfies&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// the net.Error interface, and Timeout() will be true.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">AcceptStream&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">context&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Context&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">Stream&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// AcceptUniStream returns the next unidirectional stream opened by the peer, blocking until one is available.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// If the connection was closed due to a timeout, the error satisfies&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// the net.Error interface, and Timeout() will be true.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">AcceptUniStream&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">context&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Context&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ReceiveStream&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// OpenStream opens a new bidirectional QUIC stream.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// There is no signaling to the peer about new streams:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// The peer can only accept the stream after data has been sent on the stream.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// If the error is non-nil, it satisfies the net.Error interface.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// When reaching the peer&amp;#39;s stream limit, err.Temporary() will be true.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// If the connection was closed due to a timeout, Timeout() will be true.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">OpenStream&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">Stream&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// OpenStreamSync opens a new bidirectional QUIC stream.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// It blocks until a new stream can be opened.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// If the error is non-nil, it satisfies the net.Error interface.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// If the connection was closed due to a timeout, Timeout() will be true.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">OpenStreamSync&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">context&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Context&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">Stream&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// OpenUniStream opens a new outgoing unidirectional QUIC stream.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// If the error is non-nil, it satisfies the net.Error interface.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// When reaching the peer&amp;#39;s stream limit, Temporary() will be true.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// If the connection was closed due to a timeout, Timeout() will be true.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">OpenUniStream&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">SendStream&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// OpenUniStreamSync opens a new outgoing unidirectional QUIC stream.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// It blocks until a new stream can be opened.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// If the error is non-nil, it satisfies the net.Error interface.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">// If the connection was closed due to a timeout, Timeout() will be true.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">OpenUniStreamSync&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">context&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Context&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">SendStream&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Stream&lt;/span> &lt;span style="color:#204a87;font-weight:bold">interface&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">ReceiveStream&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">SendStream&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">ReceiveStream&lt;/span> &lt;span style="color:#204a87;font-weight:bold">interface&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">StreamID&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#204a87;font-weight:bold">int64&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">io&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Reader&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// CancelRead aborts receiving on this stream.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// It will ask the peer to stop transmitting stream data.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// Read will unblock immediately, and future Read calls will fail.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// When called multiple times or after reading the io.EOF it is a no-op.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">CancelRead&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">err&lt;/span> &lt;span style="color:#000">ApplicationError&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// SetReadDeadline sets the deadline for future Read calls and&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// any currently-blocked Read call.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// A zero value for t means Read will not time out.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">SetReadDeadline&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">t&lt;/span> &lt;span style="color:#000">time&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Time&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">SendStream&lt;/span> &lt;span style="color:#204a87;font-weight:bold">interface&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">StreamID&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#204a87;font-weight:bold">int64&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// Writer writes data to the stream.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// Write can be made to time out and return a net.Error with Timeout() == true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// after a fixed time limit; see SetDeadline and SetWriteDeadline.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// If the stream was canceled by the peer, the error implements the StreamError&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// interface, and Canceled() == true.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// If the connection was closed due to a timeout, the error satisfies&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// the net.Error interface, and Timeout() will be true.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">io&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Writer&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// CancelWrite aborts sending on this stream.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// Data already written, but not yet delivered to the peer is not guaranteed to be delivered reliably.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// Write will unblock immediately, and future calls to Write will fail.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// When called multiple times or after closing the stream it is a no-op.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">CancelWrite&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">err&lt;/span> &lt;span style="color:#000">ApplicationError&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// Closer closes the write-direction of the stream.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// Future calls to Write are not permitted after calling Close.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// It must not be called concurrently with Write.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// It must not be called after calling CancelWrite.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">io&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Closer&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// The Context is canceled as soon as the write-side of the stream is closed.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// This happens when Close() or CancelWrite() is called, or when the peer&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// cancels the read-side of their stream.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">Context&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#000">context&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Context&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// SetWriteDeadline sets the deadline for future Write calls&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// and any currently-blocked Write call.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// Even if write times out, it may return n &amp;gt; 0, indicating that&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// some data was successfully written.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// A zero value for t means Write will not time out.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">SetWriteDeadline&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">t&lt;/span> &lt;span style="color:#000">time&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Time&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">ApplicationError&lt;/span> &lt;span style="color:#204a87;font-weight:bold">interface&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">ErrCode&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#204a87;font-weight:bold">uint64&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">fmt&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Stringer&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h6 id="ä¼˜ç‚¹-1">ä¼˜ç‚¹&lt;/h6>
&lt;p>ç›¸è¾ƒäºæ–¹æ¡ˆ Aï¼Œæœ¬æ–¹æ¡ˆæœ€å¤§çš„ä¼˜åŠ¿åœ¨äºï¼Œèƒ½å¤Ÿåœ¨è¯­ä¹‰å±‚é¢å¾ˆå¥½çš„è‡ªæ´½ï¼šåè®®å±‚ä¸ç½‘ç»œä¼ è¾“å±‚çš„èŒè´£èŠ‚ç‚¹æ¸…æ™°æ˜ç¡®ï¼Œæ— éœ€ä¸ºä¸€äº›å†å²é—®é¢˜å¦¥åè®¾è®¡è¯­ä¹‰ï¼ŒåŒæ—¶å½“ä¸‹ä¸»æµçš„å¼€æºå®ç°ï¼ˆHTTP/2
åŠ HTTP/3 over QUICï¼‰éƒ½èƒ½å¤Ÿæ¯”è¾ƒå®¹æ˜“å¾—èåˆåˆ°è¿™ä¸ªæ¶æ„ä¸­æ¥ã€‚
å¯¹åè®®å±‚ç›´æ¥æš´éœ²è¿æ¥çš„æ¥å£ï¼Œç»™åè®®å±‚æä¾›äº†æå¤§çš„è‡ªç”±åº¦å’Œå¯¹è¿æ¥çš„æ§åˆ¶åŠ›ï¼Œæ˜¯ä¸€ä¸ªæ›´åŠ ç¬¦åˆå®é™…çš„æŠ½è±¡æ–¹å¼ã€‚&lt;/p>
&lt;h6 id="ç¼ºç‚¹-1">ç¼ºç‚¹&lt;/h6>
&lt;p>ç›¸æ¯”äº Hertz å½“å‰å­˜åœ¨çš„ç½‘ç»œä¼ è¾“å±‚æŠ½è±¡ï¼ˆä¸»è¦æ˜¯ HTTP/1.1 çš„å®ç°ï¼‰ï¼Œæ–°å¢çš„è¿™å¥—æŠ½è±¡å±‚çº§ä¸Šå¹¶ä¸å®Œå…¨å¯¹ç­‰ï¼ˆä¸è¿‡è¿™ä¸ªä¹Ÿæ˜¯ HTTP
åè®®å¤§ç‰ˆæœ¬ä¹‹é—´çš„ä¸€ä¸ªæ˜æ˜¾çš„ break changeï¼‰ï¼Œç›®å‰çœ‹èµ·æ¥ï¼Œè¦æƒ³å®Œå…¨åœ¨æŠ½è±¡å±‚é¢å¡«å¹³è¿™ä¸ª gap
å›°éš¾ç›¸å¯¹è¾ƒå¤§ã€‚ä¸è¿‡ï¼Œæ–°å¢çš„â€œåŸºäºæµçš„è¿æ¥â€è¿™ä¸ªæ¦‚å¿µåº”è¯¥ä¹Ÿä¸å®Œå…¨æ˜¯ä¸€ä»¶åäº‹ï¼Œé’ˆå¯¹æ‹¥æœ‰ç›¸ä¼¼è¯­ä¹‰çš„åè®®ç°‡å…·æœ‰ç»Ÿä¸€è¯­ä¹‰çš„ä½œç”¨ï¼Œä¸è¿‡ä¹Ÿè¦æ±‚ç±»ä¼¼åŸºäºæµæ¥å®ç°å¤šè·¯å¤ç”¨çš„åè®®æœ€å¥½èƒ½å¤ŸæŒ‰ç…§æŠ½è±¡è¿›è¡Œæ‹†åˆ†ï¼ˆç›®å‰çš„ Websocketã€HTTP/2
è¿˜ä¸æ˜¯æ­¤å½¢æ€ï¼‰&lt;/p>
&lt;h5 id="æ–¹æ¡ˆé€‰å‹">æ–¹æ¡ˆé€‰å‹&lt;/h5>
&lt;p>æ–¹æ¡ˆ B
åœ¨ç»¼åˆè€ƒè™‘æ¶æ„å½¢æ€å’Œäº‹å®çš„ä¸€äº›ä¸»æµå®ç°åæ–¹æ¡ˆ B æ›´åŠ ç¬¦åˆ Hertz çš„åˆ†å±‚æ¼”è¿›è·¯çº¿&lt;/p>
&lt;h3 id="åè®®å±‚">åè®®å±‚&lt;/h3>
&lt;p>åŸºäºç½‘ç»œä¼ è¾“å±‚æ–¹æ¡ˆ B è¿›ä¸€æ­¥å¾€å‰èµ°ï¼Œåè®®å±‚çš„å®ç°å°±ç›¸å¯¹çµæ´»çš„å¤šäº†ï¼šé’ˆå¯¹ StreamConn æä¾›çš„æ¥å£ç®¡ç†è¿æ¥ï¼ŒåŒæ—¶è´Ÿè´£æµï¼ˆStreamï¼‰çš„å¼€å¯å’Œå…³é—­å³å¯ã€‚
ä¸è¿‡ï¼Œç”±äºå¼•å…¥çš„ StreamConn å’Œå½“å‰ç½‘ç»œä¼ è¾“å±‚çš„ Conn æ¥å£å®šä¹‰ä¸ä¸€è‡´ï¼Œå› æ­¤åè®®å±‚æ›´å¤šéœ€è¦è€ƒè™‘çš„æ˜¯åŸºäº StreamConn å’Œ Conn
çš„ä¸¤å¥—å›è°ƒå¦‚ä½•åœ¨åè®®å±‚ä»¥åŠåè®®æœåŠ¡å™¨ï¼ˆProtocol Serverï¼‰æ³¨å†Œé˜¶æ®µå®Œæˆèåˆã€‚åŸºæœ¬çš„è¦æ±‚æ˜¯å¯¹ç›®å‰çš„ç°çŠ¶ä¸èƒ½æœ‰ä»»ä½•å½±å“ã€‚&lt;/p>
&lt;h4 id="ç°çŠ¶-1">ç°çŠ¶&lt;/h4>
&lt;p>é€šè¿‡ Hertz æä¾›çš„æ¥å£å°±å¯ä»¥ä¾¿æ·çš„å°†å®ç°äº† Server æ¥å£çš„è‡ªå®šä¹‰åè®®æœåŠ¡å™¨ï¼ˆProtocol Serverï¼‰æ·»åŠ åˆ° Hertz å®ä¾‹æ”¯æŒçš„åè®® map
ä¸­æ¥ã€‚è¯¦ç»†æ–¹å¼å‚è€ƒè¿™é‡Œã€‚æœ¬è´¨ä¸Šå…¶å®è¿˜æ˜¯è¦æ±‚æ‰©å±• Server å®ç°&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">Serve&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">c&lt;/span> &lt;span style="color:#000">context&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Context&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">conn&lt;/span> &lt;span style="color:#000">network&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Conn&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™ä¸ªæ¥å£ï¼Œè€Œç›®å‰çš„ HTTP/1.1ã€HTTP/2 çš„å®ç°ä¹Ÿéƒ½æ˜¯æŒ‰ç…§è¿™ä¸ªæ–¹å¼æ¥è¿›è¡Œçš„ã€‚&lt;/p>
&lt;h4 id="å¼•å…¥-streamconn">å¼•å…¥ StreamConn&lt;/h4>
&lt;h5 id="æ¥å£è®¾è®¡-1">æ¥å£è®¾è®¡&lt;/h5>
&lt;p>å¦‚ç½‘ç»œä¼ è¾“å±‚æŠ½è±¡æ–¹æ¡ˆ B æ‰€è¿°ï¼Œæ–°å¼•å…¥çš„ StreamConn æœ¬èº«å’Œå½“å‰çš„ network.Conn åœ¨è¯­ä¹‰ä¸Šå­˜åœ¨å¾ˆå¤§çš„ diffï¼Œå¯¼è‡´ç¡¬èåˆè¿™ä¸¤ä¸ªæ¥å£ä¸ºä¸€ä¸ªå­˜åœ¨ä¸€å®šçš„å›°éš¾ã€‚åœ¨â€œæ–°å¢
QUIC &amp;amp; HTTP3 æ”¯æŒä¸èƒ½ç ´åå­˜é‡æŠ½è±¡â€çš„åŸºæœ¬åº•çº¿ä¹‹ä¸Šï¼Œæ›´åŠ åˆç†çš„æ–¹å¼æ˜¯æ˜¾ç¤ºå¢åŠ ä¸€ä¸ªç‹¬ç«‹ä¸”å¹³è¡Œçš„åŸºäºæµçš„ Server
æ¥å£ï¼š
StreamServerï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">StreamServer&lt;/span> &lt;span style="color:#204a87;font-weight:bold">interface&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">Serve&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">c&lt;/span> &lt;span style="color:#000">context&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Context&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">conn&lt;/span> &lt;span style="color:#000">network&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">StreamConn&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Protocol server factory:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">StreamServerFactory&lt;/span> &lt;span style="color:#204a87;font-weight:bold">interface&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#000">New&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">core&lt;/span> &lt;span style="color:#000">Core&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">server&lt;/span> &lt;span style="color:#000">protocol&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">StreamServer&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">err&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>&lt;span style="color:#000;font-weight:bold">)}&lt;/span>&lt;span style="color:#8f5902;font-style:italic">// Core is the core interface that promises to be provided for the protocol layer extensions&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Core&lt;/span> &lt;span style="color:#204a87;font-weight:bold">interface&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#8f5902;font-style:italic">// IsRunning Check whether engine is running or not&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">IsRunning&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#204a87;font-weight:bold">bool&lt;/span>&lt;span style="color:#8f5902;font-style:italic">// A RequestContext pool ready for protocol server impl&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">GetCtxPool&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">*&lt;/span>&lt;span style="color:#000">sync&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Pool&lt;/span>&lt;span style="color:#8f5902;font-style:italic">// Business logic entrance&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// After pre-read works, protocol server may call this method&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// to introduce the middlewares and handlers&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">ServeHTTP&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ctx&lt;/span> &lt;span style="color:#000">context&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Context&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">c&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">*&lt;/span>&lt;span style="color:#000">app&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">RequestContext&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#8f5902;font-style:italic">// GetTracer for tracing requirement&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">GetTracer&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#000">tracer&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Controller&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æŒ‰ç…§è¿™å¥—æ–°çš„æŠ½è±¡æ¥å£å±•å¼€ï¼Œå¯¹äºå­˜é‡æ¶æ„çš„å½±å“å°±éå¸¸å°äº†ï¼Œä¸è¿‡éœ€è¦æ–°å¢é’ˆå¯¹æ–°å¢çš„ç½‘ç»œæŠ½è±¡å’Œåè®®æŠ½è±¡çš„æ˜ å°„ã€‚
å½“å‰ç½‘ç»œä¼ è¾“å±‚ã€åè®®å±‚é—´ä¸å­˜åœ¨æ˜æ˜¾è€¦åˆï¼š&lt;/p>
&lt;p>ç½‘ç»œä¼ è¾“å±‚åŸç”Ÿæä¾›ï¼š&lt;/p>
&lt;ol>
&lt;li>åŸºäº netpoll çš„å®ç°&lt;/li>
&lt;li>åŸºäºæ ‡å‡†åº“çš„å®ç°&lt;/li>
&lt;/ol>
&lt;p>åè®®å±‚æä¾›ï¼š&lt;/p>
&lt;ol>
&lt;li>HTTP/1.1&lt;/li>
&lt;li>HTTP/2&lt;/li>
&lt;/ol>
&lt;p>æ’é™¤æ‰ Netpoll ä¸æ”¯æŒ TLS è¿™ä¸€ç‚¹æ¥çœ‹ï¼Œå…¶å®ç½‘ç»œä¼ è¾“å±‚å’Œåè®®å±‚æ˜¯èƒ½å¤Ÿè‡ªç”±ç»„åˆï¼Œæ€»å…± 4ï¼ˆ2*2ï¼‰ç§ä¸åŒçš„æ­é…ã€‚
ä½†æ–°å¼•å…¥çš„ StreamConnï¼ˆç½‘ç»œä¼ è¾“å±‚ï¼‰ ã€StreamServerï¼ˆåè®®å±‚ï¼‰å…¶å®å’Œä¸Šè¿°å®ç°å®Œå…¨å¹³è¡Œï¼Œå¦‚æœç½‘ç»œä¼ è¾“å±‚é‡‡ç”¨ StreamConn è¿™å¥—æŠ½è±¡æ¥å£ï¼Œåè®®å±‚ä¹Ÿå°±åªèƒ½æ˜¯å¯¹æ¥å®ç°äº† StreamServer çš„ Server äº†ï¼ˆç›®å‰çš„ HTTP/1.1ã€HTTP/2 éƒ½ä¸æ˜¯ï¼Œä¸è¿‡ HTTP/2 æ˜¯æ¡æµå†™å›å¯¹å­˜åœ¨æ”¹é€ /é‡å†™é€‚é…ä¸Š StreamConn &amp;amp; StreamServer çš„å¯èƒ½æ€§çš„ï¼‰ã€‚&lt;/p>
&lt;h2 id="å®ç°">å®ç°&lt;/h2>
&lt;p>&lt;a href="https://github.com/hertz-contrib/http3">https://github.com/hertz-contrib/http3&lt;/a>&lt;/p></description></item><item><title>Blog: Kitex v0.6.1 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2023/06/19/kitex-v0.6.1-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Mon, 19 Jun 2023 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2023/06/19/kitex-v0.6.1-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;h2 id="è¯¦ç»†å˜æ›´">&lt;strong>è¯¦ç»†å˜æ›´&lt;/strong>&lt;/h2>
&lt;h2 id="hotfix">Hotfix:&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/988">#988&lt;/a>] hotfix(code_gen): ä¿®å¤slimæ¨¡æ¿ä»£ç ç”Ÿæˆå¤±è´¥é—®é¢˜&lt;/li>
&lt;/ul></description></item><item><title>Blog: Netpoll v0.4.0 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2023/06/14/netpoll-v0.4.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Wed, 14 Jun 2023 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2023/06/14/netpoll-v0.4.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;h2 id="feature">Feature:&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/249">#249&lt;/a>] feat: æ·»åŠ  Detach å‡½æ•°æ¥æ”¯æŒä»è¿æ¥çš„ poller ä¸­åˆ é™¤è¿æ¥&lt;/li>
&lt;/ul>
&lt;h2 id="optimize">Optimize:&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/250">#250&lt;/a>] optimize: ä¼˜åŒ– WriteDirect å®ç°ï¼Œé¿å… remainLen ä¸º 0 æ—¶ panic å’Œé‡å¤åˆ›å»ºå†—ä½™çš„ LinkBufferNode.&lt;/li>
&lt;/ul>
&lt;h2 id="bugfix">Bugfix:&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/256">#256&lt;/a>] fix: è°ƒç”¨ openPoll å¤±è´¥æ—¶å…³é—­å·²ç»åˆ›å»ºçš„ poll&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/251">#251&lt;/a>] fix: err to e0&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/226">#226&lt;/a>] fix: åœ¨å…³é—­è¿æ¥å‰ poller è¯»å–æ‰€æœ‰æœªè¯»çš„ data&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/237">#237&lt;/a>] fix: shard queue çŠ¶æ€å…³é—­é”™è¯¯&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/189">#189&lt;/a>] fix: å½“ readv syscall return 0, nil æ—¶å…³é—­è¿æ¥&lt;/li>
&lt;/ul>
&lt;h2 id="refactor">Refactor&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/233">#233&lt;/a>] refactor: ç®€åŒ– race å’Œ norace event loop&lt;/li>
&lt;/ul></description></item><item><title>Blog: Kitex v0.6.0 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2023/06/14/kitex-v0.6.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Wed, 14 Jun 2023 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2023/06/14/kitex-v0.6.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;h2 id="é‡è¦å˜æ›´ä»‹ç»">é‡è¦å˜æ›´ä»‹ç»&lt;/h2>
&lt;h3 id="åŠŸèƒ½">åŠŸèƒ½&lt;/h3>
&lt;p>&lt;strong>1. GRPC å…ƒä¿¡æ¯ä¼ é€’&lt;/strong>&lt;/p>
&lt;p>client é»˜è®¤å°† header è®¾ç½®åˆ° ctxï¼Œå¤–éƒ¨æ–¹æ³•å¯åˆ©ç”¨ &lt;code>GetHeaderMetadataFromCtx&lt;/code> è·å–å…ƒä¿¡æ¯ã€‚å¯ç”¨äº transmeta å†…è·å–å…ƒä¿¡æ¯å¹¶è®¾ç½®åˆ° rpcinfo ä¸­ï¼Œæˆ–åœ¨ä¸­é—´ä»¶å†…è·å– header ä¿¡æ¯ã€‚&lt;/p>
&lt;p>&lt;strong>2. Kitex é…ç½®æ¨¡å—é‡æ„&lt;/strong>&lt;/p>
&lt;p>å¢åŠ é‡è¯•ã€ç†”æ–­ã€è¶…æ—¶ã€é™æµçš„ config itemï¼Œæ”¯æŒ &lt;a href="https://github.com/cloudwego/configmanager">configmanager&lt;/a> ä¸­é—´ä»¶å®šä¹‰çš„æ¥å£ï¼Œç”¨äºæ”¯æŒä¸å¤–éƒ¨é…ç½®ä¸­å¿ƒçš„æ‰©å±•é›†æˆã€‚&lt;/p>
&lt;p>&lt;strong>3. Kitex - å·¥å…·&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>æ”¯æŒåœ¨ thrift ç”Ÿæˆä»£ç ä¸­æ’å…¥å¯¹è±¡æ·±æ‹·è´å‡½æ•°ï¼Œç”¨äºæ·±æ‹·è´æºå¯¹è±¡åˆ°ç›®æ ‡å¯¹è±¡ï¼Œä½¿ç”¨æ–¹å¼ä¸º kitex å‘½ä»¤å¢åŠ  &lt;code>-deep-copy-api&lt;/code> å‚æ•°ï¼›&lt;/li>
&lt;li>æ”¯æŒåœ¨ thrift ç”Ÿæˆä»£ç ä¸­æ’å…¥ IDL æè¿°ç¬¦æ³¨å†Œä»£ç ï¼Œç”¨äºåœ¨è¿è¡Œæ—¶åŠ è½½å¯¹åº”ç”Ÿæˆä»£ç åï¼Œæ³¨å†Œ IDL æè¿°ç¬¦ä¿¡æ¯åˆ° &lt;code>github.com/cloudwego/kitex/pkg/reflection/thrift&lt;/code> åŒ…å†…ï¼Œå¹¶é€šè¿‡æš´éœ²çš„å‡½æ•°è·å–æè¿°ç¬¦ä¿¡æ¯ï¼Œä½¿ç”¨æ–¹å¼ä¸ºåœ¨ kitex å‘½ä»¤ &lt;code>thrift&lt;/code> å‚æ•°æ·»åŠ  &lt;code>generate-reflection-info=true&lt;/code> ï¼Œå¦‚ &lt;code>kitex -thrift generate-reflection-info=true ...&lt;/code> ï¼›Kitex åœ¨ v1.12.0 åªæ”¯æŒäº† IDL æè¿°ç¬¦ä¿¡æ¯æ³¨å†Œï¼Œæ›´ä¸°å¯Œçš„æŸ¥è¯¢æ¥å£å°†åœ¨åç»­ç‰ˆæœ¬è¿›è¡Œå‘å¸ƒï¼ŒåŒæ—¶ IDL æè¿°ç¬¦æ³¨å†Œå‡½æ•°ç”Ÿæˆä¹Ÿå°†ä¿®æ”¹ä¸ºé»˜è®¤ç”Ÿæˆã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="ä¼˜åŒ–">ä¼˜åŒ–&lt;/h3>
&lt;p>&lt;strong>1. é‡æ„ detection server æ”¯æŒå¤šç§åè®®çš„æ¢æµ‹&lt;/strong>&lt;/p>
&lt;p>æ—§ç‰ˆæœ¬ detection server å†™æ­»äº† http2 ä½œä¸ºæ¢æµ‹åè®®ï¼Œv1.12.0 ç‰ˆæœ¬æ”¯æŒç”¨æˆ·ä¼ å…¥å®ç°äº† &lt;code>detection.DetectableServerTransHandler&lt;/code> æ¥å£çš„ &lt;code>remote.ServerTransHandler&lt;/code> å¯¹åº”çš„ &lt;code>remote.ServerTransHandlerFactory&lt;/code> ä½œä¸ºä¸å®šå‚æ•°ï¼Œé…åˆé»˜è®¤çš„&lt;code>remote.ServerTransHandler&lt;/code>å¤„ç†æœªåŒ¹é…çš„åè®®ï¼Œå®ç°å¤šç§åè®®å…¼å®¹çš„Kitex Serverã€‚&lt;/p>
&lt;p>&lt;strong>2. ä¸€è‡´æ€§ hash&lt;/strong>&lt;/p>
&lt;p>ä¸€è‡´æ€§hashè´Ÿè½½å‡è¡¡ä¸­ &lt;code>buildVirtualNodes&lt;/code> ä½¿ç”¨ &lt;code>virtualFactorLen&lt;/code> åˆå§‹åŒ– &lt;code>bytes&lt;/code> æ•°ç»„ï¼Œ ç©ºé—´å¯èƒ½ä¸è¶³å®¹çº³ä¸‹ &lt;code>VirtualNodeLen&lt;/code> ç¼–å·ï¼Œå¯¼è‡´ &lt;code>address&lt;/code> éƒ¨åˆ†è¢«è¦†ç›–ã€‚&lt;/p>
&lt;p>&lt;strong>3. é•¿è¿æ¥æ± åŸ‹ç‚¹&lt;/strong>&lt;/p>
&lt;p>ä¿®å¤é•¿è¿æ¥æ± å¤ç”¨è¿æ¥æˆåŠŸæ—¶æ‰“ç‚¹æœªä¸ŠæŠ¥é—®é¢˜ã€‚&lt;/p>
&lt;h3 id="å…¶ä»–">å…¶ä»–&lt;/h3>
&lt;p>å‡çº§ netpoll åº“ä¾èµ–è‡³ v0.4.0 ï¼ŒåŒæ—¶æ”¯æŒ &lt;a href="https://github.com/cloudwego/configmanager">configmanager&lt;/a> v0.2.0 ç‰ˆæœ¬ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="è¯¦ç»†å˜æ›´">è¯¦ç»†å˜æ›´&lt;/h2>
&lt;h2 id="feature">Feature:&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/923">#923&lt;/a>] feat(grpc): grpc å®¢æˆ·ç«¯å°† header å’Œ trailer è®¾ç½®åˆ° context å†…ï¼Œå¹¶æä¾›æ¥å£ä» context è·å– header&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/891">#891&lt;/a>] feat: æ”¯æŒ rpc client å’Œ server çš„æœåŠ¡åˆå¹¶ï¼Œå®ƒå¯ä»¥å°†è¿œç«¯ rpc è°ƒç”¨æ”¹æˆæœ¬åœ°çš„å‡½æ•°çº§è°ƒç”¨ã€‚è¿™ä¸ªç‰¹æ€§éœ€è¦ç”Ÿæˆå·¥å…·æ”¯æŒ&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/946">#946&lt;/a>] feat: default server handler æ”¯æŒé€šè¿‡trans pipelineæ‰§è¡ŒReadå‡½æ•°&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/936">#936&lt;/a>] feat(config): å¢åŠ  é‡è¯•ã€ç†”æ–­ã€è¶…æ—¶ã€é™æµ çš„ config item&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/924">#924&lt;/a>] [&lt;a href="https://github.com/cloudwego/kitex/pull/939">#939&lt;/a>] feat(code_gen): æ”¯æŒç”Ÿæˆæ·±æ‹·è´APIä»£ç åŠŸèƒ½&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/926">#926&lt;/a>] feat: æ”¯æŒthriftåå°„ä¿¡æ¯æ³¨å†Œ&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/897">#897&lt;/a>] feat: è‡ªå®šä¹‰æ¨¡æ¿ä¸­æ”¯æŒ loop_service&lt;/li>
&lt;/ul>
&lt;h2 id="optimize">Optimize:&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/961">#961&lt;/a>] optimize(tool): -use å‚æ•°æ”¯æŒè‡ªå®šä¹‰æ¨¡æ¿åœºæ™¯&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/966">#966&lt;/a>] optimize(ttheader): ttheader çš„ headerFlags å¤„ç†å¢åŠ ç±»å‹æ£€æŸ¥&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/919">#919&lt;/a>] optimize: ä½¿ç”¨ GoFunc æ›¿ä»£ go func ä»¥é¿å… panic&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/960">#960&lt;/a>] optimize: å…¬å¼€statsåŒ…ä»¥ä¾¿åœ¨æ‰©å±•ä»“åº“ä¸­é‡ç”¨&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/955">#955&lt;/a>] optimize: ç§»é™¤ gonet transerver ä¸­å¤šä½™çš„ onRead é”™è¯¯æ—¥å¿—&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/954">#954&lt;/a>] optimize: å½“ transHandler æ²¡æœ‰å®ç° GracefulShutdown æ¥å£æ—¶ï¼Œä¸è¿”å›æŠ¥é”™&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/941">#941&lt;/a>] optimize(callopt): ä¼˜åŒ– callopt çš„ debug ä¿¡æ¯ï¼Œå‡å°‘ slice æ‰©å¼ çš„å¯èƒ½æ€§&lt;/li>
&lt;/ul>
&lt;h2 id="fix">Fix:&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/963">#963&lt;/a>] fix(generic): ä¿®å¤ map æ³›åŒ–è°ƒç”¨åœ¨ byte ç±»å‹å­—æ®µ panic çš„é—®é¢˜&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/901">#901&lt;/a>] fix(mux): å¤šè·¯å¤ç”¨è¿æ¥çš„ asynccallback ä¸åˆ›å»ºæ–° goroutineï¼Œå¹¶ä¸” server ç­‰å¾…æ‰€æœ‰ crrst åŒ…éƒ½è¢« client æ¥æ”¶åå†å…³é—­&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/921">#921&lt;/a>] fix(loadbalance): ä¿®å¤ä¸€è‡´æ€§ hash []byte æ•°ç»„é•¿åº¦ä¸å¤Ÿç”¨çš„é—®é¢˜&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/922">#922&lt;/a>] fix(mux): ä¿®å¤å½“å¼€å¯ mux å¹¶ä¸”ä½¿ç”¨ Kitex Protobuf æ—¶ï¼Œåœ¨é€€å‡ºæ—¶è¾“å‡ºä¸åˆç†çš„ error é—®é¢˜&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/927">#927&lt;/a>] fix(connpool): é•¿è¿æ¥æ± å¤ç”¨è¿æ¥æˆåŠŸæ—¶è¿›è¡Œä¸ŠæŠ¥&lt;/li>
&lt;/ul>
&lt;h2 id="refactor">Refactor:&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/958">#958&lt;/a>] refactor(errorHandler): é‡æ„ error handler å®šä¹‰ï¼Œå¯ä»¥è·å–æ›´æ–°ä¿¡æ¯å¤„ç† error&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/943">#943&lt;/a>] refactor(client): é‡æ„ client.Call æå‡ä»£ç å¯è¯»æ€§&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/560">#560&lt;/a>] refactor: é‡æ„server detection trans handlerä»¥æ”¯æŒå¤šç§åè®®çš„æ¢æµ‹&lt;/li>
&lt;/ul>
&lt;h2 id="tests">Tests:&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/900">#900&lt;/a>] test(generic): æ·»åŠ ä½¿ç”¨ dynamicgo çš„ thrift åå°„æ³›åŒ–è°ƒç”¨ç¤ºä¾‹&lt;/li>
&lt;/ul>
&lt;h2 id="chore">Chore:&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/976">#976&lt;/a>] chore: æ›´æ–° netpoll ç‰ˆæœ¬åˆ° v0.4.0 å¹¶ä¸”æ›´æ–° thriftgo ç‰ˆæœ¬åˆ° v0.2.11&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/956">#956&lt;/a>] chore: æ›´æ–° configmanager ç‰ˆæœ¬åˆ° v0.2.0&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/948">#948&lt;/a>] chore: ä½¿ç”¨ goimports -local github.com/cloudwego/kitex è°ƒæ•´ä»“åº“æ ¼å¼&lt;/li>
&lt;/ul></description></item><item><title>Blog: Volo 0.5.0 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2023/06/02/volo-0.5.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Fri, 02 Jun 2023 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2023/06/02/volo-0.5.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;p>Volo 0.5.0 ç‰ˆæœ¬ä¸­ï¼Œé™¤äº†å¸¸è§„ bugfix ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›æ–°çš„ feature å¼•å…¥ã€‚&lt;/p>
&lt;h2 id="pilota-build-compile-æ¥å£å˜åŠ¨">Pilota-build compile æ¥å£å˜åŠ¨&lt;/h2>
&lt;p>å¦‚æœæœ‰éœ€è¦è‡ªå·±ç¼–è¯‘ idl çš„ç”¨æˆ·ï¼Œåœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­éœ€è¦é€‚é…ä¸€ä¸‹æ–°çš„&lt;code>compile&lt;/code>æ¥å£ï¼Œå‚æ•°æ”¹åŠ¨å¾ˆç®€å•ï¼Œå¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">xxx&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">compile&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;idl/collector.proto&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">],&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">pilota_build&lt;/span>::&lt;span style="color:#000">Output&lt;/span>::&lt;span style="color:#000">File&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">out_dir&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åªéœ€è¦åœ¨åŸå…ˆçš„&lt;code>out_dir&lt;/code>ä¸ŠåŠ ä¸€ä¸ª&lt;code>pilota_build::Output::File&lt;/code>å³å¯ã€‚&lt;/p>
&lt;h2 id="thrift-ç¼–è§£ç æ¥å£å˜åŠ¨">Thrift ç¼–è§£ç æ¥å£å˜åŠ¨&lt;/h2>
&lt;p>&lt;code>Pilota&lt;/code>ä¸­&lt;code>InputProtocol&lt;/code>æ¥å£æ”¹ä¸ºä½¿ç”¨&lt;code>Bytes&lt;/code>è€Œä¸æ˜¯&lt;code>BytesMut&lt;/code>ï¼Œä»¥æ¥å—æ›´å¤šç±»å‹çš„å‚æ•°ã€‚&lt;/p>
&lt;h2 id="ä¸€è‡´æ€§å“ˆå¸Œ-lb-æ”¯æŒ">ä¸€è‡´æ€§å“ˆå¸Œ LB æ”¯æŒ&lt;/h2>
&lt;p>æ„Ÿè°¢ @&lt;a href="https://github.com/my-vegetable-has-exploded">my-vegetable-has-exploded&lt;/a> åœ¨ &lt;a href="https://github.com/cloudwego/volo/pull/182">#182&lt;/a> ä¸­ä¸ºæˆ‘ä»¬æ”¯æŒäº†ä¸€è‡´æ€§å“ˆå¸Œ LBã€‚&lt;/p>
&lt;h2 id="è¿”å›-arcresp">è¿”å› Arc&lt;Resp>&lt;/h2>
&lt;p>æ–°ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬æ”¯æŒäº†åœ¨ Resp ç±»å‹å¤–å¢åŠ  Arc wrapperï¼Œå…·ä½“ä½¿ç”¨å¯ä»¥å‚è€ƒï¼šhttps://github.com/cloudwego/pilota/pull/159&lt;/p>
&lt;h2 id="unsafe-codec">unsafe-codec&lt;/h2>
&lt;p>æ–°ç‰ˆæœ¬æ”¯æŒäº†ä½¿ç”¨ unsafe çš„æ–¹å¼æ¥ä¼˜åŒ– codec æ€§èƒ½ï¼Œé’ˆå¯¹æ¯”å¦‚ list&lt;i64> è¿™ç§ç±»å‹çš„ç¼–è§£ç å‡æœ‰å¤§çº¦ 20 å€çš„æ€§èƒ½æå‡ï¼Œå…¶å®ƒç±»å‹ä¹Ÿæœ‰ä¸€å®šæå‡ï¼›å¸¦æ¥çš„é—®é¢˜æ˜¯ï¼Œæ¶æ„æ„é€ çš„ thrift payload å¯èƒ½ä¼šå¯¼è‡´ ubï¼ˆcoredumpï¼‰ï¼Œå› æ­¤æˆ‘ä»¬æ²¡æœ‰é»˜è®¤å¼€å¯ã€‚&lt;/p>
&lt;p>å¦‚æœç”¨æˆ·èƒ½å¤Ÿä¿¡ä»» Thrift Payloadï¼ˆæ¯”å¦‚å†…ç½‘ï¼‰ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡ unsafe-codec è¿™ä¸ª feature æ¥å¼€å¯ã€‚&lt;/p>
&lt;h2 id="å‡å°‘-happy-path-ä¸Šçš„-box-æ•°é‡">å‡å°‘ happy path ä¸Šçš„ Box æ•°é‡&lt;/h2>
&lt;p>æ–°ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä¼˜åŒ–äº† happy path ä¸Šéœ€è¦ä½¿ç”¨çš„ Box æ•°é‡ï¼Œæ€§èƒ½ç†è®ºä¸Šä¼šæœ‰ä¸€äº›è½»å¾®æå‡ã€‚&lt;/p>
&lt;h2 id="å®Œæ•´-release-note">å®Œæ•´ Release Note&lt;/h2>
&lt;p>å®Œæ•´çš„ Release Note å¯ä»¥å‚è€ƒï¼š&lt;a href="https://github.com/cloudwego/volo/compare/volo-0.4.2...volo-0.5.0">Volo Changelog&lt;/a>&lt;/p></description></item><item><title>Blog: Kitex v0.5.3 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2023/04/21/kitex-v0.5.3-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Fri, 21 Apr 2023 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2023/04/21/kitex-v0.5.3-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;h2 id="é‡è¦å˜æ›´ä»‹ç»">é‡è¦å˜æ›´ä»‹ç»&lt;/h2>
&lt;h3 id="åŠŸèƒ½">åŠŸèƒ½&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>å¼‚å¸¸é‡è¯•ï¼šæ·»åŠ é…ç½®ï¼Œæ”¯æŒä¸å¯¹è¶…æ—¶é”™è¯¯è¿›è¡Œé‡è¯•ï¼Œç”¨äºè¯·æ±‚éå¹‚ç­‰çš„åœºæ™¯ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä»£ç ç”Ÿæˆå·¥å…·ï¼šæ”¯æŒ windows ç¯å¢ƒä½¿ç”¨ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>è¶…æ—¶é”™è¯¯ç±»å‹æ‹†åˆ†ï¼šæ”¯æŒç»†ç²’åº¦çš„è¶…æ—¶é”™è¯¯ç±»å‹ï¼Œå°† ErrRPCTimeout ç»†åˆ†ä¸ºä¸‰ä¸ªé”™è¯¯ç±»å‹ï¼šè¶…æ—¶ã€ä¸šåŠ¡cancelã€ä¸šåŠ¡timeoutã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Thrift FastCodecï¼šæ”¯æŒ unknown fieldsã€‚&lt;/p>
&lt;ul>
&lt;li>
&lt;p>unknown fields ä½¿ç”¨èƒŒæ™¯ï¼šåœ¨ thrift ä¸­ï¼ŒIDL å†…å¢åŠ å­—æ®µå¯¹æœªæ›´æ–° IDL çš„ä¸€æ–¹æ˜¯æ— æ„ŸçŸ¥çš„ï¼Œå¿…é¡»æ›´æ–° IDL ä¸ç”Ÿæˆä»£ç ä»¥è·å–åˆ°æ–°çš„å­—æ®µã€‚è¿™ä¼šå¯¼è‡´è°ƒç”¨é“¾è·¯ä¸ŠæŸä¸ªèŠ‚ç‚¹æ›´æ–° IDL æ—¶ï¼Œä¸‹æ¸¸æ‰€æœ‰èŠ‚ç‚¹å‡éœ€è¦è¿›è¡Œæ›´æ–°ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>unknown fields åˆ™æ”¯æŒä¿ç•™æœªè¯†åˆ«çš„å­—æ®µï¼Œå¯¹äº IDL å†…ä¸å­˜åœ¨çš„å­—æ®µï¼Œè¯»å–å¹¶è®¾ç½®äºç»“æ„ä½“çš„ &lt;code>_unknownFields&lt;/code> å­—æ®µã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ä½¿ç”¨æ–¹æ³•ï¼š&lt;code>kitex -thrift keep_unknown_fields your.thrift&lt;/code>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="ä¿®å¤">ä¿®å¤&lt;/h3>
&lt;ol>
&lt;li>å¤±è´¥é‡è¯•ç­–ç•¥ï¼šä¿®å¤å¤±è´¥é‡è¯•ç­–ç•¥è¢«åŠ¨æ€ä¿®æ”¹åï¼Œç»“æœé‡è¯• (resultRetry) ç­–ç•¥å¤±æ•ˆçš„é—®é¢˜ã€‚&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h2 id="è¯¦ç»†å˜æ›´">è¯¦ç»†å˜æ›´&lt;/h2>
&lt;h2 id="feature">Feature:&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/887">#887&lt;/a>] feat(retry): å¢åŠ é…ç½®ï¼Œæ”¯æŒå¼‚å¸¸é‡è¯•åœºæ™¯ä¸‹ä¸å¯¹è¶…æ—¶åšé‡è¯•ï¼Œç”¨äºè¯·æ±‚éå¹‚ç­‰çš„åœºæ™¯&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/881">#881&lt;/a>] feat(tool): æ”¯æŒ windows åœºæ™¯ä¸‹çš„ä»£ç ç”Ÿæˆ&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/880">#880&lt;/a>] feat(rpctimeout): æ”¯æŒç»†ç²’åº¦çš„è¶…æ—¶é”™è¯¯ç±»å‹&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/872">#872&lt;/a>] feat(thrift): åœ¨ fast codec ä¸­æ”¯æŒ unknown fields çš„åºåˆ—åŒ–åŠååºåˆ—åŒ–&lt;/li>
&lt;/ul>
&lt;h2 id="optimize">Optimize:&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/884">#884&lt;/a>] optimize(rpcinfo): RPCInfo.To().Tag() ä¼˜å…ˆä½¿ç”¨æœåŠ¡å‘ç°çš„instance tagè€Œä¸æ˜¯remoteinfo tag&lt;/li>
&lt;/ul>
&lt;h2 id="fix">Fix:&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/896">#896&lt;/a>] fix(remoteinfo): ä¿®å¤ remoteinfo ä¸­éæ·±æ‹·è´çš„ CopyFrom å¼•å…¥çš„ race é—®é¢˜&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/892">#892&lt;/a>] fix(grpc): æ³¨é‡Š ReadFrame error æ—¶è¾“å‡ºçš„ error æ—¥å¿—&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/889">#889&lt;/a>] fix(retry): åœ¨å¤±è´¥é‡è¯•ç­–ç•¥è¢«åŠ¨æ€ä¿®æ”¹åï¼Œç»“æœé‡è¯•ç­–ç•¥å¤±æ•ˆ&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/866">#866&lt;/a>] fix(grpc): stream çš„ sendMsg/recvMsg è¿”å›çš„ ctx æ— éœ€èµ‹å€¼ç»™ stream çš„ ctx&lt;/li>
&lt;/ul>
&lt;h2 id="chore">Chore:&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/898">#898&lt;/a>] chore: æ›´æ–° PR çš„æ¨¡æ¿ï¼Œå¯¹ç”¨æˆ·æ–‡æ¡£çš„æ›´æ–°åš check&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/854">#854&lt;/a>] style(nphttp2): ä¿è¯ receiver çš„åå­—ä¸€è‡´&lt;/li>
&lt;/ul></description></item><item><title>Blog: å­—èŠ‚å¼€æº Monoio ï¼šåŸºäº io-uring çš„é«˜æ€§èƒ½ Rust Runtime</title><link>https://www.cloudwego.io/zh/blog/2023/04/17/%E5%AD%97%E8%8A%82%E5%BC%80%E6%BA%90-monoio-%E5%9F%BA%E4%BA%8E-io-uring-%E7%9A%84%E9%AB%98%E6%80%A7%E8%83%BD-rust-runtime/</link><pubDate>Mon, 17 Apr 2023 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2023/04/17/%E5%AD%97%E8%8A%82%E5%BC%80%E6%BA%90-monoio-%E5%9F%BA%E4%BA%8E-io-uring-%E7%9A%84%E9%AB%98%E6%80%A7%E8%83%BD-rust-runtime/</guid><description>
&lt;h2 id="æ¦‚è¿°">æ¦‚è¿°&lt;/h2>
&lt;p>å°½ç®¡ Tokio ç›®å‰å·²ç»æ˜¯ Rust å¼‚æ­¥è¿è¡Œæ—¶çš„äº‹å®æ ‡å‡†ï¼Œä½†è¦å®ç°æè‡´æ€§èƒ½çš„ç½‘ç»œä¸­é—´ä»¶è¿˜æœ‰ä¸€å®šè·ç¦»ã€‚ä¸ºäº†è¿™ä¸ªç›®æ ‡ï¼Œ&lt;a href="https://github.com/cloudwego">CloudWeGo&lt;/a> Rust Team æ¢ç´¢åŸºäº io-uring ä¸º Rust æä¾›å¼‚æ­¥æ”¯æŒï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šç ”å‘é€šç”¨ç½‘å…³ã€‚
æœ¬æ–‡åŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼š&lt;/p>
&lt;ol>
&lt;li>ä»‹ç» Rust å¼‚æ­¥æœºåˆ¶ï¼›&lt;/li>
&lt;li>&lt;a href="https://github.com/bytedance/monoio">Monoio&lt;/a> çš„ä¸€äº›è®¾è®¡ç²¾è¦ï¼›&lt;/li>
&lt;li>Runtime å¯¹æ¯”é€‰å‹ä¸åº”ç”¨ã€‚&lt;/li>
&lt;/ol>
&lt;h2 id="rust-å¼‚æ­¥æœºåˆ¶">Rust å¼‚æ­¥æœºåˆ¶&lt;/h2>
&lt;p>å€ŸåŠ© Rustc å’Œ llvmï¼ŒRust å¯ä»¥ç”Ÿæˆè¶³å¤Ÿé«˜æ•ˆä¸”å®‰å…¨çš„æœºå™¨ç ã€‚ä½†æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºé™¤äº†è®¡ç®—é€»è¾‘ä»¥å¤–å¾€å¾€è¿˜æœ‰ IOï¼Œç‰¹åˆ«æ˜¯å¯¹äºç½‘ç»œä¸­é—´ä»¶ï¼ŒIO å…¶å®æ˜¯å äº†ç›¸å½“å¤§æ¯”ä¾‹çš„ã€‚&lt;/p>
&lt;p>ç¨‹åºåš IO éœ€è¦å’Œæ“ä½œç³»ç»Ÿæ‰“äº¤é“ï¼Œç¼–å†™å¼‚æ­¥ç¨‹åºé€šå¸¸å¹¶ä¸æ˜¯ä¸€ä»¶ç®€å•çš„äº‹æƒ…ï¼Œåœ¨ Rust ä¸­æ˜¯æ€ä¹ˆè§£å†³è¿™ä¸¤ä¸ªé—®é¢˜çš„å‘¢ï¼Ÿæ¯”å¦‚ï¼Œåœ¨ C++é‡Œé¢ï¼Œå¯èƒ½ç»å¸¸ä¼šå†™ä¸€äº› callback ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸æƒ³åœ¨ Rust é‡Œé¢è¿™ä¹ˆåšï¼Œè¿™æ ·çš„è¯ä¼šé‡åˆ°å¾ˆå¤šç”Ÿå‘½å‘¨æœŸç›¸å…³çš„é—®é¢˜ã€‚&lt;/p>
&lt;p>Rust å…è®¸è‡ªè¡Œå®ç° Runtime æ¥è°ƒåº¦ä»»åŠ¡å’Œæ‰§è¡Œ syscallï¼›å¹¶æä¾›äº† Future ç­‰ç»Ÿä¸€çš„æ¥å£ï¼›å¦å¤–å†…ç½®äº† async-await è¯­æ³•ç³–ä»é¢å‘ callback ç¼–ç¨‹ä¸­è§£æ”¾å‡ºæ¥ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Monoio_Open_Source/1_2_zh.png" alt="image">&lt;/p>
&lt;h3 id="example">Example&lt;/h3>
&lt;p>è¿™é‡Œä»ä¸€ä¸ªç®€å•çš„ä¾‹å­å…¥æ‰‹ï¼Œçœ‹ä¸€çœ‹è¿™å¥—ç³»ç»Ÿåˆ°åº•æ˜¯æ€ä¹ˆå·¥ä½œçš„ã€‚&lt;/p>
&lt;p>å½“å¹¶è¡Œä¸‹è½½ä¸¤ä¸ªæ–‡ä»¶æ—¶ï¼Œåœ¨ä»»ä½•è¯­è¨€ä¸­éƒ½å¯ä»¥å¯åŠ¨ä¸¤ä¸ª Threadï¼Œåˆ†åˆ«ä¸‹è½½ä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åç­‰å¾… thread æ‰§è¡Œç»“æŸï¼›ä½†å¹¶ä¸æƒ³ä¸ºäº† IO ç­‰å¾…å¯åŠ¨å¤šä½™çš„çº¿ç¨‹ï¼Œå¦‚æœéœ€è¦ç­‰å¾… IOï¼Œæˆ‘ä»¬å¸Œæœ›è¿™æ—¶çº¿ç¨‹å¯ä»¥å»å¹²åˆ«çš„ï¼Œç­‰ IO å°±ç»ªäº†å†åšå°±å¥½ã€‚&lt;/p>
&lt;p>è¿™ç§åŸºäºäº‹ä»¶çš„è§¦å‘æœºåˆ¶åœ¨ cpp é‡Œé¢å¸¸å¸¸ä¼šä»¥ callback çš„å½¢å¼é‡è§ã€‚Callback ä¼šæ‰“æ–­æˆ‘ä»¬çš„è¿ç»­é€»è¾‘ï¼Œå¯¼è‡´ä»£ç å¯è¯»æ€§å˜å·®ï¼Œå¦å¤–ä¹Ÿå®¹æ˜“åœ¨ callback ä¾èµ–çš„å˜é‡çš„ç”Ÿå‘½å‘¨æœŸä¸Šè¸©å‘ï¼Œæ¯”å¦‚åœ¨ callback æ‰§è¡Œå‰æå‰é‡Šæ”¾äº†å®ƒä¼šå¼•ç”¨çš„å˜é‡ã€‚&lt;/p>
&lt;p>ä½†åœ¨ Rust ä¸­åªéœ€è¦åˆ›å»ºä¸¤ä¸ª task å¹¶ç­‰å¾… task æ‰§è¡Œç»“æŸå³å¯ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Monoio_Open_Source/3.png" alt="image">&lt;/p>
&lt;p>è¿™ä¸ªä¾‹å­ç›¸æ¯”çº¿ç¨‹çš„è¯ï¼Œå¼‚æ­¥ task ä¼šé«˜æ•ˆå¾ˆå¤šï¼Œä½†ç¼–ç¨‹ä¸Šå¹¶æ²¡æœ‰å› æ­¤å¤æ‚å¤šå°‘ã€‚&lt;/p>
&lt;p>ç¬¬äºŒä¸ªä¾‹å­ï¼Œç°åœ¨ mock ä¸€ä¸ªå¼‚æ­¥å‡½æ•° do_httpï¼Œè¿™é‡Œç›´æ¥è¿”å›ä¸€ä¸ª 1ï¼Œå…¶å®é‡Œé¢å¯èƒ½æ˜¯ä¸€å †å¼‚æ­¥çš„è¿œç¨‹è¯·æ±‚ï¼›åœ¨æ­¤ä¹‹ä¸Šè¿˜æƒ³å¯¹è¿™äº›å¼‚æ­¥å‡½æ•°åšä¸€äº›ç»„åˆï¼Œ
è¿™é‡Œå‡è®¾æ˜¯åšä¸¤æ¬¡è¯·æ±‚ï¼Œç„¶åæŠŠä¸¤æ¬¡çš„ç»“æœåŠ èµ·æ¥ï¼Œæœ€åå†åŠ ä¸€ä¸ª 1 ï¼Œå°±æ˜¯è¿™ä¸ªä¾‹å­é‡Œé¢çš„ sum å‡½æ•°ã€‚é€šè¿‡ Async å’Œ Await è¯­æ³•å¯ä»¥éå¸¸å‹å¥½åœ°æŠŠè¿™äº›å¼‚æ­¥å‡½æ•°ç»™åµŒå¥—èµ·æ¥ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">#[inline(never)]&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">async&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">do_http&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#204a87;font-weight:bold">i32&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">// do http request in async way
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">pub&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">async&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">sum&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#204a87;font-weight:bold">i32&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">do_http&lt;/span>&lt;span style="color:#000;font-weight:bold">().&lt;/span>&lt;span style="color:#204a87;font-weight:bold">await&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">do_http&lt;/span>&lt;span style="color:#000;font-weight:bold">().&lt;/span>&lt;span style="color:#204a87;font-weight:bold">await&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™ä¸ªè¿‡ç¨‹å’Œå†™åŒæ­¥å‡½æ•°æ˜¯éå¸¸åƒçš„ï¼Œä¹Ÿå°±è¯´æ˜¯åœ¨é¢å‘è¿‡ç¨‹ç¼–ç¨‹ï¼Œè€Œéé¢å‘çŠ¶æ€ç¼–ç¨‹ã€‚åˆ©ç”¨è¿™ç§æœºåˆ¶å¯ä»¥é¿å¼€å†™ä¸€å † callback çš„é—®é¢˜ï¼Œå¸¦æ¥äº†ç¼–ç¨‹çš„éå¸¸å¤§çš„ä¾¿æ·æ€§ã€‚&lt;/p>
&lt;h3 id="async-await-èƒŒåçš„ç§˜å¯†">Async Await èƒŒåçš„ç§˜å¯†&lt;/h3>
&lt;p>é€šè¿‡è¿™ä¸¤ä¸ªä¾‹å­å¯ä»¥å¾—çŸ¥ Rust çš„å¼‚æ­¥æ˜¯æ€ä¹ˆç”¨çš„ï¼Œä»¥åŠå®ƒå†™èµ·æ¥ç¡®å®éå¸¸æ–¹ä¾¿ã€‚é‚£ä¹ˆå®ƒèƒŒååˆ°åº•æ˜¯ä»€ä¹ˆåŸç†å‘¢ï¼Ÿ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">#[inline(never)]&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">async&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">do_http&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#204a87;font-weight:bold">i32&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">// do http request in async way
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">pub&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">async&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">sum&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#204a87;font-weight:bold">i32&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">do_http&lt;/span>&lt;span style="color:#000;font-weight:bold">().&lt;/span>&lt;span style="color:#204a87;font-weight:bold">await&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">do_http&lt;/span>&lt;span style="color:#000;font-weight:bold">().&lt;/span>&lt;span style="color:#204a87;font-weight:bold">await&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Monoio_Open_Source/4.png" alt="image">&lt;/p>
&lt;p>åˆšæ‰çš„ä¾‹å­ä½¿ç”¨ Async + Await ç¼–å†™ï¼Œå…¶ç”Ÿæˆç»“æ„æœ€ç»ˆå®ç° Future trait ã€‚&lt;/p>
&lt;p>Async + Await å…¶å®æ˜¯è¯­æ³•ç³–ï¼Œå¯ä»¥åœ¨ HIR é˜¶æ®µè¢«å±•å¼€ä¸º Generator è¯­æ³•ï¼Œç„¶å Generator åˆä¼šåœ¨ MIR é˜¶æ®µè¢«ç¼–è¯‘å™¨å±•å¼€æˆçŠ¶æ€æœºã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Monoio_Open_Source/5.png" alt="image">&lt;/p>
&lt;h3 id="future-æŠ½è±¡">Future æŠ½è±¡&lt;/h3>
&lt;p>Future trait æ˜¯æ ‡å‡†åº“é‡Œå®šä¹‰çš„ã€‚å®ƒçš„æ¥å£éå¸¸ç®€å•ï¼Œåªæœ‰ä¸€ä¸ªå…³è”ç±»å‹å’Œä¸€ä¸ª poll æ–¹æ³•ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">pub&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">trait&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Future&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Output&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">poll&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#3465a4">self&lt;/span>: &lt;span style="color:#000">Pin&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&amp;amp;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">mut&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#3465a4">Self&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">cx&lt;/span>: &lt;span style="color:#204a87;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#000">mut&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Context&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#204a87">&amp;#39;_&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#000">Poll&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#3465a4">Self&lt;/span>::&lt;span style="color:#000">Output&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">pub&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">enum&lt;/span> &lt;span style="color:#000">Poll&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">T&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Ready&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">T&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Pending&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Future æè¿°çŠ¶æ€æœºå¯¹å¤–æš´éœ²çš„æ¥å£ï¼š&lt;/p>
&lt;ol>
&lt;li>æ¨åŠ¨çŠ¶æ€æœºæ‰§è¡Œï¼šPoll æ–¹æ³•é¡¾åæ€ä¹‰å°±æ˜¯å»æ¨åŠ¨çŠ¶æ€æœºæ‰§è¡Œï¼Œç»™å®šä¸€ä¸ªä»»åŠ¡ï¼Œå°±ä¼šæ¨åŠ¨è¿™ä¸ªä»»åŠ¡åšçŠ¶æ€è½¬æ¢ã€‚&lt;/li>
&lt;li>è¿”å›æ‰§è¡Œç»“æœï¼š
&lt;ol>
&lt;li>é‡åˆ°äº†é˜»å¡ï¼šPending&lt;/li>
&lt;li>æ‰§è¡Œå®Œæ¯•ï¼šReady + è¿”å›å€¼&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;p>å¯ä»¥çœ‹å‡ºï¼Œå¼‚æ­¥ task çš„æœ¬è´¨å°±æ˜¯å®ç° Future çš„çŠ¶æ€æœºã€‚ç¨‹åºå¯ä»¥åˆ©ç”¨ Poll æ–¹æ³•å»æ“ä½œå®ƒï¼Œå®ƒå¯èƒ½ä¼šå‘Šè¯‰ç¨‹åºç°åœ¨é‡åˆ°é˜»å¡ï¼Œæˆ–è€…è¯´ä»»åŠ¡æ‰§è¡Œå®Œäº†å¹¶è¿”å›ç»“æœã€‚&lt;/p>
&lt;p>æ—¢ç„¶æœ‰äº† Future traitï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥æ‰‹åŠ¨åœ°å»å®ç° Futureã€‚è¿™æ ·ä¸€æ¥ï¼Œå®ç°å‡ºæ¥çš„ä»£ç è¦æ¯” Asyncã€Await è¯­æ³•ç³–å»å±•å¼€çš„è¦æ˜“è¯»ã€‚ä¸‹é¢æ˜¯æ‰‹åŠ¨ç”ŸæˆçŠ¶æ€æœºçš„æ ·ä¾‹ã€‚
å¦‚æœç”¨ Async è¯­æ³•å†™ï¼Œå¯èƒ½ç›´æ¥ä¸€ä¸ª async å‡½æ•°è¿”å›ä¸€ä¸ª 1 å°±å¯ä»¥ï¼›æˆ‘ä»¬æ‰‹åŠ¨ç¼–å†™éœ€è¦è‡ªå®šä¹‰ä¸€ä¸ªç»“æ„ä½“ï¼Œå¹¶ä¸ºè¿™ä¸ªç»“æ„ä½“å®ç° Futureã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">// auto generate
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">async&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">do_http&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#204a87;font-weight:bold">i32&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">// do http request in async way
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#8f5902;font-style:italic">// manually impl
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">do_http&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#000">DOHTTPFuture&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">DoHTTPFuture&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">struct&lt;/span> &lt;span style="color:#000">DoHTTPFuture&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">impl&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Future&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">for&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">DoHTTPFuture&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Output&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">i32&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">poll&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#3465a4">self&lt;/span>: &lt;span style="color:#000">Pin&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&amp;amp;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">mut&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#3465a4">Self&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">_cx&lt;/span>: &lt;span style="color:#204a87;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#000">mut&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Context&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#204a87">&amp;#39;_&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#000">Poll&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#3465a4">Self&lt;/span>::&lt;span style="color:#000">Output&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Poll&lt;/span>::&lt;span style="color:#000">Ready&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Async fn çš„æœ¬è´¨å°±æ˜¯è¿”å›ä¸€ä¸ªå®ç°äº† Future çš„åŒ¿åç»“æ„ï¼Œè¿™ä¸ªç±»å‹ç”±ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆï¼Œæ‰€ä»¥å®ƒçš„åå­—ä¸ä¼šæš´éœ²ç»™æˆ‘ä»¬ã€‚
è€Œæˆ‘ä»¬æ‰‹åŠ¨å®ç°å°±å®šä¹‰ä¸€ä¸ª Struct DoHTTPFutureï¼Œå¹¶ä¸ºå®ƒå®ç° Futureï¼Œå®ƒçš„ Output å’Œ Async fn çš„è¿”å›å€¼æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ i32 ã€‚è¿™ä¸¤ç§å†™æ³•æ˜¯ç­‰ä»·çš„ã€‚&lt;/p>
&lt;p>ç”±äºè¿™é‡Œåªéœ€è¦ç«‹åˆ»è¿”å›ä¸€ä¸ªæ•°å­— 1ï¼Œä¸æ¶‰åŠä»»ä½•ç­‰å¾…ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦åœ¨ poll å®ç°ä¸Šç«‹åˆ»è¿”å› Ready(1) å³å¯ã€‚&lt;/p>
&lt;p>å‰é¢ä¸¾äº† sum çš„ä¾‹å­ï¼Œå®ƒåšçš„äº‹æƒ…æ˜¯å¼‚æ­¥é€»è¾‘çš„ç»„åˆï¼šè°ƒç”¨ä¸¤æ¬¡ do httpï¼Œæœ€åå†æŠŠä¸¤ä¸ªç»“æœå†åŠ ä¸€èµ·ã€‚è¿™æ—¶å€™å¦‚æœè¦æ‰‹åŠ¨å»å®ç°çš„è¯ï¼Œå°±ä¼šç¨å¾®å¤æ‚ä¸€äº›ï¼Œå› ä¸ºä¼šæ¶‰åŠåˆ°ä¸¤ä¸ª await ç‚¹ã€‚ä¸€æ—¦æ¶‰åŠåˆ° awaitï¼Œå…¶æœ¬è´¨ä¸Šå°±å˜æˆä¸€ä¸ªçŠ¶æ€æœºã€‚&lt;/p>
&lt;p>ä¸ºä»€ä¹ˆæ˜¯çŠ¶æ€æœºå‘¢ï¼Ÿå› ä¸ºæ¯æ¬¡ await ç­‰å¾…éƒ½æœ‰å¯èƒ½ä¼šå¡ä½ï¼Œè€Œçº¿ç¨‹æ­¤æ—¶æ˜¯ä¸èƒ½åœæ­¢å·¥ä½œå¹¶ç­‰å¾…åœ¨è¿™é‡Œçš„ï¼Œå®ƒå¿…é¡»åˆ‡å‡ºå»æ‰§è¡Œåˆ«çš„ä»»åŠ¡ï¼›ä¸ºäº†ä¸‹æ¬¡å†æ¢å¤æ‰§è¡Œå‰é¢ä»»åŠ¡ï¼Œå®ƒæ‰€å¯¹åº”çš„çŠ¶æ€å¿…é¡»å­˜å‚¨ä¸‹æ¥ã€‚
è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº† FirstDoHTTP å’Œ SecondDoHTTP ä¸¤ä¸ªçŠ¶æ€ã€‚å®ç° poll çš„æ—¶å€™ï¼Œå°±æ˜¯å»åšä¸€ä¸ª loopï¼Œloop é‡Œé¢ä¼š match å½“å‰çŠ¶æ€ï¼Œå»åšçŠ¶æ€è½¬æ¢ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">// auto generate
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">async&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">sum&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#204a87;font-weight:bold">i32&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">do_http&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">).&lt;/span>&lt;span style="color:#204a87;font-weight:bold">await&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">do&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">http&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">).&lt;/span>&lt;span style="color:#204a87;font-weight:bold">await&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#8f5902;font-style:italic">// manually impl
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">sum&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#000">SumFuture&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">SumFuture&lt;/span>::&lt;span style="color:#000">FirstDoHTTP&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">DoHTTPFuture&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">enum&lt;/span> &lt;span style="color:#000">SumFuture&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">FirstDoHTTP&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">DOHTTPFuture&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">SecondDoHTTP&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">DOHTTPFuture&lt;/span>&lt;span style="color:#a40000">ï¼Œ&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">i32&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">impl&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Future&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">for&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">SumFuture&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Output&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">i32&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">poll&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#3465a4">self&lt;/span>: &lt;span style="color:#000">Pin&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&amp;amp;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">mut&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#3465a4">Self&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">cx&lt;/span>: &lt;span style="color:#204a87;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#000">mut&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Context&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#000">Poll&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#3465a4">Self&lt;/span>::&lt;span style="color:#000">Output&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">let&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">this&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">get&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">mut&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">loop&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">match&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">this&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">SumFuture&lt;/span>::&lt;span style="color:#000">FirstDoHTTP&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">f&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">let&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">pinned&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">unsafe&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Pin&lt;/span>::&lt;span style="color:#000">new_unchecked&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">f&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">};&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">match&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">pinned&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">poll&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">cx&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Poll&lt;/span>::&lt;span style="color:#000">Ready&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">r&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">*&lt;/span>&lt;span style="color:#000">this&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">SumFuture&lt;/span>::&lt;span style="color:#000">SecondDoHTTP&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">DOHTTPFuture&lt;/span>&lt;span style="color:#a40000">ï¼Œ&lt;/span>&lt;span style="color:#000">r&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Poll&lt;/span>::&lt;span style="color:#000">Pending&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">return&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Pol&lt;/span>::&lt;span style="color:#000">Pending&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">SumFuture&lt;/span>::&lt;span style="color:#000">SecondDoHTTP&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">f&lt;/span>&lt;span style="color:#a40000">ï¼Œ&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">prev_sum&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">let&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">pinned&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">unsafe&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Pin&lt;/span>::&lt;span style="color:#000">new_unchecked&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">f&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">};&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">return&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">match&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">pinned&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">poll&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">cx&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Poll&lt;/span>::&lt;span style="color:#000">Ready&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">r&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Poll&lt;/span>::&lt;span style="color:#000">Ready&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">*&lt;/span>&lt;span style="color:#000">prev_sum&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">r&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Poll&lt;/span>::&lt;span style="color:#000">Pending&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Pol&lt;/span>::&lt;span style="color:#000">Pending&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">};&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="task-future-å’Œ-runtime-çš„å…³ç³»">Task, Future å’Œ Runtime çš„å…³ç³»&lt;/h3>
&lt;p>æˆ‘ä»¬è¿™é‡Œä»¥ TcpStream çš„ Read/Write ä¸ºä¾‹æ¢³ç†æ•´ä¸ªæœºåˆ¶å’Œç»„ä»¶çš„å…³ç³»ã€‚&lt;/p>
&lt;p>é¦–å…ˆå½“æˆ‘ä»¬åˆ›å»º TCP stream çš„æ—¶å€™ï¼Œè¿™ä¸ªç»„ä»¶å†…éƒ¨å°±ä¼šæŠŠå®ƒæ³¨å†Œåˆ°ä¸€ä¸ª poller ä¸Šå»ï¼Œè¿™ä¸ª poller å¯ä»¥ç®€å•åœ°è®¤ä¸ºæ˜¯ä¸€ä¸ª epoll çš„å°è£…ï¼ˆå…·ä½“ä½¿ç”¨ä»€ä¹ˆ driver æ˜¯æ ¹æ®å¹³å°è€Œå¼‚çš„ï¼‰ã€‚&lt;/p>
&lt;p>æŒ‰ç…§é¡ºåºæ¥çœ‹ï¼Œç°åœ¨æœ‰ä¸€ä¸ª task ï¼Œè¦æŠŠè¿™ä¸ª task spawn å‡ºå»æ‰§è¡Œã€‚é‚£ä¹ˆ spawn æœ¬è´¨ä¸Šå°±æ˜¯æŠŠ task æ”¾åˆ°äº† runtime çš„ä»»åŠ¡é˜Ÿåˆ—é‡Œï¼Œ
ç„¶å runtime å†…éƒ¨ä¼šä¸åœåœ°ä»ä»»åŠ¡é˜Ÿåˆ—é‡Œé¢å–å‡ºä»»åŠ¡å¹¶ä¸”æ‰§è¡Œâ€”â€”æ‰§è¡Œå°±æ˜¯æ¨åŠ¨çŠ¶æ€æœºåŠ¨ä¸€åŠ¨ï¼Œå³è°ƒç”¨å®ƒçš„ poll æ–¹æ³•ï¼Œä¹‹åæˆ‘ä»¬å°±æ¥åˆ°äº†ç¬¬ 2 æ­¥ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Monoio_Open_Source/6.png" alt="image">&lt;/p>
&lt;p>æˆ‘ä»¬æ‰§è¡Œå®ƒçš„ poll æ–¹æ³•ï¼Œæœ¬è´¨ä¸Šè¿™ä¸ª poll æ–¹æ³•æ˜¯ç”¨æˆ·å®ç°çš„ï¼Œç„¶åç”¨æˆ·å°±ä¼šåœ¨è¿™ä¸ª task é‡Œé¢è°ƒç”¨ TcpStream çš„ read/writeã€‚è¿™ä¸¤ä¸ªå‡½æ•°å†…éƒ¨æœ€ç»ˆæ˜¯è°ƒç”¨ syscall æ¥å®ç°åŠŸèƒ½çš„ï¼Œä½†åœ¨æ‰§è¡Œ syscall ä¹‹å‰éœ€è¦æ»¡è¶³æ¡ä»¶ï¼šè¿™ä¸ª fd å¯è¯»/å¯å†™ã€‚
å¦‚æœå®ƒä¸æ»¡è¶³è¿™ä¸ªæ¡ä»¶ï¼Œé‚£ä¹ˆå³ä¾¿æˆ‘ä»¬æ‰§è¡Œäº† syscall ä¹Ÿåªæ˜¯æ‹¿åˆ°äº† WOULD_BLOCK é”™è¯¯ï¼Œç™½ç™½ä»˜å‡ºæ€§èƒ½ã€‚åˆå§‹çŠ¶æ€ä¸‹æˆ‘ä»¬ä¼šè®¾å®šæ–°åŠ å…¥çš„ fd æœ¬èº«å°±æ˜¯å¯è¯»/å¯å†™çš„ï¼Œæ‰€ä»¥ç¬¬ä¸€æ¬¡ poll ä¼šæ‰§è¡Œ syscallã€‚
å½“æ²¡æœ‰æ•°æ®å¯è¯»ï¼Œæˆ–è€…å†…æ ¸çš„å†™ buffer æ»¡äº†çš„æ—¶å€™ï¼Œè¿™ä¸ª syscall ä¼šè¿”å› WOULD_BLOCK é”™è¯¯ã€‚åœ¨æ„ŸçŸ¥åˆ°è¿™ä¸ªé”™è¯¯åï¼Œæˆ‘ä»¬ä¼šä¿®æ”¹ readiness è®°å½•ï¼Œè®¾å®šè¿™ä¸ª fd ç›¸å…³çš„è¯»/å†™ä¸ºä¸å¯è¯»/ä¸å¯å†™çŠ¶æ€ã€‚è¿™æ—¶æˆ‘ä»¬åªèƒ½å¯¹å¤–è¿”å› Pendingã€‚&lt;/p>
&lt;p>ä¹‹åæ¥åˆ°ç¬¬å››æ­¥ï¼Œå½“æˆ‘ä»¬ä»»åŠ¡é˜Ÿåˆ—é‡Œé¢ä»»åŠ¡æ‰§è¡Œå®Œäº†ï¼Œæˆ‘ä»¬ç°åœ¨æ‰€æœ‰ä»»åŠ¡éƒ½å¡åœ¨ IO ä¸Šäº†ï¼Œæ‰€æœ‰çš„ IO å¯èƒ½éƒ½æ²¡æœ‰å°±ç»ªï¼Œæ­¤æ—¶çº¿ç¨‹å°±ä¼šæŒç»­åœ°é˜»å¡åœ¨ poller çš„ wait æ–¹æ³•é‡Œé¢ï¼Œ
å¯ä»¥ç®€å•åœ°è®¤ä¸ºå®ƒæ˜¯ä¸€ä¸ª epoll_wait ä¸€æ ·çš„ä¸œè¥¿ã€‚å½“åŸºäº io_uring å®ç°çš„æ—¶å€™ï¼Œè¿™å¯èƒ½å¯¹åº”å¦ä¸€ä¸ª syscallã€‚&lt;/p>
&lt;p>æ­¤æ—¶é™·å…¥ syscall æ˜¯åˆç†çš„ï¼Œå› ä¸ºæ²¡æœ‰ä»»åŠ¡éœ€è¦æ‰§è¡Œï¼Œæˆ‘ä»¬ä¹Ÿä¸éœ€è¦è½®è¯¢ IO çŠ¶æ€ï¼Œé™·å…¥ syscall å¯ä»¥è®©å‡º CPU æ—¶é—´ç‰‡ä¾›åŒæœºçš„å…¶ä»–ä»»åŠ¡ä½¿ç”¨ã€‚
å¦‚æœæœ‰ä»»ä½• IO å°±ç»ªï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±ä¼šä» syscall è¿”å›ï¼Œå¹¶ä¸” kernel ä¼šå‘Šè¯‰æˆ‘ä»¬å“ªäº› fd ä¸Šçš„å“ªäº›äº‹ä»¶å·²ç»å°±ç»ªäº†ã€‚æ¯”å¦‚è¯´æˆ‘ä»¬å…³å¿ƒçš„æ˜¯æŸä¸€ä¸ª FD å®ƒçš„å¯è¯»ï¼Œé‚£ä¹ˆè¿™æ—¶å€™ä»–å°±ä¼šæŠŠæˆ‘ä»¬å…³å¿ƒçš„ fd å’Œå¯è¯»è¿™ä»¶äº‹å‘Šè¯‰æˆ‘ä»¬ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬éœ€è¦æ ‡è®° fd å¯¹åº”çš„ readiness ä¸ºå¯è¯»çŠ¶æ€ï¼Œå¹¶æŠŠç­‰åœ¨å®ƒä¸Šé¢çš„ä»»åŠ¡ç»™å«é†’ã€‚å‰é¢ä¸€æ­¥æˆ‘ä»¬åœ¨åš read çš„æ—¶å€™ï¼Œæœ‰ä¸€ä¸ªä»»åŠ¡æ˜¯ç­‰åœ¨è¿™é‡Œçš„ï¼Œå®ƒä¾èµ– IO å¯è¯»äº‹ä»¶ï¼Œç°åœ¨æ¡ä»¶æ»¡è¶³äº†ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°è°ƒåº¦å®ƒã€‚
å«é†’çš„æœ¬è´¨å°±æ˜¯æŠŠä»»åŠ¡å†æ¬¡æ”¾åˆ° task queue é‡Œï¼Œå®ç°ä¸Šæ˜¯é€šè¿‡ Waker çš„ wake ç›¸å…³æ–¹æ³•åšåˆ°çš„ï¼Œwake çš„å¤„ç†è¡Œä¸ºæ˜¯ runtime å®ç°çš„ï¼Œæœ€ç®€å•çš„å®ç°å°±æ˜¯ç”¨ä¸€ä¸ª Deque å­˜æ”¾ä»»åŠ¡ï¼Œwake æ—¶ push è¿›å»ï¼Œå¤æ‚ä¸€ç‚¹è¿˜ä¼šè€ƒè™‘ä»»åŠ¡çªƒå–å’Œåˆ†é…ç­‰æœºåˆ¶åšè·¨çº¿ç¨‹çš„è°ƒåº¦ã€‚&lt;/p>
&lt;p>å½“è¯¥ä»»åŠ¡è¢« poll æ—¶ï¼Œå®ƒå†…éƒ¨ä¼šå†æ¬¡åš TcpStream readï¼Œå®ƒä¼šå‘ç° IO æ˜¯å¯è¯»çŠ¶æ€ï¼Œæ‰€ä»¥ä¼šæ‰§è¡Œ read syscallï¼Œè€Œæ­¤æ—¶ syscall å°±ä¼šæ­£ç¡®æ‰§è¡Œï¼ŒTcpStream read å¯¹å¤–ä¼šè¿”å› Readyã€‚&lt;/p>
&lt;h3 id="waker">Waker&lt;/h3>
&lt;p>åˆšæ‰æåˆ°äº† Wakerï¼Œæ¥ä¸‹æ¥ä»‹ç» waker æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚æˆ‘ä»¬çŸ¥é“ Future æœ¬è´¨æ˜¯çŠ¶æ€æœºï¼Œæ¯æ¬¡æ¨å®ƒè½¬ä¸€è½¬ï¼Œå®ƒä¼šè¿”å› Pending æˆ–è€… Ready ï¼Œå½“å®ƒé‡åˆ° io é˜»å¡è¿”å› Pending æ—¶ï¼Œè°æ¥æ„ŸçŸ¥ io å°±ç»ª? io å°±ç»ªåæ€ä¹ˆé‡æ–°é©±åŠ¨ Future è¿è½¬ï¼Ÿ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">pub&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">trait&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Future&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Output&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">poll&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#3465a4">self&lt;/span>: &lt;span style="color:#000">Pin&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&amp;amp;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">mut&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#3465a4">Self&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">cx&lt;/span>: &lt;span style="color:#204a87;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#000">mut&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Context&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#204a87">&amp;#39;_&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#000">Poll&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#3465a4">Self&lt;/span>::&lt;span style="color:#000">Output&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">pub&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">struct&lt;/span> &lt;span style="color:#000">Context&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;a&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">//å¯ä»¥æ‹¿åˆ°ç”¨äºå”¤é†’Taskçš„Waker
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">waker&lt;/span>: &lt;span style="color:#204a87;font-weight:bold">&amp;amp;&lt;/span> &lt;span style="color:#000">a&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Waker&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">//æ ‡è®°å­—æ®µ,å¿½ç•¥å³å¯
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">_marker&lt;/span>: &lt;span style="color:#000">PhantomData&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;a&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">())&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#204a87;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;a&lt;/span> &lt;span style="color:#000;font-weight:bold">()&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Future trait é‡Œé¢é™¤äº†æœ‰åŒ…å«è‡ªèº«çŠ¶æ€æœºçš„å¯å˜ä»¥å€Ÿç”¨ä»¥å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„æ˜¯ Contextï¼ŒContext å†…éƒ¨å½“å‰åªæœ‰ä¸€ä¸ª Waker æœ‰æ„ä¹‰ï¼Œ
è¿™ä¸ª waker æˆ‘ä»¬å¯ä»¥æš‚æ—¶è®¤ä¸ºå®ƒå°±æ˜¯ä¸€ä¸ª trait object ï¼Œç”± runtime æ„é€ å’Œå®ç°ã€‚å®ƒå®ç°çš„æ•ˆæœï¼Œå°±æ˜¯å½“æˆ‘ä»¬å» wake è¿™ä¸ª waker çš„æ—¶å€™ï¼Œä¼šæŠŠä»»åŠ¡é‡æ–°åŠ å›ä»»åŠ¡é˜Ÿåˆ—ï¼Œè¿™ä¸ªä»»åŠ¡å¯èƒ½ç«‹åˆ»æˆ–è€…ç¨åè¢«æ‰§è¡Œã€‚&lt;/p>
&lt;p>ä¸¾å¦ä¸€ä¸ªä¾‹å­æ¥æ¢³ç†æ•´ä¸ªæµç¨‹ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Monoio_Open_Source/7.png" alt="image">&lt;/p>
&lt;p>ç”¨æˆ·ä½¿ç”¨ listener.accept() ç”Ÿæˆ AcceptFut å¹¶ç­‰å¾…:&lt;/p>
&lt;ol>
&lt;li>fut.await å†…éƒ¨ä½¿ç”¨ cx è°ƒç”¨ Future çš„ poll æ–¹æ³•&lt;/li>
&lt;li>poll å†…éƒ¨æ‰§è¡Œ syscall&lt;/li>
&lt;li>å½“å‰æ— è¿æ¥æ‹¨å…¥ï¼Œkernel è¿”å› WOULD_BLOCK&lt;/li>
&lt;li>å°† cx ä¸­çš„ waker clone å¹¶æš‚å­˜äº TcpListener å…³è”ç»“æ„å†…&lt;/li>
&lt;li>æœ¬æ¬¡ poll å¯¹å¤–è¿”å› Pending&lt;/li>
&lt;li>Runtime å½“å‰æ— ä»»åŠ¡å¯åšï¼Œæ§åˆ¶æƒäº¤ç»™ Poller&lt;/li>
&lt;li>Poller æ‰§è¡Œ epoll_wait é™·å…¥ syscall ç­‰å¾… IO å°±ç»ª&lt;/li>
&lt;li>æŸ¥æ‰¾å¹¶æ ‡è®°æ‰€æœ‰å°±ç»ª IO çŠ¶æ€&lt;/li>
&lt;li>å¦‚æœæœ‰å…³è” waker åˆ™ wake å¹¶æ¸…é™¤&lt;/li>
&lt;li>ç­‰å¾… accept çš„ task å°†å†æ¬¡åŠ å…¥æ‰§è¡Œé˜Ÿåˆ—å¹¶è¢« poll&lt;/li>
&lt;li>å†æ¬¡æ‰§è¡Œ syscall&lt;/li>
&lt;li>12/13. kernel è¿”å› syscall ç»“æœï¼Œpoll è¿”å› Ready&lt;/li>
&lt;/ol>
&lt;h3 id="runtime">Runtime&lt;/h3>
&lt;ol>
&lt;li>å…ˆä» executor çœ‹èµ·ï¼Œå®ƒæœ‰ä¸€ä¸ªæ‰§è¡Œå™¨å’Œä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼Œå®ƒçš„å·¥ä½œæ˜¯ä¸åœåœ°å–å‡ºä»»åŠ¡ï¼Œæ¨åŠ¨ä»»åŠ¡è¿è¡Œï¼Œä¹‹ååœ¨æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæ¯•å¿…é¡»ç­‰å¾…æ—¶ï¼ŒæŠŠæ‰§è¡Œæƒäº¤ç»™ Reactorã€‚&lt;/li>
&lt;li>Reactor æ‹¿åˆ°äº†æ‰§è¡Œæƒä¹‹åï¼Œä¼šä¸ kernel æ‰“äº¤é“ï¼Œç­‰å¾… IO å°±ç»ªï¼ŒIO å°±ç»ªå¥½äº†ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦æ ‡è®°è¿™ä¸ª IO çš„å°±ç»ªçŠ¶æ€ï¼Œå¹¶ä¸”æŠŠè¿™ä¸ª IO æ‰€å…³è”çš„ä»»åŠ¡ç»™å”¤é†’ã€‚å”¤é†’ä¹‹åï¼Œæˆ‘ä»¬çš„æ‰§è¡Œæƒåˆä¼šé‡æ–°äº¤å›ç»™ executor ã€‚åœ¨ executor æ‰§è¡Œè¿™ä¸ªä»»åŠ¡çš„æ—¶å€™ï¼Œå°±ä¼šè°ƒç”¨åˆ° IO ç»„ä»¶æ‰€æä¾›çš„ä¸€äº›èƒ½åŠ›ã€‚&lt;/li>
&lt;li>IO ç»„ä»¶è¦èƒ½å¤Ÿæä¾›è¿™äº›å¼‚æ­¥çš„æ¥å£ï¼Œæ¯”å¦‚è¯´å½“ç”¨æˆ·æƒ³ç”¨ tcb stream çš„æ—¶å€™ï¼Œå¾—ç”¨ runtime æä¾›çš„ä¸€ä¸ª TcpStreamï¼Œ è€Œä¸æ˜¯ç›´æ¥ç”¨æ ‡å‡†åº“çš„ã€‚ç¬¬äºŒï¼Œèƒ½å¤Ÿå°†è‡ªå·±çš„ fd æ³¨å†Œåˆ° Reactor ä¸Šã€‚ç¬¬ä¸‰ï¼Œåœ¨ IO æ²¡æœ‰å°±ç»ªçš„æ—¶å€™ï¼Œæˆ‘ä»¬èƒ½æŠŠè¿™ä¸ª waker æ”¾åˆ°ä»»åŠ¡ç›¸å…³è”çš„åŒºåŸŸé‡Œã€‚&lt;/li>
&lt;/ol>
&lt;p>æ•´ä¸ª Rust çš„å¼‚æ­¥æœºåˆ¶å¤§æ¦‚å°±æ˜¯è¿™æ ·ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Monoio_Open_Source/8.png" alt="image">&lt;/p>
&lt;h2 id="monoio-è®¾è®¡">Monoio è®¾è®¡&lt;/h2>
&lt;p>ä»¥ä¸‹å°†ä¼šåˆ†ä¸ºå››ä¸ªéƒ¨åˆ†ä»‹ç» &lt;a href="https://github.com/bytedance/monoio">Monoio&lt;/a> Runtime çš„è®¾è®¡è¦ç‚¹ï¼š&lt;/p>
&lt;ol>
&lt;li>åŸºäº GAT(Generic associated types) çš„å¼‚æ­¥ IO æ¥å£ï¼›&lt;/li>
&lt;li>ä¸Šå±‚æ— æ„ŸçŸ¥çš„ Driver æ¢æµ‹ä¸åˆ‡æ¢ï¼›&lt;/li>
&lt;li>å¦‚ä½•å…¼é¡¾æ€§èƒ½ä¸åŠŸèƒ½ï¼›&lt;/li>
&lt;li>æä¾›å…¼å®¹ Tokio çš„æ¥å£&lt;/li>
&lt;/ol>
&lt;h3 id="åŸºäº-gat-çš„çº¯å¼‚æ­¥-io-æ¥å£">åŸºäº GAT çš„çº¯å¼‚æ­¥ IO æ¥å£&lt;/h3>
&lt;p>é¦–å…ˆä»‹ç»ä¸€ä¸‹ä¸¤ç§é€šçŸ¥æœºåˆ¶ã€‚ç¬¬ä¸€ç§æ˜¯å’Œ epoll ç±»ä¼¼çš„ï¼ŒåŸºäºå°±ç»ªçŠ¶æ€çš„ä¸€ç§é€šçŸ¥ã€‚ç¬¬äºŒç§æ˜¯ io-uring çš„æ¨¡å¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŸºäºâ€œå®Œæˆé€šçŸ¥â€çš„æ¨¡å¼ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Monoio_Open_Source/9.png" alt="image">&lt;/p>
&lt;p>åœ¨åŸºäºå°±ç»ªçŠ¶æ€çš„æ¨¡å¼ä¸‹ï¼Œä»»åŠ¡ä¼šé€šè¿‡ epoll ç­‰å¾…å¹¶æ„ŸçŸ¥ IO å°±ç»ªï¼Œå¹¶åœ¨å°±ç»ªæ—¶å†æ‰§è¡Œ syscallã€‚ä½†åœ¨åŸºäºâ€œå®Œæˆé€šçŸ¥â€çš„æ¨¡å¼ä¸‹ï¼Œ&lt;a href="https://github.com/bytedance/monoio">Monoio&lt;/a> å¯ä»¥æ›´æ‡’ï¼šç›´æ¥å‘Šè¯‰ kernel å½“å‰ä»»åŠ¡æƒ³åšçš„äº‹æƒ…å°±å¯ä»¥æ”¾æ‰‹ä¸ç®¡äº†ã€‚&lt;/p>
&lt;p>io_uring å…è®¸ç”¨æˆ·å’Œå†…æ ¸å…±äº«ä¸¤ä¸ªæ— é”é˜Ÿåˆ—ï¼Œsubmission queue æ˜¯ç”¨æˆ·æ€ç¨‹åºå†™ï¼Œå†…æ ¸æ€æ¶ˆè´¹ï¼›completion queue æ˜¯å†…æ ¸æ€å†™ï¼Œç”¨æˆ·æ€æ¶ˆè´¹ã€‚é€šè¿‡ enter syscall å¯ä»¥å°†é˜Ÿåˆ—ä¸­æ”¾å…¥çš„ SQE æäº¤ç»™ kernelï¼Œå¹¶å¯é€‰åœ°é™·å…¥å¹¶ç­‰å¾… CQEã€‚&lt;/p>
&lt;p>åœ¨ syscall å¯†é›†çš„åº”ç”¨ä¸­ï¼Œä½¿ç”¨ io_uring å¯ä»¥å¤§å¤§å‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢æ¬¡æ•°ï¼Œå¹¶ä¸” io_uring æœ¬èº«ä¹Ÿå¯ä»¥å‡å°‘å†…æ ¸ä¸­æ•°æ®æ‹·è´ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Monoio_Open_Source/10.png" alt="image">&lt;/p>
&lt;p>è¿™ä¸¤ç§æ¨¡å¼çš„å·®å¼‚ä¼šå¾ˆå¤§ç¨‹åº¦ä¸Šå½±å“ Runtime çš„è®¾è®¡å’Œ IO æ¥å£ã€‚åœ¨ç¬¬ä¸€ç§æ¨¡å¼ä¸‹ï¼Œç­‰å¾…æ—¶æ˜¯ä¸éœ€è¦æŒæœ‰ buffer çš„ï¼Œåªæœ‰æ‰§è¡Œ syscall çš„æ—¶å€™æ‰éœ€è¦ bufferï¼Œ
æ‰€ä»¥è¿™ç§æ¨¡å¼ä¸‹å¯ä»¥å…è®¸ç”¨æˆ·åœ¨çœŸæ­£è°ƒç”¨ poll çš„æ—¶å€™ï¼ˆå¦‚ poll_readï¼‰ä¼ å…¥ &amp;amp;mut Bufferï¼›è€Œåœ¨ç¬¬äºŒç§æ¨¡å¼ä¸‹ï¼Œåœ¨æäº¤ç»™ kernel åï¼Œkernel å¯ä»¥åœ¨ä»»ä½•æ—¶å€™è®¿é—® bufferï¼Œ&lt;a href="https://github.com/bytedance/monoio">Monoio&lt;/a> å¿…é¡»ç¡®ä¿åœ¨è¯¥ä»»åŠ¡å¯¹åº”çš„ CQE è¿”å›å‰ Buffer çš„æœ‰æ•ˆæ€§ã€‚&lt;/p>
&lt;p>å¦‚æœä½¿ç”¨ç°æœ‰å¼‚æ­¥ IO traitï¼ˆå¦‚ tokio/async-std ç­‰ï¼‰ï¼Œç”¨æˆ·åœ¨ read/write æ—¶ä¼ å…¥ buffer çš„å¼•ç”¨ï¼Œå¯èƒ½ä¼šå¯¼è‡´ UAF ç­‰å†…å­˜å®‰å…¨é—®é¢˜ï¼šå¦‚æœåœ¨ç”¨æˆ·è°ƒç”¨ read æ—¶å°† buffer æŒ‡é’ˆæ¨å…¥ uring SQï¼Œ
é‚£ä¹ˆå¦‚æœç”¨æˆ·ä½¿ç”¨ read(&amp;amp;mut buffer) åˆ›å»ºäº† Futureï¼Œä½†ç«‹åˆ» Drop å®ƒï¼Œå¹¶ Drop bufferï¼Œè¿™ç§è¡Œä¸ºä¸è¿èƒŒ Rust å€Ÿç”¨æ£€æŸ¥ï¼Œä½†å†…æ ¸è¿˜å°†ä¼šè®¿é—®å·²ç»é‡Šæ”¾çš„å†…å­˜ï¼Œå°±å¯èƒ½ä¼šè¸©è¸åˆ°ç”¨æˆ·ç¨‹åºåç»­åˆ†é…çš„å†…å­˜å—ã€‚&lt;/p>
&lt;p>æ‰€ä»¥è¿™æ—¶å€™ä¸€ä¸ªè§£æ³•ï¼Œå°±æ˜¯å»æ•è·å®ƒçš„æ‰€æœ‰æƒï¼Œå½“ç”Ÿæˆ Future çš„æ—¶å€™ï¼ŒæŠŠæ‰€æœ‰æƒç»™ Runtimeï¼Œè¿™æ—¶å€™ç”¨æˆ·æ— è®ºå¦‚ä½•éƒ½è®¿é—®ä¸åˆ°è¿™ä¸ª buffer äº†ï¼Œä¹Ÿå°±ä¿è¯äº†åœ¨ kernel è¿”å› CQE å‰æŒ‡é’ˆçš„æœ‰æ•ˆæ€§ã€‚è¿™ä¸ªè§£æ³•å€Ÿé‰´äº† tokio-uring çš„åšæ³•ã€‚&lt;/p>
&lt;p>&lt;a href="https://github.com/bytedance/monoio">Monoio&lt;/a> å®šä¹‰äº† AsyncReadRent è¿™ä¸ª traitã€‚æ‰€è°“çš„ Rent ï¼Œå³ç§Ÿå€Ÿï¼Œç›¸å½“äºæ˜¯ Runtime å…ˆæŠŠè¿™ä¸ª buffer ä»ç”¨æˆ·æ‰‹é‡Œæ‹¿è¿‡æ¥ï¼Œå¾…ä¼šå†è¿˜ç»™ç”¨æˆ·ã€‚è¿™é‡Œçš„ type read future æ˜¯å¸¦äº†ç”Ÿå‘½å‘¨æœŸæ³›å‹çš„ï¼Œè¿™ä¸ªæ³›å‹å…¶å®æ˜¯ GAT æä¾›äº†ä¸€ä¸ªèƒ½åŠ›ï¼Œ
ç°åœ¨ GAT å·²ç»ç¨³å®šäº†ï¼Œå·²ç»å¯ä»¥åœ¨ stable ç‰ˆæœ¬é‡Œé¢å»ä½¿ç”¨å®ƒäº†ã€‚å½“è¦å®ç°å…³è”çš„ Future çš„æ—¶å€™ï¼Œå€ŸåŠ© TAIT è¿™ä¸ª trait å¯ä»¥ç›´æ¥åˆ©ç”¨ async-await å½¢å¼æ¥å†™ï¼Œç›¸æ¯”æ‰‹åŠ¨å®šä¹‰ Future è¦æ–¹ä¾¿å‹å¥½å¾ˆå¤šï¼Œè¿™ä¸ª feature ç›®å‰è¿˜æ²¡ç¨³å®šï¼ˆç°åœ¨æ”¹åå« impl trait in assoc type äº†ï¼‰ã€‚&lt;/p>
&lt;p>å½“ç„¶ï¼Œè½¬ç§»æ‰€æœ‰æƒä¼šå¼•å…¥æ–°çš„é—®é¢˜ã€‚åœ¨åŸºäºå°±ç»ªçŠ¶æ€çš„æ¨¡å¼ä¸‹ï¼Œå–æ¶ˆ IO åªéœ€è¦ Drop Future å³å¯ï¼›è¿™é‡Œå¦‚æœ Drop Future å°±å¯èƒ½å¯¼è‡´è¿æ¥ä¸Šæ•°æ®æµé”™è¯¯ï¼ˆDrop Future çš„ç¬é—´æœ‰å¯èƒ½ syscall åˆšå¥½å·²ç»æˆåŠŸï¼‰ï¼Œå¹¶ä¸”ä¸€ä¸ªæ›´ä¸¥é‡çš„é—®é¢˜æ˜¯ä¸€å®šä¼šä¸¢å¤± Future æ•è·çš„ bufferã€‚
é’ˆå¯¹è¿™ä¸¤ä¸ªé—®é¢˜ &lt;a href="https://github.com/bytedance/monoio">Monoio&lt;/a> æ”¯æŒäº†å¸¦å–æ¶ˆèƒ½åŠ›çš„ IO traitï¼Œå–æ¶ˆæ—¶ä¼šæ¨å…¥ CancelOpï¼Œç”¨æˆ·éœ€è¦åœ¨å–æ¶ˆåç»§ç»­ç­‰å¾…åŸ Future æ‰§è¡Œç»“æŸï¼ˆç”±äºå®ƒå·²ç»è¢«å–æ¶ˆäº†ï¼Œæ‰€ä»¥ä¼šé¢„æœŸåœ¨è¾ƒçŸ­çš„æ—¶é—´å†…è¿”å›ï¼‰ï¼Œå¯¹åº”çš„ syscall å¯èƒ½æ‰§è¡ŒæˆåŠŸæˆ–å¤±è´¥ï¼Œå¹¶è¿”è¿˜ bufferã€‚&lt;/p>
&lt;h3 id="ä¸Šå±‚æ— æ„ŸçŸ¥çš„-driver-æ¢æµ‹å’Œåˆ‡æ¢">ä¸Šå±‚æ— æ„ŸçŸ¥çš„ Driver æ¢æµ‹å’Œåˆ‡æ¢&lt;/h3>
&lt;p>ç¬¬äºŒä¸ªç‰¹æ€§æ˜¯æ”¯æŒä¸Šå±‚æ— æ„ŸçŸ¥çš„ Driver æ¢æµ‹å’Œåˆ‡æ¢ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">trait&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">OpAble&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">uring_op&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">mut&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#000">io_uring&lt;/span>::&lt;span style="color:#000">squeue&lt;/span>::&lt;span style="color:#000">Entry&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">legacy_interest&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#204a87">Option&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ready&lt;/span>::&lt;span style="color:#000">Diirection&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">usize&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">legacy_call&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">mut&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#000">io&lt;/span>::&lt;span style="color:#204a87">Result&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">u32&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol>
&lt;li>é€šè¿‡ Feature æˆ–ä»£ç æŒ‡å®š Driverï¼Œå¹¶æœ‰æ¡ä»¶åœ°åšè¿è¡Œæ—¶æ¢æµ‹&lt;/li>
&lt;li>æš´éœ²ç»Ÿä¸€çš„ IO æ¥å£ï¼Œå³ AsyncReadRent å’Œ AsyncWriteRent&lt;/li>
&lt;li>å†…éƒ¨åˆ©ç”¨ OpAble ç»Ÿä¸€ç»„ä»¶å®ç°ï¼ˆå¯¹ Readã€Write ç­‰ Op åšæŠ½è±¡ï¼‰&lt;/li>
&lt;/ol>
&lt;p>å…·ä½“æ¥è¯´ï¼Œæ¯”å¦‚æƒ³åš acceptã€connect æˆ–è€… readã€write ä¹‹ç±»çš„ï¼Œè¿™äº› op æ˜¯å®ç°äº† OpAble çš„ï¼Œå®é™…å¯¹åº”è¿™ä¸‰ä¸ª fn ï¼š&lt;/p>
&lt;ol>
&lt;li>uring_opï¼šç”Ÿæˆå¯¹åº” uring SQE&lt;/li>
&lt;li>legacy_interestï¼šè¿”å›å…¶å…³æ³¨çš„è¯»å†™æ–¹å‘&lt;/li>
&lt;li>legacy_callï¼šç›´æ¥æ‰§è¡Œ syscall&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Monoio_Open_Source/11.png" alt="image">&lt;/p>
&lt;p>æ•´ä¸ªæµç¨‹ä¼šå°†ä¸€ä¸ªå®ç°äº† opable çš„ç»“æ„ submit åˆ°çš„ driver ä¸Šï¼Œç„¶åä¼šè¿”å›ä¸€ä¸ªå®ç°äº† future çš„ä¸œè¥¿ï¼Œä¹‹åå®ƒ poll çš„æ—¶å€™å’Œ drop çš„æ—¶å€™å…·ä½“åœ°ä¼šåˆ†å‘åˆ°ä¸¤ä¸ª driver å®ç°ä¸­çš„ä¸€ä¸ªï¼Œå°±ä¼šç”¨è¿™ä¸‰ä¸ªå‡½æ•°é‡Œé¢çš„ä¸€ä¸ªæˆ–è€…ä¸¤ä¸ªã€‚&lt;/p>
&lt;h3 id="æ€§èƒ½">æ€§èƒ½&lt;/h3>
&lt;p>æ€§èƒ½æ˜¯ &lt;a href="https://github.com/bytedance/monoio">Monoio&lt;/a> çš„å‡ºå‘ç‚¹å’Œæœ€å¤§çš„ä¼˜ç‚¹ã€‚é™¤äº† io_uring å¸¦æ¥çš„æå‡å¤–ï¼Œå®ƒè®¾è®¡ä¸Šæ˜¯ä¸€ä¸ª thread-per-core æ¨¡å¼çš„ Runtimeã€‚&lt;/p>
&lt;ol>
&lt;li>æ‰€æœ‰ Task å‡ä»…åœ¨å›ºå®šçº¿ç¨‹è¿è¡Œï¼Œæ— ä»»åŠ¡çªƒå–ã€‚&lt;/li>
&lt;li>Task Queue ä¸º thread local ç»“æ„æ“ä½œæ— é”æ— ç«äº‰ã€‚&lt;/li>
&lt;/ol>
&lt;p>é«˜æ€§èƒ½ä¸»è¦æºäºä¸¤ä¸ªæ–¹é¢ï¼š&lt;/p>
&lt;ol>
&lt;li>Runtime å†…éƒ¨é«˜æ€§èƒ½ï¼šåŸºæœ¬ç­‰ä»·äºè£¸å¯¹æ¥ syscall&lt;/li>
&lt;li>ç”¨æˆ·ä»£ç é«˜æ€§èƒ½ï¼šç»“æ„å°½é‡ thread local ä¸è·¨çº¿ç¨‹&lt;/li>
&lt;/ol>
&lt;p>ä»»åŠ¡çªƒå–å’Œ thread-per-core ä¸¤ç§æœºåˆ¶çš„å¯¹æ¯”ï¼š&lt;/p>
&lt;p>å¦‚æœç”¨ tokio çš„è¯ï¼Œå¯èƒ½æŸä¸€ä¸ªçº¿ç¨‹ä¸Šå®ƒçš„ä»»åŠ¡éå¸¸å°‘ï¼Œå¯èƒ½å·²ç»ç©ºäº†ï¼Œä½†æ˜¯å¦ä¸€ä¸ªçº¿ç¨‹ä¸Šä»»åŠ¡éå¸¸å¤šã€‚é‚£ä¹ˆè¿™æ—¶å€™æ¯”è¾ƒé—²çš„çº¿ç¨‹å°±å¯ä»¥æŠŠä»»åŠ¡ä»æ¯”è¾ƒå¿™çš„ä»»åŠ¡ä¸Šå·èµ°ï¼Œè¿™ä¸€ç‚¹å’Œ Golang éå¸¸åƒã€‚è¿™ç§æœºåˆ¶å¯ä»¥è¾ƒå……åˆ†çš„åˆ©ç”¨ CPUï¼Œåº”å¯¹é€šç”¨åœºæ™¯å¯ä»¥åšåˆ°è¾ƒå¥½çš„æ€§èƒ½ã€‚&lt;/p>
&lt;p>ä½†è·¨çº¿ç¨‹æœ¬èº«ä¼šæœ‰å¼€é”€ï¼Œå¤šçº¿ç¨‹æ“ä½œæ•°æ®ç»“æ„æ—¶ä¹Ÿä¼šéœ€è¦é”æˆ–æ— é”ç»“æ„ã€‚ä½†æ— é”ä¹Ÿä¸ä»£è¡¨æ²¡æœ‰é¢å¤–å¼€é”€ï¼Œç›¸æ¯”çº¯æœ¬çº¿ç¨‹æ“ä½œï¼Œè·¨çº¿ç¨‹çš„æ— é”ç»“æ„ä¼šå½±å“ç¼“å­˜æ€§èƒ½ï¼ŒCAS ä¹Ÿä¼šä»˜å‡ºä¸€äº›æ— æ•ˆ loopã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæ›´é‡è¦çš„æ˜¯è¿™ç§æ¨¡å¼ä¹Ÿä¼šå½±å“ç”¨æˆ·ä»£ç ã€‚&lt;/p>
&lt;p>ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å†…éƒ¨éœ€è¦ä¸€ä¸ª SDK å»æ”¶é›†æœ¬ç¨‹åºçš„ä¸€äº›æ‰“ç‚¹ï¼Œå¹¶æŠŠè¿™äº›æ‰“ç‚¹èšåˆä¹‹åå»ä¸ŠæŠ¥ã€‚åœ¨åŸºäº tokio çš„å®ç°ä¸‹ï¼Œè¦åšåˆ°æè‡´çš„æ€§èƒ½å°±æ¯”è¾ƒå›°éš¾ã€‚
å¦‚æœåœ¨ thread-per-core ç»“æ„çš„ Runtime ä¸Šï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥å°†èšåˆçš„ Map æ”¾åœ¨ thread-local ä¸­ï¼Œä¸éœ€è¦ä»»ä½•é”ï¼Œä¹Ÿæ²¡æœ‰ä»»ä½•ç«äº‰é—®é¢˜ï¼Œåªéœ€è¦åœ¨æ¯ä¸ªçº¿ç¨‹ä¸Šå¯åŠ¨ä¸€ä¸ªä»»åŠ¡ï¼Œè®©è¿™ä¸ªä»»åŠ¡å®šæœŸæ¸…ç©ºå¹¶ä¸ŠæŠ¥ thread local ä¸­çš„æ•°æ®ã€‚
è€Œåœ¨ä»»åŠ¡å¯èƒ½è·¨çº¿ç¨‹çš„åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å°±åªèƒ½ç”¨å…¨å±€çš„ç»“æ„æ¥èšåˆæ‰“ç‚¹ï¼Œç”¨ä¸€ä¸ªå…¨å±€çš„ä»»åŠ¡å»ä¸ŠæŠ¥æ•°æ®ã€‚èšåˆç”¨çš„æ•°æ®ç»“æ„å°±å¾ˆéš¾ä¸ä½¿ç”¨é”ã€‚&lt;/p>
&lt;p>æ‰€ä»¥è¿™ä¸¤ç§æ¨¡å¼å„æœ‰å„çš„ä¼˜ç‚¹ï¼Œthread-per-core æ¨¡å¼ä¸‹å¯¹äºå¯ä»¥è¾ƒç‹¬ç«‹å¤„ç†çš„ä»»åŠ¡å¯ä»¥è¾¾åˆ°æ›´å¥½çš„æ€§èƒ½ã€‚å…±äº«æ›´å°‘çš„ä¸œè¥¿å¯ä»¥åšåˆ°æ›´å¥½çš„æ€§èƒ½ã€‚
ä½†æ˜¯ thread-per-core çš„ç¼ºç‚¹æ˜¯åœ¨ä»»åŠ¡æœ¬èº«ä¸å‡åŒ€çš„æƒ…å†µä¸‹ä¸èƒ½å……åˆ†åˆ©ç”¨ CPUã€‚å¯¹äºç‰¹å®šåœºæ™¯ï¼Œå¦‚ç½‘å…³ä»£ç†ç­‰ï¼Œthread-per-core æ›´å®¹æ˜“å……åˆ†åˆ©ç”¨ç¡¬ä»¶æ€§èƒ½ï¼Œåšåˆ°æ¯”è¾ƒå¥½çš„æ°´å¹³æ‰©å±•æ€§ã€‚å½“å‰å¹¿æ³›ä½¿ç”¨ nginx å’Œ envoy éƒ½æ˜¯è¿™ç§æ¨¡å¼ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Monoio_Open_Source/12.png" alt="image">&lt;/p>
&lt;p>æˆ‘ä»¬åšäº†ä¸€äº› benchmarkï¼Œ&lt;a href="https://github.com/bytedance/monoio">Monoio&lt;/a> çš„æ€§èƒ½æ°´å¹³æ‰©å±•æ€§æ˜¯éå¸¸å¥½çš„ã€‚å½“ CPU æ ¸æ•°å¢åŠ çš„æ—¶å€™ï¼Œåªéœ€è¦å¢åŠ å¯¹åº”çš„çº¿ç¨‹å°±å¯ä»¥äº†ã€‚&lt;/p>
&lt;h3 id="åŠŸèƒ½æ€§">åŠŸèƒ½æ€§&lt;/h3>
&lt;p>Thread-per-core ä¸ä»£è¡¨æ²¡æœ‰è·¨çº¿ç¨‹èƒ½åŠ›ã€‚ç”¨æˆ·ä¾æ—§å¯ä»¥ä½¿ç”¨ä¸€äº›è·¨çº¿ç¨‹å…±äº«çš„ç»“æ„ï¼Œè¿™äº›å’Œ Runtime æ— å…³ï¼›Runtime æä¾›äº†è·¨çº¿ç¨‹ç­‰å¾…çš„èƒ½åŠ›ã€‚&lt;/p>
&lt;p>ä»»åŠ¡åœ¨æœ¬çº¿ç¨‹æ‰§è¡Œï¼Œä½†å¯ä»¥ç­‰å¾…å…¶ä»–çº¿ç¨‹ä¸Šçš„ä»»åŠ¡ï¼Œè¿™ä¸ªæ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„èƒ½åŠ›ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œç”¨æˆ·éœ€è¦ç”¨å•çº¿ç¨‹å»æ‹‰å–è¿œç¨‹é…ç½®ï¼Œå¹¶ä¸‹å‘åˆ°æ‰€æœ‰çº¿ç¨‹ä¸Šã€‚åŸºäºè¿™ä¸ªèƒ½åŠ›ï¼Œç”¨æˆ·å°±å¯ä»¥éå¸¸è½»æ¾åœ°å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Monoio_Open_Source/13.png" alt="image">&lt;/p>
&lt;p>è·¨çº¿ç¨‹ç­‰å¾…çš„æœ¬è´¨æ˜¯åœ¨åˆ«çš„çº¿ç¨‹å”¤é†’æœ¬çº¿ç¨‹çš„ä»»åŠ¡ã€‚å®ç°ä¸Šæˆ‘ä»¬åœ¨ Waker ä¸­æ ‡è®°ä»»åŠ¡çš„æ‰€å±æƒï¼Œå¦‚æœå½“å‰çº¿ç¨‹å¹¶ä¸æ˜¯ä»»åŠ¡æ‰€å±çº¿ç¨‹ï¼Œé‚£ä¹ˆ Runtime ä¼šé€šè¿‡æ— é”é˜Ÿåˆ—å°†ä»»åŠ¡å‘é€åˆ°å…¶æ‰€å±çº¿ç¨‹ä¸Šï¼›
å¦‚æœæ­¤æ—¶ç›®æ ‡çº¿ç¨‹å¤„äºä¼‘çœ çŠ¶æ€ï¼ˆé™·å…¥ syscall ç­‰å¾… IOï¼‰ï¼Œåˆ™åˆ©ç”¨äº‹å…ˆå®‰æ’çš„ eventfd å°†å…¶å”¤é†’ã€‚å”¤é†’åï¼Œç›®æ ‡çº¿ç¨‹ä¼šå¤„ç†è·¨çº¿ç¨‹ waker é˜Ÿåˆ—ã€‚&lt;/p>
&lt;p>é™¤äº†æä¾›è·¨çº¿ç¨‹ç­‰å¾…èƒ½åŠ›å¤–ï¼Œ&lt;a href="https://github.com/bytedance/monoio">Monoio&lt;/a> ä¹Ÿæä¾›äº† spawn_blocking èƒ½åŠ›ï¼Œä¾›ç”¨æˆ·æ‰§è¡Œè¾ƒé‡çš„è®¡ç®—é€»è¾‘ï¼Œä»¥å…å½±å“åˆ°åŒçº¿ç¨‹çš„å…¶ä»–ä»»åŠ¡ã€‚&lt;/p>
&lt;h3 id="å…¼å®¹æ¥å£">å…¼å®¹æ¥å£&lt;/h3>
&lt;p>ç”±äºç›®å‰å¾ˆå¤šç»„ä»¶ï¼ˆå¦‚ hyper ç­‰ï¼‰ç»‘å®šäº† tokio çš„ IO traitï¼Œè€Œå‰é¢è®²äº†ç”±äºåœ°å±‚ driver çš„åŸå› è¿™ä¸¤ç§ IO trait ä¸å¯èƒ½ç»Ÿä¸€ï¼Œæ‰€ä»¥ç”Ÿæ€ä¸Šä¼šæ¯”è¾ƒå›°éš¾ã€‚å¯¹äºä¸€äº›éçƒ­è·¯å¾„çš„ç»„ä»¶ï¼Œéœ€è¦å…è®¸ç”¨æˆ·ä»¥å…¼å®¹æ–¹å¼ä½¿ç”¨ï¼Œå³ä¾¿ä»˜å‡ºä¸€äº›æ€§èƒ½ä»£ä»·ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Monoio_Open_Source/14.png" alt="image">&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">// tokio way
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">let&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">tcp&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">tokio&lt;/span>::&lt;span style="color:#000">net&lt;/span>::&lt;span style="color:#000">TcpStream&lt;/span>: &lt;span style="color:#000">connect&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;1.1.1.1.1:80&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">).&lt;/span>&lt;span style="color:#204a87;font-weight:bold">await&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">unwrap&lt;/span>&lt;span style="color:#000;font-weight:bold">();&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#8f5902;font-style:italic">// monoio way(with monoio-compat)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">let&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">tcp&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">monoio_compat&lt;/span>::&lt;span style="color:#000">StreamWrapper&lt;/span>::&lt;span style="color:#000">new&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">monoio_tcp&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">let&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">monoio_tcp&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">monoio&lt;/span>::&lt;span style="color:#000">net&lt;/span>::&lt;span style="color:#000">TcpStream&lt;/span>::&lt;span style="color:#000">connect&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;1.1.1.1:80&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">).&lt;/span>&lt;span style="color:#204a87;font-weight:bold">await&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">unwrap&lt;/span>&lt;span style="color:#000;font-weight:bold">();&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#8f5902;font-style:italic">// both of them implements tokio:: io::AsyncReadd and tokio:: io: AsyncWrite
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æˆ‘ä»¬æä¾›äº†ä¸€ä¸ª Wrapperï¼Œå†…ç½®äº†ä¸€ä¸ª bufferï¼Œç”¨æˆ·ä½¿ç”¨æ—¶éœ€è¦å¤šä»˜å‡ºä¸€æ¬¡å†…å­˜æ‹·è´å¼€é”€ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ä¸º &lt;a href="https://github.com/bytedance/monoio">monoio&lt;/a> çš„ç»„ä»¶åŒ…è£…å‡º tokio çš„å…¼å®¹æ¥å£ï¼Œä½¿å…¶å¯ä»¥ä½¿ç”¨å…¼å®¹ç»„ä»¶ã€‚&lt;/p>
&lt;h2 id="runtime-å¯¹æ¯”åº”ç”¨">Runtime å¯¹æ¯”&amp;amp;åº”ç”¨&lt;/h2>
&lt;p>è¿™éƒ¨åˆ†ä»‹ç» runtime çš„ä¸€äº›å¯¹æ¯”é€‰å‹å’Œåº”ç”¨ã€‚&lt;/p>
&lt;p>å‰é¢å·²ç»æåˆ°äº†å…³äºå‡åŒ€è°ƒåº¦å’Œ thread-per-core çš„ä¸€äº›å¯¹æ¯”ï¼Œè¿™é‡Œä¸»è¦è¯´ä¸€ä¸‹åº”ç”¨åœºæ™¯ã€‚å¯¹äºè¾ƒå¤§é‡çš„è½»ä»»åŠ¡ï¼Œthread-per-core æ¨¡å¼æ˜¯é€‚åˆçš„ã€‚ç‰¹åˆ«æ˜¯ä»£ç†ã€ç½‘å…³å’Œæ–‡ä»¶ IO å¯†é›†çš„åº”ç”¨ï¼Œä½¿ç”¨ Monoio å°±éå¸¸åˆé€‚ã€‚&lt;/p>
&lt;p>è¿˜æœ‰ä¸€ç‚¹ï¼ŒTokio è‡´åŠ›äºä¸€ä¸ªé€šç”¨è·¨å¹³å°ï¼Œä½†æ˜¯ &lt;a href="https://github.com/bytedance/monoio">monoio&lt;/a> è®¾è®¡ä¹‹åˆå°±æ˜¯ä¸ºäº†æè‡´æ€§èƒ½ï¼Œæ‰€ä»¥æ˜¯æœŸæœ›ä»¥ io_uring ä¸ºä¸»çš„ã€‚è™½ç„¶ä¹Ÿå¯ä»¥æ”¯æŒ epoll å’Œ kqueueï¼Œä½†ä»…ä½œ fallbackã€‚
æ¯”å¦‚ kqueue å…¶å®å°±æ˜¯ä¸ºäº†è®©ç”¨æˆ·èƒ½å¤Ÿåœ¨ Mac ä¸Šå»å¼€å‘çš„ä¾¿åˆ©æ€§ï¼Œå…¶å®ä¸æœŸæœ›ç”¨æˆ·çœŸçš„æŠŠå®ƒè·‘åœ¨è¿™ï¼ˆæœªæ¥å°†æ”¯æŒ Windowsï¼‰ã€‚&lt;/p>
&lt;p>ç”Ÿæ€éƒ¨åˆ†ï¼ŒTokio çš„ç”Ÿæ€æ˜¯æ¯”è¾ƒå…¨çš„ï¼Œ&lt;a href="https://github.com/bytedance/monoio">monoio&lt;/a> çš„æ¯”è¾ƒç¼ºä¹ï¼Œå³ä¾¿æœ‰å…¼å®¹å±‚ï¼Œå…¼å®¹å±‚æœ¬èº«æ˜¯æœ‰å¼€é”€çš„ã€‚Tokio æœ‰ä»»åŠ¡çªƒå–ï¼Œå¯ä»¥åœ¨è¾ƒå¤šçš„åœºæ™¯è¡¨ç°å¾ˆå¥½ï¼Œä½†å…¶æ°´å¹³æ‰©å±•æ€§ä¸ä½³ã€‚
&lt;a href="https://github.com/bytedance/monoio">monoio&lt;/a> çš„æ°´å¹³æ‰©å±•å°±æ¯”è¾ƒå¥½ï¼Œä½†æ˜¯å¯¹è¿™ä¸ªä¸šåŠ¡åœºæ™¯å’Œç¼–ç¨‹æ¨¡å‹å…¶å®æ˜¯æœ‰é™åˆ¶çš„ã€‚æ‰€ä»¥ &lt;a href="https://github.com/bytedance/monoio">monoio&lt;/a> æ¯”è¾ƒé€‚åˆçš„ä¸€äº›åœºæ™¯å°±æ˜¯ä»£ç†ã€ç½‘å…³è¿˜æœ‰ç¼“å­˜æ•°æ®èšåˆç­‰ã€‚ä»¥åŠè¿˜æœ‰ä¸€äº›ä¼šåšæ–‡ä»¶ io çš„ï¼Œå› ä¸º io_uring å¯¹æ–‡ä»¶ io éå¸¸å¥½ã€‚
å¦‚æœä¸ç”¨ io_uring çš„è¯ï¼Œåœ¨ Linux ä¸‹å…¶å®æ˜¯æ²¡æœ‰çœŸå¼‚æ­¥çš„æ–‡ä»¶ io å¯ä»¥ç”¨çš„ï¼Œåªæœ‰ç”¨ io_uring æ‰èƒ½åšåˆ°è¿™ä¸€ç‚¹ã€‚è¿˜é€‚ç”¨äºè¿™ç§æ–‡ä»¶ io æ¯”è¾ƒå¯†é›†çš„ï¼Œæ¯”å¦‚è¯´åƒ DB ç±»å‹çš„ç»„ä»¶ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Monoio_Open_Source/15.png" alt="image">&lt;/p>
&lt;p>Tokio-uring å…¶å®æ˜¯ä¸€ä¸ªæ„å»ºåœ¨ tokio ä¹‹ä¸Šçš„ä¸€å±‚ï¼Œæœ‰ç‚¹åƒæ˜¯ä¸€å±‚åˆ†å‘å±‚ï¼Œå®ƒçš„è®¾è®¡æ¯”è¾ƒæ¼‚äº®ï¼Œæˆ‘ä»¬ä¹Ÿå‚è€ƒäº†å®ƒé‡Œé¢çš„å¾ˆå¤šè®¾è®¡ï¼Œæ¯”å¦‚è¯´åƒé‚£ä¸ªä¼ é€’æ‰€æœ‰æƒçš„è¿™ç§å½¢å¼ã€‚
ä½†æ˜¯å®ƒè¿˜æ˜¯åŸºäº tokio åšçš„ï¼Œåœ¨ epoll ä¹‹ä¸Šè¿è¡Œ uringï¼Œæ²¡æœ‰åšåˆ°ç”¨æˆ·é€æ˜ã€‚å½“ç»„ä»¶åœ¨å®ç°æ—¶ï¼Œåªèƒ½åœ¨ä½¿ç”¨ epoll å’Œä½¿ç”¨ uring ä¸­äºŒé€‰ä¸€ï¼Œ
å¦‚æœé€‰æ‹©äº† uringï¼Œé‚£ä¹ˆç¼–è¯‘äº§ç‰©å°±æ— æ³•åœ¨æ—§ç‰ˆæœ¬ linux ä¸Šè¿è¡Œã€‚è€Œ &lt;a href="https://github.com/bytedance/monoio">Monoio&lt;/a> å¾ˆå¥½çš„æ”¯æŒäº†è¿™ä¸€ç‚¹ï¼Œæ”¯æŒåŠ¨æ€æ¢æµ‹ uring çš„å¯ç”¨æ€§ã€‚&lt;/p>
&lt;h3 id="monoio-åº”ç”¨">Monoio åº”ç”¨&lt;/h3>
&lt;ol>
&lt;li>Monoio Gateway: åŸºäº &lt;a href="https://github.com/bytedance/monoio">Monoio&lt;/a> ç”Ÿæ€çš„ç½‘å…³æœåŠ¡ï¼Œæˆ‘ä»¬ä¼˜åŒ–ç‰ˆæœ¬ Benchmark ä¸‹æ¥æ€§èƒ½ä¼˜äº Nginxï¼›&lt;/li>
&lt;li>Volo: &lt;a href="https://github.com/cloudwego">CloudWeGo&lt;/a> Team å¼€æºçš„ RPC æ¡†æ¶ï¼Œç›®å‰åœ¨é›†æˆä¸­ï¼ŒPoC ç‰ˆæœ¬æ€§èƒ½ç›¸æ¯”åŸºäº Tokio æå‡ 26%&lt;/li>
&lt;/ol>
&lt;p>æˆ‘ä»¬ä¹Ÿåœ¨å†…éƒ¨åšäº†ä¸€äº›ä¸šåŠ¡ä¸šåŠ¡è¯•ç‚¹ï¼Œæœªæ¥æˆ‘ä»¬ä¼šä»æå‡å…¼å®¹æ€§å’Œç»„ä»¶å»ºè®¾ä¸Šå…¥æ‰‹ï¼Œå°±æ˜¯è®©å®ƒæ›´å¥½ç”¨ã€‚&lt;/p></description></item><item><title>Blog: å­—èŠ‚è·³åŠ¨å¼€æº Shmipcï¼šåŸºäºå…±äº«å†…å­˜çš„é«˜æ€§èƒ½ IPC</title><link>https://www.cloudwego.io/zh/blog/2023/04/04/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8%E5%BC%80%E6%BA%90-shmipc%E5%9F%BA%E4%BA%8E%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98%E7%9A%84%E9%AB%98%E6%80%A7%E8%83%BD-ipc/</link><pubDate>Tue, 04 Apr 2023 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2023/04/04/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8%E5%BC%80%E6%BA%90-shmipc%E5%9F%BA%E4%BA%8E%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98%E7%9A%84%E9%AB%98%E6%80%A7%E8%83%BD-ipc/</guid><description>
&lt;h2 id="ç®€ä»‹">ç®€ä»‹&lt;/h2>
&lt;p>Shmipc æ˜¯å­—èŠ‚è·³åŠ¨æœåŠ¡æ¡†æ¶å›¢é˜Ÿç ”å‘çš„&lt;strong>é«˜æ€§èƒ½è¿›ç¨‹é—´é€šè®¯åº“&lt;/strong>ï¼Œå®ƒåŸºäº&lt;strong>å…±äº«å†…å­˜&lt;/strong>æ„å»ºï¼Œå…·æœ‰&lt;strong>é›¶æ‹·è´&lt;/strong>çš„ç‰¹ç‚¹ï¼ŒåŒæ—¶å®ƒå¼•å…¥çš„åŒæ­¥æœºåˆ¶å…·æœ‰&lt;strong>æ‰¹é‡æ”¶å‰² IO&lt;/strong> çš„èƒ½åŠ›ï¼Œç›¸å¯¹äºå…¶ä»–è¿›ç¨‹é—´é€šè®¯æ–¹å¼èƒ½æ˜æ˜¾æå‡æ€§èƒ½ã€‚
åœ¨å­—èŠ‚å†…éƒ¨ï¼ŒShmipc åº”ç”¨äº Service Mesh åœºæ™¯ä¸‹ï¼Œmesh proxy è¿›ç¨‹ä¸ä¸šåŠ¡é€»è¾‘è¿›ç¨‹ã€ä¸é€šç”¨ sidecar è¿›ç¨‹çš„é€šè®¯ï¼Œ åœ¨&lt;strong>å¤§åŒ…åœºæ™¯&lt;/strong>å’Œ &lt;strong>IO å¯†é›†å‹åœºæ™¯&lt;/strong>èƒ½å¤Ÿå–å¾—äº†æ˜¾è‘—çš„æ€§èƒ½æ”¶ç›Šã€‚&lt;/p>
&lt;p>å¼€æºç¤¾åŒºå…³äºè¿™æ–¹é¢çš„èµ„æ–™ä¸å¤šï¼ŒShmipc çš„å¼€æºå¸Œæœ›èƒ½ä¸ºç¤¾åŒºè´¡çŒ®ä¸€ä»½åŠ›é‡ï¼Œæä¾›ä¸€ä»½å‚è€ƒã€‚æœ¬æ–‡ä¸»è¦ä»‹ç» Shmipc çš„ä¸€äº›ä¸»è¦çš„è®¾è®¡æ€è·¯ã€è½åœ°è¿‡ç¨‹é‡åˆ°çš„é—®é¢˜ä»¥åŠåç»­çš„æ¼”è¿›è§„åˆ’ã€‚&lt;/p>
&lt;ul>
&lt;li>go ç‰ˆæœ¬å®ç°: &lt;a href="https://github.com/cloudwego/shmipc-go">https://github.com/cloudwego/shmipc-go&lt;/a>&lt;/li>
&lt;li>è®¾è®¡ç»†èŠ‚: &lt;a href="https://github.com/cloudwego/shmipc-spec">https://github.com/cloudwego/shmipc-spec&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="é¡¹ç›®èƒŒæ™¯">é¡¹ç›®èƒŒæ™¯&lt;/h2>
&lt;p>åœ¨å­—èŠ‚ï¼ŒService Mesh åœ¨è½åœ°çš„è¿‡ç¨‹ä¸­è¿›è¡Œäº†å¤§é‡çš„æ€§èƒ½ä¼˜åŒ–å·¥ä½œï¼Œå…¶ä¸­ Service Mesh çš„æµé‡åŠ«æŒæ˜¯é€šè¿‡ï¼Œmesh proxy ä¸å¾®æœåŠ¡æ¡†æ¶çº¦å®šçš„åœ°å€è¿›è¡Œè¿›ç¨‹é—´é€šè®¯æ¥å®Œæˆï¼Œ
æ€§èƒ½ä¼šä¼˜äºå¼€æºæ–¹æ¡ˆä¸­çš„ iptablesã€‚ä½†å¸¸è§„çš„ä¼˜åŒ–æ‰‹æ®µå·²ä¸èƒ½å¸¦æ¥æ˜æ˜¾çš„æ€§èƒ½æå‡ã€‚äºæ˜¯æˆ‘ä»¬æŠŠç›®å…‰æ”¾åˆ°äº†è¿›ç¨‹é—´é€šè®¯ä¸Šï¼ŒShmipc ç”±æ­¤è¯ç”Ÿã€‚&lt;/p>
&lt;h2 id="è®¾è®¡æ€è·¯">è®¾è®¡æ€è·¯&lt;/h2>
&lt;h3 id="é›¶æ‹·è´">é›¶æ‹·è´&lt;/h3>
&lt;p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ¯”è¾ƒå¹¿æ³›ä½¿ç”¨çš„è¿›ç¨‹é—´é€šè®¯æ–¹å¼æ˜¯ unix domain socket ä¸ TCP loopbackï¼ˆlocalhost:$PORTï¼‰ï¼Œä¸¤è€…ä» benchmark çœ‹æ€§èƒ½å·®å¼‚ä¸å¤§ã€‚
ä»æŠ€æœ¯ç»†èŠ‚çœ‹ï¼Œéƒ½éœ€è¦å°†é€šè®¯çš„æ•°æ®åœ¨ç”¨æˆ·æ€å’Œå†…æ ¸æ€ä¹‹é—´è¿›è¡Œæ‹·è´ã€‚åœ¨ RPC åœºæ™¯ä¸‹ï¼Œä¸€æ¬¡ RPC æµç¨‹ä¸­åœ¨è¿›ç¨‹é—´é€šè®¯ä¸Šä¼šæœ‰å››æ¬¡çš„å†…å­˜æ‹·è´ï¼ŒRequest è·¯å¾„ä¸¤æ¬¡ï¼Œ Response è·¯å¾„ä¸¤æ¬¡ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Shmipc_Open_Source/zero_copy.png" alt="image">&lt;/p>
&lt;p>è™½ç„¶ç°ä»£ CPU ä¸Šè¿›è¡Œé¡ºåºçš„ copy éå¸¸å¿«ï¼Œä½†å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿæ¶ˆé™¤è¿™å¤šè¾¾å››æ¬¡çš„å†…å­˜æ‹·è´ï¼Œåœ¨å¤§åŒ…åœºæ™¯ä¸‹ä¹Ÿèƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸ŠèŠ‚çœ CPU ä½¿ç”¨ã€‚
è€ŒåŸºäºå…±äº«å†…å­˜é€šè®¯é›¶æ‹·è´çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“è¾¾æˆè¿™ä¸€ç‚¹ã€‚ä½†ä¸ºäº†è¾¾åˆ°é›¶æ‹·è´çš„æ•ˆæœï¼Œå›´ç»•å…±äº«å†…å­˜æœ¬èº«ï¼Œè¿˜ä¼šäº§ç”Ÿæœ‰è®¸å¤šé¢å¤–çš„å·¥ä½œï¼Œæ¯”å¦‚ï¼š&lt;/p>
&lt;ol>
&lt;li>æ·±å…¥å¾®æœåŠ¡æ¡†æ¶çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ã€‚æˆ‘ä»¬å¸Œæœ›å½“ Request æˆ– Response åºåˆ—åŒ–å®Œæˆæ—¶ï¼Œå¯¹åº”çš„äºŒè¿›åˆ¶æ•°æ®å·²ç»å­˜åœ¨å…±äº«å†…å­˜ä¸­ã€‚è€Œä¸æ˜¯åºåˆ—åŒ–åˆ°ä¸€å—éå…±äº«å†…å­˜çš„ buffer ä¸­ï¼Œç„¶åå†æ‹·è´åˆ°å…±äº«å†…å­˜ bufferã€‚&lt;/li>
&lt;li>å®ç°ä¸€ç§è¿›ç¨‹åŒæ­¥æœºåˆ¶ã€‚å½“ä¸€ä¸ªè¿›ç¨‹æŠŠæ•°æ®å†™å…¥å…±äº«å†…å­˜åï¼Œå¦å¤–ä¸€ä¸ªè¿›ç¨‹å¹¶ä¸çŸ¥é“ï¼Œå› æ­¤éœ€è¦åŒæ­¥æœºåˆ¶è¿›è¡Œé€šçŸ¥ã€‚&lt;/li>
&lt;li>é«˜æ•ˆçš„å†…å­˜åˆ†é…å’Œå›æ”¶ã€‚ä¿è¯è·¨è¿›ç¨‹çš„å…±äº«å†…å­˜çš„åˆ†é…å’Œå›æ”¶æœºåˆ¶çš„å¼€é”€è¶³å¤Ÿä½ï¼Œé¿å…å…¶æ©ç›–é›¶æ‹·è´çš„ç‰¹æ€§å¸¦æ¥çš„æ”¶ç›Šã€‚&lt;/li>
&lt;/ol>
&lt;h3 id="åŒæ­¥æœºåˆ¶">åŒæ­¥æœºåˆ¶&lt;/h3>
&lt;p>åˆ†åœºæ™¯è€ƒè™‘ï¼š&lt;/p>
&lt;ol>
&lt;li>æŒ‰éœ€å®æ—¶åŒæ­¥ã€‚é€‚ç”¨äºåœ¨çº¿åœºæ™¯ï¼Œå¯¹æ—¶å»¶æå…¶æ•æ„Ÿï¼Œæ¯æ¬¡å†™å…¥æ“ä½œå®Œæˆåéƒ½é€šçŸ¥å¯¹ç«¯è¿›ç¨‹ã€‚Linux ä¸‹ï¼Œå¯åšé€‰æ‹©çš„æ¯”è¾ƒå¤šï¼ŒTCP loopbackã€unix domain socketã€event fd ç­‰ã€‚
event fd çš„ benchmark æ€§èƒ½ä¼šç•¥å¥½ï¼Œä½†è·¨è¿›ç¨‹ä¼ é€’ fd ä¼šå¼•å…¥è¿‡å¤šå¤æ‚æ€§ï¼Œå…¶å¸¦æ¥çš„æ€§èƒ½æå‡åœ¨ IPC ä¸Šä¸å¤ªæ˜æ˜¾ï¼Œå¤æ‚æ€§ä¸æ€§èƒ½ä¸­é—´çš„æƒè¡¡éœ€è¦æ…é‡è€ƒè™‘ã€‚åœ¨å­—èŠ‚ï¼Œæˆ‘ä»¬é€‰æ‹©äº† unix domain socket æ¥è¿›è¡Œè¿›ç¨‹åŒæ­¥ã€‚&lt;/li>
&lt;li>å®šæ—¶åŒæ­¥ã€‚é€‚ç”¨äºç¦»çº¿åœºæ™¯ï¼Œå¯¹æ—¶å»¶ä¸æ•æ„Ÿã€‚é€šè¿‡é«˜é—´éš”çš„ sleep è®¿é—®å…±äº«å†…å­˜ä¸­è‡ªå®šä¹‰çš„æ ‡å¿—ä½æ¥é‰´åˆ«æ˜¯å¦æœ‰æ•°æ®å†™å…¥ã€‚ä½†æ³¨æ„ sleep æœ¬èº«ä¹Ÿéœ€è¦ç³»ç»Ÿè°ƒç”¨ï¼Œå¼€é”€å¤§äº unix domain socket çš„è¯»å†™ã€‚&lt;/li>
&lt;li>è½®è¯¢åŒæ­¥ã€‚é€‚ç”¨äºæ—¶å»¶éå¸¸æ•æ„Ÿï¼ŒCPU ä¸é‚£ä¹ˆæ•æ„Ÿçš„åœºæ™¯ã€‚å¯ä»¥é€šè¿‡å•æ ¸è½®è¯¢å…±äº«å†…å­˜ä¸­çš„è‡ªå®šä¹‰æ ‡å¿—ä½æ¥å®Œæˆã€‚&lt;/li>
&lt;/ol>
&lt;p>æ€»çš„æ¥è¯´æŒ‰éœ€å®æ—¶åŒæ­¥å’Œå®šæœŸåŒæ­¥éœ€è¦ç³»ç»Ÿè°ƒç”¨æ¥å®Œæˆï¼Œè½®è¯¢åŒæ­¥ä¸éœ€è¦ç³»ç»Ÿè°ƒç”¨ï¼Œä½†éœ€è¦å¸¸æ€è·‘æ»¡ä¸€ä¸ª CPU æ ¸å¿ƒã€‚&lt;/p>
&lt;h3 id="æ‰¹é‡æ”¶å‰²-io">æ‰¹é‡æ”¶å‰² IO&lt;/h3>
&lt;p>åœ¨çº¿åœºæ™¯ä¸­æŒ‰éœ€å®æ—¶åŒæ­¥ï¼Œæ¯æ¬¡æ•°æ®å†™å…¥éƒ½éœ€è¦è¿›è¡Œä¸€æ¬¡è¿›è¡Œè¿›ç¨‹åŒæ­¥ï¼ˆä¸‹å›¾ä¸­çš„ 4ï¼‰ï¼Œè™½ç„¶å»¶è¿Ÿé—®é¢˜è§£å†³äº†ï¼Œä½†åœ¨æ€§èƒ½ä¸Šï¼Œéœ€è¦äº¤äº’çš„æ•°æ®åŒ…éœ€è¦å¤§äºä¸€ä¸ªæ¯”è¾ƒå¤§çš„é˜ˆå€¼ï¼Œé›¶æ‹·è´å¸¦æ¥çš„æ”¶ç›Šæ‰èƒ½çªæ˜¾ã€‚
å› æ­¤åœ¨å…±äº«å†…å­˜ä¸­æ„é€ äº†ä¸€ä¸ª IO é˜Ÿåˆ—çš„æ¥å®Œæˆæ‰¹é‡æ”¶å‰² IOï¼Œä½¿å…¶åœ¨å°åŒ… IO å¯†é›†åœºæ™¯ä¹Ÿèƒ½æ˜¾ç°æ”¶ç›Šã€‚æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šå½“ä¸€ä¸ªè¿›ç¨‹æŠŠè¯·æ±‚å†™å…¥ IO é˜Ÿåˆ—åï¼Œä¼šç»™å¦å¤–ä¸€ä¸ªè¿›ç¨‹å‘é€šçŸ¥æ¥å¤„ç†ã€‚
é‚£ä¹ˆåœ¨ä¸‹ä¸€ä¸ªè¯·æ±‚è¿›æ¥æ—¶ï¼ˆå¯¹åº”ä¸‹å›¾ä¸­çš„ IOEvent 2~Nï¼Œä¸€ä¸ª IOEvent å¯ä»¥ç‹¬ç«‹æè¿°ä¸€ä¸ªè¯·æ±‚åœ¨å…±äº«å†…å­˜ä¸­çš„ä½ç½®ï¼‰ï¼Œå¦‚æœå¯¹ç«¯è¿›ç¨‹è¿˜åœ¨å¤„ç† IO é˜Ÿåˆ—ä¸­çš„è¯·æ±‚ï¼Œé‚£ä¹ˆå°±ä¸å¿…è¿›è¡Œé€šçŸ¥ã€‚å› æ­¤ï¼ŒIO è¶Šå¯†é›†ï¼Œæ‰¹å¤„ç†æ•ˆæœå°±è¶Šå¥½ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Shmipc_Open_Source/share_memory.jpeg" alt="image">&lt;/p>
&lt;p>å¦å¤–å°±æ˜¯ç¦»çº¿åœºæ™¯ä¸­ï¼Œå®šæ—¶åŒæ­¥æœ¬èº«å°±æ˜¯æ‰¹é‡å¤„ç† IO çš„ï¼Œæ‰¹å¤„ç†çš„æ•ˆæœèƒ½å¤Ÿæœ‰æ•ˆå‡å°‘è¿›ç¨‹åŒæ­¥å¸¦æ¥çš„ç³»ç»Ÿè°ƒç”¨ï¼Œsleep é—´éš”è¶Šé«˜ï¼Œè¿›ç¨‹åŒæ­¥çš„å¼€é”€å°±è¶Šä½ã€‚
å¯¹äºè½®è¯¢åŒæ­¥åˆ™ä¸éœ€è¦è€ƒè™‘æ‰¹é‡æ”¶å‰² IOï¼Œå› ä¸ºè¿™ä¸ªæœºåˆ¶æœ¬èº«æ˜¯ä¸ºäº†å‡å°‘è¿›ç¨‹åŒæ­¥å¼€é”€ã€‚è€Œè½®è¯¢åŒæ­¥ç›´æ¥å æ»¡ä¸€ä¸ª CPU æ ¸å¿ƒï¼Œç›¸å½“äºé»˜è®¤æŠŠåŒæ­¥æœºåˆ¶çš„å¼€é”€æ‹‰æ»¡ä»¥è·å–æä½çš„åŒæ­¥å»¶è¿Ÿã€‚&lt;/p>
&lt;h2 id="æ€§èƒ½æ”¶ç›Š">æ€§èƒ½æ”¶ç›Š&lt;/h2>
&lt;h3 id="benchmark">Benchmark&lt;/h3>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Shmipc_Open_Source/benchmark.png" alt="image">&lt;/p>
&lt;p>å…¶ä¸­ X è½´ä¸ºæ•°æ®åŒ…å¤§å°ï¼ŒY è½´ä¸ºä¸€æ¬¡ Ping-Pong çš„è€—æ—¶ï¼Œå•ä½ä¸ºå¾®ç§’ï¼Œè¶Šå°è¶Šå¥½ã€‚å¯ä»¥çœ‹åˆ°åœ¨å°åŒ…åœºæ™¯ä¸‹ï¼ŒShmipc ç›¸å¯¹äº unix domain socket ä¹Ÿèƒ½è·å¾—ä¸€äº›æ”¶ç›Šï¼Œå¹¶ä¸”éšç€&lt;strong>åŒ…å¤§å°è¶Šå¤§æ€§èƒ½è¶Šå¥½&lt;/strong>ã€‚&lt;/p>
&lt;p>æ•°æ®æºï¼š &lt;code>git clone https://github.com/cloudwego/shmipc-go &amp;amp;&amp;amp; go test -bench=BenchmarkParallelPingPong -run BenchmarkParallelPingPong&lt;/code>&lt;/p>
&lt;h3 id="ç”Ÿäº§ç¯å¢ƒ">ç”Ÿäº§ç¯å¢ƒ&lt;/h3>
&lt;p>åœ¨å­—èŠ‚ç”Ÿäº§ç¯å¢ƒçš„ Service Mesh ç”Ÿæ€ä¸­ï¼Œæˆ‘ä»¬åœ¨&lt;strong>3000+æœåŠ¡ã€100w+å®ä¾‹ä¸Š&lt;/strong>çš„åº”ç”¨äº† Shmipcã€‚ä¸åŒçš„ä¸šåŠ¡åœºæ™¯æ˜¾ç°å‡ºä¸åŒçš„æ”¶ç›Šï¼Œ
å…¶ä¸­æ”¶ç›Šæœ€é«˜çš„é£æ§ä¸šåŠ¡é™ä½äº†æ•´ä½“&lt;strong>24%çš„èµ„æºä½¿ç”¨&lt;/strong>ï¼Œå½“ç„¶ä¹Ÿæœ‰æ— æ˜æ˜¾æ”¶ç›Šçš„ç”šè‡³åŠ£åŒ–çš„åœºæ™¯å‡ºç°ã€‚ä½†&lt;strong>åœ¨å¤§åŒ…å’Œ IO å¯†é›†å‹åœºæ™¯å‡èƒ½æ˜¾ç°å‡ºæ˜¾è‘—æ”¶ç›Š&lt;/strong>ã€‚&lt;/p>
&lt;h2 id="é‡‡å‘è®°å½•">é‡‡å‘è®°å½•&lt;/h2>
&lt;p>åœ¨å­—èŠ‚å®é™…è½åœ°çš„è¿‡ç¨‹ä¸­æˆ‘ä»¬ä¹Ÿè¸©äº†ä¸€äº›å‘ï¼Œå¯¼è‡´ä¸€äº›çº¿ä¸Šäº‹æ•…ï¼Œæ¯”è¾ƒå…·æœ‰å‚è€ƒä»·å€¼ã€‚&lt;/p>
&lt;ol>
&lt;li>å…±äº«å†…å­˜æ³„æ¼ã€‚IPC è¿‡ç¨‹å…±äº«å†…å­˜åˆ†é…å’Œå›æ”¶æ¶‰åŠåˆ°ä¸¤ä¸ªè¿›ç¨‹ï¼Œç¨æœ‰ä¸æ…å°±å®¹æ˜“å‘ç”Ÿå…±äº«å†…å­˜çš„æ³„æ¼ã€‚é—®é¢˜è™½ç„¶éå¸¸æ£˜æ‰‹ï¼Œä½†åªè¦èƒ½å¤Ÿåšåˆ°æ³„æ¼æ—¶ä¸»åŠ¨å‘ç°ï¼Œä»¥åŠæ³„æ¼ä¹‹åæœ‰è§‚æµ‹æ‰‹æ®µå¯ä»¥æ’æŸ¥å³å¯ã€‚
&lt;ol>
&lt;li>ä¸»åŠ¨å‘ç°ã€‚å¯ä»¥é€šè¿‡å¢åŠ ä¸€äº›ç»Ÿè®¡ä¿¡æ¯ç„¶åæ±‡æ€»åˆ°ç›‘æ§ç³»ç»Ÿæ¥åšåˆ°ä¸»åŠ¨å‘ç°ï¼Œæ¯”å¦‚æ€»åˆ†é…å’Œæ€»å›æ”¶çš„å†…å­˜å¤§å°ã€‚&lt;/li>
&lt;li>è§‚æµ‹æ‰‹æ®µã€‚åœ¨è®¾è®¡å…±äº«å†…å­˜çš„å¸ƒå±€æ—¶å¢åŠ ä¸€äº›å…ƒä¿¡æ¯ï¼Œä½¿å¾—åœ¨å‘ç”Ÿæ³„æ¼ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å†…ç½®çš„ debug å·¥å…· dump æ³„æ¼æ—¶åˆ»çš„å…±äº«å†…å­˜æ¥è¿›è¡Œåˆ†æã€‚èƒ½å¤ŸçŸ¥é“æ‰€æ³„æ¼çš„å†…å­˜æœ‰å¤šå°‘ï¼Œé‡Œé¢çš„å†…å®¹æ˜¯ä»€ä¹ˆï¼Œä»¥åŠå’Œè¿™éƒ¨åˆ†å†…å®¹ç›¸å…³çš„ä¸€äº›å…ƒä¿¡æ¯ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>ä¸²åŒ…ã€‚ä¸²åŒ…æ˜¯æœ€å¤´ç–¼çš„é—®é¢˜ï¼Œå‡ºç°çš„åŸå› æ˜¯åƒå¥‡ç™¾æ€ªçš„ï¼Œå¾€å¾€é€ æˆä¸¥é‡åæœã€‚æˆ‘ä»¬æ›¾åœ¨æŸä¸šåŠ¡ä¸Šå‘ç”Ÿä¸²åŒ…äº‹æ•…ï¼Œå‡ºç°çš„åŸå› æ˜¯å› ä¸ºå¤§åŒ…å¯¼è‡´å…±äº«å†…å­˜è€—å°½ï¼Œ
fallback åˆ°å¸¸è§„è·¯å¾„çš„è¿‡ç¨‹ä¸­è®¾è®¡å­˜åœ¨ç¼ºé™·ï¼Œå°æ¦‚ç‡å‡ºç°ä¸²åŒ…ã€‚æ’æŸ¥è¿‡ç¨‹å’ŒåŸå› å¹¶ä¸å…·å¤‡å…±æ€§ï¼Œå¯ä»¥æä¾›æ›´å¤šçš„å‚è€ƒæ˜¯å¢åŠ æ›´å¤šåœºæ™¯çš„é›†æˆæµ‹è¯•å’Œå•å…ƒæµ‹è¯•å°†ä¸²åŒ…æ‰¼æ€åœ¨æ‘‡ç¯®ä¸­ã€‚&lt;/li>
&lt;li>å…±äº«å†…å­˜è¸©è¸ã€‚åº”è¯¥å°½å¯èƒ½ä½¿ç”¨ &lt;strong>memfd&lt;/strong> æ¥å…±äº«å†…å­˜ï¼Œè€Œä¸æ˜¯ mmap æ–‡ä»¶ç³»ç»Ÿä¸­çš„æŸä¸ªè·¯å¾„ã€‚æ—©æœŸæˆ‘ä»¬é€šè¿‡ mmap æ–‡ä»¶ç³»ç»Ÿçš„è·¯å¾„æ¥å…±äº«å†…å­˜ï¼ŒShmipc çš„å¼€å¯å’Œå…±äº«å†…å­˜çš„è·¯å¾„ç”±ç¯å¢ƒå˜é‡æŒ‡å®šï¼Œ
å¯åŠ¨è¿‡ç¨‹ç”±å¼•å¯¼è¿›ç¨‹æ³¨å…¥åº”ç”¨è¿›ç¨‹ã€‚é‚£ä¹ˆå­˜åœ¨ä¸€ç§æƒ…å†µæ˜¯åº”ç”¨è¿›ç¨‹å¯èƒ½ä¼š fork å‡ºä¸€ä¸ªè¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹ç»§æ‰¿äº†åº”ç”¨è¿›ç¨‹çš„ç¯å¢ƒå˜é‡å¹¶ä¸”ä¹Ÿé›†æˆäº† Shmipcï¼Œç„¶å fork çš„è¿›ç¨‹å’Œåº”ç”¨è¿›ç¨‹ mmap äº†åŒä¸€å—å…±äº«å†…å­˜ï¼Œå‘ç°è¸©è¸ã€‚
åœ¨å­—èŠ‚çš„äº‹æ•…åœºæ™¯æ˜¯åº”ç”¨è¿›ç¨‹ä½¿ç”¨äº† golang çš„ plugin æœºåˆ¶ä»å¤–éƒ¨åŠ è½½ &lt;code>.so&lt;/code> æ¥è¿è¡Œï¼Œè¯¥ &lt;code>.so&lt;/code> é›†æˆäº† Shmipcï¼Œå¹¶ä¸”è·‘åœ¨åº”ç”¨è¿›ç¨‹é‡Œï¼Œèƒ½çœ‹åˆ°æ‰€æœ‰ç¯å¢ƒå˜é‡ï¼Œäºæ˜¯å°±å’Œåº”ç”¨è¿›ç¨‹ mmap äº†åŒä¸€ç‰‡å…±äº«å†…å­˜ï¼Œè¿è¡Œè¿‡ç¨‹å‘ç”Ÿæœªå®šä¹‰è¡Œä¸ºã€‚&lt;/li>
&lt;li>Sigbus coredumpã€‚æ—©æœŸæˆ‘ä»¬é€šè¿‡ mmap &lt;code>/dev/shm/&lt;/code>è·¯å¾„ï¼ˆtmpfsï¼‰ä¸‹çš„æ–‡ä»¶æ¥å…±äº«å†…å­˜ï¼Œåº”ç”¨æœåŠ¡å¤§éƒ½è¿è¡Œåœ¨ docker å®¹å™¨å®ä¾‹ä¸­ã€‚
å®¹å™¨å®ä¾‹å¯¹ tmpfs æœ‰å®¹é‡é™åˆ¶ï¼ˆå¯ä»¥é€šè¿‡ df -h è§‚æµ‹ï¼‰ï¼Œè¿™ä¼šä½¿å¾— mmap çš„å…±äº«å†…å­˜å¦‚æœè¶…è¿‡è¯¥é™åˆ¶å°±ä¼šå‡ºç° Sigbusï¼Œ
å¹¶ä¸” mmap æœ¬èº«ä¸ä¼šæœ‰ä»»ä½•æŠ¥é”™ï¼Œä½†åœ¨è¿è¡ŒæœŸï¼Œä½¿ç”¨åˆ°è¶…è¿‡é™åˆ¶çš„åœ°å€ç©ºé—´æ—¶æ‰ä¼šå‡ºç° Sigbus å¯¼è‡´åº”ç”¨è¿›ç¨‹å´©æºƒã€‚ è§£å†³æ–¹å¼å’Œç¬¬ä¸‰ç‚¹ä¸€æ ·ï¼Œä½¿ç”¨ &lt;strong>memfd&lt;/strong> æ¥å…±äº«å†…å­˜ã€‚&lt;/li>
&lt;/ol>
&lt;h2 id="åç»­æ¼”è¿›">åç»­æ¼”è¿›&lt;/h2>
&lt;ol>
&lt;li>æ•´åˆè‡³å¾®æœåŠ¡ RPC æ¡†æ¶ &lt;a href="https://github.com/cloudwego/kitex">CloudWeGo/Kitex&lt;/a>ã€‚&lt;/li>
&lt;li>æ•´åˆè‡³å¾®æœåŠ¡ HTTP æ¡†æ¶ &lt;a href="https://github.com/cloudwego/hertz">CloudWeGo/Hertz&lt;/a>ã€‚&lt;/li>
&lt;li>å¼€æº Rust ç‰ˆæœ¬çš„ Shmipc å¹¶æ•´åˆè‡³ Rust RPC æ¡†æ¶ &lt;a href="https://github.com/cloudwego/volo">CloudWeGo/Volo&lt;/a>ã€‚&lt;/li>
&lt;li>å¼€æº C++ ç‰ˆæœ¬çš„ Shmipcã€‚&lt;/li>
&lt;li>å¼•å…¥å®šæ—¶åŒæ­¥æœºåˆ¶é€‚ç”¨äºç¦»çº¿åœºæ™¯ã€‚&lt;/li>
&lt;li>å¼•å…¥è½®è¯¢åŒæ­¥çš„åŒæ­¥æœºåˆ¶é€‚ç”¨äºå¯¹å»¶è¿Ÿæœ‰æè‡´è¦æ±‚çš„åœºæ™¯ã€‚&lt;/li>
&lt;li>èµ‹èƒ½å…¶ä»– IPC åœºæ™¯ï¼Œ æ¯”å¦‚ Log SDK ä¸ Log Agentï¼Œ Metrics SDK ä¸ Metrics Agent ç­‰ã€‚&lt;/li>
&lt;/ol>
&lt;h2 id="æ€»ç»“">æ€»ç»“&lt;/h2>
&lt;p>å¸Œæœ›æœ¬æ–‡èƒ½è®©å¤§å®¶å¯¹äº Shmipc æœ‰ä¸€ä¸ªåˆæ­¥çš„äº†è§£ï¼ŒçŸ¥æ™“å…¶è®¾è®¡åŸç†ï¼Œæ›´å¤šå®ç°ç»†èŠ‚ä»¥åŠä½¿ç”¨æ–¹æ³•è¯·å‚è€ƒæ–‡ç« å¼€å¤´ç»™å‡ºçš„é¡¹ç›®åœ°å€ã€‚
æ¬¢è¿å„ä½æ„Ÿå…´è¶£çš„åŒå­¦å‘ Shmipc é¡¹ç›®æäº¤ Issue å’Œ PRï¼Œå…±åŒå»ºè®¾ &lt;a href="https://github.com/cloudwego">CloudWeGo&lt;/a> å¼€æºç¤¾åŒºï¼Œä¹ŸæœŸæœ› Shmipc åœ¨ IPC é¢†åŸŸåŠ©åŠ›è¶Šæ¥è¶Šå¤šå¼€å‘è€…å’Œä¼ä¸šæ„å»ºé«˜æ€§èƒ½äº‘åŸç”Ÿæ¶æ„ã€‚&lt;/p></description></item><item><title>Blog: Volo 0.4.1 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2023/03/20/volo-0.4.1-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Mon, 20 Mar 2023 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2023/03/20/volo-0.4.1-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;p>Volo 0.4.1 ç‰ˆæœ¬ä¸­ï¼Œé™¤äº†å¸¸è§„ bugfix ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›æ–°çš„ feature å¼•å…¥ã€‚&lt;/p>
&lt;h2 id="æ›´ä¸ºè¯¦ç»†çš„-thrift-decode-é”™è¯¯ä¿¡æ¯">æ›´ä¸ºè¯¦ç»†çš„ Thrift Decode é”™è¯¯ä¿¡æ¯&lt;/h2>
&lt;p>ä¹‹å‰ç‰ˆæœ¬çš„ Thrift Decode é”™è¯¯ä¿¡æ¯åªä¼šæŠ¥å‘Šå‡ºæœ€åŸºæœ¬çš„é”™è¯¯ï¼Œè€Œä¸å¸¦æœ‰ä»»ä½•ä¸Šä¸‹æ–‡ã€‚
æ¯”å¦‚å«æœ‰å¦‚ä¸‹ç»“æ„å…³ç³»&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-thrift" data-lang="thrift">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">struct&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">A&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">required&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">B&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">b&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">struct&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">B&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">2&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">required&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">C&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">c&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">struct&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">C&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">3&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">required&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">string&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">a&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åœ¨å¯¹ç»“æ„&lt;code>C&lt;/code>çš„å­—æ®µ&lt;code>a&lt;/code>è¿›è¡Œ Decode å¦‚æœå‘ç”Ÿé”™è¯¯ã€‚åœ¨ä¹‹å‰çš„ç‰ˆæœ¬ä¸­é”™è¯¯ä¿¡æ¯åªä¼šæŠ¥å‘Šé’ˆå¯¹å‡º&lt;code>a&lt;/code>å­—æ®µçš„é”™è¯¯ï¼Œè€Œåœ¨ç°åœ¨çš„ç‰ˆæœ¬ä¸­ä¼šæŠ¥å‘Šå‡º Decode çš„é”™è¯¯ä¿¡æ¯é“¾è·¯æ˜¯åœ¨ &lt;code>A&lt;/code> -&amp;gt; &lt;code>B&lt;/code> -&amp;gt; &lt;code>C&lt;/code> è¿™ä¸ªè¿‡ç¨‹ä¸­å‘ç”Ÿçš„ï¼Œä¼šæ›´æ–¹ä¾¿ä¿¡æ¯çš„æ’æŸ¥&lt;/p>
&lt;h2 id="æ¡†æ¶-stats-ä¿¡æ¯">æ¡†æ¶ stats ä¿¡æ¯&lt;/h2>
&lt;p>&lt;a href="https://github.com/cloudwego/volo/pull/149">#149&lt;/a> ä¸ºæ¡†æ¶å¢åŠ äº†æ›´å¤šçš„ stats ä¿¡æ¯ã€‚ç”¨æˆ·å¯ä»¥åœ¨ä¸­é—´ä»¶è‡ªè¡Œå¤„ç†è¿™äº›æ•°æ®ï¼Œæ¯”å¦‚è¿›è¡Œæ—¥å¿—è®°å½•æˆ–è€…ä¸ŠæŠ¥åˆ°ç›‘æ§ç³»ç»Ÿã€‚&lt;/p>
&lt;h2 id="åœ¨æœåŠ¡å‘ç°çš„-discover-ä¸­æ”¯æŒéƒ¨åˆ†-key-çš„ç›‘å¬">åœ¨æœåŠ¡å‘ç°çš„ Discover ä¸­æ”¯æŒéƒ¨åˆ† key çš„ç›‘å¬&lt;/h2>
&lt;p>&lt;a href="https://github.com/cloudwego/volo/pull/155">#155&lt;/a> åœ¨æœåŠ¡å‘ç°çš„ Discover ä¸­æ”¯æŒéƒ¨åˆ† key çš„ç›‘å¬ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ä¸å¿…è¦çš„ç›‘å¬ï¼Œæå‡æ€§èƒ½ã€‚&lt;/p>
&lt;h2 id="å®Œæ•´-release-note">å®Œæ•´ Release Note&lt;/h2>
&lt;p>å®Œæ•´çš„ Release Note å¯ä»¥å‚è€ƒï¼š&lt;a href="https://github.com/cloudwego/volo/compare/volo-thrift-0.3.2...volo-0.4.1">Volo Changelog&lt;/a>&lt;/p></description></item><item><title>Blog: Kitex v0.5.0 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2023/03/08/kitex-v0.5.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Wed, 08 Mar 2023 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2023/03/08/kitex-v0.5.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;h2 id="é‡è¦å˜æ›´ä»‹ç»">é‡è¦å˜æ›´ä»‹ç»&lt;/h2>
&lt;h3 id="åŠŸèƒ½">åŠŸèƒ½&lt;/h3>
&lt;p>&lt;strong>1. Fallback åŠŸèƒ½: æ”¯æŒ Client ä¾§çš„ Fallback åŠŸèƒ½&lt;/strong>&lt;/p>
&lt;p>ä¸šåŠ¡åœ¨ RPC è¯·æ±‚å¤±è´¥åé€šå¸¸ä¼šæœ‰ä¸€äº›é™çº§æªæ–½ä¿è¯æœ‰æ•ˆè¿”å›ï¼ˆæ¯”å¦‚åœ¨è¯·æ±‚è¶…æ—¶ã€ç†”æ–­åï¼Œæ„é€ é»˜è®¤è¿”å›ï¼‰ï¼ŒKitex çš„ Fallback æ”¯æŒå¯¹æ‰€æœ‰å¼‚å¸¸è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚
åŒæ—¶ï¼Œå› ä¸ºä¸šåŠ¡å¼‚å¸¸é€šå¸¸ä¼šé€šè¿‡ BaseResp å­—æ®µè¿”å›ï¼Œæ‰€ä»¥ä¹Ÿæ”¯æŒå¯¹ Resp è¿›è¡Œå¤„ç†ã€‚è¯¦è§ &lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/service-governance/fallback/">Fallback&lt;/a>ã€‚&lt;/p>
&lt;p>&lt;strong>2. Kitex - gRPCï¼šClient å¢åŠ  TLS çš„é…ç½®&lt;/strong>&lt;/p>
&lt;p>é€šè¿‡ client.WithGRPCTLSConfig option é…ç½®ã€‚&lt;/p>
&lt;p>&lt;strong>3. Kitex - å·¥å…·&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>æ”¯æŒè‡ªå®šä¹‰è„šæ‰‹æ¶æ¨¡æ¿&lt;/strong>ï¼Œè¯¦è§ï¼š &lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/code-gen/custom_tpl/">è‡ªå®šä¹‰è„šæ‰‹æ¶æ¨¡æ¿&lt;/a>&lt;/li>
&lt;li>&lt;strong>æ”¯æŒæŒ‡å®šç”Ÿæˆä»£ç çš„ç›®å½•&lt;/strong>ï¼Œè¯¦è§ï¼š &lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/code-gen/code_generation/#-gen-path">ä»£ç ç”Ÿæˆå·¥å…· -gen-path&lt;/a>&lt;/li>
&lt;li>&lt;strong>æ”¯æŒ protoc æ’ä»¶é€‰é¡¹&lt;/strong>ï¼Œè¯¦è§ï¼š &lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/code-gen/code_generation/#-protobuf-plugin">ä»£ç ç”Ÿæˆå·¥å…· -protobuf-plugin&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="ä¼˜åŒ–">ä¼˜åŒ–&lt;/h3>
&lt;p>&lt;strong>1. è´Ÿè½½å‡è¡¡ï¼šä½¿ç”¨æƒé‡è½®è¯¢ä½œä¸ºé»˜è®¤ Loadbalance ç­–ç•¥&lt;/strong>&lt;/p>
&lt;p>æ—§ç‰ˆæœ¬é»˜è®¤ä½¿ç”¨æƒé‡éšæœºåš Loadbalanceï¼ŒRandom å¯ä»¥åšåˆ°å…¨å±€çš„å‡è¡¡ï¼Œä½†åœ¨æœåŠ¡ç«¯å®ä¾‹è¾ƒå°‘çš„æƒ…å†µä¸‹ï¼Œéšæœºæœ‰è¾ƒå¤§æ¦‚ç‡è¿ç»­è®¿é—®ä¸€ä¸ªå®ä¾‹ï¼Œå¯¼è‡´ä¸‹æ¸¸èŠ‚ç‚¹æœ€å¤§å¹¶å‘è¯·æ±‚æ•°å¢åŠ ï¼Œæ‰€ä»¥æ–°ç‰ˆæœ¬å°†é»˜è®¤ç­–ç•¥è°ƒæ•´ä¸ºè½®è¯¢ã€‚
è¯¦è§ï¼š&lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/service-governance/loadbalance/">è´Ÿè½½å‡è¡¡&lt;/a>ã€‚&lt;/p>
&lt;p>&lt;strong>2. è¿æ¥æ± åç¨‹é—®é¢˜&lt;/strong>&lt;/p>
&lt;p>æ—§ç‰ˆæœ¬åœ¨ä½¿ç”¨é•¿è¿æ¥æ—¶ï¼Œæ¯ä¸ª client å¯¹åº”ä¸€ä¸ªåç¨‹èµ„æºæ¸…ç†è¿æ¥ï¼Œåœ¨ client è¾ƒå¤šæ—¶ä¼šå¯¼è‡´åç¨‹è¿‡å¤šï¼Œæ–°ç‰ˆæœ¬æ”¹ä¸ºå…±äº«åç¨‹é¿å… goroutine æ•°é‡éšç€ client æ•°é‡å¢é•¿ã€‚&lt;/p>
&lt;h3 id="å…¶ä»–">å…¶ä»–&lt;/h3>
&lt;p>å‡çº§ frugal, pid åº“ä¾èµ–ä»¥æ”¯æŒ go 1.20ã€‚&lt;/p>
&lt;hr>
&lt;h2 id="è¯¦ç»†å˜æ›´">è¯¦ç»†å˜æ›´&lt;/h2>
&lt;h3 id="feature">Feature&lt;/h3>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/840">#840&lt;/a>] feat(fallback): support fallback ability for kitex client-side, usage guide refer to &lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/service-governance/fallback/">Fallback&lt;/a>&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/841">#841&lt;/a>] feat(tool): add GetResult() and GetFirstArgument() methods for service params of protobuf&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/791">#791&lt;/a>] feat(tool): merge two ways of passing extensions, to support two ways at sametime&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/797">#797&lt;/a>] feat(loadbalance): use smooth weighted round robin algo as default Loadbalance policy&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/760">#760&lt;/a>] feat(grpc): support TLS config in kitex grpc client&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/781">#781&lt;/a>] feat(tool): supports custom templates&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/783">#783&lt;/a>] feat(ttheader): add encode logic for gdpr token in TransInfo&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/775">#775&lt;/a>] feat(tool): support custom generate path&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/687">#687&lt;/a>] feat(tool): add protoc plugin flag&lt;/li>
&lt;/ul>
&lt;h3 id="optimize">Optimize&lt;/h3>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/750">#750&lt;/a>] optimize(generic): generic call write zero value for required and default fields to meet the specification of apache thrift and keep consistent with normal thrift encode of Kitex.&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/739">#739&lt;/a>] optimize(generic): modify the url routing to align with Hertz for HTTP generic call&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/752">#752&lt;/a>] optimize(ttheader): attach part of ttheader binary into error when readKVInfo failed, which is useful for troubleshooting&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/821">#821&lt;/a>] optimize(config): add DeepCopy() &amp;amp; Equals() to circuitbreaker.CBConfig and retry.Policy&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/827">#827&lt;/a>] optimize: revise the remoteInfo of retry call, using the remoteInfo of the RPCCall that returns&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/762">#762&lt;/a>] optimize(tool): add go mod auto replace to thrift 0.13 in thrift mode&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/755">#755&lt;/a>] optimize: improve client error msg when ctx cancel or timeout&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/756">#756&lt;/a>] optimize: use sync.Cond as the profiler event trigger&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/753">#753&lt;/a>] optimize: add recover for client&amp;rsquo;s Close&lt;/li>
&lt;/ul>
&lt;h3 id="fix">Fix&lt;/h3>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/734">#734&lt;/a>] fix(retry): fix the panic problem caused by concurrent read and write of rpcinfo under backup retry&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/837">#837&lt;/a> &lt;a href="https://github.com/cloudwego/kitex/pull/842">#842&lt;/a>] fix(metahandler): adjust MetainfoHandler to the top of the MetaHandlers array to ensure that the logic of custom MetaHandlers that depends on MetainfoHandler works&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/812">#812&lt;/a>] fix: use detectionHandler to perform protocol detection in windows environment to support gRPC&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/851">#851&lt;/a>] fix: upgrade frugal to v0.1.6 for missing stop field&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/845">#845&lt;/a>] fix: fix the problem that RPCStat report status as success when biz handler return err&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/822">#822&lt;/a>] fix(loadbalance): don&amp;rsquo;t share balancer factory when loadbalance is defined by user&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/732">#732&lt;/a>] fix(mux): mux server waits for shardqueue close before shutdown&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/795">#795&lt;/a>] fix(grpc): zero first byte of grpc data frame, which could be random data from mcache&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/668">#668&lt;/a>] fix: fix race problem in queue.go/queue @dugenkui03&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/743">#743&lt;/a>] fix: use sharedTicker for long conn pool to prevent goroutine numbers increase as the number of client increases&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/799">#799&lt;/a>] fix(util): should return when get at least one GOPATH @StellarisW&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/807">#807&lt;/a>] fix(codec): fix fastpb nil ptr when struct fields are all default values&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/794">#794&lt;/a>] fix(tool): fix fastpb codegen by updating dependency&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/787">#787&lt;/a>] fix(tool): the import did not use the new method to render when template append content&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/785">#785&lt;/a>] fix(tool): remove useless combine service files&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/754">#754&lt;/a>] fix: fix the usage of metainfo in grpc scene&lt;/li>
&lt;/ul>
&lt;h3 id="refactor">Refactor&lt;/h3>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/814">#814&lt;/a> &lt;a href="https://github.com/cloudwego/kitex/pull/843">#843&lt;/a>] refactor(trans): return error in onRead of defaultServerHandler and close conn in outer method&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/816">#816&lt;/a>] refactor(utils): add utils.GetEnvLogDir and deprecate utils.GetLogDir&lt;/li>
&lt;/ul>
&lt;h3 id="test--docs--chore">Test &amp;amp; Docs &amp;amp; Chore&lt;/h3>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/839">#839&lt;/a> &lt;a href="https://github.com/cloudwego/kitex/pull/693">#693&lt;/a>] test: import mockey repo and add usage demo of mockey unit test&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/806">#806&lt;/a>] test(transmeta):add some test cases for tansmeta package&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/761">#761&lt;/a>] docs: update README.md @fuergaosi233&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/817">#817&lt;/a>, &lt;a href="https://github.com/cloudwego/kitex/pull/832">#832&lt;/a>] chore: upgrade dependency lib to adapt go 1.20&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/772">#772&lt;/a>] chore: modify kitex gen code meta file name from kitex.yaml to kitex_info.yaml&lt;/li>
&lt;/ul></description></item><item><title>Blog: Hertz v0.6.0 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2023/03/02/hertz-v0.6.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Thu, 02 Mar 2023 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2023/03/02/hertz-v0.6.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;p>Hertz 0.6.0 ç‰ˆæœ¬ä¸­ï¼Œé™¤äº†å¸¸è§„è¿­ä»£ä¼˜åŒ–ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¸¦æ¥äº†å¤šä¸ªé‡è¦ featureã€‚&lt;/p>
&lt;h2 id="æ”¯æŒ-http-trailer">æ”¯æŒ HTTP Trailer&lt;/h2>
&lt;p>åœ¨ Hertz v0.6.0 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬æ”¯æŒäº† HTTP Trailer çš„ç¼–ç å’Œè§£æã€‚&lt;/p>
&lt;blockquote>
&lt;p>&lt;a href="https://github.com/cloudwego/hertz-examples/tree/main/trailer">https://github.com/cloudwego/hertz-examples/tree/main/trailer&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>å†™ Trailer&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">// server ç«¯&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">func&lt;/span> &lt;span style="color:#000">handler&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ctx&lt;/span> &lt;span style="color:#000">context&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Context&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">c&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">*&lt;/span>&lt;span style="color:#000">app&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">RequestContext&lt;/span>&lt;span style="color:#000;font-weight:bold">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">c&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Response&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Header&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Trailer&lt;/span>&lt;span style="color:#000;font-weight:bold">().&lt;/span>&lt;span style="color:#000">Set&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;Hertz&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Good&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">// client ç«¯&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">req&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Header&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Trailer&lt;/span>&lt;span style="color:#000;font-weight:bold">().&lt;/span>&lt;span style="color:#000">Set&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;Hertz&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Good&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>è¯» Trailer&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">// server ç«¯&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">func&lt;/span> &lt;span style="color:#000">handler&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ctx&lt;/span> &lt;span style="color:#000">context&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Context&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">c&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">*&lt;/span>&lt;span style="color:#000">app&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">RequestContext&lt;/span>&lt;span style="color:#000;font-weight:bold">){&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">c&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Request&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Header&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Trailer&lt;/span>&lt;span style="color:#000;font-weight:bold">().&lt;/span>&lt;span style="color:#000">Get&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;Hertz&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">// client ç«¯&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">resp&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Header&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Trailer&lt;/span>&lt;span style="color:#000;font-weight:bold">().&lt;/span>&lt;span style="color:#000">Get&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;Hertz&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="http11-æ”¯æŒ-response-writer-åŠ«æŒ">HTTP/1.1 æ”¯æŒ Response Writer åŠ«æŒ&lt;/h2>
&lt;p>åœ¨ Hertz v0.6.0 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬æ‰©å±•äº† HTTP/1.1 å†™è¯·æ±‚çš„æ–¹å¼ï¼Œåœ¨åŸæ¥å†™è¯·æ±‚æµç¨‹çš„åŸºç¡€ä¹‹ä¸Šï¼Œæ”¯æŒç”¨æˆ·åœ¨ä¸šåŠ¡ handler/ä¸­é—´ä»¶ä¸­åŠ«æŒ Response Writerï¼Œå®ç°æ›´åŠ çµæ´»çš„å†™è¯·æ±‚æ–¹å¼ã€‚
ç®€å•æ¥è¯´ï¼ŒåŸæ¥æ‰€æœ‰çš„â€œåº•å±‚å†™â€é€»è¾‘ç»Ÿä¸€æ”¾åˆ° handler/ä¸­é—´ä»¶è¿”å›ä¹‹åï¼Œè¿™ä¸ªå¸¦æ¥ä¸¤ä¸ªæ¯”è¾ƒæ˜æ˜¾çš„å±€é™æ€§ï¼š&lt;/p>
&lt;ol>
&lt;li>ç”¨æˆ·æ— æ³•æ§åˆ¶è¯·æ±‚çœŸæ­£ flush åˆ°å¯¹ç«¯çš„æ—¶æœº&lt;/li>
&lt;li>é’ˆå¯¹ chunk æ–¹å¼å¢é‡äº§ç”Ÿæ•°æ® &amp;amp; å®æ—¶å†™åˆ°å¯¹ç«¯çš„åœºæ™¯ï¼Œåœ¨è€çš„æ¶æ„ä¹‹ä¸Šç”¨æ³•ç›¸å¯¹å¤æ‚ï¼Œé™åˆ¶ç›¸å¯¹è¾ƒå¤š&lt;/li>
&lt;/ol>
&lt;p>åŸºäºæ­¤æˆ‘ä»¬æ‰©å±•å‡ºä¸€å¥—èƒ½å¤Ÿæä¾›è‡ªè¡Œ flush è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“çš„èƒ½åŠ›ï¼ŒåŒæ—¶æä¾›äº†ä¸€ä¸ªæ”¯æŒç”¨æˆ·æŒ‰éœ€å‘é€ chunk æ•°æ®çš„ Writerã€‚è¯¦ç»†å®ç°å‚è€ƒï¼šhttps://github.com/cloudwego/hertz/pull/610&lt;/p>
&lt;h3 id="ä¸»è¦å˜æ›´">ä¸»è¦å˜æ›´&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>å¢åŠ äº†ä¸€ä¸ªæ‰©å±• Writer çš„æ¥å£å®šä¹‰ï¼Œå®ç°äº†è¿™ä¸ªæ¥å£çš„ Writer éƒ½å¯ä»¥ç”¨ä½œåŠ«æŒ Response Writerï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">ExtWriter&lt;/span> &lt;span style="color:#204a87;font-weight:bold">interface&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">io&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Writer&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">Flush&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// Finalize will be called by framework before the writer is released.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// Implementations must guarantee that Finalize is safe for multiple calls.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">Finalize&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#204a87;font-weight:bold">error&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>æä¾›äº†ä¸€ä¸ªå®ç°äº†ä¸Šè¿°æ¥å£çš„ Chunk Writerï¼ˆæœ‰ç±»ä¼¼éœ€æ±‚éƒ½å¯ä»¥å‚è€ƒè¿™ä¸ªæ¥å®ç°ï¼‰ï¼š&lt;code>chunkedBodyWrite&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>HTTP/1.1 å…·ä½“å†™è¯·æ±‚çš„åœ°æ–¹é’ˆå¯¹è¢«åŠ«æŒäº† Writer çš„ Response å†™æ“ä½œåšäº†å¯¹åº”çš„å¤„ç†ï¼ˆè·³è¿‡é»˜è®¤å†™è¯·æ±‚é€»è¾‘ï¼‰ï¼Œæœ€åè°ƒç”¨&lt;code>ExtWriter&lt;/code>æ¥å£çš„&lt;code>Finalize()&lt;/code>æ–¹æ³•å®Œæˆä¸€æ¬¡è¯·æ±‚å†™å›&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="ä½¿ç”¨æ–¹æ³•">ä½¿ç”¨æ–¹æ³•&lt;/h3>
&lt;p>å¦‚ä¸Šï¼ŒHertz æä¾›äº†ä¸€ä¸ªé»˜è®¤çš„&lt;code>ExtWriter&lt;/code>å®ç°æ»¡è¶³ç”¨æˆ·åœ¨ handler/ä¸­é—´ä»¶ä¸­çš„ä¸»åŠ¨ flush éœ€æ±‚ï¼Œä½¿ç”¨æ–¹å¼ä¹Ÿéå¸¸ç®€å•ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">h&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">GET&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;/flush/chunk&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#204a87;font-weight:bold">func&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ctx&lt;/span> &lt;span style="color:#000">context&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Context&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">c&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">*&lt;/span>&lt;span style="color:#000">app&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">RequestContext&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic">// Hijack the writer of response&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">c&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Response&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">HijackWriter&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">resp&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">NewChunkedBodyWriter&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#000">c&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Response&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">c&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">GetWriter&lt;/span>&lt;span style="color:#000;font-weight:bold">()))&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">for&lt;/span> &lt;span style="color:#000">i&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">:=&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span> &lt;span style="color:#000">i&lt;/span> &lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span> &lt;span style="color:#000">i&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">++&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">c&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Write&lt;/span>&lt;span style="color:#000;font-weight:bold">([]&lt;/span>&lt;span style="color:#204a87">byte&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">fmt&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Sprintf&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;chunk %d: %s&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">i&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">strings&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Repeat&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;hi~&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">i&lt;/span>&lt;span style="color:#000;font-weight:bold">))))&lt;/span> &lt;span style="color:#8f5902;font-style:italic">// nolint: errcheck&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">c&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Flush&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span> &lt;span style="color:#8f5902;font-style:italic">// nolint: errcheck&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">time&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Sleep&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">200&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">*&lt;/span> &lt;span style="color:#000">time&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">Millisecond&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">})&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="è„šæ‰‹æ¶ä½¿ç”¨ä¼˜åŒ–--æœ€ä½³å®è·µ">è„šæ‰‹æ¶ä½¿ç”¨ä¼˜åŒ– &amp;amp; æœ€ä½³å®è·µ&lt;/h2>
&lt;p>åœ¨ hz v0.6.0 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å¯¹ç”Ÿæˆä»£ç çš„ç»„ç»‡ç»“æ„è¿›è¡Œä¸€ç³»åˆ—çš„ä¼˜åŒ–ï¼Œä»è€Œå¯ç”Ÿæˆæ›´åŠ çµæ´»çš„ä»£ç ç»„ç»‡ç»“æ„&lt;/p>
&lt;h3 id="ä¸»è¦ä¼˜åŒ–">ä¸»è¦ä¼˜åŒ–&lt;/h3>
&lt;ul>
&lt;li>&lt;code>new&lt;/code> å‘½ä»¤æ”¯æŒ &amp;ldquo;router_dir&amp;rdquo; é€‰é¡¹ï¼Œå¹¶é…åˆå·²æœ‰çš„ &amp;ldquo;handler_dir&amp;rdquo;ã€&amp;ldquo;model_dir&amp;rdquo;ï¼Œå¯å®Œå…¨è‡ªå®šä¹‰ IDL ç”Ÿæˆäº§ç‰©çš„è·¯å¾„ï¼›å¹¶ä¸”ä¼šå°†è¿™äº›è‡ªå®šä¹‰é€‰é¡¹æŒä¹…åŒ–åˆ° &amp;ldquo;.hz&amp;rdquo; æ–‡ä»¶ä¸­ï¼Œå¯åœ¨ &lt;code>update&lt;/code> æ—¶è‡ªåŠ¨è¯»å–ï¼Œå‡å°‘å‘½ä»¤çš„å¤æ‚åº¦&lt;/li>
&lt;li>å¢åŠ å‘ä¸Šæœç´¢ &amp;ldquo;go.mod&amp;rdquo; æ–‡ä»¶çš„èƒ½åŠ›ï¼Œä»è€Œä½¿å¾— hertz åœ¨ä½œä¸ºä¸€ä¸ªå­é¡¹ç›®æ—¶å¯ä»¥å’Œå…¶ä»–é¡¹ç›®å…±äº«åŒä¸€ä¸ª &amp;ldquo;go module&amp;rdquo;&lt;/li>
&lt;li>å¢åŠ  &amp;ldquo;handler&amp;rdquo; ä¸­å¼•ç”¨ç¬¬ä¸‰æ–¹ IDL äº§ç‰©çš„èƒ½åŠ›ï¼Œå¯å°† IDL äº§ç‰©æ”¾åˆ°ç¬¬ä¸‰æ–¹ä»“åº“å•ç‹¬ç»´æŠ¤ï¼Œä½¿å…¶ä¸åœ¨é¡¹ç›®ç›®å½•ä¸­å­˜æ”¾ï¼Œè¿›ä¸€æ­¥å¢å¼º IDL ç®¡ç†èƒ½åŠ›&lt;/li>
&lt;/ul>
&lt;h3 id="æœ€ä½³å®è·µ">æœ€ä½³å®è·µ&lt;/h3>
&lt;p>æˆ‘ä»¬åˆ©ç”¨ &amp;ldquo;hz v0.6.0&amp;rdquo; é‡å†™äº† &amp;ldquo;&lt;a href="https://github.com/cloudwego/biz-demo/pull/26">biz-demo/easy-note&lt;/a>&amp;quot;ï¼Œä¸»è¦åˆ©ç”¨äº†å¦‚ä¸‹ hz çš„ç‰¹æ€§&lt;/p>
&lt;ul>
&lt;li>åˆ©ç”¨ &amp;ldquo;hz client&amp;rdquo; çš„èƒ½åŠ›ï¼ŒåŸºäº IDL ç”Ÿæˆè®¿é—® &amp;ldquo;api server&amp;rdquo; çš„ hertz client è°ƒç”¨ä»£ç &lt;/li>
&lt;li>åˆ©ç”¨è‡ªå®šä¹‰ &amp;ldquo;router_dir&amp;rdquo;ã€ &amp;ldquo;handler_dir&amp;rdquo;ã€&amp;ldquo;model_dir&amp;rdquo; é€‰é¡¹ï¼Œé‡æ–°è°ƒæ•´ &amp;ldquo;api server&amp;rdquo; ä»£ç çš„ç»„ç»‡ç»“æ„ï¼Œå»æ‰ &amp;ldquo;biz&amp;rdquo; ç›®å½•çš„é™åˆ¶&lt;/li>
&lt;li>åˆ©ç”¨ &amp;ldquo;å‘ä¸Šæœç´¢ go.mod&amp;rdquo; çš„èƒ½åŠ›ï¼Œä½¿å¾— &amp;ldquo;api server&amp;rdquo; å¯ä»¥ä½œä¸º &amp;ldquo;easy-note&amp;rdquo; çš„å­é¡¹ç›®å…±äº«åŒä¸€ä¸ª &amp;ldquo;go module&amp;rdquo;&lt;/li>
&lt;li>åˆ©ç”¨ &amp;ldquo;handler å¼•ç”¨ç¬¬ä¸‰æ–¹ IDL äº§ç‰©&amp;rdquo; çš„èƒ½åŠ›å¹¶é…åˆ &amp;ldquo;hz model&amp;rdquo; çš„èƒ½åŠ›ï¼Œä½¿å¾— IDL äº§ç‰©å•ç‹¬å­˜åˆ°åˆ° &amp;ldquo;easy-note&amp;rdquo; é¡¹ç›®é‡Œï¼Œè€Œå¹¶ä¸å­˜æ”¾åˆ° &amp;ldquo;api server&amp;rdquo; å­é¡¹ç›®é‡Œ&lt;/li>
&lt;/ul>
&lt;h2 id="å®Œæ•´-release-note">å®Œæ•´ Release Note&lt;/h2>
&lt;p>å®Œæ•´çš„ Release Note å¯ä»¥å‚è€ƒï¼š&lt;/p>
&lt;ul>
&lt;li>Hertz: &lt;a href="https://github.com/cloudwego/hertz/releases/tag/v0.6.0">https://github.com/cloudwego/hertz/releases/tag/v0.6.0&lt;/a>&lt;/li>
&lt;li>Hz(è„šæ‰‹æ¶): &lt;a href="https://github.com/cloudwego/hertz/releases/tag/cmd%2Fhz%2Fv0.6.0">https://github.com/cloudwego/hertz/releases/tag/cmd%2Fhz%2Fv0.6.0&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Blog: HTTP æ¡†æ¶ Hertz å®è·µå…¥é—¨ï¼šæ€§èƒ½æµ‹è¯•æŒ‡å—</title><link>https://www.cloudwego.io/zh/blog/2023/02/24/http-%E6%A1%86%E6%9E%B6-hertz-%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E6%8C%87%E5%8D%97/</link><pubDate>Fri, 24 Feb 2023 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2023/02/24/http-%E6%A1%86%E6%9E%B6-hertz-%E5%AE%9E%E8%B7%B5%E5%85%A5%E9%97%A8%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E6%8C%87%E5%8D%97/</guid><description>
&lt;h2 id="èƒŒæ™¯">èƒŒæ™¯&lt;/h2>
&lt;p>2021 å¹´ 9 æœˆ 8 æ—¥ï¼Œå­—èŠ‚è·³åŠ¨å®£å¸ƒæ­£å¼å¼€æº &lt;a href="https://github.com/cloudwego">CloudWeGo&lt;/a>ã€‚CloudWeGo æ˜¯ä¸€å¥—å­—èŠ‚è·³åŠ¨å†…éƒ¨å¾®æœåŠ¡ä¸­é—´ä»¶é›†åˆï¼Œå…·å¤‡&lt;strong>é«˜æ€§èƒ½ã€å¼ºæ‰©å±•æ€§å’Œç¨³å®šæ€§&lt;/strong>çš„ç‰¹ç‚¹ï¼Œä¸“æ³¨äºè§£å†³å¾®æœåŠ¡é€šä¿¡ä¸æ²»ç†çš„éš¾é¢˜ï¼Œæ»¡è¶³ä¸åŒä¸šåŠ¡åœ¨ä¸åŒåœºæ™¯çš„è¯‰æ±‚ã€‚
2022 å¹´ 6 æœˆ 21 æ—¥ï¼Œ&lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> æ­£å¼å¼€æºã€‚æ—¥å‰ï¼ŒCloudWeGo å›¢é˜Ÿæ­£å¼å¼€æºå­—èŠ‚è·³åŠ¨æœ€å¤§çš„ HTTP æ¡†æ¶ Hertzã€‚Hertz è‡ªå‘å¸ƒä»¥æ¥ï¼Œå¾—åˆ°äº†å¤§é‡ç”¨æˆ·çš„å…³æ³¨ï¼Œç´¯è®¡æ”¶è·äº† 3K+ starã€‚æœ‰å¾ˆå¤šç”¨æˆ·è‡ªå·±è¿›è¡Œäº†æµ‹è¯•ï¼Œæ„Ÿè°¢å¤§å®¶å¯¹æˆ‘ä»¬çš„å…³æ³¨å’Œæ”¯æŒã€‚
æœ¬æ–‡æ—¨åœ¨åˆ†äº«å¼€å‘è€…åœ¨å‹æµ‹ Hertz æ—¶éœ€è¦äº†è§£çš„åœºæ™¯å’ŒæŠ€æœ¯é—®é¢˜ã€‚è¿™äº›å»ºè®®æœ‰åŠ©äºç”¨æˆ·æ›´å¥½åœ°ç»“åˆçœŸå® HTTP åœºæ™¯å¯¹ Hertz è¿›è¡Œè°ƒä¼˜ï¼Œä½¿ä¹‹æ›´è´´åˆä¸šåŠ¡éœ€è¦ã€å‘æŒ¥æœ€ä½³æ€§èƒ½ã€‚ç”¨æˆ·ä¹Ÿå¯ä»¥å‚è€ƒå®˜æ–¹æä¾›çš„å‹æµ‹é¡¹ç›® &lt;a href="https://github.com/cloudwego/hertz-benchmark">hertz-benchmark&lt;/a> äº†è§£æ›´å¤šç»†èŠ‚ã€‚&lt;/p>
&lt;h2 id="å¾®æœåŠ¡-http-åœºæ™¯çš„ç‰¹ç‚¹">å¾®æœåŠ¡ HTTP åœºæ™¯çš„ç‰¹ç‚¹&lt;/h2>
&lt;p>&lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> è¯ç”Ÿäºå­—èŠ‚è·³åŠ¨å¤§è§„æ¨¡å¾®æœåŠ¡æ¶æ„å®è·µï¼Œé¢å‘çš„åœºæ™¯è‡ªç„¶æ˜¯å¾®æœåŠ¡åœºæ™¯ï¼Œå› æ­¤ä¸‹é¢ä¼šå…ˆä»‹ç»å¾®æœåŠ¡ HTTP åœºæ™¯çš„ç‰¹ç‚¹ï¼Œæ–¹ä¾¿å¼€å‘è€…æ·±å…¥ç†è§£ &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> çš„è®¾è®¡æ€è€ƒã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>HTTP é€šä¿¡æ¨¡å‹&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>å¾®æœåŠ¡é—´çš„é€šä¿¡é€šå¸¸ä»¥ Ping-Pong æ¨¡å‹ä¸ºä¸»ï¼Œé™¤äº†å¸¸è§„çš„ååæ€§èƒ½æŒ‡æ ‡å¤–ï¼Œæ¯æ¬¡ HTTP çš„&lt;strong>å¹³å‡æ—¶å»¶&lt;/strong>ä¹Ÿæ˜¯å¼€å‘è€…éœ€è¦è€ƒè™‘çš„ç‚¹ã€‚ååè¾¾åˆ°ç“¶é¢ˆæ—¶å¯ä»¥é€šè¿‡å¢åŠ æœºå™¨å¿«é€Ÿè§£å†³ï¼Œä½†å¯¹ç”¨æˆ·ä½¿ç”¨ä½“éªŒæœ‰æ˜¾è‘—å½±å“çš„æ—¶å»¶å´æ²¡æœ‰é‚£ä¹ˆå®¹æ˜“é™ä½ã€‚
åœ¨å¾®æœåŠ¡åœºæ™¯ä¸‹ï¼Œä¸€æ¬¡è°ƒç”¨å¾€å¾€éœ€è¦å¤šä¸ªå¾®æœåŠ¡åä½œå®Œæˆï¼Œå³ä½¿æ¯ä¸ªèŠ‚ç‚¹å»¶è¿Ÿå¾ˆä½ï¼Œæœ€ç»ˆæ±‡èšåˆ°é“¾è·¯ä¸Šçš„æ—¶å»¶ä¹Ÿä¼šè¢«æ”¾å¤§ï¼Œå› æ­¤å¾®æœåŠ¡åœºæ™¯ä¸‹æ—¶å»¶æŒ‡æ ‡æ˜¯å¼€å‘è€…æ›´åº”è¯¥å…³æ³¨çš„ç‚¹ã€‚&lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> åœ¨ä¿è¯ååçš„å‰æä¸‹ï¼Œä¹Ÿé’ˆå¯¹æ—¶å»¶åšäº†ä¸€å®šä¼˜åŒ–ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>é•¿çŸ­è¿æ¥ä½¿ç”¨&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>ç”±äº TCP è¿æ¥é¦–æ¬¡å»ºç«‹æ—¶éœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œå¦‚æœæ¯ä¸ªè¯·æ±‚éƒ½å»ºç«‹æ–°è¿æ¥ï¼Œè¿™éƒ¨åˆ†çš„å¼€é”€æ˜¯éå¸¸å¤§çš„ã€‚å› æ­¤å¯¹äºæ—¶å»¶æ•æ„Ÿå‹æœåŠ¡ï¼Œå°½é‡ä½¿ç”¨é•¿è¿æ¥å®Œæˆè¯·æ±‚ã€‚åœ¨ HTTP 1.1 ä¸­ï¼Œé•¿è¿æ¥ä¹Ÿæ˜¯é»˜è®¤çš„é€‰é¡¹ã€‚
ä½†æ˜¯æ²¡æœ‰é“¶å¼¹ï¼Œç»´æŒè¿æ¥ä¹Ÿéœ€è¦æ¶ˆè€—èµ„æºï¼Œé•¿è¿æ¥çš„æ°´å¹³æ‰©å±•èƒ½åŠ›ä¹Ÿä¸å¦‚çŸ­è¿æ¥ã€‚å› æ­¤ï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹å¹¶ä¸é€‚åˆä½¿ç”¨é•¿è¿æ¥ï¼Œæ¯”å¦‚å®šæ—¶æ‹‰å–é…ç½®çš„åœºæ™¯ï¼Œ
åœ¨è¿™ä¸ªåœºæ™¯ä¸‹ï¼Œå»ºè¿æ—¶å»¶å¯¹é…ç½®å½±å“å¹¶ä¸å¤§ï¼Œä¸”å½“é…ç½®ä¸­å¿ƒè´Ÿè½½è¿‡é«˜æ—¶ï¼Œå¸Œæœ›èƒ½å¤Ÿæ–¹ä¾¿çš„è¿›è¡Œæ°´å¹³æ‰©å®¹ï¼Œè¿™æ—¶çŸ­è¿æ¥å¯èƒ½æ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>åŒ…ä½“ç§¯å¤§å°&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>ä¸€ä¸ªæœåŠ¡çš„åŒ…å¤§å°å–å†³äºå®é™…çš„ä¸šåŠ¡åœºæ™¯ã€‚HTTP åœºæ™¯çš„æ•°æ®å¯ä»¥æ”¾åœ¨ queryã€pathã€headerã€body ç­‰åœ°æ–¹ï¼Œä¸åŒä½ç½®å¯¹è§£æé€ æˆçš„å½±å“ä¹Ÿä¸ä¸€æ ·ã€‚
HTTP çš„ header æ˜¯æ ‡è¯†ç¬¦åè®®ï¼Œåœ¨æ²¡æœ‰æ‰¾åˆ°ç‰¹å®šçš„æ ‡è¯†ç¬¦ä¹‹å‰ï¼Œæ¡†æ¶å¹¶ä¸çŸ¥é“ header è¿˜æœ‰å¤šå°‘ï¼Œå› æ­¤æ¡†æ¶éœ€è¦æ”¶åˆ°å…¨éƒ¨çš„ header åæ‰èƒ½å¤Ÿè§£æå®Œæˆï¼Œå¯¹æ¡†æ¶çš„å†…å­˜æ¨¡å‹ä¸å¾ˆå‹å¥½ã€‚
&lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> ä¹Ÿé’ˆå¯¹ header è§£æåšäº†ç‰¹æ®Šçš„ä¼˜åŒ–ï¼Œåˆ†é…è¶³å¤Ÿçš„ buffer ç©ºé—´ç»™ headerï¼Œå‡å°‘ header å¤„ç†æ—¶è·¨åŒ…æ‹·è´çš„å¼€é”€ã€‚&lt;/p>
&lt;p>åŒæ—¶åœ¨å­—èŠ‚è·³åŠ¨å†…éƒ¨çº¿ä¸ŠæœåŠ¡çš„ç»Ÿè®¡ä¸­ï¼Œå‘ç°å¤§éƒ¨åˆ†åŒ…åœ¨ 1K ä»¥å†…ï¼ˆä½†æ˜¯å¤ªå°çš„åŒ…æ²¡æœ‰å®é™…æ„ä¹‰ï¼Œæ¯”å¦‚å›ºå®šè¿”å› &amp;ldquo;hello world&amp;rdquo;ï¼‰ï¼ŒåŒæ—¶å¤§åŒ…åœºæ™¯ä¸Šä¸å°é¡¶ï¼Œå„ä¸ªåŒ…å¤§å°å‡æœ‰æ¶‰åŠï¼Œæ‰€ä»¥ &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> åœ¨æœ€å¸¸ç”¨çš„ 128k ä»¥å†…çš„åŒ…çš„æ€§èƒ½ï¼ˆååå’Œæ—¶å»¶ï¼‰è¿›è¡Œäº†é‡ç‚¹ä¼˜åŒ–ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>å¹¶å‘æ•°é‡&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>æ¯ä¸ªå®ä¾‹çš„ä¸Šæ¸¸å¯èƒ½ä¼šæœ‰å¾ˆå¤šä¸ªï¼Œä¸ä¼šåªæ¥å—æŸä¸ªå®ä¾‹çš„è¯·æ±‚ï¼›è€Œä¸”ï¼ŒHTTP 1 çš„è¿æ¥ä¸èƒ½å¤Ÿå¤šè·¯å¤ç”¨ï¼Œæ¯æ¡è¿æ¥ä¸Šåªèƒ½åŒæ—¶å¤„ç†ä¸€ä¸ªè¯·æ±‚ã€‚å› æ­¤ Server éœ€è¦æ¥å—å¤šä¸ªè¿æ¥åŒæ—¶å¤„ç†ã€‚
ä¸åŒæœåŠ¡çš„è¿æ¥ä½¿ç”¨ç‡ä¹Ÿä¸åŒï¼Œæ¯”å¦‚å‹æµ‹æœåŠ¡çš„è¿æ¥ä½¿ç”¨ç‡å¾ˆé«˜ï¼Œä¸€ä¸ªè¯·æ±‚å®Œæˆåé©¬ä¸Šå°±ä¼šè¿›è¡Œä¸‹ä¸€ä¸ªè¯·æ±‚ï¼›æœ‰çš„æœåŠ¡è¿æ¥ä½¿ç”¨ç‡å¾ˆä½ï¼Œè™½ç„¶æ˜¯é•¿è¿æ¥ï¼Œä½†æ˜¯åªä½¿ç”¨ä¸€æ¬¡ã€‚è¿™ä¸¤è€…ä½¿ç”¨çš„è¿æ¥æ¨¡å‹å¹¶ä¸ç›¸åŒï¼Œ
å‰è€…åº”ä½¿ç”¨ goroutine per connection çš„æ¨¡å‹å‡å°‘ä¸Šä¸‹æ–‡çš„åˆ‡æ¢ï¼Œåè€…åº”ä½¿ç”¨åç¨‹æ± å‡å°‘è¿‡å¤š goroutine çš„è°ƒåº¦å¼€é”€ã€‚&lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> ä¹ŸåŒæ—¶æ”¯æŒè¿™ä¸¤ç§åœºæ™¯ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡åœºæ™¯é€‰æ‹©åˆé€‚çš„é…ç½®ã€‚&lt;/p>
&lt;h2 id="é’ˆå¯¹-http-åœºæ™¯è¿›è¡Œå‹æµ‹">é’ˆå¯¹ HTTP åœºæ™¯è¿›è¡Œå‹æµ‹&lt;/h2>
&lt;h3 id="ä½¿ç”¨è´´è¿‘è‡ªå·±çš„åœºæ™¯">ä½¿ç”¨è´´è¿‘è‡ªå·±çš„åœºæ™¯&lt;/h3>
&lt;p>Github ä¸Šçš„å‹æµ‹é¡¹ç›®æœ‰å¾ˆå¤šï¼Œç½‘ç»œä¸Šä¹Ÿæœ‰å¾ˆå¤šæ€§èƒ½æµ‹è¯•æŠ¥å‘Šï¼Œä½†æ˜¯è¿™äº›é¡¹ç›®å’Œæµ‹è¯•ä¸ä¸€å®šè´´åˆè‡ªå·±ã€‚ä¸¾ä¸ªæç«¯ä¸€ç‚¹çš„ä¾‹å­ï¼Œåœ¨çœŸå®åœºæ™¯ä¸­ä½ ä¼šå†™ä¸€ä¸ªé¡¹ç›®æ— è®º Client å‘ä»€ä¹ˆ Server éƒ½åªå› &lt;strong>&lt;code>hello world&lt;/code>&lt;/strong> å—ï¼Ÿå¾ˆé—æ†¾ï¼Œå¾ˆå¤šçš„å‹æµ‹é¡¹ç›®å°±æ˜¯è¿™ä¹ˆåšçš„ã€‚&lt;/p>
&lt;p>åœ¨è¿›è¡Œå‹æµ‹å‰ï¼Œåº”è€ƒè™‘è‡ªå·±çœŸæ­£çš„ä½¿ç”¨åœºæ™¯ï¼Œæ¯”å¦‚ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>é•¿çŸ­è¿æ¥çš„ä½¿ç”¨&lt;/strong> ï¼šä½¿ç”¨é•¿è¿æ¥è¿˜æ˜¯çŸ­è¿æ¥æ›´ç¬¦åˆè‡ªå·±çš„åœºæ™¯ã€‚&lt;/li>
&lt;li>&lt;strong>è¿æ¥ä½¿ç”¨ç‡çš„ä¼°ç®—&lt;/strong> ï¼šå¦‚æœä½¿ç”¨é•¿è¿æ¥ï¼Œä¸”è¿æ¥ä½¿ç”¨ç‡å¾ˆé«˜ï¼ˆå¤§éƒ¨åˆ†åœºæ™¯ï¼‰ï¼Œåˆ™ä½¿ç”¨é»˜è®¤é…ç½®å³å¯ï¼›å¦‚æœè¿æ¥ä½¿ç”¨ç‡å¾ˆä½ï¼Œå¯ä»¥æ·»åŠ é…ç½®ï¼š&lt;strong>&lt;code>server.WithIdleTimeout(0)&lt;/code>&lt;/strong>ï¼Œå°† goroutine per connection çš„æ¨¡å‹ä¿®æ”¹ä¸ºåç¨‹æ± æ¨¡å‹ï¼Œå¹¶è¿›è¡Œå¯¹æ¯”æµ‹è¯•ã€‚&lt;/li>
&lt;li>&lt;strong>æ•°æ®ä½ç½®åŠå¤§å°çš„ç¡®å®š&lt;/strong> ï¼šä¸Šé¢æåˆ°ä¸åŒä½ç½®ï¼ˆå¦‚ queryã€headerã€body ç­‰ï¼‰åŠå¤§å°çš„æ•°æ®å¯¹æ¡†æ¶å¯èƒ½é€ æˆå½±å“ï¼Œå¦‚æœæ‰€æœ‰æ¡†æ¶çš„æ€§èƒ½éƒ½æ¯”è¾ƒä¸€èˆ¬ï¼Œå¯ä»¥è€ƒè™‘æ¢ä¸€ä¸ªæ•°æ®ä¼ è¾“ä½ç½®ã€‚&lt;/li>
&lt;li>&lt;strong>å¹¶å‘æ•°çš„ç¡®å®š&lt;/strong> ï¼šæœ‰çš„æœåŠ¡å±äºè½»ä¸šåŠ¡é‡æ¡†æ¶ï¼Œè¿™ä¸ªæ—¶å€™æ¡†æ¶çš„å¹¶å‘å¯èƒ½ä¼šå¾ˆé«˜ï¼›æœ‰çš„æœåŠ¡å±äºé‡ä¸šåŠ¡è½»æ¡†æ¶ï¼Œè¿™ä¸ªæ—¶å€™æ¡†æ¶çš„å¹¶å‘å¯èƒ½ä¼šå¾ˆä½ã€‚&lt;/li>
&lt;/ul>
&lt;p>å¦‚æœåªæ˜¯æƒ³çœ‹ä¸€ä¸‹æ¡†æ¶çš„æ€§èƒ½ï¼Œå¯ä»¥ä½¿ç”¨å¸¸è§„çš„åœºæ™¯ï¼š&lt;strong>é•¿è¿æ¥ã€è¾ƒé«˜è¿æ¥ä½¿ç”¨ç‡ã€1k bodyã€100 å¹¶å‘&lt;/strong>ç­‰ã€‚&lt;a href="https://github.com/cloudwego/hertz-benchmark">hertz-benchmark&lt;/a> ä»“åº“é»˜è®¤çš„å‹æµ‹é…ç½®ä¹Ÿæ˜¯å¦‚æ­¤ã€‚
åŒæ—¶ &lt;a href="https://github.com/cloudwego/hertz-benchmark">hertz-benchmark&lt;/a> ä»“åº“ä¹Ÿå¼€å‘ç»™ç”¨æˆ· headerã€bodyã€å¹¶å‘æ•°çš„é…ç½®ï¼Œç”¨æˆ·å¯ä»¥æ–¹ä¾¿çš„ä¿®æ”¹è¿™äº›é…ç½®å®Œæˆè´´åˆè‡ªå·±çš„å‹æµ‹ã€‚&lt;/p>
&lt;h3 id="ç¡®å®šå‹æµ‹å¯¹è±¡">ç¡®å®šå‹æµ‹å¯¹è±¡&lt;/h3>
&lt;p>è¡¡é‡ä¸€ä¸ª RPC æ¡†æ¶çš„æ€§èƒ½éœ€è¦ä»ä¸¤ä¸ªè§†è§’åˆ†åˆ«å»æ€è€ƒï¼šClient è§†è§’ä¸ Server è§†è§’ã€‚åœ¨å¤§è§„æ¨¡çš„ä¸šåŠ¡æ¶æ„ä¸­ï¼Œä¸Šæ¸¸ Client ä¸è§å¾—ä½¿ç”¨çš„ä¹Ÿæ˜¯ä¸‹æ¸¸çš„æ¡†æ¶ï¼Œè€Œå¼€å‘è€…è°ƒç”¨çš„ä¸‹æ¸¸æœåŠ¡ä¹ŸåŒæ ·å¦‚æ­¤ï¼Œå¦‚æœå†è€ƒè™‘åˆ° Service Mesh çš„æƒ…å†µå°±æ›´å¤æ‚äº†ã€‚&lt;/p>
&lt;p>ä¸€äº›å‹æµ‹é¡¹ç›®é€šå¸¸ä¼šæŠŠ Client å’Œ Server è¿›ç¨‹æ··éƒ¨è¿›è¡Œå‹æµ‹ï¼Œç„¶åå¾—å‡º&lt;strong>æ•´ä¸ªæ¡†æ¶&lt;/strong>çš„æ€§èƒ½æ•°æ®ï¼Œè¿™å…¶å®å’Œçº¿ä¸Šå®é™…è¿è¡Œæƒ…å†µå¾ˆå¯èƒ½æ˜¯ä¸ç¬¦çš„ã€‚&lt;/p>
&lt;p>å¦‚æœè¦å‹æµ‹ Serverï¼Œåº”è¯¥ç»™ Client å°½å¯èƒ½å¤šçš„èµ„æºï¼ŒæŠŠ Server å‹åˆ°æé™ï¼Œåä¹‹äº¦ç„¶ã€‚å¦‚æœ Client å’Œ Server éƒ½åªç»™äº† 4 æ ¸ CPU è¿›è¡Œå‹æµ‹ï¼Œä¼šå¯¼è‡´å¼€å‘è€…æ— æ³•åˆ¤æ–­æœ€ç»ˆå¾—å‡ºæ¥çš„æ€§èƒ½æ•°æ®æ˜¯å“ªä¸ªè§†è§’ä¸‹çš„ï¼Œæ›´æ— æ³•ç»™çº¿ä¸ŠæœåŠ¡åšå®é™…çš„å‚è€ƒã€‚&lt;/p>
&lt;h3 id="ä½¿ç”¨ç‹¬å -cpu">ä½¿ç”¨ç‹¬å  CPU&lt;/h3>
&lt;p>è™½ç„¶çº¿ä¸Šåº”ç”¨é€šå¸¸æ˜¯å¤šä¸ªè¿›ç¨‹å…±äº« CPUï¼Œä½†åœ¨å‹æµ‹åœºæ™¯ä¸‹ï¼ŒClient ä¸ Server è¿›ç¨‹éƒ½å¤„äºæç«¯ç¹å¿™çš„çŠ¶å†µï¼Œæ­¤æ—¶å…±äº« CPU ä¼šå¯¼è‡´å¤§é‡ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œä»è€Œä½¿å¾—æ•°æ®ç¼ºä¹å¯å‚è€ƒæ€§ï¼Œä¸”å®¹æ˜“äº§ç”Ÿå‰åå¾ˆå¤§æ³¢åŠ¨ã€‚&lt;/p>
&lt;p>æ‰€ä»¥æˆ‘ä»¬å»ºè®®æ˜¯å°† Client ä¸ Server è¿›ç¨‹éš”ç¦»åœ¨ä¸åŒ CPU æˆ–è€…ä¸åŒç‹¬å æœºå™¨ä¸Šè¿›è¡Œã€‚å¦‚æœè¿˜æƒ³è¦è¿›ä¸€æ­¥é¿å…å…¶ä»–è¿›ç¨‹äº§ç”Ÿå½±å“ï¼Œå¯ä»¥å†åŠ ä¸Š nice -n -20 å‘½ä»¤è°ƒé«˜å‹æµ‹è¿›ç¨‹çš„è°ƒåº¦ä¼˜å…ˆçº§ã€‚&lt;/p>
&lt;p>å¦å¤–å¦‚æœæ¡ä»¶å…è®¸ï¼Œç›¸æ¯”äº‘å¹³å°è™šæ‹Ÿæœºï¼Œä½¿ç”¨çœŸå®ç‰©ç†æœºä¼šä½¿å¾—æµ‹è¯•ç»“æœæ›´åŠ ä¸¥è°¨ä¸å…·å¤‡å¯å¤ç°æ€§ã€‚&lt;/p>
&lt;h2 id="æ€§èƒ½æ•°æ®å‚è€ƒ">æ€§èƒ½æ•°æ®å‚è€ƒ&lt;/h2>
&lt;p>åœ¨æ»¡è¶³ä¸Šè¿°è¦æ±‚çš„å‰æä¸‹ï¼Œæˆ‘ä»¬åŸºäºå½“å‰æœ€æ–°ç‰ˆæœ¬å¯¹å¤šä¸ªæ¡†æ¶è¿›è¡Œäº†å‹æµ‹å¯¹æ¯”ï¼Œå‹æµ‹ä»£ç åœ¨ &lt;a href="https://github.com/cloudwego/hertz-benchmark">hertz-benchmark&lt;/a> ä»“åº“ã€‚
åœ¨å……åˆ†å‹æ»¡ Server çš„ç›®æ ‡ä¸‹ï¼Œ&lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> çš„ P99 å»¶è¿Ÿåœ¨æ‰€æœ‰å‹æµ‹æ¡†æ¶ä¸­æœ€ä½ï¼Œååä¹Ÿæ˜¯å±äºç¬¬ä¸€æ¢¯é˜Ÿï¼Œä¸”åœ¨æŒç»­ä¼˜åŒ–ä¸­ã€‚&lt;/p>
&lt;ul>
&lt;li>CPU: AMD EPYC 7Y83 64-Core Processor 2.7GHz
&lt;ul>
&lt;li>è¿è¡Œé™å®š server 4-CPUsï¼Œclient 16-CPUS&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>OSï¼šDebian GNU/Linux 10 (buster)&lt;/li>
&lt;li>Go 1.19&lt;/li>
&lt;li>&lt;a href="https://github.com/cloudwego/hertz/releases/tag/v0.3.2">hertz v0.3.2&lt;/a>ï¼Œ&lt;a href="https://github.com/valyala/fasthttp/releases/tag/v1.40.0">fasthttp v1.40.0&lt;/a>ï¼Œ
&lt;a href="https://github.com/gin-gonic/gin/releases/tag/v1.8.1">gin v1.8.1&lt;/a>ï¼Œ&lt;a href="https://github.com/gofiber/fiber/releases/tag/v2.38.1">fiber v2.38.1&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Hertz-benchmark/1.png" alt="image">&lt;/p>
&lt;p align="center">å››ä¸ªæ¡†æ¶çš„ååå’Œæ—¶å»¶æ¯”è¾ƒ&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Hertz-benchmark/2.png" alt="image">&lt;/p>
&lt;p align="center">ä¸‰ä¸ªæ¡†æ¶çš„ååå’Œæ—¶å»¶æ¯”è¾ƒ&lt;/p>
&lt;h2 id="ç»“è¯­">ç»“è¯­&lt;/h2>
&lt;p>ä½œä¸ºä¸€ä¸ªè¶…å¤§è§„æ¨¡ä¼ä¸šçº§çš„å¾®æœåŠ¡ HTTP æ¡†æ¶ï¼Œ&lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> åœ¨è®¾è®¡ä¹‹åˆå°±æ›´å€¾å‘äºè§£å†³å¤§è§„æ¨¡å¾®æœåŠ¡åœºæ™¯ä¸‹çš„å„ç§é—®é¢˜ã€‚åœ¨æ¨å¹¿è¿‡ç¨‹ä¸­ä¹Ÿé‡åˆ°äº†å„ç§å„æ ·çš„æœåŠ¡ï¼Œè¸©äº†å„ç§å„æ ·çš„å‘ï¼Œä¹Ÿæ˜¯åŸºäºä»¥ä¸Šç»éªŒå†™äº†æœ¬æ–‡ã€‚
æ¬¢è¿å¹¿å¤§å¼€å‘è€…åŸºäºæœ¬æ–‡æä¾›çš„æµ‹è¯•æŒ‡å—ï¼Œé’ˆå¯¹è‡ªå·±çš„å®é™…åœºæ™¯é€‰æ‹©åˆé€‚çš„å·¥å…·ã€‚æ›´å¤šé—®é¢˜ï¼Œè¯·åœ¨ GitHub ä¸Šæ &lt;a href="https://github.com/cloudwego/hertz/issues">Issue&lt;/a> äº¤æµã€‚&lt;/p></description></item><item><title>Blog: Volo 0.3.2 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2023/02/07/volo-0.3.2-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Tue, 07 Feb 2023 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2023/02/07/volo-0.3.2-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;p>Volo 0.3.2 ç‰ˆæœ¬ä¸­ï¼Œé™¤äº†å¸¸è§„ bugfix ä¹‹å¤–ï¼Œè¿˜æœ‰å¤šå¤„æ”¹è¿›ã€‚å°¤å…¶æ˜¯ï¼Œæœ‰ç¤¾åŒºè´¡çŒ®è€…ä¸ºæˆ‘ä»¬å¸¦æ¥äº†é‡è¦çš„ featureï¼Œéå¸¸æ„Ÿè°¢ä»–ä»¬ã€‚&lt;/p>
&lt;h2 id="thrift-å¼‚æ­¥ç¼–è§£ç -trait-æ”¯æŒ">Thrift å¼‚æ­¥ç¼–è§£ç  Trait æ”¯æŒ&lt;/h2>
&lt;p>&lt;a href="https://github.com/ii64">@ii64&lt;/a> åœ¨ &lt;a href="https://github.com/cloudwego/volo/pull/123">#123&lt;/a> ä¸­ä¸ºæˆ‘ä»¬å¸¦æ¥äº† Thrift å¼‚æ­¥ç¼–è§£ç  Trait çš„å®šä¹‰å’Œ Binaryã€Apache Compact Protocol çš„å®ç°ï¼Œåœ¨æ­¤ä¹‹å‰ä»–è¿˜ä¸º Pilota è´¡çŒ®äº†ç¼–è§£ç çš„åº•å±‚å®ç°ï¼&lt;/p>
&lt;h2 id="grpc-graceful-shutdown-æ”¯æŒ">gRPC graceful shutdown æ”¯æŒ&lt;/h2>
&lt;p>&lt;a href="https://github.com/iGxnon">@iGxnon&lt;/a> åœ¨ &lt;a href="https://github.com/cloudwego/volo/pull/127">#127&lt;/a> ä¸­ä¸ºæˆ‘ä»¬å¸¦æ¥äº† gRPC graceful shutdown çš„æ”¯æŒï¼&lt;/p>
&lt;h2 id="metainfo-ä¸-faststr-ç‰ˆæœ¬æ›´æ–°">metainfo ä¸ faststr ç‰ˆæœ¬æ›´æ–°&lt;/h2>
&lt;p>åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬æ›´æ–°äº† metainfo å’Œ faststr çš„ç‰ˆæœ¬ï¼Œä½¿å¾— metainfo ä¹Ÿæ”¯æŒäº† faststrï¼Œä»¥åœ¨å°½å¯èƒ½å¤šçš„åœºæ™¯ä¸‹å‡å°‘å†…å­˜åˆ†é…å’Œæ‹·è´ï¼Œä»¥ä¼˜åŒ–æ€§èƒ½ã€‚&lt;/p>
&lt;p>faststr æ˜¯æˆ‘ä»¬å‚è€ƒ smol_str æ”¹è¿›çš„ä¸€ä¸ª string åº“ï¼Œå®ç°äº† immutable string çš„é›¶å¼€é”€ cloneã€‚&lt;/p>
&lt;p>åŒæ—¶ FastStr æœ‰ä¸€ä¸ªä¸å…¼å®¹å˜æ›´ï¼šä¹‹å‰æ˜¯ä¸ºæ‰€æœ‰&lt;code>AsRef&amp;lt;str&amp;gt;&lt;/code>å®ç°äº†&lt;code>From&lt;/code>ï¼Œä½†æ˜¯è¿™æ ·åšä¼šå¯¼è‡´ç›´æ¥ä½¿ç”¨&lt;code>into&lt;/code>ä¼šå¸¦æ¥é¢å¤–çš„å†…å­˜åˆ†é…å’Œæ‹·è´å¼€é”€ã€‚
åœ¨æ–°çš„ 0.2 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬åªä¸º &lt;code>'static str&lt;/code>ã€&lt;code>String&lt;/code>ã€&lt;code>Arc&amp;lt;str&amp;gt;&lt;/code>ã€&lt;code>Arc&amp;lt;String&amp;gt;&lt;/code>å››ç§ç±»å‹å®ç°äº†&lt;code>From&lt;/code>ï¼Œè¿™å››ç§ç±»å‹è°ƒç”¨ &lt;code>into&lt;/code> åˆ° FastStr æ˜¯é›¶å¼€é”€çš„ï¼Œé€šè¿‡è¿™ç§å½¢å¼é¿å…ç”¨æˆ·ä¸ç»æ„é—´å¸¦æ¥çš„å†…å­˜åˆ†é…å’Œæ‹·è´é—®é¢˜ã€‚&lt;/p>
&lt;p>æ—§ç‰ˆæœ¬çš„&lt;code>From&lt;/code>æœ¬è´¨ä¸Šå°±æ˜¯è°ƒç”¨äº†&lt;code>FastStr::new(s)&lt;/code>ï¼Œå› æ­¤å‡ºç°ä¸å…¼å®¹é—®é¢˜çš„è¯ï¼Œç›´æ¥æ”¹ä¸ºæ˜¾å¼è°ƒç”¨&lt;code>FastStr::new&lt;/code>å³å¯ã€‚&lt;/p>
&lt;h2 id="pilota-ä¸­-protobuf-ç¼–è§£ç æ”¯æŒç”Ÿæˆ-faststr">Pilota ä¸­ Protobuf ç¼–è§£ç æ”¯æŒç”Ÿæˆ FastStr&lt;/h2>
&lt;p>é€šè¿‡åœ¨ Pilota ä¸­æ”¯æŒä¸º Protobuf ç¼–è§£ç ç”Ÿæˆ FastStrï¼Œæˆ‘ä»¬å¯ä»¥å°†æˆ‘ä»¬çš„æ€§èƒ½ä¼˜åŒ–èƒ½åŠ›å¸¦åˆ° PB å’Œ gRPC ä¸­ã€‚&lt;/p>
&lt;p>å‡çº§åï¼Œéœ€è¦æŠŠåŸå…ˆå¼•å…¥çš„&lt;code>use prost::Message;&lt;/code>æ”¹ä¸º&lt;code>use pilota::prost::message::Message;&lt;/code>å³å¯ã€‚&lt;/p>
&lt;h2 id="å®Œæ•´-release-note">å®Œæ•´ Release Note&lt;/h2>
&lt;p>å®Œæ•´çš„ Release Note å¯ä»¥å‚è€ƒï¼š&lt;a href="https://github.com/cloudwego/volo/compare/volo-0.3.0...volo-0.3.2">Volo Changelog&lt;/a>&lt;/p></description></item><item><title>Blog: Hertz v0.5.0 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2023/01/12/hertz-v0.5.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Thu, 12 Jan 2023 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2023/01/12/hertz-v0.5.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;p>Hertz 0.5.0 ç‰ˆæœ¬ä¸­ï¼Œé™¤äº†å¸¸è§„è¿­ä»£ä¼˜åŒ–ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¸¦æ¥äº†å¤šä¸ªé‡è¦ featureã€‚&lt;/p>
&lt;h2 id="ç½‘ç»œå±‚å’Œåè®®å±‚æ”¯æŒåŸºäºæµçš„æ¥å£">ç½‘ç»œå±‚å’Œåè®®å±‚æ”¯æŒåŸºäºæµçš„æ¥å£&lt;/h2>
&lt;blockquote>
&lt;p>&lt;a href="https://github.com/cloudwego/hertz/pull/467">https://github.com/cloudwego/hertz/pull/467&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>åœ¨ Hertz v0.5.0 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥åŠ å¼ºäº† Hertz ä¼ è¾“å±‚ &amp;amp; åè®®å±‚å¯æ‰©å±•èƒ½åŠ›ï¼Œæ”¯æŒæ— ç¼å¯¹æ¥åŸºäºæµçš„ä¼ è¾“å±‚åè®® QUICï¼Œä»¥åŠåœ¨æ­¤ä¹‹ä¸Šæ„å»ºçš„ &lt;a href="https://github.com/cloudwego/hertz/issues/458">HTTP3 åè®®ã€‚&lt;/a>
æ­¤å¤–ï¼Œæˆ‘ä»¬åœ¨æ­¤åŸºç¡€ä¸Šè¿˜å¢åŠ å’Œå®Œå–„äº† &amp;ldquo;ALPN&amp;rdquo;(åº”ç”¨å±‚åè®®åå•†)ã€&amp;ldquo;QUIC/TLS parallel monitoring&amp;rdquo;(QUIC/TLSå¹¶è¡Œç›‘å¬)ã€&amp;ldquo;Alt-Svc&amp;rdquo;(å¤‡é€‰æœåŠ¡) ç­‰åŠŸèƒ½ã€‚&lt;/p>
&lt;h3 id="ä¸»è¦å˜æ›´">ä¸»è¦å˜æ›´&lt;/h3>
&lt;h4 id="ä¼ è¾“å±‚">ä¼ è¾“å±‚&lt;/h4>
&lt;p>æˆ‘ä»¬åœ¨ä¿è¯å…¼å®¹æ€§èƒ½çš„åŸºç¡€ä¹‹ä¸Šå¢åŠ äº†ä¸€ä¸ªé’ˆå¯¹åŸºäºæµï¼ˆstream-basedï¼‰çš„ç½‘ç»œè¿æ¥æ¥å£æŠ½è±¡&lt;code>StreamConn&lt;/code>ï¼ŒåŒæ—¶è°ƒæ•´ä¼ è¾“å±‚å’Œåè®®å±‚çš„äº¤äº’é€»è¾‘ï¼Œå®ç°é’ˆå¯¹è¿æ¥ç±»å‹çš„åˆ†å‘æ­£ç¡®çš„åè®®å±‚å¤„ç†ï¼ˆprotocol serverï¼‰ã€‚
é’ˆå¯¹éœ€è¦åŒæ—¶ç›‘å¬ç›‘å¬ TCPï¼ˆTLSï¼‰ä»¥åŠ UDP(QUIC)çš„åœºæ™¯æˆ‘ä»¬æä¾›äº†ä¸€ä¸ª&lt;code>WithAltTransporter&lt;/code>é€‰é¡¹ï¼Œæ–¹ä¾¿å°†å¤‡ç”¨ transporter ä¼ é€’åˆ°ä¸» transporter ä¸­ï¼Œä¾¿äºå®ç° QUIC/TLS å¹¶è¡Œç›‘å¬çš„èƒ½åŠ›ã€‚&lt;/p>
&lt;h4 id="åè®®å±‚">åè®®å±‚&lt;/h4>
&lt;p>æ”¯æŒæ·»åŠ åŸºäºæµçš„åè®®å±‚å®ç°ï¼ˆprotocol serverï¼‰&lt;code>StreamServer&lt;/code>ï¼Œä»¥ä¾¿äºåœ¨æ–°å¢çš„åŸºäºæµçš„ä¼ è¾“å±‚æ‰©å±•ä¹‹ä¸Šæ„å»ºå¯¹åº”å¤„ç†åè®®ï¼ˆHTTP/3ï¼‰ã€‚
ä¸ºäº†ä¾¿æ·çš„å®ç°ä¸ºæŸä¸ªä¸»åè®®ï¼ˆHTTP/3ï¼‰é…ç½®å¤‡é€‰æœåŠ¡å…ƒä¿¡æ¯ï¼Œ&lt;code>ProtocolSuite&lt;/code>å¯¹å¤–æš´éœ²&lt;code>SetAltHeader&lt;/code>æ¥å£ã€‚
åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿä¸º&lt;code>StreamConn&lt;/code>è®¾è®¡äº† ALPN èƒ½åŠ›ï¼Œä»¥ä¾¿äºåœ¨ QUIC å†…æä¾›åè®®åå•†çš„èƒ½åŠ›ã€‚&lt;/p>
&lt;h4 id="é€šç”¨å±‚">é€šç”¨å±‚&lt;/h4>
&lt;p>åŒæ—¶æˆ‘ä»¬åœ¨é€šç”¨å±‚ä¸­æ–°å¢äº†èƒ½å¤Ÿä¸ Golang æ ‡å‡† Handler è¿›è¡Œè½¬æ¢çš„è¾…åŠ©å‡½æ•°ï¼Œä»¥ä¾¿äºå¿«é€Ÿçš„å°†åŸºäº Golang æ ‡å‡† Handler å®ç°ç§»æ¤åˆ° Hertz ä¸­æ¥ã€‚åœ¨ä¹‹åæä¾›çš„åŸºäº &lt;a href="https://github.com/lucas-clemente/quic-go">quic-go&lt;/a> çš„ &lt;a href="https://github.com/hertz-contrib/http3/pull/1">QUIC &amp;amp; HTTP/3 æ‰©å±•&lt;/a>ä¸­ï¼Œå°±ç”¨åˆ°äº†è¿™ä¸ªå‡½æ•°æä¾›çš„èƒ½åŠ›ã€‚&lt;/p>
&lt;h4 id="feature-çŠ¶æ€">Feature çŠ¶æ€&lt;/h4>
&lt;p>Hertz æ ¸å¿ƒåº“èƒ½åŠ›å·²ç»å‘å¸ƒï¼Œå…·ä½“å®ç°åç»­å°†ä»¥&lt;a href="https://github.com/hertz-contrib/http3/pull/1">æ‰©å±•åŒ…&lt;/a>çš„å½¢å¼å‘å¸ƒï¼Œæ¬¢è¿è¯•ç”¨~&lt;/p>
&lt;p>æ›´å¤šè¯¦ç»†çš„è®¾è®¡è¯´æ˜å¯ä»¥å‚è€ƒï¼š&lt;a href="https://www.cloudwego.io/zh/blog/2023/08/02/hertz-%E6%94%AF%E6%8C%81-quic-http/3/">Hertz æ”¯æŒ QUIC &amp;amp; HTTP/3&lt;/a>&lt;/p>
&lt;h2 id="è„šæ‰‹æ¶å·¥å…·æ”¯æŒç”Ÿæˆ-hertz-client-ä»£ç ">è„šæ‰‹æ¶å·¥å…·æ”¯æŒç”Ÿæˆ hertz client ä»£ç &lt;/h2>
&lt;blockquote>
&lt;p>&lt;a href="https://github.com/cloudwego/hertz/pull/471">https://github.com/cloudwego/hertz/pull/471&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>åœ¨è„šæ‰‹æ¶å·¥å…·(Hz)çš„ v0.5.0 çš„ç‰ˆæœ¬ï¼Œæˆ‘ä»¬æ”¯æŒäº†åŸºäº IDL è‡ªåŠ¨ç”Ÿæˆ hertz client ä»£ç çš„åŠŸèƒ½ï¼Œå¹¶å®ç°äº†ç±» RPC è°ƒç”¨å½¢å¼çš„ HTTP è¯·æ±‚ä¸€é”®è°ƒç”¨ã€‚
ä½¿ç”¨æ–¹æ³•ï¼š&lt;/p>
&lt;blockquote>
&lt;p>å…·ä½“è¯¦è§ï¼šhttps://github.com/cloudwego/hertz-examples/tree/main/hz_client&lt;/p>
&lt;/blockquote>
&lt;ol>
&lt;li>å®šä¹‰ IDL&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">namespace&lt;/span> &lt;span style="color:#204a87;font-weight:bold">go&lt;/span> &lt;span style="color:#000">toutiao&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">middleware&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">hzClient&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">struct&lt;/span> &lt;span style="color:#000">QueryReq&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">string&lt;/span> &lt;span style="color:#000">QueryValue&lt;/span> &lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">api&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">query&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;query1&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">struct&lt;/span> &lt;span style="color:#000">Resp&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87;font-weight:bold">string&lt;/span> &lt;span style="color:#000">Resp&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">service&lt;/span> &lt;span style="color:#000">Hertz121&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">Resp&lt;/span> &lt;span style="color:#000">QueryMethod&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000">QueryReq&lt;/span> &lt;span style="color:#000">request&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">api&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">get&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;/query&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">api&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">handler_path&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;get&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}(&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">api&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">base_domain&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;http://127.0.0.1:8888&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>ç”Ÿæˆä»£ç &lt;/li>
&lt;/ol>
&lt;p>å¯åŸºäºä¸Šè¿° IDLï¼Œåˆ†åˆ«ç”Ÿæˆ server å’Œ client ç«¯ä»£ç ï¼š&lt;/p>
&lt;p>serverï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">hz&lt;/span> &lt;span style="color:#000">new&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">--&lt;/span>&lt;span style="color:#000">idl&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#000">psm&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">thrift&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">--&lt;/span>&lt;span style="color:#000">handler_by_method&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">t&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#000">template&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#000">slim&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>clientï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">hz&lt;/span> &lt;span style="color:#000">client&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">--&lt;/span>&lt;span style="color:#000">idl&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#000">psm&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">thrift&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">--&lt;/span>&lt;span style="color:#000">model_dir&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#000">hertz_gen&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">t&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#000">template&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#000">slim&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">--&lt;/span>&lt;span style="color:#000">client_dir&lt;/span>&lt;span style="color:#000;font-weight:bold">=&lt;/span>&lt;span style="color:#000">hz_client&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="3">
&lt;li>è°ƒç”¨ client ä»£ç å‘èµ· HTTP è¯·æ±‚ï¼Œå®ç° client ç«¯å’Œ server ç«¯çš„äº’é€š&lt;/li>
&lt;/ol>
&lt;h2 id="å®Œæ•´-release-note">å®Œæ•´ Release Note&lt;/h2>
&lt;p>å®Œæ•´çš„ Release Note å¯ä»¥å‚è€ƒï¼š&lt;/p>
&lt;ul>
&lt;li>Hertz: &lt;a href="https://github.com/cloudwego/hertz/releases/tag/v0.5.0">https://github.com/cloudwego/hertz/releases/tag/v0.5.0&lt;/a>&lt;/li>
&lt;li>Hz(è„šæ‰‹æ¶): &lt;a href="https://github.com/cloudwego/hertz/releases/tag/cmd%2Fhz%2Fv0.5.0">https://github.com/cloudwego/hertz/releases/tag/cmd%2Fhz%2Fv0.5.0&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Blog: Volo 0.3.0 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2022/12/22/volo-0.3.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Thu, 22 Dec 2022 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2022/12/22/volo-0.3.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;p>Volo 0.3.0 ç‰ˆæœ¬ä¸­ï¼Œé™¤äº†å¸¸è§„ bugfix ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¸¦æ¥äº†å¤šä¸ªé‡è¦ featureã€‚&lt;/p>
&lt;h2 id="service-trait-é‡æ„">Service Trait é‡æ„&lt;/h2>
&lt;p>Volo 0.3.0 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å¯¹ Service Trait è¿›è¡Œäº†é‡æ„ï¼Œä½¿å¾— Service Trait çš„å®ç°æ›´åŠ ç®€å•ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†æ›´å¤šçš„çµæ´»æ€§ã€‚&lt;/p>
&lt;p>å…·ä½“æ¥çœ‹ï¼Œæˆ‘ä»¬å°† Service Trait çš„å®šä¹‰ä»ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">pub&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">trait&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Service&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Cx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Request&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">/// Responses given by the service.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Response&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">/// Errors produced by the service.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Error&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">/// The future response value.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Future&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;cx&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>: &lt;span style="color:#000">Future&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Output&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87">Result&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#3465a4">Self&lt;/span>::&lt;span style="color:#000">Response&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#3465a4">Self&lt;/span>::&lt;span style="color:#000">Error&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87">Send&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#c4a000">&amp;#39;cx&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">where&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Cx&lt;/span>: &lt;span style="color:#c4a000">&amp;#39;cx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#3465a4">Self&lt;/span>: &lt;span style="color:#c4a000">&amp;#39;cx&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">/// Process the request and return the response asynchronously.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">call&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;cx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#c4a000">&amp;#39;s&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;s&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">mut&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">cx&lt;/span>: &lt;span style="color:#204a87;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;cx&lt;/span> &lt;span style="color:#000">mut&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Cx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req&lt;/span>: &lt;span style="color:#000">Request&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#000">Self&lt;/span>::&lt;span style="color:#000">Future&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;cx&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">where&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#c4a000">&amp;#39;s&lt;/span>: &lt;span style="color:#c4a000">&amp;#39;cx&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ”¹ä¸ºäº†ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">pub&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">trait&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Service&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Cx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Request&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">/// Responses given by the service.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Response&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">/// Errors produced by the service.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Error&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">/// The future response value.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">type&lt;/span> &lt;span style="color:#000">Future&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;cx&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>: &lt;span style="color:#000">Future&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#000">Output&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87">Result&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#3465a4">Self&lt;/span>::&lt;span style="color:#000">Response&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#3465a4">Self&lt;/span>::&lt;span style="color:#000">Error&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87">Send&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">+&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#c4a000">&amp;#39;cx&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">where&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Cx&lt;/span>: &lt;span style="color:#c4a000">&amp;#39;cx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#3465a4">Self&lt;/span>: &lt;span style="color:#c4a000">&amp;#39;cx&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">/// Process the request and return the response asynchronously.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">call&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;cx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#c4a000">&amp;#39;s&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;s&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">cx&lt;/span>: &lt;span style="color:#204a87;font-weight:bold">&amp;amp;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;cx&lt;/span> &lt;span style="color:#000">mut&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Cx&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">req&lt;/span>: &lt;span style="color:#000">Request&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&amp;gt; &lt;span style="color:#000">Self&lt;/span>::&lt;span style="color:#000">Future&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#c4a000">&amp;#39;cx&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;gt;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">where&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#c4a000">&amp;#39;s&lt;/span>: &lt;span style="color:#c4a000">&amp;#39;cx&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æœ€æ˜æ˜¾çš„æ”¹åŠ¨æ˜¯ï¼ŒService Trait çš„æ–¹æ³• call() çš„ self å‚æ•°ç”± &lt;code>&amp;amp;mut self&lt;/code> æ”¹ä¸ºäº† &lt;code>&amp;amp;self&lt;/code>ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯ï¼Œä¹‹å‰ä¾èµ– &lt;code>&amp;amp;mut self&lt;/code> çš„è¯ï¼Œåœ¨è°ƒç”¨ä¹‹å‰å°±å¾— clone æ‹¿æ‰€æœ‰æƒæ‰è¡Œï¼Œéœ€è¦ Service ç”¨æˆ·è‡ªå·±ä¿è¯ Clone çš„å¼€é”€ä½ï¼›å®é™…ä¸Šï¼Œè¿™ä¸ª clone æ˜¯å®Œå…¨æ²¡å¿…è¦çš„ï¼Œè¿™ä¸ªå†³ç­–åº”è¯¥äº¤ç»™ç”¨æˆ·è‡ªå·±å†³å®šï¼Œå¦‚æœçœŸçš„æœ‰éœ€æ±‚æ”¹å˜å†…éƒ¨çŠ¶æ€çš„è¯ï¼Œè‡ªå·±å†…éƒ¨åŠ é”æˆ–è€…ç”¨ atomic å³å¯ï¼Œè¿™æ ·å¯ä»¥èŠ‚çœ clone çš„å¼€é”€ã€‚&lt;/p>
&lt;h2 id="grpc-å¤š-service-æ”¯æŒ">gRPC å¤š Service æ”¯æŒ&lt;/h2>
&lt;p>åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬è¿˜æ”¯æŒäº† gRPC æœåŠ¡ç«¯åŒæ—¶æ”¯æŒå¤šä¸ª Service çš„åœºæ™¯ï¼Œå¹¶ä¸”æ¯ä¸ª Service éƒ½å¯ä»¥æœ‰è‡ªå·±çš„ layerï¼›å½“ç„¶ï¼ŒServer ä¹Ÿå¯ä»¥æœ‰å…¨å±€æœ‰æ•ˆçš„ layerã€‚&lt;/p>
&lt;p>å¦‚æœæŸä¸ªä¸­é—´ä»¶éœ€è¦æ„ŸçŸ¥åˆ° Request / Response çš„å…·ä½“ç±»å‹å¹¶ä¸”åšå¤„ç†çš„ï¼Œæˆ–è€…åªé’ˆå¯¹å•ä¸ª Service çš„ï¼Œé‚£ä¹ˆå¯ä»¥æ·»åŠ ä¸º Service è‡ªå·±çš„ layer å³å¯ã€‚&lt;/p>
&lt;p>è¿™æ˜¯ä¸€ä¸ª breaking changeï¼Œä½¿ç”¨ä¹‹å‰ç‰ˆæœ¬çš„ç”¨æˆ·å¯èƒ½éœ€è¦ä¿®æ”¹ä¸€ä¸‹ä»£ç ï¼Œå…·ä½“æ¥è¯´éœ€è¦ä»è¿™æ ·ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic">#[volo::main]&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">async&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">main&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">let&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">addr&lt;/span>: &lt;span style="color:#000">SocketAddr&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#34;[::]:8080&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">parse&lt;/span>&lt;span style="color:#000;font-weight:bold">().&lt;/span>&lt;span style="color:#000">unwrap&lt;/span>&lt;span style="color:#000;font-weight:bold">();&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">let&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">addr&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">volo&lt;/span>::&lt;span style="color:#000">net&lt;/span>::&lt;span style="color:#000">Address&lt;/span>::&lt;span style="color:#000">from&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">addr&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">volo_gen&lt;/span>::&lt;span style="color:#000">proto_gen&lt;/span>::&lt;span style="color:#000">hello&lt;/span>::&lt;span style="color:#000">HelloServiceServer&lt;/span>::&lt;span style="color:#000">new&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">S&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">run&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">addr&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#204a87;font-weight:bold">await&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">unwrap&lt;/span>&lt;span style="color:#000;font-weight:bold">();&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ”¹æˆè¿™æ ·ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-rust" data-lang="rust">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">use&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">std&lt;/span>::&lt;span style="color:#000">net&lt;/span>::&lt;span style="color:#000">SocketAddr&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">use&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">volo_grpc&lt;/span>::&lt;span style="color:#000">server&lt;/span>::&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#000">Server&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">ServiceBuilder&lt;/span>&lt;span style="color:#000;font-weight:bold">};&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#8f5902;font-style:italic">#[volo::main]&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">async&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">fn&lt;/span> &lt;span style="color:#000">main&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">let&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">addr&lt;/span>: &lt;span style="color:#000">SocketAddr&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#34;[::]:8080&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">parse&lt;/span>&lt;span style="color:#000;font-weight:bold">().&lt;/span>&lt;span style="color:#000">unwrap&lt;/span>&lt;span style="color:#000;font-weight:bold">();&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">let&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">addr&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">volo&lt;/span>::&lt;span style="color:#000">net&lt;/span>::&lt;span style="color:#000">Address&lt;/span>::&lt;span style="color:#000">from&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">addr&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Server&lt;/span>::&lt;span style="color:#000">new&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">add_service&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ServiceBuilder&lt;/span>::&lt;span style="color:#000">new&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">volo_gen&lt;/span>::&lt;span style="color:#000">proto_gen&lt;/span>::&lt;span style="color:#000">hello&lt;/span>::&lt;span style="color:#000">GreeterServer&lt;/span>::&lt;span style="color:#000">new&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">S&lt;/span>&lt;span style="color:#000;font-weight:bold">)).&lt;/span>&lt;span style="color:#000">build&lt;/span>&lt;span style="color:#000;font-weight:bold">())&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">run&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">addr&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#204a87;font-weight:bold">await&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">.&lt;/span>&lt;span style="color:#000">unwrap&lt;/span>&lt;span style="color:#000;font-weight:bold">();&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="grpc-compression">gRPC Compression&lt;/h2>
&lt;p>æ„Ÿè°¢&lt;a href="https://github.com/tuchg">@tuchg&lt;/a>åœ¨&lt;a href="https://github.com/cloudwego/volo/pull/91">#91&lt;/a>ä¸­ä¸ºæˆ‘ä»¬å¸¦æ¥äº† gRPC çš„å‹ç¼©å’Œè§£å‹ç¼©æ”¯æŒï¼Œå¦‚æœå¯¹äºä¼ è¾“å¤§å°æœ‰è¦æ±‚çš„åœºæ™¯ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ã€‚&lt;/p>
&lt;h2 id="thrift-codec-é‡æ„">Thrift Codec é‡æ„&lt;/h2>
&lt;p>åœ¨ä¹‹å‰çš„ Codec è®¾è®¡ä¸­ï¼ŒThrift çš„ç¼–è§£ç æŒ‡å®šçš„æ–¹å¼æ˜¯é€šè¿‡&lt;code>CodecType&lt;/code>æ¥æŒ‡å®šï¼Œè¿™æ ·å¸¦æ¥äº†ä¸¤ä¸ªé—®é¢˜ï¼š&lt;/p>
&lt;ol>
&lt;li>æ— æ³•å¾ˆè½»æ¾åœ°æ‰©å±•æ–°çš„åè®®æ”¯æŒï¼Œæ‰€æœ‰çš„æ”¯æŒçš„åè®®éƒ½éœ€è¦åœ¨æ¡†æ¶ä¸­å®ç°å¹¶ç¡¬ç¼–ç åˆ° CodecType ä¸­ï¼›&lt;/li>
&lt;li>æ— æ³•å°† Transport å’Œ Serialize åè®®è¿›è¡Œè§£è€¦å’Œæ’åˆ—ç»„åˆï¼Œä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦æ”¯æŒ TCompact åè®®ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å¢åŠ å¤šä¸ªå˜ä½“ï¼šTTHeaderFramedCompactã€TTheaderCompactã€FramedCompactã€Compactâ€¦â€¦&lt;/li>
&lt;/ol>
&lt;p>åŒæ—¶ï¼Œä¹‹å‰çš„ç¼–è§£ç æ²¡æœ‰åšåˆ° Zero Copyï¼Œæ€§èƒ½ä¸Šä¹Ÿæœ‰å¯ä»¥æå‡çš„ç©ºé—´ã€‚&lt;/p>
&lt;p>è¿™æ¬¡çš„é‡æ„ï¼Œä¸€æ¬¡æ€§çš„è§£å†³äº†ä»¥ä¸Šæ‰€æœ‰é—®é¢˜ï¼Œæˆ‘ä»¬ä¸å†ä¾èµ–&lt;code>CodecType&lt;/code>æ¥æŒ‡å®šç¼–è§£ç æ–¹å¼ï¼Œè€Œæ˜¯é€šè¿‡&lt;code>make_codec&lt;/code>è¿™ä¸ªæ¥å£æ¥æŒ‡å®š Codec çš„ç”Ÿæˆæ–¹å¼ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾ˆè½»æ¾åœ°æ‰©å±•æ–°çš„åè®®æ”¯æŒï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å°† Transport å’Œ Serialize åè®®è¿›è¡Œè§£è€¦å’Œæ’åˆ—ç»„åˆã€‚&lt;/p>
&lt;p>å…·ä½“å¯ä»¥å‚è€ƒä¸€ä¸‹ &lt;a href="https://docs.rs/volo-thrift/latest/volo_thrift/codec/index.html">codec çš„æ–‡æ¡£&lt;/a>ã€‚&lt;/p>
&lt;h2 id="thrift-ç”Ÿæˆä»£ç é»˜è®¤å­—æ®µå˜æ›´">Thrift ç”Ÿæˆä»£ç é»˜è®¤å­—æ®µå˜æ›´&lt;/h2>
&lt;p>ä¹‹å‰çš„ç”Ÿæˆä»£ç ä¸­ï¼Œbinary ç±»å‹ä¼šç”Ÿæˆ Vec&lt;u8>ï¼Œstring ç±»å‹ä¼šç”Ÿæˆ Stringï¼Œè¿™ä¼šå¯¼è‡´åœ¨è§£ç å’Œç¼–ç çš„æ—¶å€™éƒ½éœ€è¦è¿›è¡Œä¸€æ¬¡ cloneï¼Œæ€§èƒ½æŸè€—è¾ƒå¤§ï¼›åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å°†è¿™ä¸¤ä¸ªç±»å‹é»˜è®¤ç”Ÿæˆçš„ Rust ç±»å‹æ”¹ä¸ºäº† Bytes å’Œ &lt;a href="https://docs.rs/faststr/latest/faststr/">FastStr&lt;/a>ï¼Œä»¥æ­¤æ¥å®ç°å…¨é“¾è·¯çš„ Zero Copyï¼Œå› ä¸ºåœ¨å®è·µä¸­æˆ‘ä»¬è§‚å¯Ÿåˆ°ç»å¤§å¤šæ•° Request / Response ä¸­çš„ binary å’Œ string éƒ½æ˜¯ä¸ä¼šè¢«ä¿®æ”¹çš„ï¼Œè€Œå³ä½¿ç”¨æˆ·éœ€è¦ä¿®æ”¹ï¼Œä¹Ÿå°±æ˜¯å¤šä¸€æ¬¡ Clone çš„ä»£ä»·ï¼Œå¹¶ä¸ä¼šæ¯”ä¹‹å‰æ€§èƒ½æ›´å·®ã€‚&lt;/p>
&lt;p>è¿™æ˜¯ä¸€ä¸ª breaking changeï¼Œä½¿ç”¨ä¹‹å‰ç‰ˆæœ¬çš„ç”¨æˆ·åœ¨å‡çº§åå¯èƒ½ä¼šéœ€è¦ä¿®æ”¹ä¸€ä¸‹ä»£ç ï¼Œä¸€èˆ¬æ¥è¯´åªéœ€è¦æ ¹æ®æŠ¥é”™ä¿¡æ¯ä¿®æ”¹ä¸€ä¸‹ç±»å‹å³å¯ã€‚&lt;/p>
&lt;p>å¦‚æœä»æ—§æœ‰éœ€æ±‚è¦é’ˆå¯¹ string ç”Ÿæˆ String çš„è¯ï¼Œå¯ä»¥åœ¨ thrift idl æ–‡ä»¶ä¸­çš„å¯¹åº”å­—æ®µåŠ ä¸€ä¸ª&lt;code>pilota.rust_type=&amp;quot;string&amp;quot;&lt;/code>çš„ annotationï¼Œå¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-thrift" data-lang="thrift">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">struct&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">Item&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">required&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">string&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">name&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>&lt;span style="color:#000">pilota.rust_type&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;string&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">);&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>é™¤æ­¤ä¹‹å¤–ï¼ŒPilota è¿˜æ”¯æŒäº†å…¶å®ƒçš„ Annotationï¼Œè¯¦æƒ…å¯ä»¥å‚è€ƒï¼š&lt;a href="https://www.cloudwego.io/zh/docs/volo/pilota/#pilota-%E6%94%AF%E6%8C%81%E7%9A%84%E6%B3%A8%E8%A7%A3">Pilota æ”¯æŒçš„æ³¨è§£&lt;/a>&lt;/p>
&lt;h2 id="å®Œæ•´-release-note">å®Œæ•´ Release Note&lt;/h2>
&lt;p>å®Œæ•´çš„ Release Note å¯ä»¥å‚è€ƒï¼šhttps://github.com/cloudwego/volo/releases/tag/volo-0.3.0&lt;/p></description></item><item><title>Blog: Netpoll v0.3.0 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2022/11/09/netpoll-v0.3.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Wed, 09 Nov 2022 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2022/11/09/netpoll-v0.3.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;h2 id="feat">Feat&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/206">#206&lt;/a>] feat: è¿æ¥ Flush æ¥å£æ”¯æŒå†™è¶…æ—¶è®¾ç½®ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/182">#182&lt;/a>] feat: æ”¯æŒåœ¨ ipv6 only ç¯å¢ƒä¸‹åˆ›å»ºè¿æ¥ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="fix">Fix&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/200">#200&lt;/a>] fix: ä¿®å¤ #166 ä¸­çš„ä»£ç é”™è¯¯ï¼šclose fd æ²¡æœ‰æ­£ç¡®çš„è¢« detachã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/196">#196&lt;/a>] fix: ç³»ç»Ÿ io è°ƒç”¨ä½¿ç”¨ int32 å­˜å‚¨ size, è¶…é™è°ƒç”¨ä¼šå¯¼è‡´ EINVALã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/179">#179&lt;/a>] fix: ä¿®å¤ buffer é•¿åº¦ int32 æº¢å‡ºçš„é—®é¢˜ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/netpoll/pull/183">#183&lt;/a>] fix: å½“ EPOLLERR å‘ç”Ÿæ—¶ï¼Œè·³è¿‡æ£€æŸ¥ EPOLLOUTã€‚&lt;/li>
&lt;/ul></description></item><item><title>Blog: Kitex Proxyless ä¹‹æµé‡è·¯ç”±ï¼šé…åˆ Istio ä¸ OpenTelemetry å®ç°å…¨é“¾è·¯æ³³é“</title><link>https://www.cloudwego.io/zh/blog/2022/11/08/kitex-proxyless-%E4%B9%8B%E6%B5%81%E9%87%8F%E8%B7%AF%E7%94%B1%E9%85%8D%E5%90%88-istio-%E4%B8%8E-opentelemetry-%E5%AE%9E%E7%8E%B0%E5%85%A8%E9%93%BE%E8%B7%AF%E6%B3%B3%E9%81%93/</link><pubDate>Tue, 08 Nov 2022 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2022/11/08/kitex-proxyless-%E4%B9%8B%E6%B5%81%E9%87%8F%E8%B7%AF%E7%94%B1%E9%85%8D%E5%90%88-istio-%E4%B8%8E-opentelemetry-%E5%AE%9E%E7%8E%B0%E5%85%A8%E9%93%BE%E8%B7%AF%E6%B3%B3%E9%81%93/</guid><description>
&lt;blockquote>
&lt;p>å¯¼è¯­ï¼šKitex Proxyless æ˜¯ Kitex æœåŠ¡èƒ½å¤Ÿä¸å€ŸåŠ© envoy sidecar ç›´æ¥ä¸ istiod äº¤äº’ï¼ŒåŸºäº xDS åè®®åŠ¨æ€è·å–æ§åˆ¶é¢ä¸‹å‘çš„æœåŠ¡æ²»ç†è§„åˆ™ï¼Œå¹¶è½¬æ¢ä¸º Kitex å¯¹åº”è§„åˆ™æ¥å®ç°ä¸€äº›æœåŠ¡æ²»ç†åŠŸèƒ½ï¼Œå¦‚æµé‡è·¯ç”±ã€‚åŸºäº Kitex Proxylessï¼Œèƒ½å¤Ÿå®ç° Kitex æ— éœ€ä»£ç†å°±å¯ä»¥è¢« ServiceMesh ç»Ÿä¸€ç®¡ç†ï¼Œè¿›è€Œå®ç°å¤šç§éƒ¨ç½²æ¨¡å¼ä¸‹çš„æ²»ç†è§„åˆ™ Specã€æ²»ç†æ§åˆ¶é¢ã€æ²»ç†ä¸‹å‘åè®®ã€å¼‚æ„æ•°æ®æ²»ç†èƒ½åŠ›çš„ç»Ÿä¸€ã€‚æœ¬æ–‡åœ¨ biz-demo ä¸­ä½¿ç”¨ Kitex å’Œ Hertz é‡å†™ bookinfo é¡¹ç›®ï¼Œä»¥å®æˆ˜çš„æ–¹å¼æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ xDS å®ç°å…¨é“¾è·¯çš„æµé‡æ³³é“ã€‚&lt;/p>
&lt;/blockquote>
&lt;h2 id="01-å¼•è¨€">01 å¼•è¨€&lt;/h2>
&lt;h3 id="kitex-proxyless">&lt;strong>Kitex Proxyless&lt;/strong>&lt;/h3>
&lt;blockquote>
&lt;p>&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> æ˜¯å­—èŠ‚å¼€æºçš„ Golang RPC æ¡†æ¶ï¼Œå·²ç»åŸç”Ÿæ”¯æŒäº† xDS æ ‡å‡†åè®®ï¼Œæ”¯æŒä»¥ Proxyless çš„æ–¹å¼è¢« ServiceMesh ç»Ÿä¸€çº³ç®¡ã€‚&lt;/p>
&lt;ul>
&lt;li>è¯¦ç»†è®¾è®¡è§ï¼š
&lt;a href="https://github.com/cloudwego/kitex/issues/461">Proposal: Kitex support xDS Protocol Â· Issue #461 Â· cloudwego/kitex&lt;/a>&lt;/li>
&lt;li>å…·ä½“ä½¿ç”¨æ–¹å¼è§&lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/advanced-feature/xds/">å®˜æ–¹æ–‡æ¡£&lt;/a>&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;p>&lt;strong>&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> Proxyless&lt;/strong> ç®€å•æ¥è¯´å°±æ˜¯ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> æœåŠ¡èƒ½å¤Ÿä¸å€ŸåŠ© envoy sidecar ç›´æ¥ä¸ istiod äº¤äº’ï¼ŒåŸºäº xDS åè®®åŠ¨æ€è·å–æ§åˆ¶é¢ä¸‹å‘çš„æœåŠ¡æ²»ç†è§„åˆ™ï¼Œå¹¶è½¬æ¢ä¸º &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> å¯¹åº”è§„åˆ™æ¥å®ç°ä¸€äº›æœåŠ¡æ²»ç†åŠŸèƒ½ï¼ˆä¾‹å¦‚æœ¬æ–‡çš„é‡ç‚¹ï¼š&lt;strong>æµé‡è·¯ç”±&lt;/strong>ï¼‰ã€‚&lt;/p>
&lt;p>åŸºäº &lt;strong>&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> Proxyless&lt;/strong>ï¼Œè®©æˆ‘ä»¬å®ç° &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> èƒ½å¤Ÿæ— éœ€ä»£ç†å°±å¯ä»¥è¢« ServiceMesh ç»Ÿä¸€ç®¡ç†ï¼Œè¿›è€Œå®ç°å¤šç§éƒ¨ç½²æ¨¡å¼ä¸‹çš„&lt;strong>æ²»ç†è§„åˆ™ Specã€æ²»ç†æ§åˆ¶é¢ã€æ²»ç†ä¸‹å‘åè®®ã€å¼‚æ„æ•°æ®æ²»ç†èƒ½åŠ›&lt;/strong>çš„ç»Ÿä¸€ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Kitex_Proxyless/1.png" alt="image">&lt;/p>
&lt;h3 id="æµé‡è·¯ç”±">æµé‡è·¯ç”±&lt;/h3>
&lt;blockquote>
&lt;p>æµé‡è·¯ç”±æ˜¯æŒ‡ï¼Œèƒ½å¤Ÿå°†æµé‡&lt;strong>æ ¹æ®å…¶è‡ªèº«ç‰¹å®šçš„å…ƒæ•°æ®æ ‡è¯†è·¯ç”±&lt;/strong>åˆ°æŒ‡å®šç›®çš„åœ°ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>æµé‡è·¯ç”±å±äºæœåŠ¡æ²»ç†ä¸­æ¯”è¾ƒæ ¸å¿ƒçš„èƒ½åŠ›ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> Proxyless ä¼˜å…ˆæ”¯æŒçš„åœºæ™¯ä¹‹ä¸€ã€‚&lt;/p>
&lt;p>&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> åŸºäº xDS å®ç°&lt;strong>æµé‡è·¯ç”±&lt;/strong>çš„æ–¹æ¡ˆå¤§è‡´å¦‚ä¸‹ï¼š&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Kitex_Proxyless/2.png" alt="image">&lt;/p>
&lt;p>å…·ä½“æµç¨‹ï¼š&lt;/p>
&lt;ol>
&lt;li>å¢åŠ ä¸€ä¸ª &lt;strong>xDS Router MW&lt;/strong> æ¥è´Ÿè´£ Pick Clusterï¼ˆè·¯ç”±ï¼‰ï¼Œå¹¶ watch ç›®æ ‡æœåŠ¡çš„ LDS åŠ RDSã€‚&lt;/li>
&lt;li>æ„ŸçŸ¥ LDS å˜åŒ–ï¼Œå¹¶æå–ç›®æ ‡æœåŠ¡çš„ LDS ä¸­çš„ Filter Chain åŠå…¶ inline RDSã€‚&lt;/li>
&lt;li>æ„ŸçŸ¥ RDS å˜åŒ–ï¼Œæ ¹æ® &lt;strong>&lt;code>VirtualHost&lt;/code>&lt;/strong> å’Œ &lt;strong>&lt;code>ServiceName&lt;/code>&lt;/strong> æ¥åŒ¹é…ï¼ˆæ”¯æŒå‰ç¼€ã€åç¼€ã€ç²¾ç¡®ã€é€šé…ï¼‰ï¼Œè·å–ç›®æ ‡æœåŠ¡çš„è·¯ç”±é…ç½®ã€‚&lt;/li>
&lt;li>éå†å¤„ç†åŒ¹é…åˆ°çš„ RDS ä¸­çš„è·¯ç”±è§„åˆ™ï¼Œè·¯ç”±è§„åˆ™ä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼ˆå‚è€ƒï¼š&lt;a href="https://github.com/envoyproxy/envoy/blob/v1.13.1/api/envoy/api/v2/route/route_components.proto#L349">è·¯ç”±è§„èŒƒå®šä¹‰&lt;/a>ï¼‰ï¼š&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>Match&lt;/strong> ï¼ˆæ”¯æŒå‰ç¼€ã€åç¼€ã€ç²¾ç¡®ã€é€šé…ç­‰ï¼‰ï¼Œç›®å‰ç‰ˆæœ¬æˆ‘ä»¬æ”¯æŒä»¥ä¸‹ä¸¤ç§å³å¯ï¼š&lt;/p>
&lt;ul>
&lt;li>Pathï¼ˆå¿…é¡»é¡¹ï¼‰ï¼šä» &lt;code>rpcinfo&lt;/code> æå– &lt;code>Method&lt;/code> è¿›è¡ŒåŒ¹é…ï¼›&lt;/li>
&lt;li>HeaderMatcherï¼ˆå¯é€‰é¡¹ï¼‰ï¼šä» metainfo ä¸­æå–å¯¹åº”å…ƒæ•°æ® KeyValueï¼Œå¹¶è¿›è¡ŒåŒ¹é…ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Routeï¼š&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Cluster&lt;/strong> ï¼šæ ‡å‡† Clusterã€‚&lt;/li>
&lt;li>&lt;strong>WeightedClustersï¼ˆæƒé‡è·¯ç”±ï¼‰&lt;/strong> ï¼šMW å†…æ ¹æ®æƒé‡æ¥é€‰æ‹© clusterã€‚&lt;/li>
&lt;li>å°†é€‰æ‹©åˆ°çš„ Cluster å†™å…¥ &lt;code>EndpointInfo.Tag&lt;/code>ï¼Œç”¨äºä¹‹åçš„æœåŠ¡å‘ç°ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>å¯ä»¥çœ‹åˆ°ï¼Œæµé‡è·¯ç”±å…¶å®æ˜¯ä¸€ä¸ªæ ¹æ®ä¸€å®šè§„åˆ™é€‰æ‹©å¯¹åº” SubCluster çš„æµç¨‹ã€‚&lt;/p>
&lt;h2 id="02-å…¨é“¾è·¯æ³³é“">02 å…¨é“¾è·¯æ³³é“&lt;/h2>
&lt;p>åŸºäºæµé‡è·¯ç”±èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥å»¶ä¼¸å‡ºå¾ˆå¤šä½¿ç”¨åœºæ™¯ï¼Œå¦‚ï¼šA/B æµ‹è¯•ã€é‡‘ä¸é›€å‘å¸ƒã€è“ç»¿å‘å¸ƒç­‰ç­‰ï¼Œä»¥åŠæœ¬æ–‡é‡ç‚¹ï¼š&lt;strong>å…¨é“¾è·¯æ³³é“&lt;/strong>ã€‚&lt;/p>
&lt;p>å…¨é“¾è·¯æ³³é“å¯ä»¥ç†è§£æˆæ˜¯å¯¹ä¸€ç»„æœåŠ¡å®ä¾‹æŒ‰ç…§ä¸€å®šæ–¹å¼è¿›è¡Œæ‹†åˆ†ï¼ˆä¾‹å¦‚éƒ¨ç½²ç¯å¢ƒï¼‰ï¼Œå¹¶åŸºäºå…¨é“¾è·¯ç°åº¦è·¯ç”±èƒ½åŠ›ï¼Œè®©æµé‡èƒ½å¤Ÿç²¾å‡†æŒ‰ç…§è§„åˆ™åœ¨æŒ‡å®šæœåŠ¡å®ä¾‹æ³³é“ä¸­æµåŠ¨ï¼ˆé€»è¾‘ä¸Šå¦‚åŒæ¸¸æ³³åœºä¸­çš„æ³³é“ï¼‰ã€‚&lt;/p>
&lt;p>åœ¨ Istio ä¸­æˆ‘ä»¬ä¸€èˆ¬ä¼šé€šè¿‡ DestinationRule çš„ subset å¯¹å®ä¾‹è¿›è¡Œåˆ†ç»„ï¼Œå°†ä¸€ä¸ªæœåŠ¡æ‹†åˆ†æˆä¸åŒå­é›†ï¼ˆä¾‹å¦‚ï¼šæŒ‰ç…§ç‰ˆæœ¬ã€åŒºåŸŸç­‰å±æ€§æ‹†åˆ†ï¼‰ï¼Œç„¶åé…åˆ VirtualService æ¥å®šä¹‰å¯¹åº”çš„è·¯ç”±è§„åˆ™ï¼Œå°†æµé‡è·¯ç”±åˆ°å¯¹åº”å­é›†ä¸­ï¼Œä»è€Œå®Œæˆæ³³é“ä¸­çš„å•è·³è·¯ç”±èƒ½åŠ›ã€‚&lt;/p>
&lt;p>ä¸è¿‡å•å•åªæœ‰æµé‡è·¯ç”±èƒ½åŠ›ï¼Œè¿˜ä¸è¶³ä»¥å®ç°&lt;strong>å…¨é“¾è·¯æ³³é“&lt;/strong>ï¼Œå› ä¸ºå½“ä¸€ä¸ªè¯·æ±‚è·¨è¶Šå¤šä¸ªæœåŠ¡çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æœºåˆ¶èƒ½å¤Ÿå‡†ç¡®è¯†åˆ«å‡ºè¯¥æµé‡ï¼Œå¹¶åŸºäºè¿™ä¸ªç‰¹å¾æ¥ä¸ºæ¯ä¸€è·³æµé‡é…ç½®è·¯ç”±è§„åˆ™ã€‚&lt;/p>
&lt;p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šå‡è®¾æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªç”¨æˆ·çš„è¯·æ±‚èƒ½å¤Ÿç²¾ç¡®ç°åº¦åˆ° service-b çš„ v1 ç‰ˆæœ¬ã€‚æœ€å…ˆæƒ³åˆ°çš„åšæ³•å¯èƒ½æ˜¯æ‰€æœ‰è¯·æ±‚éƒ½å¸¦ä¸Š &lt;code>uid = 100&lt;/code> çš„è¯·æ±‚å¤´ï¼Œç„¶åé…ç½®å¯¹åº” VirtualService æ¥æ ¹æ® header é‡Œçš„ &lt;code>uid = 100&lt;/code> åŒ¹é…ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Kitex_Proxyless/3.png" alt="image">&lt;/p>
&lt;p>ä½†è¿™æ ·çš„åšæ³•æœ‰å‡ ä¸ªæ˜æ˜¾çš„ç¼ºç‚¹ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;strong>ä¸å¤Ÿé€šç”¨&lt;/strong>ï¼šä»¥å…·ä½“æŸä¸ªä¸šåŠ¡å±æ€§æ ‡è¯†ï¼ˆå¦‚ï¼šuidï¼‰ä½œä¸ºæµé‡è·¯ç”±åŒ¹é…è§„åˆ™ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™ä¸ªä¸šåŠ¡å±æ€§æ‰‹åŠ¨åœ¨å…¨é“¾è·¯é‡Œé€ä¼ ï¼Œè¿™æœ¬èº«å¯¹ä¸šåŠ¡ä¾µå…¥æ€§è¾ƒå¤§ï¼Œéœ€è¦ä¸šåŠ¡é…åˆæ”¹é€ ã€‚å¹¶ä¸”å½“æˆ‘ä»¬è¦ä½¿ç”¨å…¶ä»–ä¸šåŠ¡å±æ€§çš„æ—¶å€™ï¼Œåˆéœ€è¦å…¨é“¾è·¯ä¸šåŠ¡éƒ½æ”¹é€ ä¸€éï¼Œå¯æƒ³è€ŒçŸ¥ï¼Œæ˜¯éå¸¸ä¸é€šç”¨çš„åšæ³•ã€‚&lt;/li>
&lt;li>&lt;strong>è·¯ç”±è§„åˆ™å®¹æ˜“é¢‘ç¹å˜åŠ¨ï¼Œå®¹æ˜“é€ æˆè§„åˆ™è‡ƒè‚¿&lt;/strong>ï¼šä»¥å…·ä½“æŸä¸ªä¸šåŠ¡å±æ€§æ ‡è¯†ï¼ˆå¦‚ï¼šuidï¼‰ä½œä¸ºæµé‡è·¯ç”±åŒ¹é…è§„åˆ™ï¼Œå‡è®¾æˆ‘ä»¬è¦æ¢ä¸€ä¸ªä¸šåŠ¡å±æ€§ï¼Œæˆ–è€…ç»™å…¶ä»–ç”¨æˆ·è®¾ç½®è·¯ç”±è§„åˆ™çš„æ—¶å€™ï¼Œå¾—å»æ”¹é€ åŸæœ‰çš„è·¯ç”±è§„åˆ™ï¼Œæˆ–è€…é’ˆå¯¹ä¸åŒä¸šåŠ¡å±æ€§é‡å¤å®šä¹‰å¤šå¥—è·¯ç”±è§„åˆ™ï¼Œå¾ˆå®¹æ˜“å°±ä¼šé€ æˆè·¯ç”±è‡ƒè‚¿ï¼Œä»¥è‡³äºéš¾ä»¥ç»´æŠ¤ã€‚&lt;/li>
&lt;/ol>
&lt;p>å› æ­¤ï¼Œè¦å®ç°å…¨é“¾è·¯çš„æµé‡è·¯ç”±ç»Ÿä¸€ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é¢å¤–å€ŸåŠ©ä¸€ä¸ªæ›´é€šç”¨çš„&lt;strong>æµé‡æŸ“è‰²&lt;/strong>ä¸&lt;strong>æŸ“è‰²æ ‡è¯†å…¨é“¾è·¯é€ä¼ &lt;/strong>èƒ½åŠ›ã€‚&lt;/p>
&lt;h3 id="æµé‡æŸ“è‰²">æµé‡æŸ“è‰²&lt;/h3>
&lt;blockquote>
&lt;p>æµé‡æŸ“è‰²æ˜¯æŒ‡å¯¹è¯·æ±‚æµé‡æ‰“ä¸Šç‰¹æ®Šæ ‡è¯†ï¼Œå¹¶åœ¨æ•´ä¸ªè¯·æ±‚é“¾è·¯ä¸­æºå¸¦è¿™ä¸ªæ ‡è¯†ï¼Œè€Œæ‰€è°“çš„å…¨é“¾è·¯æ³³é“ï¼Œå°±æ˜¯æ•´ä¸ªé“¾è·¯åŸºäºç»Ÿä¸€çš„ç°åº¦æµé‡æŸ“è‰²æ ‡è¯†æ¥è®¾ç½®æµé‡è·¯ç”±è§„åˆ™ï¼Œä½¿å¾—æµé‡èƒ½å¤Ÿç²¾å‡†æ§åˆ¶åœ¨ä¸åŒæ³³é“ä¸­ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>é€šå¸¸æˆ‘ä»¬ä¼šåœ¨ç½‘å…³å±‚è¿›è¡Œæµé‡æŸ“è‰²ï¼Œé€šå¸¸ä¼šæ ¹æ®åŸå§‹è¯·æ±‚ä¸­çš„å…ƒæ•°æ®ï¼Œæ¥è¿›è¡Œä¸€å®šè§„åˆ™ï¼ˆæ¡ä»¶ã€æ¯”ä¾‹ï¼‰è½¬æ¢æˆå¯¹åº”çš„æŸ“è‰²æ ‡è¯†ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>æŒ‰æ¡ä»¶æŸ“è‰²&lt;/strong>ï¼šå½“è¯·æ±‚å…ƒæ•°æ®æ»¡è¶³ä¸€å®šæ¡ä»¶ä¹‹åï¼Œå°±ç»™å½“å‰è¯·æ±‚æ‰“ä¸ŠæŸ“è‰²æ ‡è¯†ï¼Œå¦‚ï¼šè¯·æ±‚å¤´ä¸­ &lt;code>uid = 100&lt;/code>ã€cookie åŒ¹é…ç­‰ç­‰ã€‚&lt;/li>
&lt;li>&lt;strong>æŒ‰æ¯”ä¾‹æŸ“è‰²&lt;/strong>ï¼šæŒ‰ç…§ä¸€å®šæ¯”ä¾‹ï¼Œç»™è¯·æ±‚æ‰“ä¸ŠæŸ“è‰²æ ‡è¯†ã€‚&lt;/li>
&lt;/ul>
&lt;p>æœ‰äº†ä¸€å¥—ç»Ÿä¸€çš„æµé‡æŸ“è‰²æœºåˆ¶ä¹‹åï¼Œæˆ‘ä»¬é…ç½®è·¯ç”±è§„åˆ™çš„æ—¶å€™ï¼Œå°±ä¸éœ€è¦å…³å¿ƒå…·ä½“çš„ä¸šåŠ¡å±æ€§æ ‡è¯†äº†ï¼Œåªéœ€è¦æ ¹æ®&lt;strong>æŸ“è‰²æ ‡è¯†&lt;/strong>æ¥é…ç½®å³å¯ã€‚&lt;/p>
&lt;p>å°†å…·ä½“çš„ä¸šåŠ¡å±æ€§æŠ½è±¡æˆæ¡ä»¶æŸ“è‰²è§„åˆ™ï¼Œä½¿å…¶æ›´é€šç”¨ï¼Œå³ä½¿ä¸šåŠ¡å±æ€§å‘ç”Ÿäº†å˜åŒ–ï¼Œè·¯ç”±è§„åˆ™ä¹Ÿæ— éœ€å†é¢‘ç¹å˜åŠ¨äº†ã€‚&lt;/p>
&lt;h3 id="æŸ“è‰²æ ‡è¯†å…¨é“¾è·¯é€ä¼ ">æŸ“è‰²æ ‡è¯†å…¨é“¾è·¯é€ä¼ &lt;/h3>
&lt;blockquote>
&lt;p>æŸ“è‰²æ ‡è¯†é€šå¸¸ä¼šä¾é  Tracing Baggage æ¥é€ä¼ ï¼ŒBaggage æ˜¯ç”¨äºåœ¨æ•´ä¸ªé“¾è·¯ä¸­ä¼ é€’ä¸šåŠ¡è‡ªå®šä¹‰ KV å±æ€§ï¼Œä¾‹å¦‚ä¼ é€’æµé‡æŸ“è‰²æ ‡è¯†ã€ä¼ é€’ AccountID ç­‰ä¸šåŠ¡æ ‡è¯†ç­‰ç­‰ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Kitex_Proxyless/4.png" alt="image">&lt;/p>
&lt;p>è¦å®ç°æµé‡æŸ“è‰²æ ‡è¯†åœ¨å…¨é“¾è·¯é€ä¼ ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå€ŸåŠ© Tracing Baggage æœºåˆ¶ï¼Œåœ¨å…¨é“¾è·¯ä¸­ä¼ é€’å¯¹åº”æŸ“è‰²æ ‡è¯†ï¼Œå¤§éƒ¨åˆ† Tracing æ¡†æ¶éƒ½æ”¯æŒ Baggage æ¦‚å¿µæœºèƒ½åŠ›ï¼Œå¦‚ï¼šOpenTelemetryã€Skywalkingã€Jaeger ç­‰ç­‰ã€‚&lt;/p>
&lt;p>æœ‰äº†ä¸€å¥—é€šç”¨çš„å…¨é“¾è·¯é€ä¼ æœºåˆ¶ï¼Œä¸šåŠ¡æ–¹å°±åªéœ€è¦æ¥å…¥ä¸€é tracing å³å¯ï¼Œæ— éœ€æ¯æ¬¡ä¸šåŠ¡å±æ€§æ ‡è¯†å‘ç”Ÿå˜åŒ–å°±é…åˆæ”¹é€ ä¸€æ¬¡ã€‚&lt;/p>
&lt;p>ä¸‹é¢ä¼šå€ŸåŠ©ä¸€ä¸ª&lt;strong>å…·ä½“çš„å·¥ç¨‹æ¡ˆä¾‹&lt;/strong>ä»‹ç»ï¼Œæ¥ä»‹ç»å¹¶æ¼”ç¤ºå¦‚ä½•åŸºäº &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> Proxyless å’Œ OpenTelemetry Baggage å®ç°å…¨é“¾è·¯æ³³é“åŠŸèƒ½ã€‚&lt;/p>
&lt;h2 id="03-æ¡ˆä¾‹ä»‹ç»bookinfo">03 æ¡ˆä¾‹ä»‹ç»ï¼šBookinfo&lt;/h2>
&lt;blockquote>
&lt;p>è¯¥æ¡ˆä¾‹æ˜¯ä½¿ç”¨ &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a>ã€&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> é‡å†™ç»å…¸çš„ &lt;a href="https://istio.io/latest/zh/docs/examples/bookinfo/">Istio Bookinfo&lt;/a> é¡¹ç›®ï¼š&lt;/p>
&lt;ul>
&lt;li>ä½¿ç”¨ istiod æ¥ä½œä¸º &lt;strong>xDS server&lt;/strong>ï¼Œä½œä¸º CRD é…ç½®å’Œä¸‹å‘çš„å…¥å£ï¼›&lt;/li>
&lt;li>ä½¿ç”¨ wire æ¥å®ç°&lt;strong>ä¾èµ–æ³¨å…¥&lt;/strong>ï¼›&lt;/li>
&lt;li>ä½¿ç”¨ opentelemetry æ¥å®ç°&lt;strong>å…¨é“¾è·¯è¿½è¸ª&lt;/strong>ï¼›&lt;/li>
&lt;li>ä½¿ç”¨ &lt;a href="https://github.com/kitex-contrib/xds">Kitex-xds&lt;/a> å’Œ opentelemetry baggage æ¥å®ç° &lt;strong>proxyless&lt;/strong> æ¨¡å¼ä¸‹çš„å…¨é“¾è·¯æ³³é“;&lt;/li>
&lt;li>ä½¿ç”¨ arco-design å’Œ react å®ç°ä¸€ä¸ª &lt;strong>&lt;a href="https://github.com/cloudwego/biz-demo/blob/main/bookinfo/README_CN.md">Bookinfo&lt;/a> UI&lt;/strong>ã€‚&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h3 id="æ¶æ„">æ¶æ„&lt;/h3>
&lt;p>æ•´ä½“æ¶æ„ä¸ &lt;a href="https://github.com/cloudwego/biz-demo/blob/main/bookinfo/README_CN.md">Bookinfo&lt;/a> ä¿æŒä¸€è‡´ï¼Œåˆ†ä¸ºå››ä¸ªå•ç‹¬çš„å¾®æœåŠ¡ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>productpage.&lt;/code> è¿™ä¸ªå¾®æœåŠ¡ä¼šè°ƒ &lt;code>details&lt;/code> å’Œ &lt;code>reviews&lt;/code> ä¸¤ä¸ªå¾®æœåŠ¡ï¼›&lt;/li>
&lt;li>&lt;code>details.&lt;/code> è¿™ä¸ªå¾®æœåŠ¡ä¸­åŒ…å«äº†ä¹¦ç±çš„ä¿¡æ¯ï¼›&lt;/li>
&lt;li>&lt;code>reviews.&lt;/code> è¿™ä¸ªå¾®æœåŠ¡ä¸­åŒ…å«äº†ä¹¦ç±ç›¸å…³çš„è¯„è®ºã€‚å®ƒè¿˜ä¼šè°ƒç”¨ &lt;code>ratings&lt;/code> å¾®æœåŠ¡ï¼›&lt;/li>
&lt;li>&lt;code>ratings.&lt;/code> è¿™ä¸ªå¾®æœåŠ¡ä¸­åŒ…å«äº†ç”±ä¹¦ç±è¯„ä»·ç»„æˆçš„è¯„çº§ä¿¡æ¯ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;code>reviews&lt;/code> å¾®æœåŠ¡æœ‰ 3 ä¸ªç‰ˆæœ¬ï¼š&lt;/p>
&lt;ul>
&lt;li>v1 ç‰ˆæœ¬ä¼šè°ƒç”¨ &lt;code>ratings&lt;/code> æœåŠ¡ï¼Œå¹¶ä½¿ç”¨ 1 é¢— â­ï¸ æ˜¾ç¤ºè¯„åˆ†ï¼›&lt;/li>
&lt;li>v2 ç‰ˆæœ¬ä¼šè°ƒç”¨ &lt;code>ratings&lt;/code> æœåŠ¡ï¼Œå¹¶ä½¿ç”¨ 5 é¢— â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸ æ˜¾ç¤ºè¯„åˆ†ï¼›&lt;/li>
&lt;li>v3 ç‰ˆæœ¬ä¸ä¼šè°ƒç”¨ &lt;code>ratings&lt;/code> æœåŠ¡ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Kitex_Proxyless/5.png" alt="image">&lt;/p>
&lt;h3 id="æ³³é“ç¤ºæ„å›¾">æ³³é“ç¤ºæ„å›¾&lt;/h3>
&lt;p>æ•´ä½“åŒºåˆ†æˆ 2 ä¸ªæ³³é“ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>åŸºå‡†æ³³é“&lt;/strong>ï¼šæœªè¢«æŸ“è‰²çš„æµé‡ä¼šè¢«è·¯ç”±åˆ°åŸºå‡†æ³³é“ä¸­ã€‚&lt;/li>
&lt;li>&lt;strong>åˆ†æ”¯æ³³é“&lt;/strong>ï¼šè¢«æŸ“è‰²çš„æµé‡ä¼šè¢«è·¯ç”±åˆ° reviews-v2 -&amp;gt;ratings-v2 çš„åˆ†æ”¯æ³³é“ä¸­ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Kitex_Proxyless/6.png" alt="image">&lt;/p>
&lt;h3 id="æµé‡æŸ“è‰²-1">æµé‡æŸ“è‰²&lt;/h3>
&lt;p>ç½‘å…³ç»Ÿä¸€è´Ÿè´£å¯¹æµé‡è¿›è¡ŒæŸ“è‰²ï¼Œä¾‹å¦‚è¯·æ±‚ header ä¸­ uid=100 çš„æµé‡éƒ½ç»Ÿä¸€è¿›è¡ŒæŸ“è‰²ï¼Œä¸ºè¯·æ±‚æºå¸¦ä¸Š &lt;code>env=dev&lt;/code> çš„ &lt;strong>baggage&lt;/strong>ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Kitex_Proxyless/7.png" alt="image">&lt;/p>
&lt;p>æŸ“è‰²æ–¹å¼å¯ä»¥æ ¹æ®ä¸åŒçš„ç½‘å…³å®ç°å…·ä½“é€‰æ‹©ï¼Œä¾‹å¦‚å½“æˆ‘ä»¬é€‰æ‹© istio ingress ä½œä¸ºç½‘å…³çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ© &lt;code>EnvoyFilter&lt;/code> + &lt;code>Lua&lt;/code> çš„æ–¹å¼æ¥ç¼–å†™ç½‘å…³æŸ“è‰²è§„åˆ™ã€‚&lt;/p>
&lt;h3 id="ä¸ºæœåŠ¡å®ä¾‹æ‰“æ ‡">ä¸ºæœåŠ¡å®ä¾‹æ‰“æ ‡&lt;/h3>
&lt;ol>
&lt;li>ä¸ºå¯¹åº” &lt;strong>workload&lt;/strong> æ‰“ä¸Šå¯¹åº” version æ ‡è¯†ã€‚&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>ä»¥ reviews ä¸ºä¾‹ï¼Œåªéœ€è¦ç»™å¯¹åº” pod æ‰“ä¸Š version: v1 çš„ label å³å¯ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Kitex_Proxyless/8.png" alt="image">&lt;/p>
&lt;ol start="2">
&lt;li>åŸºäº &lt;strong>DestinationRule&lt;/strong> ä¸ºæœåŠ¡è®¾ç½®ä¸€ç³»åˆ—çš„ subsetsï¼š&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;ul>
&lt;li>Productpage: v1&lt;/li>
&lt;li>Reviews: v1ã€v2ã€v3&lt;/li>
&lt;li>Ratings: v1ã€v2&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Kitex_Proxyless/9.png" alt="image">&lt;/p>
&lt;h3 id="æµé‡è·¯ç”±è§„åˆ™">æµé‡è·¯ç”±è§„åˆ™&lt;/h3>
&lt;p>ç½‘å…³å·²ç»å°†è¯·æ±‚å¤´ä¸­æºå¸¦äº† &lt;code>uid=100&lt;/code> çš„æµé‡è¿›è¡Œäº†æŸ“è‰²ï¼Œè‡ªåŠ¨å¸¦ä¸Šäº† &lt;code>env=dev&lt;/code> çš„ baggageï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦æ ¹æ® header è¿›è¡Œè·¯ç”±åŒ¹é…å³å¯ï¼Œä¸‹é¢æ˜¯å…·ä½“çš„è·¯ç”±è§„åˆ™é…ç½®ç¤ºä¾‹ï¼š&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Kitex_Proxyless/10.png" alt="image">&lt;/p>
&lt;h3 id="æŸ¥çœ‹æ•ˆæœ">æŸ¥çœ‹æ•ˆæœ&lt;/h3>
&lt;h4 id="åŸºå‡†æ³³é“">åŸºå‡†æ³³é“&lt;/h4>
&lt;p>å…¥å£æµé‡è¯·æ±‚å¤´ä¸­ä¸å¸¦ &lt;code>uid=100&lt;/code> çš„è¯·æ±‚ï¼Œä¼šè‡ªåŠ¨è·¯ç”±åˆ°åŸºå‡†æ³³é“æœåŠ¡ï¼Œreviews v1 å’Œ v3 æœåŠ¡é—´è½®è¯¢ï¼Œå±•ç¤ºçš„æ•ˆæœæ˜¯è¯„åˆ†ä¸º 0 æˆ– 1 éšæœºã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Kitex_Proxyless/11.png" alt="image">&lt;/p>
&lt;h4 id="åˆ†æ”¯æ³³é“">åˆ†æ”¯æ³³é“&lt;/h4>
&lt;ol>
&lt;li>æˆ‘ä»¬è¿™è¾¹é€šè¿‡æµè§ˆå™¨ mod-header æ’ä»¶ï¼Œæ¥æ¨¡æ‹Ÿå…¥å£æµé‡è¯·æ±‚å¤´ä¸­æºå¸¦äº† &lt;code>uid=100&lt;/code> çš„åœºæ™¯ã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Kitex_Proxyless/12.png" alt="image">&lt;/p>
&lt;ol start="2">
&lt;li>å†ç‚¹å‡»åˆ·æ–°æŒ‰é’®ï¼Œå¯ä»¥å‘ç°è¯·æ±‚æ‰“åˆ°äº†åˆ†æ”¯æ³³é“ï¼Œæµé‡æ³³é“åŠŸèƒ½æˆåŠŸç”Ÿæ•ˆã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/Kitex_Proxyless/13.png" alt="image">&lt;/p>
&lt;h2 id="04-æ€»ç»“ä¸å±•æœ›">04 æ€»ç»“ä¸å±•æœ›&lt;/h2>
&lt;p>è‡³æ­¤æˆ‘ä»¬å·²ç»åŸºäº &lt;strong>&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> Proxyless&lt;/strong> ä¸ &lt;strong>OpenTelemetry&lt;/strong> å®ç°äº†ä¸€ä¸ªå®Œæ•´çš„å…¨é“¾è·¯æ³³é“ï¼Œå¹¶ä¸”æ— éœ€å€ŸåŠ© Envoy sidecarï¼Œå°±èƒ½åŸºäº Isito æ ‡å‡†æ²»ç†è§„åˆ™ Specï¼Œæ¥ä¸º Kitex è®¾ç½®å¯¹åº”çš„è·¯ç”±è§„åˆ™äº†ã€‚&lt;/p>
&lt;p>å½“ç„¶ï¼Œé™¤äº†æ»¡è¶³&lt;strong>æµé‡è·¯ç”±&lt;/strong>èƒ½åŠ›ä¹‹å¤–ï¼Œ&lt;strong>&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> Proxyless&lt;/strong> ä¹Ÿåœ¨æŒç»­è¿­ä»£ä¼˜åŒ–ï¼Œæ»¡è¶³æ›´å¤šæ•°æ®é¢æ²»ç†èƒ½åŠ›éœ€æ±‚ã€‚Proxyless ä½œä¸ºä¸€ç§ ServiceMesh æ•°æ®é¢æ¢ç´¢å’Œå®è·µï¼Œé™¤äº†èƒ½å¤Ÿä¸°å¯Œç½‘æ ¼æ•°æ®é¢éƒ¨ç½²å½¢æ€ä¹‹å¤–ï¼Œä¹Ÿå¸Œæœ›å¯ä»¥ä¸æ–­æ‰“ç£¨ &lt;strong>&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a>&lt;/strong>ï¼Œå¢å¼ºå…¶åœ¨å¼€æºç”Ÿæ€å…¼å®¹æ–¹é¢çš„èƒ½åŠ›ï¼Œæ‰“é€ ä¸€ä¸ªå¼€æ”¾åŒ…å®¹çš„å¾®æœåŠ¡ç”Ÿæ€ä½“ç³»ã€‚&lt;/p>
&lt;h2 id="05-ç›¸å…³é¡¹ç›®é“¾æ¥">05 ç›¸å…³é¡¹ç›®é“¾æ¥&lt;/h2>
&lt;p>ä¸‹é¢æ˜¯è¯¥æ¡ˆä¾‹æ¶‰åŠçš„é¡¹ç›®æ¸…å•ï¼š&lt;/p>
&lt;ul>
&lt;li>biz-demo: &lt;a href="https://github.com/cloudwego/biz-demo">https://github.com/cloudwego/biz-demo&lt;/a>&lt;/li>
&lt;li>kitex: &lt;a href="https://github.com/cloudwego/kitex">https://github.com/cloudwego/kitex&lt;/a>&lt;/li>
&lt;li>hertz: &lt;a href="https://github.com/cloudwego/hertz">https://github.com/cloudwego/hertz&lt;/a>&lt;/li>
&lt;li>kitex-xds: &lt;a href="https://github.com/kitex-contrib/xds">https://github.com/kitex-contrib/xds&lt;/a>&lt;/li>
&lt;li>kitex-opentelemetry: &lt;a href="https://github.com/kitex-contrib/obs-opentelemetry">https://github.com/kitex-contrib/obs-opentelemetry&lt;/a>&lt;/li>
&lt;li>hertz-opentelemetry: &lt;a href="https://github.com/hertz-contrib/obs-opentelemetry">https://github.com/hertz-contrib/obs-opentelemetry&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>è¯¥å®Œæ•´æ¡ˆä¾‹å·²æäº¤åœ¨ &lt;a href="https://github.com/cloudwego/biz-demo">biz-demo&lt;/a> ä»“åº“ä¸­ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥å‰å¾€æŸ¥é˜…ã€‚&lt;a href="https://github.com/cloudwego/biz-demo">biz-demo&lt;/a> ä¼šåŒ…å«ä¸€äº›åŸºäº &lt;a href="https://github.com/cloudwego">CloudWeGo&lt;/a> æŠ€æœ¯æ ˆä¸”å…·å¤‡ä¸€å®šä¸šåŠ¡åœºæ™¯çš„å®Œæ•´ Demoï¼Œåˆè¡·æ˜¯èƒ½å¤Ÿä¸ºä¼ä¸šç”¨æˆ·åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨æä¾›æœ‰ä»·å€¼çš„å‚è€ƒï¼Œéå¸¸æ¬¢è¿æ›´å¤šåŒå­¦èƒ½å¤Ÿå‚ä¸åˆ° &lt;a href="https://github.com/cloudwego">CloudWeGo&lt;/a> ç›¸å…³åœºæ™¯ä¸æ¡ˆä¾‹çš„è´¡çŒ®ä¸­æ¥ï¼Œä¸€èµ·æ¥åšä¸€äº›æœ‰æ„æ€çš„å°è¯•ã€‚&lt;/p></description></item><item><title>Blog: Kitex v0.4.3 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2022/11/02/kitex-v0.4.3-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Wed, 02 Nov 2022 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2022/11/02/kitex-v0.4.3-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;h2 id="é‡è¦å˜æ›´ä»‹ç»">é‡è¦å˜æ›´ä»‹ç»&lt;/h2>
&lt;h3 id="åŠŸèƒ½">åŠŸèƒ½&lt;/h3>
&lt;ol>
&lt;li>&lt;strong>æ‰©å±• client/server ç”Ÿæˆæ¨¡æ¿&lt;/strong> ï¼šæ–°å¢ client/server æ¨¡æ¿æ‰©å±•åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡é…ç½®å®šåˆ¶ï¼Œé€‚ç”¨äºç»Ÿä¸€å®šåˆ¶ suite åœºæ™¯ï¼Œè¯¦è§&lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/code-gen/template_extension/">æ‰©å±• Service ä»£ç ç”Ÿæˆæ¨¡æ¿&lt;/a>ã€‚&lt;/li>
&lt;li>&lt;strong>ä¸šåŠ¡å¼‚å¸¸&lt;/strong> ï¼šæ–°å¢ä¸šåŠ¡è‡ªå®šä¹‰å¼‚å¸¸æ”¯æŒï¼Œå¯åŒºåˆ†äº RPC å¼‚å¸¸è¿”å› errorï¼Œä½¿ç”¨è¯¦è§&lt;a href="https://www.cloudwego.io/zh/docs/kitex/tutorials/basic-feature/bizstatuserr/">ä¸šåŠ¡å¼‚å¸¸&lt;/a>ï¼ŒèƒŒæ™¯è¯¦è§&lt;a href="https://github.com/cloudwego/kitex/issues/511">Proposal&lt;/a>ã€‚&lt;/li>
&lt;li>&lt;strong>è¯·æ±‚ Profiler&lt;/strong> ï¼šæ–°å¢åŠŸèƒ½å¯ç”¨äºä¸ºä¸åŒçš„ RPC è¯·æ±‚æä¾›æˆæœ¬åˆ†æç»Ÿè®¡çš„èƒ½åŠ›ã€‚&lt;/li>
&lt;li>&lt;strong>Context Middleware&lt;/strong> : æ–°å¢ Context Middlewareï¼Œç”¨äºè¯·æ±‚ç²’åº¦æ·»åŠ  Middlewareã€‚&lt;/li>
&lt;/ol>
&lt;h3 id="ä¼˜åŒ–">ä¼˜åŒ–&lt;/h3>
&lt;ol>
&lt;li>&lt;strong>Frugal æ€§èƒ½ä¼˜åŒ–&lt;/strong> ï¼šæ”¯æŒåœ¨åˆ›å»º Client/Server é˜¶æ®µè¿›è¡Œ Frugal â€œé¢„ç¼–è¯‘â€ï¼Œå‡å°‘åŠ¨æ€ç¼–è¯‘å¯¹å»¶è¿Ÿçš„å½±å“ã€‚&lt;/li>
&lt;li>&lt;strong>è¿æ¥æ± ä¼˜åŒ–&lt;/strong> ï¼šé‡æ„è¿æ¥æ± ï¼Œå®Œå–„ç©ºé—²è¿æ¥æ¸…ç†èƒ½åŠ›ã€‚&lt;/li>
&lt;/ol>
&lt;hr>
&lt;h2 id="è¯¦ç»†å˜æ›´">è¯¦ç»†å˜æ›´&lt;/h2>
&lt;h3 id="feature">Feature&lt;/h3>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/691">#691&lt;/a>] feat(client): ä¸º Client æ·»åŠ ä¸Šä¸‹æ–‡ä¸­é—´ä»¶ï¼Œç”¨äºè¯·æ±‚ç²’åº¦æ·»åŠ ä¸­é—´ä»¶ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/649">#649&lt;/a>] feat(connpool): é•¿è¿æ¥æ± çš„æ–°å®ç°ï¼Œæ”¯æŒæœ€å°ç©ºé—²è¿æ¥æ•°åŠç©ºé—²è¿æ¥æ¸…ç†ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/672">#672&lt;/a>] feat(grpc): ä¸º kitex grpc æ·»åŠ äº†å…ƒä¿¡æ¯ä¼ é€’ç›¸å…³ apiï¼ŒåŒ…æ‹¬ headerï¼Œtailerï¼Œä»¥åŠ peer è¿œç«¯åœ°å€çš„è·å–æ¥å£ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/613">#613&lt;/a>] feat(exception): æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰å¼‚å¸¸ç”¨ä»¥åŒºåˆ† RPC å¼‚å¸¸ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/670">#670&lt;/a>] feat(exception): æ”¯æŒ DetailError æ ¼å¼åŒ–ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/678">#678&lt;/a>] feat(tool): ä¸º kitex cmd æ·»åŠ  git å’Œ record å‚æ•°ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/662">#662&lt;/a>] feat(tool): æ”¯æŒåœ¨åˆ›å»º client æˆ–è€… server çš„æ—¶å€™è¿›è¡Œ frugal â€œé¢„ç¼–è¯‘â€ (pretouch)ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/657">#657&lt;/a>] feat(tool): æ”¯æŒæ¨¡æ¿æ‹“å±•ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/527">#527&lt;/a>] feat(profiler): ä¸ºä¸åŒçš„ RPC è¯·æ±‚æä¾›æˆæœ¬åˆ†æç»Ÿè®¡çš„èƒ½åŠ›ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="optimize">Optimize&lt;/h3>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/690">#690&lt;/a>] optimize(meta): ç§»é™¤ #503 æ·»åŠ  default metahandler çš„é”™è¯¯é€»è¾‘ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/638">#638&lt;/a>] optimize(generic): httppb æ³›åŒ–æ”¯æŒ map/list å…ƒç´ ç±»å‹ä¸º structã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/641">#641&lt;/a>] optimize(tool): ç»™ oneway æ–¹æ³•å¢åŠ è­¦å‘Šæ³¨é‡Šã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="fix">Fix&lt;/h3>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/611">#611&lt;/a>] fix(client): åœ¨é¢‘ç¹é‡å¤åˆ›å»º Client åœºæ™¯ä¸‹ï¼Œä¿®å¤ç”±äº finalizer æœªè§¦å‘æ‰§è¡Œå¯¼è‡´çš„èµ„æºæ³„æ¼ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/698">#698&lt;/a>] fix(connpool): æ ¹æ® Get è¿”å›çš„è¿æ¥æ•°å‡å°‘å€¼æ¥è°ƒæ•´ globalIdleã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/636">#636&lt;/a>] fix(connpool): ä¿®å¤å½“è¿æ¥æ± åœ¨ &lt;code>ForwardProxy&lt;/code> å®ç°ä¸­è¢«é‡ç½®åï¼Œè¿æ¥æ± çš„ CloseCallbackã€ç»Ÿè®¡ä¸ŠæŠ¥å¤±æ•ˆçš„é—®é¢˜ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/647">#647&lt;/a>] fix(grpc): ä¿®å¤ grpc è¿æ¥çº§åˆ«çª—å£åˆå§‹åŒ–æ—¶æ²¡æœ‰é€šçŸ¥å¯¹ç«¯çš„é—®é¢˜ï¼Œå¹¶åŒæ­¥äº† grpc pr #5459ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/639">#639&lt;/a>] fix(generic): æ³›åŒ–è°ƒç”¨æ”¯æŒ list&lt;byte> ç±»å‹ï¼Œmap è¯»æ³›åŒ–å¢åŠ  forJSON é€‰é¡¹ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/655">#655&lt;/a>] fix(generic): æ•°å€¼å‹å¸¸é‡ä½œä¸ºæ³›åŒ–é»˜è®¤å€¼æ—¶æ— æ³•è¢«æ­£ç¡®è§£æã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/654">#654&lt;/a>] fix(frugal): ä¿®å¤è¾ƒä½ç‰ˆæœ¬ go ç¼–è¯‘å¤±è´¥çš„é—®é¢˜ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/682">#682&lt;/a>] fix(profiler): ä¿®å¤ profiler åœæ­¢ pprof profile é‡‡é›†çš„é—®é¢˜ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/637">#637&lt;/a>] fix(tool): ä¿®å¤ handler.go æ¨¡æ¿é‡Œçš„ importsã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/630">#630&lt;/a>] fix(tool): å¯¹äºæ²¡æœ‰å£°æ˜ â€œserviceâ€ çš„ pb æ–‡ä»¶ï¼Œå»æ‰ç”Ÿæˆæ–‡ä»¶æœ«å°¾å†—ä½™çš„ kitex å£°æ˜ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/627">#627&lt;/a>] fix(tool): ä¿®å¤å½“ä¸€ä¸ª import æ‹¥æœ‰ä¸åŒçš„åˆ«åæ—¶ import ä¼šä¸¢å¤±çš„é—®é¢˜ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="refactor">Refactor&lt;/h3>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/651">#651&lt;/a>] refactor(server): é‡æ„ server trans handler çš„ read/write æ¥å£ï¼Œè¿”å›æ–°çš„ contextã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="docs">Docs&lt;/h3>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/656">#656&lt;/a>] docs: åˆ é™¤ CONTRIBUTING æ–‡æ¡£ä¸­çš„é”™è¯¯ä¿¡æ¯ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/683">#683&lt;/a>] docs(kerrors): ä¿®æ”¹äº† kerrors WithCauseAndExtraMsg æ–¹æ³•æ³¨é‡Šã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/625">#625&lt;/a>] chore: ä¿®æ­£ pull request æ¨¡æ¿çš„è¯­æ³•é—®é¢˜ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/623">#623&lt;/a>] chore: ä¿®æ”¹ pull request æ¨¡æ¿ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="test--ci">Test &amp;amp; CI&lt;/h3>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/646">#646&lt;/a>] test: ä¿®å¤ InitRPCInfoFunc æœªè®¾ç½® rpcinfo å¯¼è‡´çš„å•æµ‹å¤±è´¥ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/680">#680&lt;/a>] test: ä¿®å¤é‡è¯•å•æµ‹çš„ race é—®é¢˜ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/661">#661&lt;/a>] test: å¢å¼º wpool æµ‹è¯•ç¨³å®šæ€§ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/643">#643&lt;/a>] test: ä¸º detection server handler æ·»åŠ æµ‹è¯•ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/632">#632&lt;/a>] test: ç”¨ gomock è‡ªåŠ¨ç”Ÿæˆç±»æ›¿æ¢æ‰‹åŠ¨ç¼–å†™çš„ mock ç±»ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/697">#697&lt;/a>] chore(ci): å›ºå®š skywalking-eyes ç‰ˆæœ¬å·ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/652">#652&lt;/a>] chore(ci): åˆ é™¤é‡å¤çš„æµ‹è¯•ï¼Œä»¥å‡å°‘å•æµ‹æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/kitex/pull/588">#588&lt;/a>] chore(ci): æ”¯æŒ codecovã€‚&lt;/li>
&lt;/ul></description></item><item><title>Blog: Hertz v0.4.0 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2022/10/28/hertz-v0.4.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Fri, 28 Oct 2022 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2022/10/28/hertz-v0.4.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;h2 id="feature">Feature&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/289">#289&lt;/a>] feat: render æ”¯æŒ IndentedJSONã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/304">#304&lt;/a>] feat: recovery ä¸­é—´ä»¶æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰é”™è¯¯è¾“å‡ºæ ¼å¼ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/278">#278&lt;/a>] feat: å¢åŠ ç¼–è¯‘ tag æ§åˆ¶å®é™…ä½¿ç”¨çš„ json åº“ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/239">#239&lt;/a>] feat: ç»™ client æ‰©å±•å¤æ‚é‡è¯•èƒ½åŠ›ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/265">#265&lt;/a>] feat: åœ¨æ ‡å‡†ç½‘ç»œåº“æ‰©å±•ä¸Šæ·»åŠ  CloseNoResetBuffer æ–¹æ³•ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/258">#258&lt;/a>] feat: æ”¯æŒ &lt;code>errors&lt;/code> çš„æ ¼å¼åŒ–ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="optimize">Optimize&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/295">#295&lt;/a>] optimize: æœåŠ¡ç«¯å¿½ç•¥å®¢æˆ·ç«¯ä¸»åŠ¨æ–­è¿çš„å†™é”™è¯¯ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/322">#322&lt;/a>] optimize: ä¿®æ”¹ recovery ä¸­é—´ä»¶çš„é»˜è®¤æ—¥å¿—ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/266">#266&lt;/a>] optimize(hlog): åŒºåˆ†ç³»ç»Ÿæ—¥å¿—å’Œé»˜è®¤æ—¥å¿—ï¼Œæä¾›æ›´è‡ªç”±çš„ logger å®šåˆ¶åŒ–èƒ½åŠ›ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/280">#280&lt;/a>] optimize: ä½¿ç”¨æ ‡å‡†åº“æ—¶ listen å‰æ·»åŠ æ—¥å¿—ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="refactor">Refactor&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/318">#318&lt;/a>] refactor: æ·»åŠ  SetRetryIf ä¿æŒå…¼å®¹ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="test">Test&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/299">#299&lt;/a>] test: æé«˜å¯¹ &lt;code>hertz/pkg/protocol/header&lt;/code> çš„å•æµ‹è¦†ç›–ç‡ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/290">#290&lt;/a>] test: ä¸º &lt;code>pkg/app/server/option.go&lt;/code> è¡¥å……å•å…ƒæµ‹è¯•ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/274">#274&lt;/a>] test: å¢åŠ  internal/bytesconv åŒ…æµ‹è¯•è¦†ç›–ç‡ï¼Œè¦†ç›–ç‡ä» 1.68% æé«˜åˆ°äº† 82.35%ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/285">#285&lt;/a>] test: ç»™ &lt;code>pkg/protocol/request.go&lt;/code> æ–‡ä»¶å•æµ‹è¦†ç›–ç‡ 51.31% æé«˜åˆ° 85.3%ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/271">#271&lt;/a>] test: ä¸º &lt;code>pkg/network&lt;/code> è¡¥å……å•å…ƒæµ‹è¯•ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/264">#264&lt;/a>] test: å¢åŠ å¯¹ &lt;code>hertz/pkg/common/adaptor&lt;/code> çš„å•æµ‹ï¼Œè¦†ç›–ç‡ä» 76.6% æé«˜åˆ°äº† 92.3%ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/267">#267&lt;/a>] test(pkg/common/config): å¢åŠ  pkg/common/config åŒ…æµ‹è¯•è¦†ç›–ç‡ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="docs">Docs&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/328">#328&lt;/a>] docs: æ·»åŠ  lark æ‰©å±•åˆ° readme.mdã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/325">#325&lt;/a>] docs: æ›´æ–° README å’Œ README_cn çš„æ€§èƒ½æ•°æ®ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/307">#307&lt;/a>] docs(README): å°† Hertz æ‰©å±•æ·»åŠ åˆ° readme åˆ—è¡¨ä¸­ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="style">Style&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/316">#316&lt;/a>] style: å»æ‰ license é¡¶å±‚çš„ç©ºæ³¨é‡Šã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="chore">Chore&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/272">#272&lt;/a>] chore: æ›´æ–° sonic ç‰ˆæœ¬ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/310">#310&lt;/a>] chore: ä¿®æ”¹æ³¨é‡Šä¿¡æ¯ä¸ºè¡Œæ³¨é‡Šé¿å… buildtag æ ¼å¼é—®é¢˜çš„å¯¼è‡´ ci æŠ¥é”™ã€‚&lt;/li>
&lt;/ul></description></item><item><title>Blog: Volo v0.2.1 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2022/10/26/volo-v0.2.1-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Wed, 26 Oct 2022 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2022/10/26/volo-v0.2.1-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/volo/pull/61">#61&lt;/a>] ä¼˜åŒ–äº† Volo-Thrift çš„ä»£ç ï¼Œç§»é™¤äº†ä¸€äº›ä¸å¿…è¦çš„æ³›å‹å‚æ•°ï¼Œç®€åŒ–ä»£ç ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/volo/pull/63">#63&lt;/a>] è·Ÿè¿›äº† 2022-10-20 å nightly ç¼–è¯‘å™¨ä¸å†å…è®¸ TAIT elition lifetime çš„é—®é¢˜ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/volo/pull/73">#73&lt;/a>] ç»•è¿‡äº† Rust ç¼–è¯‘å™¨çš„ #100013 issue: non-defining opaque type use in defining scopeã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/volo/pull/65">#65&lt;/a>] feat: å‡çº§ Volo-cli çš„ clap ç‰ˆæœ¬åˆ° 4.xã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/volo/pull/72">#72&lt;/a>] feat: ä¸º volo::net::Conn æ”¯æŒäº† writev æ“ä½œã€‚&lt;/li>
&lt;/ul></description></item><item><title>Blog: Volo v0.2.0 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2022/10/18/volo-v0.2.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Tue, 18 Oct 2022 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2022/10/18/volo-v0.2.0-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;h2 id="feature">Feature&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/volo/pull/31">#31&lt;/a>] æ”¯æŒ Windowsã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/volo/pull/26">#26&lt;/a>] volo-grpc å¢åŠ å¯¹ service discovery å’Œ load balance çš„æ”¯æŒã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/volo/pull/45">#45&lt;/a>] volo-grpc æ”¯æŒ udsã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/volo/pull/32">#32&lt;/a>] volo-grpc æ”¯æŒ metainfo è¿›è¡Œå…ƒä¿¡æ¯ä¼ é€’ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/volo/pull/30">#30&lt;/a>] volo-grpc Server å¢åŠ  &lt;code>layer_front&lt;/code> æ–¹æ³•ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/volo/pull/42">#42&lt;/a>] volo-thrift æ”¯æŒ multiplexã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="optimize">Optimize&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/volo/pull/53">#53&lt;/a>] ä¼˜åŒ– &lt;code>write_field_begin&lt;/code> å‡½æ•°ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="fix">Fix&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/volo/pull/34">#34&lt;/a>] ä¿®å¤è¿æ¥è¶…æ—¶è®¾ç½®ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/volo/pull/46">#46&lt;/a>] å¢åŠ å¯¹å¯é‡è¯•é”™è¯¯çš„åˆ¤æ–­ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/volo/pull/33">#33&lt;/a>] volo-grpc ä¿®å¤å¯¹ Error ç±»å‹çš„çº¦æŸã€‚&lt;/li>
&lt;/ul></description></item><item><title>Blog: åŠ©åŠ›å­—èŠ‚é™æœ¬å¢æ•ˆï¼Œå¤§è§„æ¨¡ä¼ä¸šçº§ HTTP æ¡†æ¶ Hertz è®¾è®¡å®è·µ</title><link>https://www.cloudwego.io/zh/blog/2022/09/27/%E5%8A%A9%E5%8A%9B%E5%AD%97%E8%8A%82%E9%99%8D%E6%9C%AC%E5%A2%9E%E6%95%88%E5%A4%A7%E8%A7%84%E6%A8%A1%E4%BC%81%E4%B8%9A%E7%BA%A7-http-%E6%A1%86%E6%9E%B6-hertz-%E8%AE%BE%E8%AE%A1%E5%AE%9E%E8%B7%B5/</link><pubDate>Tue, 27 Sep 2022 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2022/09/27/%E5%8A%A9%E5%8A%9B%E5%AD%97%E8%8A%82%E9%99%8D%E6%9C%AC%E5%A2%9E%E6%95%88%E5%A4%A7%E8%A7%84%E6%A8%A1%E4%BC%81%E4%B8%9A%E7%BA%A7-http-%E6%A1%86%E6%9E%B6-hertz-%E8%AE%BE%E8%AE%A1%E5%AE%9E%E8%B7%B5/</guid><description>
&lt;h2 id="å­—èŠ‚è·³åŠ¨å†…éƒ¨-go-http-æ¡†æ¶çš„å˜è¿">å­—èŠ‚è·³åŠ¨å†…éƒ¨ Go HTTP æ¡†æ¶çš„å˜è¿&lt;/h2>
&lt;p>åœ¨æ­£å¼å¼€å§‹ä»‹ç»ç¬¬ä¸€éƒ¨åˆ†çš„å†…å®¹ä¹‹å‰ï¼Œå…ˆå±•ç¤ºä¸€ç»„å…³é”®è¯ã€‚2020 å¹´åˆ &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> ç«‹é¡¹ï¼Œ2020 å¹´ 10 æœˆï¼Œ&lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> å‘å¸ƒ&lt;strong>ç¬¬ä¸€ä¸ªå¯ç”¨ç‰ˆæœ¬&lt;/strong> ã€‚
&lt;strong>2022 å¹´ 6 æœˆï¼Œ&lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> æ­£å¼å¼€æºã€‚&lt;/strong> æˆªè‡³ç›®å‰ï¼Œ&lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> åœ¨å­—èŠ‚å†…éƒ¨å·²ç»æ”¯æ’‘&lt;strong>è¶…è¿‡ 1.4 ä¸‡ä¸ªä¸šåŠ¡æœåŠ¡&lt;/strong> ï¼Œ &lt;strong>æ—¥å³°å€¼ QPS è¶…è¿‡ 5000 ä¸‡&lt;/strong> ã€‚&lt;/p>
&lt;p>&lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> ä¸ä»…æ”¯æŒä¸šåŠ¡æœåŠ¡ï¼ŒåŒæ—¶è¿˜ä¼šæ¨ªå‘æ”¯æŒå­—èŠ‚å†…éƒ¨çš„å„ç§åŸºç¡€ç»„ä»¶ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºå­—èŠ‚è·³åŠ¨æœåŠ¡ç½‘æ ¼æ§åˆ¶é¢ã€å…¬å¸çº§åˆ«å‹æµ‹å¹³å°ä»¥åŠ FaaSï¼Œè¿˜åŒ…æ‹¬å„ç§ä¸šåŠ¡ç½‘å…³ç­‰ç­‰ã€‚
&lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> çš„é«˜æ€§èƒ½å’Œæå¼ºçš„ç¨³å®šæ€§å¯ä»¥æ”¯æ’‘ä¸šåŠ¡å¤æ‚å¤šå˜çš„åœºæ™¯ã€‚åœ¨å…¬å¸å†…éƒ¨ &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> æ¥æ›¿äº†å¤§é‡åŸºäº Gin æ¡†æ¶å¼€å‘çš„å­˜é‡æœåŠ¡ï¼Œå¤§å¹…åº¦é™ä½äº†ä¸šåŠ¡èµ„æºä½¿ç”¨æˆæœ¬ä»¥åŠæœåŠ¡å»¶æ—¶ï¼ŒåŠ©åŠ›å…¬å¸å±‚é¢çš„é™æœ¬å¢æ•ˆã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_HTTP_Hertz/1.png" alt="image">&lt;/p>
&lt;p>ä¸‹é¢æˆ‘ä»¬å¯ä»¥ä» &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> å‡ºç°çš„èƒŒæ™¯ä»¥åŠ &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> çš„è®¾è®¡ç›®æ ‡å’Œæ€è·¯ä½“ä¼šåˆ°ï¼Œ&lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> çš„å‡ºç°ç»ä¸æ˜¯å¶ç„¶ã€‚&lt;/p>
&lt;h3 id="åŸºäº-gin-å°è£…">åŸºäº Gin å°è£…&lt;/h3>
&lt;p>ä¼—æ‰€å‘¨çŸ¥ï¼Œå­—èŠ‚å†…éƒ¨ä½¿ç”¨ Golang æ¯”è¾ƒæ—©ï¼Œåœ¨å¤§çº¦ 2014 å¹´å·¦å³ï¼Œå…¬å¸å°±å·²ç»å¼€å§‹å°è¯•åšä¸€äº› Golang ä¸šåŠ¡çš„è½¬å‹ã€‚2016 å¹´ï¼Œæˆ‘ä»¬åŸºäºå·²å¼€æºçš„ Golang HTTP æ¡†æ¶ Gin æ¡†æ¶ï¼Œå°è£…äº† Ginexï¼Œè¿™æ˜¯ Ginex åˆšå¼€å§‹å‡ºç°çš„æ—¶æœŸã€‚&lt;/p>
&lt;p>åŒæ—¶ï¼Œ2016 å¹´è¿˜æ˜¯ä¸€ä¸ªå¼€è’çš„æ—¶ä»£ï¼Œè¿™ä¸ªæ—¶æœŸæ¡†æ¶ä¼´éšç€ä¸šåŠ¡å¿«é€Ÿé‡è›®åœ°ç”Ÿé•¿ï¼Œæˆ‘ä»¬çš„å£å·æ˜¯â€œå¤§åŠ›å‡ºå¥‡è¿¹â€ï¼ŒæŠŠä¼˜å…ˆè§£å†³ä¸šåŠ¡éœ€æ±‚ä½œä¸ºç¬¬ä¸€è¦åŠ¡ã€‚Ginex çš„è¿­ä»£æ–¹å¼æ˜¯ä¸šåŠ¡ä¾§å’Œæ¡†æ¶ä¾§åœ¨åŒä¸€ä¸ªä»“åº“é‡Œé¢å…±åŒç»´æŠ¤å’Œè¿­ä»£ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_HTTP_Hertz/2.png" alt="image">&lt;/p>
&lt;h3 id="é—®é¢˜æ˜¾ç°">é—®é¢˜æ˜¾ç°&lt;/h3>
&lt;p>2017 - 2019 å¹´æœŸé—´ï¼Œä¹Ÿå°±æ˜¯ Ginex å‘å¸ƒä¹‹åï¼Œé—®é¢˜é€æ¸æ˜¾ç°ã€‚ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>è¿­ä»£å—å¼€æºé¡¹ç›®é™åˆ¶&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>Ginex æ˜¯ä¸€ä¸ªåŸºäº Gin çš„å¼€æºå°è£…ï¼Œæ‰€ä»¥å®ƒæœ¬èº«åœ¨è¿­ä»£æ–¹é¢æ˜¯å—åˆ°ä¸€äº›é™åˆ¶çš„ã€‚ä¸€æ—¦æœ‰é’ˆå¯¹å…¬å¸çº§çš„éœ€æ±‚å¼€å‘ï¼Œä»¥åŠ Bugfix ç­‰ç­‰ï¼Œæˆ‘ä»¬éƒ½éœ€è¦å’Œå¼€æºæ¡†æ¶ Gin åšè”åˆå¼€å‘å’Œç»´æŠ¤ï¼Œè¿™ä¸ªå‘¨æœŸä¸èƒ½å®Œå…¨ç”±æˆ‘ä»¬è‡ªå·±æ§åˆ¶ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ä»£ç æ··ä¹±è†¨èƒ€ã€ç»´æŠ¤å›°éš¾&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>ç”±äºæˆ‘ä»¬å’Œä¸šåŠ¡åŒå­¦å…±åŒå¼€å‘å’Œç»´æŠ¤ Ginex æ¡†æ¶ï¼Œå› æ­¤æˆ‘ä»¬å¯¹äºæ§åˆ¶æ•´ä¸ªæ¡†æ¶çš„èµ°å‘æ²¡æœ‰å®Œå…¨çš„è‡ªä¸»æƒï¼Œä»è€Œå¯¼è‡´äº†æ•´ä½“ä»£ç æ··ä¹±è†¨èƒ€ï¼Œåˆ°åæœŸæˆ‘ä»¬å‘ç°è¶Šæ¥è¶Šéš¾ç»´æŠ¤ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>æ— æ³•æ»¡è¶³æ€§èƒ½æ•æ„Ÿä¸šåŠ¡éœ€æ±‚&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>å¦å¤–ï¼Œæˆ‘ä»¬èƒ½ç”¨ Gin åšçš„æ€§èƒ½ä¼˜åŒ–éå¸¸å°‘ï¼Œå› ä¸º Gin çš„åº•å±‚æ˜¯åŸºäº Golang çš„ä¸€ä¸ªåŸç”Ÿåº“ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬è¦åšä¼˜åŒ–ï¼Œéœ€è¦åœ¨åŸç”Ÿåº“çš„åŸºç¡€ä¸Šåšå¾ˆå¤šæ”¹é€ ï¼Œè¿™ä¸ªå…¶å®æ˜¯éå¸¸å›°éš¾çš„ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>æ— æ³•æ»¡è¶³ä¸åŒåœºæ™¯çš„åŠŸèƒ½éœ€æ±‚&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>æˆ‘ä»¬å†…éƒ¨é€æ¸å‡ºç°äº†ä¸€äº›æ–°çš„åœºæ™¯ï¼Œå› æ­¤ä¼šæœ‰å¯¹ HTTP Client çš„éœ€æ±‚ï¼Œæ”¯æŒ Websocketã€æ”¯æŒ HTTP/2 ä»¥åŠæ”¯æŒ HTTP/3 ç­‰ç­‰éœ€æ±‚ï¼Œè€Œåœ¨åŸç”Ÿçš„ Ginex ä¸Šè¿˜æ˜¯å¾ˆéš¾æ‰©å±•çš„è¿™äº›åŠŸèƒ½éœ€æ±‚ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_HTTP_Hertz/3.png" alt="image">&lt;/p>
&lt;h3 id="é­”æ”¹å¼€æºæ¡†æ¶">é­”æ”¹å¼€æºæ¡†æ¶&lt;/h3>
&lt;p>é€æ¸åœ°ï¼ŒæŸäº›ä¸šåŠ¡çº¿å¼€å§‹åšåˆæ­¥çš„å°è¯•ï¼Œä»–ä»¬ä¼šå¯¹å¦å¤–çš„ä¸€äº›å¼€æºæ¡†æ¶è¿›è¡Œé­”æ”¹ã€‚æ¯”è¾ƒå…¸å‹çš„ä¾‹å­æ˜¯æœ‰ä¸€äº›ä¸šåŠ¡çº¿å°è¯•åŸºäº Fasthttp è¿›è¡Œé­”æ”¹ï¼ŒFasthttp æ˜¯ä¸€æ¬¾ä¸»æ‰“é«˜æ€§èƒ½çš„å¼€æºæ¡†æ¶ï¼ŒåŸºäºå®ƒè¿›è¡Œé­”æ”¹å¯ä»¥çŸ­æœŸå†…å¸®åŠ©ä¸šåŠ¡è§£å†³é—®é¢˜ã€‚
è¿™ç§é­”æ”¹ç°è±¡å¸¦æ¥çš„é—®é¢˜æ˜¯ï¼Œæ¡†æ¶é­”æ”¹æ˜¯ä¸€äº›ä¸šåŠ¡çº¿è‡ªå‘çš„è¡Œä¸ºï¼Œå„ä¸ªä¸šåŠ¡çº¿å¯èƒ½ä¼šåŸºäºè‡ªèº«ä¸šåŠ¡ç‰¹æ€§è¿›è¡Œå„è‡ªç»´æŠ¤ï¼Œä»è€Œå¯¼è‡´ç»´æŠ¤æˆæœ¬ä¸Šå‡éå¸¸ä¸¥é‡ã€‚&lt;/p>
&lt;p>åˆ°è¿™é‡Œæˆ‘ä»¬ä»¿ä½›é™·å…¥äº† Ginex çš„æ€ªåœˆã€‚å¦‚å‰æ®µæ—¶é—´çˆ†ç«çš„ç”µè§†å‰§ã€Šå¼€ç«¯ã€‹ä¸€æ ·ï¼Œæˆ‘ä»¬ä»¿ä½›æ˜¯ä»ä¸€è¾†å¼€å¾€å­¦é™¢å—è·¯çš„ 45 è·¯å…¬äº¤è½¦ä¸Šé†’æ¥ï¼Œå‘ç°è‡ªå·±è¦å‰å¾€å…¬å¸è¿›è¡Œä¸‹ä¸€ä»£ Ginex æ¡†æ¶çš„ç»´æŠ¤å·¥ä½œã€‚&lt;/p>
&lt;p>å¤§å®¶ä¹Ÿå¯ä»¥æ€è€ƒä¸€ä¸‹ï¼Œå¦‚æœæ˜¯ä½ æ¥åº”å¯¹è¿™æ ·çš„åœºæ™¯ï¼Œä½ ä¼šæ€ä¹ˆåšå‘¢ï¼Ÿ&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_HTTP_Hertz/4.png" alt="image">&lt;/p>
&lt;h3 id="å°ç»“">å°ç»“&lt;/h3>
&lt;p>ç¬¬ä¸€ç« èŠ‚çš„å†…å®¹æ€»ç»“å¦‚ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>æ—©æœŸåŸºäºå¼€æºæ¡†æ¶å°è£…&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>åŸºäºæ—©æœŸå¼€æºçš„ Golang HTTP æ¡†æ¶ï¼Œå®ç°äº† Ginex çš„å°è£…ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>éšç€å®è·µå‘å±•ï¼Œé—®é¢˜é€æ¸å‡ºç°&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>æ¡†æ¶æ··ä¹±è†¨èƒ€ï¼Œæ¡†æ¶çš„ç»´æŠ¤è¶Šæ¥è¶Šå›°éš¾ï¼Œä¸šåŠ¡çš„æ–°éœ€æ±‚æ— æ³•å¾—åˆ°å¾ˆå¥½åœ°æ»¡è¶³ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ä¸ºäº†è§£å†³é—®é¢˜å‡ºç°åŸºäºå¦å¤–çš„å¼€æºæ¡†æ¶é­”æ”¹çš„èŒèŠ½&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>æˆ‘ä»¬éœ€è¦æ€è€ƒå¦‚ä½•è·³å‡ºé­”æ”¹çš„æ€ªåœˆï¼ŒæŠŠå­—èŠ‚å†…éƒ¨çš„ä¼ä¸šçº§æ¡†æ¶åšå¾—æ›´å¥½ã€‚&lt;/p>
&lt;p>å¦å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªé—ç•™é—®é¢˜ï¼Œå°±æ˜¯åº”è¯¥å¦‚ä½•è·³å‡ºè¿™ä¸ªé­”æ”¹çš„æ€ªåœˆå‘¢ï¼Ÿè¿™ä¸ªé—®é¢˜ç¬¬äºŒç« èŠ‚ä¼šä¸ºå¤§å®¶è¿›è¡Œè§£ç­”ã€‚&lt;/p>
&lt;h2 id="ä¼ä¸šçº§-http-æ¡†æ¶çš„è®¾è®¡è€ƒé‡å’Œè½åœ°æ€è·¯">ä¼ä¸šçº§ HTTP æ¡†æ¶çš„è®¾è®¡è€ƒé‡å’Œè½åœ°æ€è·¯&lt;/h2>
&lt;h3 id="è·³å‡ºæ€ªåœˆ">è·³å‡ºæ€ªåœˆ&lt;/h3>
&lt;p>ä¸ºäº†è·³å‡ºé­”æ”¹çš„æ€ªåœˆï¼Œæˆ‘ä»¬å†³å®šä»ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢å¼€å§‹ç€æ‰‹ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>è‡ªä¸»ç ”å‘&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>æ—¢ç„¶ Ginex æ˜¯å› ä¸ºåŸºäºå¼€æºæ¡†æ¶ Ginï¼Œæ²¡æ³•åšä¸€äº›çµæ´»çš„æ§åˆ¶ï¼Œé‚£æˆ‘ä»¬å°±æ”¹ä¸ºå®Œå…¨è‡ªä¸»ç ”å‘æ¡†æ¶ã€‚è‡ªä¸»ç ”å‘æ¡†æ¶çš„ä»£ç å…¨é“¾è·¯è‡ªä¸»å¯æ§ï¼Œä¹Ÿå¯ä»¥é¿å…å¼•å…¥ä»»ä½•ä¸‰æ–¹ä¸å¯æ§å› ç´ ï¼Œè¿™æ ·æˆ‘ä»¬èƒ½å¤Ÿå¯¹è‡ªå·±çš„æ¡†æ¶æœ‰ä¸€ä¸ªæ¯”è¾ƒå®Œå¤‡çš„æŒæ§åŠ›ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>è´¨é‡æ§åˆ¶&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>ä¸‹å›¾åˆ—ä¸¾äº†ä¸€äº›å¸¸è§„çš„è´¨é‡æ§åˆ¶æ‰‹æ®µã€‚æˆ‘è¦ç€é‡å¼ºè°ƒçš„æ˜¯æ¨¡ç³Šæµ‹è¯•ï¼Œæ¨¡ç³Šæµ‹è¯•åœ¨å­—èŠ‚å†…éƒ¨æ˜¯å¹¿æ³›åº”ç”¨äº &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> æ¡†æ¶çš„ç¨³å®šæ€§æµ‹è¯•ä¸­ã€‚å®ƒçš„æ ¸å¿ƒç‚¹åœ¨äº &lt;strong>é€šè¿‡ä¸€ç³»åˆ—çš„æ¨¡æ‹ŸæœåŠ¡ï¼Œå°è¯•æ¨¡æ‹Ÿå‡ºçº¿ä¸Šç”¨æˆ·åœ¨ä½¿ç”¨æˆ‘ä»¬çš„æ¡†æ¶æ—¶ï¼Œ
å®é™…é‡åˆ°çš„ä¸€äº›åœºæ™¯å’Œä½¿ç”¨æ–¹å¼&lt;/strong> ã€‚ç„¶åé€šè¿‡ä¸€äº›éšæœºçš„ç®—æ³•ï¼Œç”Ÿæˆå°½å¯èƒ½å¤æ‚ã€è¦†ç›–å„ç§ Case çš„åœºæ™¯ï¼Œè¿™å¯ä»¥è®©æˆ‘ä»¬ &lt;strong>æ£€æµ‹å‡ºä¸€äº›æ½œåœ¨çš„é—®é¢˜&lt;/strong> ã€‚è¿™å¥—æµ‹è¯•ä¹Ÿåœ¨ &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> æ—©æœŸçš„è´¨é‡å»ºè®¾ä¸­ï¼Œå¸®åŠ©æˆ‘ä»¬å°†ä¸€äº›é—®é¢˜é˜²æ‚£äºæœªç„¶ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ä¸¥æ ¼å‡†å…¥&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>æ—¢ç„¶ Ginex çš„é—®é¢˜æ˜¯å¤§å®¶éƒ½åœ¨å‘é‡Œé¢å†™å…¥å†…å®¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ§åˆ¶å…¥å£ï¼Œå»ºç«‹ä¸€å¥—å®Œå¤‡çš„éœ€æ±‚å¼€å‘ä»¥åŠ Review çš„é—­ç¯ï¼Œæ§åˆ¶è¿­ä»£çš„æ•´ä½“æµç¨‹ï¼Œä»è€Œæ§åˆ¶ä»£ç å‡†å…¥ã€‚åŒæ—¶æˆ‘ä»¬é…å¤‡ç»Ÿä¸€çš„éœ€æ±‚ç®¡ç†ä»¥åŠä¸¥æ ¼çš„å‘ç‰ˆå‡†å…¥è§„èŒƒï¼Œåšä¸€ä¸ªæ ‡å‡†çš„å…¬å¸çº§åˆ«çš„æ¡†æ¶ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_HTTP_Hertz/5.png" alt="image">&lt;/p>
&lt;p>ä¸¾ä¸€ä¸ªæ¯”è¾ƒå½¢è±¡çš„ä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬æŠŠä¸‹ä¸€ä»£æ¡†æ¶æ¯”ä½œä¸€ä¸ªäººâ€”â€”â€œæ¡†æ¶äººâ€ï¼Œè‡ªä¸»ç ”å‘è¡¨ç¤ºè¿™ä¸ªâ€œæ¡†æ¶äººâ€é¦–å…ˆä¼šæ‹¥æœ‰å¯¹è‡ªå·±èº«ä½“çš„ä¸»å¯¼æƒï¼Œä»–ä¸ä¼šå—åˆ°æ¥è‡ªäºç¯å¢ƒæˆ–è€…ä»–äººçš„å½±å“ï¼›
è´¨é‡æ§åˆ¶è¡¨ç¤ºâ€œæ¡†æ¶äººâ€èƒ½å¤Ÿå®šæœŸä½“æ£€ï¼Œææ—©å‘ç°ä¸€äº›æ½œåœ¨çš„ç–¾ç—…ï¼Œå°†å…¶æ‰¼æ€äºæ‘‡ç¯®ï¼›ä¸¥æ ¼å‡†å…¥è¡¨ç¤ºâ€œæ¡†æ¶äººâ€æœ‰ç§‘å­¦çš„é¥®é£Ÿæ‘„å…¥å’Œè‡ªå¾‹çš„ç”Ÿæ´»ä¹ æƒ¯ã€‚å¯æƒ³è€ŒçŸ¥ï¼Œå¦‚æœæˆ‘ä»¬èƒ½å¤Ÿåšåˆ°ä»¥ä¸Šä¸‰ç‚¹ï¼Œæˆ‘ä»¬çš„â€œæ¡†æ¶äººâ€å°±èƒ½å¤Ÿæ‹¥æœ‰ä¸€ä¸ªå¥åº·çš„ä½“é­„ã€‚&lt;/p>
&lt;h3 id="ç—›ç‚¹æ¢³ç†">ç—›ç‚¹æ¢³ç†&lt;/h3>
&lt;p>æ˜ç¡®äº†åº”è¯¥å¦‚ä½•è·³å‡ºæ€ªåœˆä¹‹åï¼Œæˆ‘ä»¬è¿˜åº”è¯¥æ˜ç¡®çŸ¥é“è¿™ä¸ªæ¡†æ¶è¦å…·å¤‡å“ªäº›åŠŸèƒ½å’Œç‰¹æ€§ï¼Œä¹Ÿå°±æ˜¯é¦–å…ˆåº”è¯¥èšç„¦åˆ°æ¡†æ¶çš„æ ¸å¿ƒç—›ç‚¹ä¸Šã€‚â€œæ¡†æ¶äººâ€ä¸èƒ½åªæœ‰å¥åº·çš„ä½“é­„ï¼Œè¿˜åº”è¯¥æ‹¥æœ‰æœ‰è¶£çš„æ€æƒ³å’Œçµé­‚ã€‚
ä¸€ä¸ªæˆç†Ÿçš„æ¡†æ¶ä¸ä»…ä»…è¦&lt;strong>åº”å¯¹æ¥è‡ªä¸šåŠ¡ä¾§çš„éœ€æ±‚&lt;/strong> ï¼Œå¦‚åŠŸèƒ½éœ€æ±‚ã€æ€§èƒ½éœ€æ±‚å’Œæ˜“ç”¨ç¨³å®šç­‰ï¼Œè¿˜è¦è€ƒè™‘&lt;strong>æ¡†æ¶è‡ªèº«çš„å‘å±•&lt;/strong> ï¼Œè€Œè¿™ä¸€ç‚¹æ°æ°æ˜¯æˆ‘ä»¬åœ¨ Ginex çš„è¿­ä»£è¿‡ç¨‹ä¸­å¿½ç•¥çš„ã€‚&lt;/p>
&lt;p>å¦‚ä¸‹å›¾å³ä¾§é‡‘å­—å¡”æ‰€ç¤ºï¼Œæœ€ä¸Šå±‚æ˜¯&lt;strong>é«˜æ•ˆæ”¯æ’‘&lt;/strong> ï¼Œæ¯‹åº¸ç½®ç–‘æ¡†æ¶çš„å­˜åœ¨è‚¯å®šæ˜¯ä¸ºäº†æ”¯æ’‘æˆ‘ä»¬çš„ä¸šåŠ¡éœ€æ±‚ã€‚ä¸­é—´å±‚æ˜¯ä¸€ä¸ª&lt;strong>è´¨é‡ä¿è¯&lt;/strong>çš„çº¢çº¿æ¡†æ¶ï¼Œæ¡†æ¶éœ€è¦ä¿è¯å®ƒè‡ªèº«çš„è´¨é‡ï¼Œ
åªæœ‰ä»¥é«˜è´¨é‡å®Œæˆçš„æ¡†æ¶æ‰èƒ½æœ‰è‡ªä¿¡æ‰¿æ‹…å­—èŠ‚å†…éƒ¨çš„ 5000 ä¸‡ QPSï¼Œä»¥åŠå„ç§å„æ ·çš„ä½¿ç”¨åœºæ™¯ã€‚é‡‘å­—å¡”çš„æœ€åº•å±‚æ˜¯&lt;strong>é•¿æœŸã€å¯æŒç»­æ€§å‘å±•&lt;/strong> ï¼Œè¿™ä¹Ÿæ˜¯ä½œä¸ºæœªæ¥æƒ³è¦ä¿æŒæŒç»­è¿­ä»£çš„æ¡†æ¶æœ€é‡è¦çš„ä¸€ç‚¹ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_HTTP_Hertz/6.png" alt="image">&lt;/p>
&lt;h3 id="æ¡†æ¶ç§‘å­¦å‘å±•è§‚">æ¡†æ¶ç§‘å­¦å‘å±•è§‚&lt;/h3>
&lt;p>åŸºäºä¸Šä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æ¢³ç†å‡ºæ¡†æ¶çš„éœ€æ±‚ç—›ç‚¹ã€‚&lt;strong>ç—›ç‚¹&lt;/strong>ä¸»è¦æœ‰ä¸¤ä¸ªæ–¹é¢ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>å¤šæ ·çš„éœ€æ±‚&lt;/strong>ï¼šæ”¯æ’‘æ”¯æ’‘å„ä¸ªä¸šåŠ¡çº¿åŠåŸºç¡€è®¾æ–½ ï¼ˆæ¨ªå‘æ‰©å±•æ€§ï¼‰ã€‚&lt;/li>
&lt;li>&lt;strong>çµæ´»çš„ç»“æ„&lt;/strong>ï¼šè´¯ç©¿ HTTP ç”Ÿå‘½å‘¨æœŸçš„æŒæ§åŠ› ï¼ˆçºµå‘æ¨¡å—åŒ–ï¼‰ã€‚&lt;/li>
&lt;/ul>
&lt;p>åœ¨æ­¤åŸºç¡€ä¸Šè¿›ä¸€æ­¥æŠ½è±¡å‡ºæ¡†æ¶çš„ &lt;strong>ç§‘å­¦å‘å±•è§‚&lt;/strong> ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>èšç±»éœ€æ±‚&lt;/strong>ï¼šé¢å‘é€šç”¨èƒ½åŠ›å±•å¼€è®¾è®¡ã€‚&lt;/li>
&lt;li>&lt;strong>è·³å‡ºå±€éƒ¨&lt;/strong>ï¼šé’ˆå¯¹ä¸€äº›å¤æ‚é—®é¢˜ï¼Œåœ¨æ›´å¤§èŒƒå›´å†…å¯»æ±‚æœ€ä¼˜è§£ã€‚&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_HTTP_Hertz/7.png" alt="image">&lt;/p>
&lt;p>åç»­æˆ‘ä¼šé’ˆå¯¹è¿™ä¸ªç§‘å­¦å‘å±•è§‚è¿›ä¸€æ­¥é˜è¿° &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> ç©¶ç«Ÿæ˜¯å¦‚ä½•å®ç°çš„ã€‚&lt;/p>
&lt;h3 id="å°ç»“-1">å°ç»“&lt;/h3>
&lt;p>ç¬¬äºŒç« èŠ‚çš„å†…å®¹æ€»ç»“å¦‚ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>è·³å‡ºæ€ªåœˆ&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>å¼•å…¥â€œæ¡†æ¶äººâ€çš„æ¦‚å¿µï¼Œå¸®åŠ©å¤§å®¶ç†è§£æ¡†æ¶çš„è‡ªç ”ã€è´¨é‡æ§åˆ¶å’Œä¸¥æ ¼å‡†å…¥ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ç—›ç‚¹æ¢³ç†&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>ä¸ºâ€œæ¡†æ¶äººâ€æ³¨å…¥æœ‰è¶£çš„çµé­‚ï¼Œæ¡†æ¶éœ€è¦åº”å¯¹æ¥è‡ªä¸šåŠ¡ä¾§çš„å¤šæ ·åŒ–éœ€æ±‚ï¼Œè¿˜è¦ä¿è¯è‡ªå·±çš„å¯æŒç»­æ€§å‘å±•ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>æ¡†æ¶ç§‘å­¦å‘å±•è§‚&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>éœ€æ±‚èšç±»ï¼Œè·³å‡ºå±€éƒ¨ã€‚&lt;/p>
&lt;h2 id="hertz-çš„æ ¸å¿ƒç‰¹ç‚¹">Hertz çš„æ ¸å¿ƒç‰¹ç‚¹&lt;/h2>
&lt;p>&lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> æ¡†æ¶æ˜¯å¦‚ä½•å®ç°ç¬¬äºŒç« èŠ‚ä¸­æåˆ°çš„æ¡†æ¶ç—›ç‚¹å’Œç§‘å­¦å‘å±•è§‚çš„å‘¢ï¼Ÿæœ¬ç« èŠ‚å°†å…·ä½“è¿›è¡Œä»‹ç»ã€‚&lt;/p>
&lt;h3 id="åˆ†å±‚æŠ½è±¡">åˆ†å±‚æŠ½è±¡&lt;/h3>
&lt;p>é¦–å…ˆä»‹ç» &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> æ¡†æ¶çš„æ¶æ„è®¾è®¡ã€‚ä¸‹å›¾æ˜¯ä¸€ä¸ªè¯·æ±‚ä»å»ºç«‹ã€è¿æ¥åˆ°å®Œæˆçš„å…¨è¿‡ç¨‹ã€‚&lt;strong>å·¦ä¾§æ˜¯å®¢æˆ·ç«¯ï¼Œå³ä¾§æ˜¯æœåŠ¡ç«¯&lt;/strong> ï¼Œåœ¨æˆ‘ä»¬å‘èµ·é“¾æ¥å»ºç«‹è¯·æ±‚ä¹‹åï¼Œé“¾æ¥å»ºç«‹å®Œæˆï¼›
ä¹‹åå®¢æˆ·ç«¯å‘èµ·è¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯è¿›è¡Œè·¯ç”±å¤„ç†ï¼Œç„¶åå°†è·¯ç”±å¯¼å‘ä¸šåŠ¡é€»è¾‘å¤„ç†ï¼›ä¸šåŠ¡é€»è¾‘å¤„ç†å®Œæ¯•åï¼ŒæœåŠ¡ç«¯è¿”å›è¿™ä¸ªè¯·æ±‚ï¼Œå®Œæˆä¸€æ¬¡ HTTP è¯·æ±‚çš„è°ƒç”¨ã€‚&lt;/p>
&lt;p>é‚£ä¹ˆåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä»¬çš„æ¡†æ¶åˆ°åº•åšäº†å“ªäº›äº‹æƒ…å‘¢ï¼Ÿä»å›¾ä¸­ä¸éš¾å‘ç°ï¼Œé¦–å…ˆæ¡†æ¶è¿›è¡Œäº†&lt;strong>é“¾æ¥å¤„ç†&lt;/strong> ï¼Œå…¶æ¬¡æ˜¯&lt;strong>åè®®å¤„ç†&lt;/strong> ï¼Œä¹‹ååŸºäºè·¯ç”±åšäº†é€»è¾‘åˆ†å‘ï¼Œ
å³&lt;strong>è·¯ç”±å¤„ç†&lt;/strong> ï¼Œæœ€ååšäº†&lt;strong>ä¸šåŠ¡é€»è¾‘å¤„ç†&lt;/strong> ã€‚æˆ‘ä»¬æŠŠæ¡†æ¶åšæˆä¸€ä¸ªç»“æ„ä¹‹åä¼šå‘ç°ï¼Œè¿™ä¸ªç»“æ„åŒ…å«çš„å°±æ˜¯è¿™å››éƒ¨åˆ†ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_HTTP_Hertz/8.png" alt="image">&lt;/p>
&lt;p>åŸºäºè¿™ä¸ªé€»è¾‘ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹ &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> çš„æ•´ä½“æ¶æ„å›¾ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä»ä¸‹å¾€ä¸Šçœ‹çº¢çº¿æ¡†åœˆä½çš„éƒ¨åˆ†ï¼Œå¯ä»¥å‘ç°è¿™å°±æ˜¯ä¸Šæ–‡æåˆ°çš„è¯·æ±‚å»ºç«‹çš„å…¨è¿‡ç¨‹ã€‚å„å±‚çš„èƒ½åŠ›åŠä½œç”¨å¦‚ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>ä¼ è¾“å±‚ Transportï¼šæŠ½è±¡ç½‘ç»œæ¥å£ï¼›&lt;/li>
&lt;li>åè®®å±‚ Protocolï¼šè§£æè¯·æ±‚ï¼Œæ¸²æŸ“å“åº”ç¼–ç ï¼›&lt;/li>
&lt;li>è·¯ç”±å±‚ Routeï¼šåŸºäºURLè¿›è¡Œé€»è¾‘åˆ†å‘ï¼›&lt;/li>
&lt;li>åº”ç”¨å±‚ Applicationï¼šä¸šåŠ¡ç›´æ¥äº¤äº’ï¼Œå‡ºç°å¤§é‡ APIã€‚&lt;/li>
&lt;/ul>
&lt;p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å›¾ä¸­é™¤äº†ä¸­é—´éƒ¨åˆ†åŒ…å«çš„å››å±‚ï¼Œå·¦å³ä¸¤ä¾§å„æœ‰ä¸¤åˆ—ã€‚&lt;strong>å³ä¾§æ˜¯é€šç”¨å±‚ Common&lt;/strong> ï¼Œä¸»è¦è´Ÿè´£&lt;strong>æä¾›é€šç”¨èƒ½åŠ›ã€å¸¸ç”¨çš„æ—¥å¿—æ¥å£ã€é“¾è·¯è¿½è¸ªä»¥åŠä¸€äº›é…ç½®å¤„ç†ç›¸å…³çš„èƒ½åŠ›&lt;/strong>ç­‰ã€‚
&lt;strong>å·¦ä¾§æ˜¯ &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> çš„ä»£ç ç”Ÿæˆå·¥å…· Hzï¼Œåˆç§°è„šæ‰‹æ¶å·¥å…·&lt;/strong> ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨å†…éƒ¨ &lt;strong>åŸºäº IDL å¿«é€Ÿåœ°ç”Ÿæˆé¡¹ç›®éª¨æ¶&lt;/strong> ï¼Œä»¥åŠ é€Ÿä¸šåŠ¡è¿­ä»£ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_HTTP_Hertz/9.png" alt="image">&lt;/p>
&lt;p>&lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> çš„åˆ†å±‚è®¾è®¡æ˜¯èƒ½å¤Ÿå’Œä»£ç ç»„ç»‡ç»“æ„ä¸€ä¸€æ˜ å°„çš„ã€‚ä¸‹å›¾æ˜¯ &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> ä»“åº“é‡Œé¢çš„ä»£ç ç»„ç»‡ç»“æ„ï¼Œå¯ä»¥çœ‹åˆ°æ ¹ç›®å½•ä¸‹çš„ cmd åŒ…é‡Œé¢å­˜æ”¾ç€ Hz å·¥å…·ï¼Œ
åœ¨ pkg åŒ…ä¸‹å­˜æ”¾ç€ä¸Šè¿°ä¸»è¦å››å±‚ä»¥åŠé€šç”¨å±‚ Commonã€‚å› æ­¤åŒå­¦ä»¬çœ‹åˆ°æ¶æ„è®¾è®¡å›¾ä¹‹åï¼Œå¯ä»¥ç›´æ¥åœ¨ Github å­¦ä¹  &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> çš„ä»£ç ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_HTTP_Hertz/10.png" alt="image">&lt;/p>
&lt;p>æ€»ä½“æ¥è¯´ï¼Œ&lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> çš„æ¶æ„è®¾è®¡ç†å¿µå°±æ˜¯ &lt;strong>â€œç®€æ´æœ‰åºï¼Œä¿è¯è®©æ‰€æœ‰å¼€å‘è€…è½»æ¾ç†è§£ï¼Œåœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­æŒç»­è´¯å½»â€&lt;/strong> ã€‚&lt;/p>
&lt;h3 id="æ˜“ç”¨å¯æ‰©å±•">æ˜“ç”¨å¯æ‰©å±•&lt;/h3>
&lt;p>é‚£ä¹ˆåŸºäº &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> çš„æ¶æ„è®¾è®¡ï¼Œåº”è¯¥å¦‚ä½•å±•å¼€æ˜“ç”¨æ€§å’Œå¯æ‰©å±•æ€§å‘¢ï¼Ÿä¸‹å›¾æ˜¯ &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> æ¶æ„ä¸»è¦å››ä¸ªå±‚çº§çš„æŠ½è±¡ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>åº”ç”¨å±‚&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>åº”ç”¨å±‚æä¾›äº†ä¸€äº›é€šç”¨èƒ½åŠ›ï¼ŒåŒ…æ‹¬&lt;strong>ç»‘å®šè¯·æ±‚ã€å“åº”æ¸²æŸ“ã€æœåŠ¡å‘ç°/æ³¨å†Œ/è´Ÿè½½å‡è¡¡ä»¥åŠæœåŠ¡æ²»ç†&lt;/strong>ç­‰ç­‰ã€‚å…¶ä¸­ï¼Œ&lt;strong>æ´‹è‘±æ¨¡å‹ä¸­é—´ä»¶&lt;/strong>çš„æ ¸å¿ƒç›®çš„æ˜¯è®©ä¸šåŠ¡å¼€å‘åŒå­¦&lt;strong>åŸºäºè¿™ä¸ªä¸­é—´ä»¶å¿«é€Ÿåœ°ç»™ä¸šåŠ¡é€»è¾‘è¿›è¡Œæ‰©å±•&lt;/strong>ï¼Œ
æ‰©å±•æ–¹å¼æ˜¯å¯ä»¥åœ¨ä¸šåŠ¡é€»è¾‘å¤„ç†å‰å’Œå¤„ç†ååˆ†åˆ«æ’æ¡©åŸ‹ç‚¹åšç›¸åº”å¤„ç†ã€‚ä¸€äº›æ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„åº”ç”¨ï¼ŒåŒ…æ‹¬æ—¥å¿—æ‰“ç‚¹ã€å‰ç½®çš„å®‰å…¨æ£€æµ‹ï¼Œéƒ½æ˜¯é€šè¿‡æ´‹è‘±æ¨¡å‹ä¸­é—´ä»¶è¿›è¡Œå¤„ç†çš„ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>è·¯ç”±å±‚&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>è·¯ç”±å±‚ä¹Ÿæ˜¯éå¸¸é€šç”¨çš„ï¼Œä¸»è¦æä¾›&lt;strong>é™æ€è·¯ç”±ã€å‚æ•°è·¯ç”±ã€ä¸ºè·¯ç”±é…ç½®ä¼˜å…ˆçº§ä»¥åŠè·¯ç”±ä¿®å¤&lt;/strong>çš„èƒ½åŠ›ï¼Œå¦‚æœæˆ‘ä»¬çš„è·¯ç”±å±‚æ²¡åŠæ³•æ»¡è¶³ç”¨æˆ·éœ€æ±‚ï¼Œ
å®ƒè¿˜èƒ½æ”¯æ’‘ç”¨æˆ·åš&lt;strong>è‡ªå®šä¹‰è·¯ç”±&lt;/strong>çš„æ‰©å±•ã€‚ä½†å®é™…åº”ç”¨ä¸­è¿™äº›è·¯ç”±èƒ½åŠ›å®Œå…¨èƒ½å¤Ÿæ»¡è¶³ç»å¤§å¤šæ•°ç”¨æˆ·çš„éœ€æ±‚ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>åè®®å±‚&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>&lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> åŒæ—¶æä¾› &lt;strong>HTTP/1.1&lt;/strong> å’Œ &lt;strong>HTTP/2&lt;/strong>ï¼Œ&lt;strong>HTTP/3&lt;/strong> ä¹Ÿæ˜¯æˆ‘ä»¬åœ¨å»ºè®¾ä¸­çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬è¿˜ä¼šæä¾› &lt;strong>Websocket ç­‰ HTTP ç›¸å…³çš„å¤šåè®®æ”¯æŒ&lt;/strong> ï¼Œä»¥åŠæ”¯æŒå®Œå…¨ç”±ä¸šåŠ¡å†³å®šçš„&lt;strong>è‡ªå®šä¹‰åè®®å±‚æ‰©å±•&lt;/strong> ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ä¼ è¾“å±‚&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>ç›®å‰æˆ‘ä»¬å·²ç»å†…ç½®äº†ä¸¤ä¸ªé«˜æ€§èƒ½çš„ä¼ è¾“å±‚å®ç°ã€‚ä¸€ä¸ªæ˜¯&lt;strong>åŸºäº CloudWeGo å¼€æºçš„é«˜æ€§èƒ½ç½‘ç»œåº“ &lt;a href="https://github.com/cloudwego/netpoll">Netpoll&lt;/a>&lt;/strong> çš„ä¼ è¾“å±‚æ‰©å±•ï¼Œå¦ä¸€ä¸ªæ˜¯æ”¯æŒ&lt;strong>åŸºäºæ ‡å‡†åº“&lt;/strong>çš„ä¼ è¾“å±‚æ‰©å±•ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬ä¹ŸåŒæ ·èƒ½æ”¯æŒåœ¨ä¼ è¾“å±‚ä¸Šè¿›è¡Œ&lt;strong>è‡ªå®šä¹‰ä¼ è¾“å±‚åè®®æ‰©å±•&lt;/strong> ã€‚&lt;/p>
&lt;p>ä¸‹å›¾æ¯ä¸€å±‚ä¸­æ ‡çº¢çš„èƒ½åŠ›éƒ½èƒ½å¤Ÿä½“ç°å‡ºï¼Œæˆ‘ä»¬èƒ½å¤Ÿåœ¨æ¡†æ¶çš„ä»»ä½•ä¸€ä¸ªåˆ†å±‚ä¸Šæ”¯æ’‘ç”¨æˆ·åšæœ€å¤§ç¨‹åº¦çš„è‡ªç”±å®šåˆ¶ï¼Œè¿™æ ·å¯ä»¥æœ€å¤§ç¨‹åº¦åœ°æ»¡è¶³ä¼ä¸šçº§å†…éƒ¨ç”¨æˆ·å’Œæ½œåœ¨ç”¨æˆ·çš„ä¸šåŠ¡éœ€æ±‚ã€‚
å¦‚æœåŒå­¦ä»¬æƒ³è¦æ·±å…¥äº†è§£ &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a>ï¼Œå¯ä»¥å‚è€ƒ CloudWeGo å®˜ç½‘çš„ &lt;a href="https://www.cloudwego.io/zh/docs/hertz/">Hertz&lt;/a> éƒ¨åˆ†ï¼Œä¸Šè¿°æ‰€æœ‰å†…å®¹å‡æœ‰å…·ä½“æè¿°ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_HTTP_Hertz/11.png" alt="image">&lt;/p>
&lt;h3 id="æ€§èƒ½æ¢ç´¢">æ€§èƒ½æ¢ç´¢&lt;/h3>
&lt;p>åœ¨æ€§èƒ½æ–¹é¢ï¼Œ&lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> åˆæ˜¯å¦‚ä½•åœ¨è‡ªä¸»å¯æ§çš„èŒƒå›´å†…åšé«˜æ€§èƒ½æ¢ç´¢çš„å‘¢ï¼Ÿ&lt;/p>
&lt;h4 id="åœºæ™¯æè¿°">åœºæ™¯æè¿°&lt;/h4>
&lt;p>ç†Ÿæ‚‰ &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> ä»£ç çš„åŒå­¦ä¼šå‘ç°ï¼Œæˆ‘ä»¬çš„ &lt;strong>HTTP/1.1&lt;/strong> åè®®å€Ÿé‰´äº†ä¸€äº› Fasthttp çš„ä¼˜åŒ–æ€è·¯å’Œæ‰‹æ®µã€‚HTTP/1.1 åè®®ä¸­çš„ Header ä¸ºä¸å®šé•¿æ•°æ®æ®µï¼Œå¾€å¾€éœ€è¦è§£æåˆ°æœ€åä¸€è¡Œï¼Œæ‰èƒ½å¤Ÿç¡®å®šæ˜¯å¦å®Œæˆè§£æã€‚
åŒæ—¶ï¼Œä¸ºäº†å‡å°‘ç³»ç»Ÿè°ƒç”¨æ¬¡æ•°ï¼Œæå‡æ•´ä½“è§£ææ•ˆç‡ï¼Œæ¶‰åŠ IO æ“ä½œæ—¶ï¼Œæˆ‘ä»¬é€šå¸¸å¼•å…¥å¸¦ buffer çš„ IO æ•°æ®ç»“æ„ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå®ƒçš„æ ¸å¿ƒç‚¹æ˜¯æœ€ä¸‹å±‚çš„ bufferï¼Œbuffer æ˜¯ä¸€ä¸ªç±»ä¼¼äºä¸€å—å®Œæ•´çš„å†…å­˜ç©ºé—´ï¼Œæˆ‘ä»¬å¯ä»¥å°† IO è¯»åˆ°çš„æ•°æ®æ”¾è¿›è¿™ä¸ªç©ºé—´åšæš‚å­˜ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_HTTP_Hertz/12.png" alt="image">&lt;/p>
&lt;h4 id="bufioreader-çš„é—®é¢˜">bufio.Reader çš„é—®é¢˜&lt;/h4>
&lt;p>è¿™æ ·åšå‡ºç°çš„é—®é¢˜æ˜¯ï¼ŒåŸç”Ÿçš„ bufio.Reader é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œè¯·æ±‚çš„ Header å¤§å°è¶…å‡º buffer é•¿åº¦åï¼Œ&lt;code>.Peek()&lt;/code> æ–¹æ³•ç›´æ¥æŠ¥é”™ &lt;code>(ErrBufferFull)&lt;/code>ï¼Œæ— æ³•å®Œæˆæ—¢å®šè¯­ä¹‰åŠŸèƒ½ã€‚&lt;/p>
&lt;h4 id="ä¸€äº›å¯èƒ½çš„è§£">ä¸€äº›å¯èƒ½çš„è§£&lt;/h4>
&lt;p>å¯¹äºä¸Šè¿°é—®é¢˜ï¼Œå…¶å®æœ‰ä¸€äº›å¯èƒ½çš„è§£å†³æ–¹æ³•ï¼š&lt;/p>
&lt;ul>
&lt;li>ç›´æ¥åˆ©ç”¨ bufio.Reader çš„å±€é™å½“åš Featureï¼Œé€šè¿‡ buffer å¤§å°ä½œä¸º Header å¤§å°çš„é™åˆ¶ã€‚å¦‚æœè¶…å‡ºè¿™ä¸ªå¤§å°ï¼ŒHeader ç›´æ¥è§£ææŠ¥é”™ï¼Œè¿™ä¹Ÿæ˜¯ Fasthttp çš„åšæ³•ã€‚
ä½†å®é™…ä¸Šè¶…å‡º buffer é•¿åº¦åæŠ¥é”™ä¼šå¯¼è‡´æˆ‘ä»¬æ²¡åŠæ³•å¤„ç†è¿™éƒ¨åˆ†è¯·æ±‚ï¼Œä»è€Œå¯¼è‡´æ¡†æ¶ &lt;strong>åŠŸèƒ½å—é™&lt;/strong> ã€‚&lt;/li>
&lt;li>header è§£æå¸¦çŠ¶æ€ï¼Œæš‚å­˜ä¸­é—´æ•°æ®ï¼Œé€šè¿‡åœ¨ä¸Šå±‚å †å é¢å¤–å¤æ‚åº¦çš„æ–¹å¼çªç ´ bufio æœ¬èº«çš„é™åˆ¶ã€‚ä½†æ˜¯æš‚å­˜ä¸­é—´æ€ä¼šæ¶‰åŠåˆ°ä¸€äº›å†…å­˜çš„æ‹·è´ï¼Œå¿…ç„¶ä¼šå¯¼è‡´ &lt;strong>æ€§èƒ½å—é™&lt;/strong> ã€‚&lt;/li>
&lt;/ul>
&lt;h4 id="çœŸå®ä½¿ç”¨ç¯å¢ƒå¤æ‚å¤šå˜">çœŸå®ä½¿ç”¨ç¯å¢ƒå¤æ‚å¤šå˜&lt;/h4>
&lt;p>å­—èŠ‚å†…éƒ¨çš„ä½¿ç”¨åœºæ™¯éå¸¸å¤šï¼Œæˆ‘ä»¬ä¸ä»…è¦æ”¯æŒå„ç§ä¸šåŠ¡çº¿çš„å¼€å‘ï¼Œè¿˜è¦æ”¯æŒä¸€äº›æ¨ªå‘çš„åŸºç¡€ç»„ä»¶ã€‚ä¸åŒçš„ä¸šåŠ¡ï¼Œä¸åŒçš„åœºæ™¯ï¼Œæ•°æ®è§„æ¨¡å„å¼‚ã€‚
å¦‚ä½•æˆä¸ºé€šç”¨ä¸”é«˜æ•ˆçš„åœ°è§£å†³ bufio.Reader çš„é—®é¢˜æˆä¸º &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> é¢ä¸´çš„å†…éƒ¨é‡è¦æŒ‘æˆ˜ã€‚æˆ‘ä»¬æ—¢ç„¶å·²ç»ç«™åœ¨ Fasthttp è¿™ä¸ªâ€œå·¨äººâ€çš„è‚©è†€ä¸Šäº†ï¼Œèƒ½å¦å¾€å‰å†èµ°ä¸€æ­¥å‘¢ï¼Ÿ&lt;/p>
&lt;p>ç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚åŸºäºå†…éƒ¨çš„ä½¿ç”¨åœºæ™¯ï¼ŒåŒæ—¶ç»“åˆ &lt;a href="https://github.com/cloudwego/netpoll">Netpoll&lt;/a> çš„ä¼˜åŠ¿ï¼Œæˆ‘ä»¬è®¾è®¡å‡ºäº† &lt;strong>è‡ªé€‚åº” linked buffer&lt;/strong> ï¼Œå¹¶ä¸”ç”¨å®ƒæ›¿ä»£æ‰äº†åŸç”Ÿçš„ bufio.Readerã€‚
ä»ä¸‹å›¾å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„ buffer ä¸å†æ˜¯ä¸€ä¸ªå›ºå®šé•¿åº¦çš„ bufferï¼Œè€Œæ˜¯ä¸€æ¡é“¾ï¼Œè¿™æ¡é“¾ä¸Šçš„æ¯ä¸€ä¸ª buffer å¤§å°èƒ½å¤Ÿ&lt;strong>æ ¹æ®çº¿ä¸ŠçœŸå®è¯·æ±‚è¿›è¡ŒåŠ¨æ€æ‰©ç¼©å®¹è°ƒæ•´&lt;/strong> ï¼ŒåŒæ—¶æ­é… &lt;a href="https://github.com/cloudwego/netpoll">Netpoll&lt;/a> ä¸­&lt;strong>åŸºäº LT è§¦å‘çš„æ¨¡å‹åšæ•°æ®é¢„æ‹·è´&lt;/strong> ã€‚
ä»å®æ–½æ•ˆæœä¸Šæ¥çœ‹ï¼Œè¿™ä¸ªè‡ªé€‚åº”è°ƒæ•´èƒ½å¤Ÿè®©æˆ‘ä»¬çš„ä¸šåŠ¡æ–¹å®Œå…¨æ— æ„Ÿåœ°æ”¯æ’‘ä»»ä½•ä»–ä»¬çš„ä¸šåŠ¡ç‰¹æ€§ã€‚ä¹Ÿæ˜¯å› ä¸ºæˆ‘ä»¬èƒ½å¤Ÿå°† buffer è¿›è¡ŒåŠ¨æ€æ‰©ç¼©å®¹è°ƒæ•´ï¼Œä»è€Œèƒ½å¤Ÿä¿è¯åœ¨&lt;strong>åè®®å±‚æœ€å¤§ç¨‹åº¦åšåˆ°é›¶æ‹·è´åè®®è§£æ&lt;/strong> ï¼Œè¿™èƒ½å¤Ÿå¸¦æ¥æ•´ä½“è§£æä¸Šçš„æ€§èƒ½æå‡ï¼Œæ—¶å»¶ä¹Ÿä¼šæ›´ä½ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_HTTP_Hertz/13.png" alt="image">&lt;/p>
&lt;h4 id="é’ˆå¯¹-http11-è¿›è¡Œä¸­çš„ä¼˜åŒ–">é’ˆå¯¹ HTTP/1.1 è¿›è¡Œä¸­çš„ä¼˜åŒ–&lt;/h4>
&lt;p>å› ä¸ºç›®å‰åœ¨å­—èŠ‚å†…éƒ¨ HTTP/1.1 è¿˜æ˜¯ä¸€ä¸ªæ¯”è¾ƒä¸»æµçš„åè®®ï¼Œæ‰€ä»¥æˆ‘ä»¬åŸºäº HTTP/1.1 åšäº†å¾ˆå¤šå°è¯•ã€‚&lt;/p>
&lt;p>é¦–å…ˆæ˜¯&lt;strong>åè®®å±‚æ¢ç´¢&lt;/strong> ã€‚æˆ‘ä»¬æ­£åœ¨å°è¯•åŸºäº &lt;strong>Header Passer çš„é‡æ„&lt;/strong> ï¼ŒæŠŠè§£æ Header çš„æµç¨‹åšå¾—æ›´é«˜æ•ˆã€‚æˆ‘ä»¬è¿˜å°è¯•äº†åšä¸€äº›&lt;strong>ä¼ è¾“å±‚é¢„è§£æ&lt;/strong> ï¼Œå°†ä¸€äº›æ¯”è¾ƒå›ºåŒ–çš„é€»è¾‘ä¸‹æ²‰åˆ°ä¼ è¾“å±‚åšåŠ é€Ÿã€‚&lt;/p>
&lt;p>å…¶æ¬¡æ˜¯&lt;strong>ä¼ è¾“å±‚æ¢ç´¢&lt;/strong> ã€‚è¿™åŒ…æ‹¬&lt;strong>ä½¿ç”¨ writev æ•´åˆå‘é€ Header &amp;amp; Body&lt;/strong> è¾¾åˆ°å‡å°‘ç³»ç»Ÿè°ƒç”¨æ¬¡æ•°çš„ç›®çš„ï¼Œä»¥åŠé€šè¿‡&lt;strong>æ–°å¢æ¥å£æ•´åˆ &lt;code>.Peek() + .Skip()&lt;/code>&lt;/strong> è¯­ä¹‰ï¼Œåœ¨å†…éƒ¨æä¾›ä¸€ä¸ªæ›´é«˜æ•ˆçš„å®ç°ã€‚&lt;/p>
&lt;h4 id="hertz-benchmark">Hertz Benchmark&lt;/h4>
&lt;p>ä¸‹å›¾æ˜¯ Benchmark çš„å¼€æºæ•°æ®ã€‚å·¦ä¾§ç¬¬ä¸€å¼ å›¾æ˜¯åœ¨åŒç­‰çš„æœºå™¨ç¯å¢ƒä¸Šï¼Œ&lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> å’Œæ¨ªå‘çš„æ¡†æ¶ Ginã€Fasthttp æé™ QPS æ¯”è¾ƒæƒ…å†µï¼Œè“çº¿æ˜¯ &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> å¤„äºè¾ƒé«˜æé™ QPS çš„çŠ¶æ€ã€‚
ç¬¬äºŒå¼ å›¾æ˜¯ TP99 æ—¶å»¶çŠ¶æ€ï¼Œç¬¬ä¸‰å¼ å›¾æ˜¯ TP999 æ—¶å»¶çŠ¶æ€ï¼Œå¯ä»¥çœ‹åˆ° &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> çš„æ•´ä½“æ—¶å»¶æ˜¯å¤„äºä¸€ä¸ªæ›´ä½çš„æ°´å¹³ä¸Šã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_HTTP_Hertz/14.png" alt="image">&lt;/p>
&lt;h4 id="å­—èŠ‚è·³åŠ¨æœåŠ¡ç½‘æ ¼æ§åˆ¶é¢ä»-gin-è¿ç§»è‡³-hertz">å­—èŠ‚è·³åŠ¨æœåŠ¡ç½‘æ ¼æ§åˆ¶é¢ä» Gin è¿ç§»è‡³ Hertz&lt;/h4>
&lt;p>CloudWeGo å…¬ä¼—å·æ›¾å‘å¸ƒå…³äºå­—èŠ‚è·³åŠ¨æœåŠ¡ç½‘æ ¼æ§åˆ¶é¢çš„æ–‡ç« ï¼Œè®²è¿°å­—èŠ‚è·³åŠ¨æœåŠ¡ç½‘æ ¼ä» Gin æ¡†æ¶è¿ç§»åˆ° &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> çš„è½åœ°å®è·µã€‚ä¸‹å›¾æ˜¯ä»–ä»¬ä»£ç å±•ç¤ºçš„çœŸå®æ”¶ç›Šï¼Œä» Gin æ¡†æ¶æ›¿æ¢æˆä¸º &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> æ¡†æ¶åï¼Œ
&lt;strong>CPU æµé‡ä»å¤§æ¦‚å¿«åˆ° 4K é™åˆ°å¤§çº¦åªæœ‰ 2.5Kï¼ŒGoroutine æ•°é‡ä» 6w é™åˆ°ä¸è¶³ 100 ä¸ª&lt;/strong> ï¼ŒGoroutine ç¨³å®šæ€§å¾—åˆ°æå¤§åœ°æå‡ã€‚
åŒæ—¶æ›¿æ¢æˆ &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> åï¼Œ&lt;strong>æ¡†æ¶ç›¸å…³çš„å¼€é”€å·²ç»åŸºæœ¬æ¶ˆå¤±ï¼ŒæœåŠ¡ç½‘æ ¼åœ¨çº¿ä¸Šç¨³å®šæ‰¿è½½äº†è¶…è¿‡ 13M QPS çš„æµé‡&lt;/strong> ã€‚&lt;/p>
&lt;p>å­—èŠ‚è·³åŠ¨æœåŠ¡ç½‘æ ¼åŸºäº &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> æ¡†æ¶çš„å®è·µï¼šhttps://mp.weixin.qq.com/s/koi9q_57Vk59YYtO9cyAFA&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_HTTP_Hertz/15.png" alt="image">&lt;/p>
&lt;h3 id="å°ç»“-2">å°ç»“&lt;/h3>
&lt;p>ç¬¬ä¸‰ç« èŠ‚çš„å†…å®¹æ€»ç»“å¦‚ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>åˆ†å±‚æŠ½è±¡&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>è§£æ„ HTTP æ¡†æ¶ï¼Œåˆ†å±‚è§£è€¦ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>æ˜“ç”¨å¯æ‰©å±•&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>æä¾›äº†æ›´ä¸°å¯Œ API å’Œè¶³å¤Ÿçµæ´»çš„æ‹“å±•èƒ½åŠ›ï¼Œåœ¨æ¯ä¸€å±‚æŠ½è±¡ä¸­éƒ½æä¾›äº†ä¸€ä¸ªè¶³å¤Ÿçµæ´»çš„æ‰©å±•èƒ½åŠ›åº”å¯¹å¯èƒ½çš„éœ€æ±‚ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>è‡ªä¸»å¯æ§çš„é«˜æ€§èƒ½æ¢ç´¢&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>è‡ªé€‚åº” bufferï¼Œé›¶æ‹·è´è§£æï¼Œæœªæ¥å°†ä¼šè¿›è¡Œæ›´å¤šçš„é«˜æ€§èƒ½æ¢ç´¢ã€‚&lt;/p>
&lt;h2 id="æœªæ¥è§„åˆ’å’ŒæŒ‘æˆ˜">æœªæ¥è§„åˆ’å’ŒæŒ‘æˆ˜&lt;/h2>
&lt;p>æˆ‘è®¤ä¸º &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> æœªæ¥çš„å‘å±•è§„åˆ’ä¸»è¦å›´ç»•ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼šé¦–å…ˆï¼Œ&lt;strong>æ‰“é€ æ³› HTTP æ¡†æ¶&lt;/strong> ã€‚æˆ‘ä»¬çš„æœ€ç»ˆç›®æ ‡æ˜¯å¸Œæœ› &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> èƒ½å¤Ÿè§£å†³åœ¨ HTTP é¢†åŸŸå†…çš„æ‰€æœ‰é—®é¢˜ï¼›å…¶æ¬¡ï¼Œ&lt;strong>åŠ©åŠ› CloudWeGo&lt;/strong> ï¼Œå¸Œæœ› &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> èƒ½å¤ŸåŠ©åŠ› CloudWeGo æ‰“é€ ä¸€ä¸ªä¼ä¸šçº§äº‘åŸç”Ÿå¾®æœåŠ¡çŸ©é˜µï¼›æœ€åå¸Œæœ› &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> èƒ½å¤Ÿ&lt;strong>æŒç»­æœåŠ¡æ›´å¤šçš„ç”¨æˆ·&lt;/strong> ã€‚&lt;/p>
&lt;h3 id="æ€»ç»“">æ€»ç»“&lt;/h3>
&lt;p>æœ¬æ¬¡åˆ†äº«çš„ä¸»è¦å†…å®¹æ€»ç»“å¦‚ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>å­—èŠ‚è·³åŠ¨å†…éƒ¨ Go HTTP æ¡†æ¶çš„å˜è¿ï¼šä»åŸºäºå¼€æºå°è£…ï¼Œåˆ°å¼€å¯è‡ªç ”ä¹‹è·¯ï¼›&lt;/li>
&lt;li>ä¼ä¸šçº§ HTTP æ¡†æ¶çš„è®¾è®¡è€ƒé‡å’Œè½åœ°æ€è·¯ï¼šç ´åœˆã€éœ€æ±‚æç‚¼ã€æ¡†æ¶ç§‘å­¦å‘å±•è§‚ï¼›&lt;/li>
&lt;li>&lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> æ ¸å¿ƒç‰¹ç‚¹ï¼šåˆ†å±‚æŠ½è±¡ã€æ˜“ç”¨å¯æ‰©å±•ã€è‡ªä¸»å¯æ§çš„æ€§èƒ½æ¢ç´¢ï¼›&lt;/li>
&lt;li>&lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> æœªæ¥çš„è§„åˆ’å’ŒæŒ‘æˆ˜ï¼šæ¡†æ¶æŒç»­æ‰“ç£¨ã€åŠ©åŠ› CloudWeGoã€æœåŠ¡æ›´å¤šç”¨æˆ·ã€‚&lt;/li>
&lt;/ul>
&lt;p>æœ€åæ¬¢è¿å¯¹ &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> æ„Ÿå…´è¶£çš„åŒå­¦ç§¯æå‚ä¸åˆ° CloudWeGo ç¤¾åŒºä¸­ï¼Œæˆ‘ä»¬ä¸€èµ·å®Œå–„ &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a>ï¼Œå…±åŒå»ºè®¾ CloudWeGoï¼&lt;/p></description></item><item><title>Blog: Hertz v0.3.2 ç‰ˆæœ¬å‘å¸ƒ</title><link>https://www.cloudwego.io/zh/blog/2022/09/20/hertz-v0.3.2-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</link><pubDate>Tue, 20 Sep 2022 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2022/09/20/hertz-v0.3.2-%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83/</guid><description>
&lt;h2 id="feature">Feature&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/198">#198&lt;/a>] feat: æ·»åŠ è·å– Hertz client dialer åç§°çš„æ–¹æ³•ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/251">#251&lt;/a>] feat: Hertz server å¯åŠ¨æ—¥å¿—æ·»åŠ ç½‘ç»œåº“çš„åç§°ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="refactor">Refactor&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/238">#238&lt;/a>] refactor: é‡æ„ Hertz client åˆå§‹åŒ– HostClient å’Œ TLSHostClient çš„é€»è¾‘ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="optimize">Optimize&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/226">#226&lt;/a>] optimize: ä½¿ç”¨ &amp;ldquo;warning&amp;rdquo; æ—¥å¿—æç¤ºéæ³•çš„ http çŠ¶æ€ç ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="fix">Fix&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/249">#249&lt;/a>] fix: ä¿®å¤ Hertz server ä¼˜é›…é€€å‡ºæ—¶æ— æ³•æ‰§è¡Œå®Œå…¨éƒ¨ hook å‡½æ•°çš„é—®é¢˜ã€‚&lt;/li>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/232">#232&lt;/a>] fix: ä¿®å¤è·¯ç”±å°¾æ–œçº¿é‡å®šå‘åœ¨è¾¹ç¼˜æƒ…å†µå¤±æ•ˆçš„é—®é¢˜ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="chore">Chore&lt;/h2>
&lt;ul>
&lt;li>[&lt;a href="https://github.com/cloudwego/hertz/pull/217">#217&lt;/a>] chore: æ›´æ–°æäº¤ PR æ—¶çš„å¡«å†™æ¨¡æ¿ã€‚&lt;/li>
&lt;/ul></description></item><item><title>Blog: é«˜æ€§èƒ½ RPC æ¡†æ¶ CloudWeGo-Kitex å†…å¤–ç»Ÿä¸€çš„å¼€æºå®è·µ</title><link>https://www.cloudwego.io/zh/blog/2022/09/20/%E9%AB%98%E6%80%A7%E8%83%BD-rpc-%E6%A1%86%E6%9E%B6-cloudwego-kitex-%E5%86%85%E5%A4%96%E7%BB%9F%E4%B8%80%E7%9A%84%E5%BC%80%E6%BA%90%E5%AE%9E%E8%B7%B5/</link><pubDate>Tue, 20 Sep 2022 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2022/09/20/%E9%AB%98%E6%80%A7%E8%83%BD-rpc-%E6%A1%86%E6%9E%B6-cloudwego-kitex-%E5%86%85%E5%A4%96%E7%BB%9F%E4%B8%80%E7%9A%84%E5%BC%80%E6%BA%90%E5%AE%9E%E8%B7%B5/</guid><description>
&lt;h2 id="ç”±å†…è‡³å¤–---å¼€æºè¿‡æ¸¡">ç”±å†…è‡³å¤– - å¼€æºè¿‡æ¸¡&lt;/h2>
&lt;p>å¾ˆå¤šåŒå­¦å¯èƒ½åˆšåˆšäº†è§£ CloudWeGoï¼Œå…ˆä»‹ç»ä¸€ä¸‹ CloudWeGo å’Œ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> çš„å…³ç³»ã€‚&lt;/p>
&lt;h3 id="cloudwego-å’Œ-kitex">CloudWeGo å’Œ Kitex&lt;/h3>
&lt;p>&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> æ˜¯ CloudWeGo å¼€æºçš„ç¬¬ä¸€ä¸ªå¾®æœåŠ¡æ¡†æ¶ï¼Œå®ƒæ˜¯ä¸€ä¸ª &lt;strong>æ”¯æŒå¤šåè®®çš„ Golang RPC æ¡†æ¶&lt;/strong> ï¼Œä»ç½‘ç»œåº“ã€åºåˆ—åŒ–åº“åˆ°æ¡†æ¶çš„å®ç°&lt;strong>åŸºæœ¬å®Œå…¨è‡ªç ”&lt;/strong>çš„ã€‚
ç‰¹åˆ«åœ°ï¼Œ&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> å¯¹ gRPC åè®®çš„æ”¯æŒä½¿ç”¨äº† gRPC å®˜æ–¹çš„æºç ï¼Œä½†æ˜¯æˆ‘ä»¬å¯¹ gRPC çš„å®ç°åšäº† &lt;strong>æ·±åº¦ä¸”å®šåˆ¶çš„ä¼˜åŒ–&lt;/strong> ï¼Œæ‰€ä»¥ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> æ”¯æŒçš„ gRPC åè®®æ€§èƒ½ä¼˜äº gRPC å®˜æ–¹æ¡†æ¶ã€‚
åŒæ—¶è¿™ä¹Ÿæ˜¯ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> ä¸ç›®å‰å·²ç»å¼€æºçš„ã€æ”¯æŒ gRPC åè®®çš„å…¶ä»– Golang æ¡†æ¶çš„ä¸»è¦å·®å¼‚ã€‚å¦‚æœç”¨æˆ·æƒ³ä½¿ç”¨ gRPC åˆå¯¹æ€§èƒ½æœ‰å¾ˆé«˜çš„è¦æ±‚ï¼Œé‚£ä¹ˆ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> æ¡†æ¶å°†ä¼šæ˜¯ä¸€ä¸ªå¾ˆä¸é”™çš„é€‰æ‹©ã€‚&lt;/p>
&lt;p>ç»§ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> å¼€æºåï¼Œä»Šå¹´ CloudWeGo åˆé™†ç»­å¼€æºäº† Golang HTTP æ¡†æ¶ &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a>ï¼ŒRust RPC æ¡†æ¶ &lt;a href="https://github.com/cloudwego/volo">Volo&lt;/a>ï¼ŒåŒæ—¶å›´ç»•è¿™äº›å¾®æœåŠ¡æ¡†æ¶å’Œå¾®æœåŠ¡çš„ä¸€äº›é€šç”¨èƒ½åŠ›ï¼Œ
æˆ‘ä»¬è¿˜å¼€æºäº†ä¸€äº›é«˜æ€§èƒ½çš„åŸºç¡€åº“ã€‚å…³äºæ›´å¤š CloudWeGo å¼€æºçš„å­é¡¹ç›®ï¼Œå¯ä»¥è¿›å…¥ CloudWeGo &lt;a href="https://www.cloudwego.io/zh/">å®˜ç½‘&lt;/a>è¯¦ç»†äº†è§£ã€‚&lt;/p>
&lt;p>&lt;a href="https://www.cloudwego.io/zh/">CloudWeGo å®˜ç½‘&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_RPC_Kitex/1.png" alt="image">&lt;/p>
&lt;p>æ ¹æ®ç¤¾åŒºåŒå­¦åé¦ˆï¼Œåœ¨ä¸€äº›å¼€æºç¾¤é‡Œå¤§å®¶ä¼šè®¨è®º &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> ä¼šä¸ä¼šæ˜¯ä¸€ä¸ªå­—èŠ‚è·³åŠ¨çš„å¼€æº KPI é¡¹ç›®å‘¢ï¼Ÿå®ƒçš„ç¨³å®šæ€§ã€æŒç»­æ€§èƒ½å¤Ÿå¾—åˆ°ä¿éšœå—ï¼Ÿæˆ‘å¯ä»¥è´Ÿè´£ä»»åœ°è®²ï¼Œ&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> ä¸æ˜¯ä¸€ä¸ª KPI é¡¹ç›®ï¼Œå®ƒæ˜¯æ¥è‡ªå­—èŠ‚è·³åŠ¨å†…éƒ¨å¤§è§„æ¨¡å®è·µçš„çœŸå®é¡¹ç›®ã€‚
åœ¨ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> å¼€æºåå§‹ç»ˆä¿æŒå†…å¤–ç»Ÿä¸€ï¼ŒåŸºäºå†…å¤–ä»£ç çš„ç»Ÿä¸€æˆ‘ä»¬ä¿è¯äº† &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> çš„æŒç»­è¿­ä»£ã€‚ä¸ºäº†è¿›ä¸€æ­¥æ¶ˆé™¤å¤§å®¶çš„é¡¾è™‘ï¼Œä¸‹é¢å…·ä½“ä»‹ç»ä¸€ä¸‹ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> çš„è¯ç”Ÿå’Œå¼€æºå†ç¨‹ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_RPC_Kitex/2.png" alt="image">&lt;/p>
&lt;h3 id="kitex-å‘å±•å†å²">Kitex å‘å±•å†å²&lt;/h3>
&lt;p>2014 å¹´ï¼Œå­—èŠ‚è·³åŠ¨å¼€å§‹å¼•å…¥ Golangã€‚2015 å¹´ï¼Œå­—èŠ‚è·³åŠ¨å†…éƒ¨çš„æœåŠ¡åŒ–å¼€å¯ã€‚åœ¨ RPC è°ƒç”¨çš„åœºæ™¯é€‰æ‹©äº† Thrift åè®®ï¼Œåœ¨å†…éƒ¨å¼€å§‹æ”¯æŒ RPC æ¡†æ¶ã€‚2016 å¹´ï¼Œç¬¬ä¸€ä¸ª Golang RPC æ¡†æ¶ Kite æ­£å¼å‘å¸ƒã€‚
é€šå¸¸åœ¨ä¸€ä¸ªå…¬å¸é«˜é€Ÿå‘å±•çš„åˆæœŸï¼ŒåŸºç¡€èƒ½åŠ›éƒ½æ˜¯ä¸ºäº†å¿«é€Ÿæ”¯æŒéœ€æ±‚è½åœ°ï¼Œé¢å¯¹çš„éœ€æ±‚åœºæ™¯ä¹Ÿè¾ƒå•ä¸€ï¼Œè®¾è®¡ä¸Šä¸ä¼šæœ‰è¾ƒå¤šè€ƒé‡ï¼Œå…¶å®è¿™ä¹Ÿæ˜¯åˆç†çš„ï¼Œå› ä¸ºæ¢ç´¢é˜¶æ®µå¹¶ä¸å®Œå…¨æ¸…æ¥šè¿˜éœ€è¦æ”¯æŒå“ªäº›åœºæ™¯ï¼Œè¿‡å¤šçš„è€ƒè™‘åè€Œä¼šå‡ºç°è¿‡åº¦è®¾è®¡çš„é—®é¢˜ã€‚&lt;/p>
&lt;p>ä½†æ˜¯ï¼Œéšç€ä¸šåŠ¡åœºæ™¯å¤æ‚åŒ–ï¼Œéœ€æ±‚ä¹Ÿä¼šå¤šæ ·åŒ–ï¼Œè€Œä¸”æ¥å…¥æœåŠ¡åŠè°ƒç”¨é‡é€å¹´å¢é•¿ï¼ŒKite å·²ç»ä¸è¶³ä»¥æ”¯æŒåç»­çš„è¿­ä»£ï¼Œåœ¨çº¿ä¸Šæœå½¹ä¸‰å¹´å¤šåï¼Œ2019 å¹´æˆ‘ä»¬å¼€å¯äº†æ–°çš„é¡¹ç›® &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a>ï¼Œ2020 å¹´åˆå‘å¸ƒäº†æ­£å¼ç‰ˆæœ¬ï¼Œåœ¨ 2020 å¹´åº•å­—èŠ‚å†…éƒ¨å·²ç»æœ‰ 1w+ æœåŠ¡æ¥å…¥ Kitexã€‚&lt;/p>
&lt;p>ä» 2014 å¹´åˆ° 2020 å¹´ï¼ŒGolang å·²ç»æ˜¯å­—èŠ‚è·³åŠ¨å†…éƒ¨ä¸»è¦çš„ä¸šåŠ¡å¼€å‘è¯­è¨€ï¼Œåº”è¯¥æ˜¯ä¸šç•Œ Golang åº”ç”¨æœ€å¤šçš„å…¬å¸ã€‚æˆ‘ä»¬çš„æœåŠ¡æ¡†æ¶æ”¯æŒç€æ•°ä¸‡ä¸ª Golang å¾®æœåŠ¡çš„å¯é é€šä¿¡ï¼Œ
ç»è¿‡æ•°é‡ä¼—å¤šçš„å¾®æœåŠ¡å’Œæµ·é‡æµé‡çš„éªŒè¯ï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†è¾ƒä¸ºæˆç†Ÿçš„å¾®æœåŠ¡æœ€ä½³å®è·µï¼Œäºæ˜¯è€ƒè™‘å°†å†…éƒ¨çš„å®è·µå¼€æºå‡ºå»ä¸°å¯Œäº‘åŸç”Ÿç¤¾åŒºçš„ Golang äº§å“ä½“ç³»ã€‚
åœ¨ 2021å¹´ï¼Œæˆ‘ä»¬ä»¥ CloudWeGo å“ç‰Œæ­£å¼å¼€æºäº†ç¬¬ä¸€ä¸ªæœåŠ¡æ¡†æ¶ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a>ã€‚æˆªè‡³ä»Šå¹´ 8 æœˆï¼Œ&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> å·²ç»ä¸ºå­—èŠ‚è·³åŠ¨å†…éƒ¨ &lt;strong>6w+&lt;/strong> çš„æœåŠ¡æä¾›æ”¯æŒï¼Œ &lt;strong>å³°å€¼ QPS è¾¾åˆ°ä¸Šäº¿çº§åˆ«&lt;/strong> ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_RPC_Kitex/3.png" alt="image">&lt;/p>
&lt;p>å¤§å®¶æˆ–è®¸è¿˜æœ‰ç–‘é—®ï¼Œå®Œæ•´çš„å¾®æœåŠ¡ä½“ç³»ç¦»ä¸å¼€åŸºç¡€çš„äº‘ç”Ÿæ€ï¼Œæ— è®ºåœ¨å…¬æœ‰äº‘ã€ç§æœ‰äº‘ï¼Œéƒ½éœ€è¦æ­å»ºé¢å¤–çš„æœåŠ¡ä»¥å¾ˆå¥½åœ°æ”¯æŒå¾®æœåŠ¡çš„æ²»ç†ï¼Œæ¯”å¦‚æ²»ç†å¹³å°ã€æ³¨å†Œä¸­å¿ƒã€é…ç½®ä¸­å¿ƒã€ç›‘æ§ã€é“¾è·¯è·Ÿè¸ªã€æœåŠ¡ç½‘æ ¼ç­‰ï¼Œè€Œä¸”è¿˜å­˜åœ¨ä¸€äº›å®šåˆ¶çš„è§„èŒƒã€‚
å­—èŠ‚è·³åŠ¨è‡ªç„¶ä¹Ÿæœ‰å®Œå–„çš„å†…éƒ¨æœåŠ¡æ”¯æŒå¾®æœåŠ¡ä½“ç³»ï¼Œä½†è¿™äº›æœåŠ¡çŸ­æœŸè¿˜æ— æ³•å¼€æºï¼Œé‚£ CloudWeGo å¦‚ä½•å†…å¤–ç»´æŠ¤ä¸€å¥—ä»£ç ï¼Œç»Ÿä¸€è¿­ä»£å‘¢ï¼Ÿ&lt;/p>
&lt;p>å…³äºè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> çš„æ¨¡å—åˆ’åˆ†ã€‚&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> çš„æ¨¡å—åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šä¸­é—´æ˜¯ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> ä¸»å¹²éƒ¨åˆ† &lt;strong>Kitex Core&lt;/strong> ï¼Œå®ƒå®šä¹‰äº†æ¡†æ¶çš„å±‚æ¬¡ç»“æ„ã€æ¥å£æ ¸å¿ƒé€»è¾‘çš„å®ç°ä»¥åŠæ¥å£çš„é»˜è®¤å®ç°ï¼›
å·¦è¾¹çš„ &lt;strong>Kitex Tool&lt;/strong> åˆ™æ˜¯ä¸ç”Ÿæˆä»£ç ç›¸å…³çš„å®ç°ï¼Œæˆ‘ä»¬çš„ç”Ÿæˆä»£ç å·¥å…·å°±æ˜¯ç¼–è¯‘è¿™ä¸ªåŒ…å¾—åˆ°çš„ï¼Œå…¶ä¸­åŒ…æ‹¬ IDL çš„è§£æã€æ ¡éªŒã€ä»£ç ç”Ÿæˆã€æ’ä»¶æ”¯æŒç­‰ã€‚
ä¸è¿‡ä¸ºäº†ä¾¿äºç”¨æˆ·ä½¿ç”¨åŒæ—¶æä¾›æ›´å‹å¥½çš„æ‰©å±•ï¼Œä¸»è¦èƒ½åŠ›ä¹Ÿåšäº†æ‹†åˆ†ä½œä¸ºåŸºç¡€åº“ç‹¬ç«‹å¼€æºï¼Œå¦‚ Thriftgoã€Thrift-validator æ’ä»¶ã€Fastpbï¼›
å³è¾¹çš„ &lt;strong>Kitex Byted&lt;/strong> æ˜¯å¯¹å­—èŠ‚å†…éƒ¨åŸºç¡€èƒ½åŠ›é›†æˆçš„æ‰©å±•å®ç°ï¼Œæˆ‘ä»¬åœ¨å¼€å§‹å°±å°†å†…éƒ¨çš„èƒ½åŠ›ä½œä¸ºæ‰©å±•æ”¶æ•›åˆ°ä¸€ä¸ª package ä¸‹ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_RPC_Kitex/4.png" alt="image">&lt;/p>
&lt;p>å¦‚æ­¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°† &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> Core å’Œ Tool éƒ¨åˆ†å¼€æºå‡ºå»ã€‚æˆ‘ä»¬å°†ä»£ç åšäº†æ‹†åˆ†ï¼Œ&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> çš„æ ¸å¿ƒä»£ç å’Œå·¥å…·éƒ¨åˆ†è¿ç§»åˆ°å¼€æºåº“ï¼Œé›†æˆå†…éƒ¨æ‰©å±•çš„æ¨¡å—ä½œä¸º &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> çš„æ‰©å±•ä¿ç•™åœ¨å†…éƒ¨åº“ï¼ŒåŒæ—¶å†…éƒ¨åº“å°è£…ä¸€å±‚å£³ä¿è¯å†…éƒ¨ç”¨æˆ·å¯ä»¥æ— æ„ŸçŸ¥åœ°å‡çº§ã€‚&lt;/p>
&lt;p>é‚£ä¹ˆ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> çš„å¼€æºå°±åªæ˜¯ä»£ç æ‹†åˆ†è¿™ä¹ˆç®€å•å—ï¼Ÿæ˜¾ç„¶ä¸æ˜¯ã€‚2021 å¹´ 2 æœˆï¼Œæˆ‘ä»¬å¼€å§‹ç­¹å¤‡ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> çš„å¼€æºï¼Œè™½ç„¶åŸºäº &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> çš„æ‰©å±•æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä¸å†…éƒ¨åŸºç¡€è®¾æ–½é›†æˆçš„èƒ½åŠ›è§£è€¦ï¼Œä½†æ˜¯ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> ä»ç„¶ä¾èµ–å†…éƒ¨çš„ä¸€äº›åŸºç¡€åº“ï¼Œå¦‚æœè¦å¼€æºå¿…é¡»å…ˆå¼€æºåŸºç¡€åº“çš„èƒ½åŠ›ã€‚
æ‰€ä»¥æˆ‘ä»¬é¦–å…ˆåšäº†ä¾èµ–åº“çš„æ¢³ç†ï¼Œä¸ç›¸å…³çš„åŒå­¦åˆä½œé¦–å…ˆå¼€æºäº† &lt;strong>bytedance/gopkg&lt;/strong> åº“ã€‚è¿™ä¸ªåº“ç”± CloudWeGo ä¸å­—èŠ‚è·³åŠ¨çš„è¯­è¨€å›¢é˜Ÿåˆä½œç»´æŠ¤ï¼Œé‡Œé¢åŒ…å«ä¹Ÿäº†å¯¹ Golang æ ‡å‡†åº“èƒ½åŠ›çš„å¢å¼ºï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥å…³æ³¨ä½¿ç”¨ã€‚&lt;/p>
&lt;p>bytedance/gopkg: &lt;a href="https://github.com/bytedance/gopkg">https://github.com/bytedance/gopkg&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_RPC_Kitex/5.png" alt="image">&lt;/p>
&lt;p>åœ¨ gopkg åº“å¼€æºåï¼Œæˆ‘ä»¬è°ƒæ•´ä»£ç è¿›è¡Œå¼€æºé€‚é…ã€‚2021 å¹´ 7 æœˆï¼Œ&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> æ­£å¼å¼€æºï¼Œåœ¨å†…éƒ¨å‘å¸ƒä¸­ç‰ˆæœ¬ä½¿ç”¨å¼€æºåº“ã€‚
ä½† &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> æ¯•ç«Ÿæ”¯æŒäº†å†…éƒ¨å‡ ä¸‡çš„å¾®æœåŠ¡ï¼Œæˆ‘ä»¬å¿…é¡»è¦ç¡®ä¿å†…éƒ¨æœåŠ¡åœ¨è¿™ä¸ªå˜æ›´åå¯ä»¥å¹³æ»‘è¿‡æ¸¡ï¼Œæ‰€ä»¥åœ¨å¼€æºåˆæˆ‘ä»¬æ²¡æœ‰å¯¹å¤–å®˜å®£ï¼Œåœ¨ç¡®è®¤ç¨³å®šæ€§åï¼Œ&lt;strong>2021 å¹´ 9 æœˆï¼Œ&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> æ­£å¼å¯¹å¤–å®˜å®£å¼€æº&lt;/strong> ã€‚&lt;/p>
&lt;p>ä»‹ç»äº† &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> è¯ç”Ÿã€å¼€æºçš„å†ç¨‹ï¼Œå¸Œæœ›èƒ½å¤Ÿè§£é™¤å¤–éƒ¨åŒå­¦å…³äºâ€œKitex ä¼šä¸ä¼šæ˜¯ä¸€ä¸ª KPI é¡¹ç›®ï¼Ÿâ€çš„é¡¾è™‘ã€‚&lt;/p>
&lt;h3 id="å¼€æºçš„ä»·å€¼">å¼€æºçš„ä»·å€¼&lt;/h3>
&lt;p>ç¬¬ä¸€éƒ¨åˆ†çš„æœ€åï¼Œç®€å•è®²ä¸€ä¸‹å¼€æºèƒ½ä¸ºæˆ‘ä»¬å¸¦æ¥çš„ä»·å€¼ã€‚ &lt;strong>&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> ä¸æ˜¯ä¸ºäº†å¼€æºè€Œå®ç°çš„ï¼Œä½†å®ƒçš„å®ç°æ˜¯é¢å‘å¼€æºçš„ã€‚&lt;/strong> &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> æœ¬èº«æ˜¯ä¸€ä¸ªç»è¿‡å†…éƒ¨å¤§è§„æ¨¡å®ç°çš„é¡¹ç›®ï¼Œ
æˆ‘ä»¬å¸Œæœ› &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> å¼€æºåèƒ½å¸®åŠ©æ›´å¤šç”¨æˆ·åœ¨å†…éƒ¨å¿«é€Ÿæ­å»ºå¾®æœåŠ¡ï¼ŒåŒæ—¶å¼€æºèƒ½è®©æˆ‘ä»¬æ”¶é›†æ›´å¤šç¤¾åŒºå’Œä¼ä¸šçš„åé¦ˆï¼Œä¹Ÿèƒ½å¸å¼•å¤–éƒ¨å¼€å‘è€…å…±å»ºï¼Œ
ä¿ƒè¿› &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> é¢å‘å¤šå…ƒåœºæ™¯æ”¯æŒçš„æ¼”è¿›ï¼Œä¸°å¯Œäº§å“èƒ½åŠ›ï¼Œç„¶åèƒ½åœ¨æ›´å¤šåœºæ™¯å’Œä¼ä¸šå¾—åˆ°è½åœ°ï¼Œè¿™æ˜¯ä¸€ä¸ªæ­£å‘å¾ªç¯ï¼Œäº’åˆ©å…±èµ¢çš„è¿‡ç¨‹ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_RPC_Kitex/6.png" alt="image">&lt;/p>
&lt;h2 id="å¼€æºä¸€å¹´å˜æ›´å›é¡¾">å¼€æºä¸€å¹´å˜æ›´å›é¡¾&lt;/h2>
&lt;h3 id="æ¡†æ¶çš„è¡¡é‡æŒ‡æ ‡">æ¡†æ¶çš„è¡¡é‡æŒ‡æ ‡&lt;/h3>
&lt;p>åœ¨ä»‹ç» &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> å¼€æºä¸€å¹´å˜æ›´å‰ï¼Œå…ˆåˆ†äº«ä¸€ä¸‹æ¡†æ¶çš„è¡¡é‡æŒ‡æ ‡ï¼Œè¿™æ˜¯å¤§å®¶åœ¨é€‰æ‹©ä¸€ä¸ªæ¡†æ¶æ—¶è¦è€ƒè™‘çš„ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>æ‰©å±•æ€§&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>å¦‚æœä¸€ä¸ªæ¡†æ¶ä¸å†…éƒ¨èƒ½åŠ›å¼ºè€¦åˆï¼Œå°±æ— æ³•ç§»æ¤åˆ°å…¶ä»–å¹³å°ï¼Œæˆ–æ¡†æ¶çš„æ”¯æŒåœºæ™¯å•ä¸€ä¹Ÿæ— æ³•è¿›è¡Œæ‰©å±•ï¼Œè¿™æ ·çš„æ¡†æ¶å¾ˆéš¾å¾—åˆ°å¤–éƒ¨çš„ä½¿ç”¨ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>æ˜“ç”¨æ€§&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>æ¡†æ¶çš„æ˜“ç”¨æ€§ä½“ç°åœ¨ä¸¤ä¸ªæ–¹é¢ã€‚ç¬¬ä¸€æ˜¯é¢å‘&lt;strong>ä¸šåŠ¡å¼€å‘è€…&lt;/strong> ï¼Œå¦‚æœä¸€ä¸ªæ¡†æ¶åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­éœ€è¦è®©ç”¨æˆ·å…³æ³¨å¾ˆå¤šæ¡†æ¶çš„ç»†èŠ‚ï¼Œé‚£ä¹ˆå¯¹ç ”å‘æ•ˆç‡è¦æ±‚å¾ˆé«˜çš„å›¢é˜Ÿå¯èƒ½æ— æ³•æ¥å—ã€‚
ç¬¬äºŒæ˜¯é¢å‘&lt;strong>æ¡†æ¶çš„äºŒæ¬¡å¼€å‘è€…&lt;/strong> ï¼Œä»–ä»¬éœ€è¦å¯¹æ¡†æ¶åšä¸€äº›å®šåˆ¶æ”¯æŒï¼Œå¦‚æœæ¡†æ¶æä¾›çš„æ‰©å±•èƒ½åŠ›è¿‡äºå®½æ³›ï¼Œæ‰©å±•æˆæœ¬å¾ˆé«˜ï¼Œæˆ–è€…å¯æ‰©å±•çš„èƒ½åŠ›ä¸å¤Ÿå¤šï¼Œé‚£ä¹ˆè¿™ä¸ªæ¡†æ¶ä¹Ÿæ˜¯å­˜åœ¨å±€é™æ€§çš„ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>åŠŸèƒ½çš„ä¸°å¯Œåº¦&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>è™½ç„¶åŸºäºæ‰©å±•æ€§å¯ä»¥å¯¹æ¡†æ¶è¿›è¡Œå®šåˆ¶ï¼Œä½†ä¸æ˜¯æ‰€æœ‰å¼€å‘è€…éƒ½æœ‰è¶³å¤Ÿçš„ç²¾åŠ›åšå®šåˆ¶å¼€å‘ï¼Œå¦‚æœæ¡†æ¶æœ¬èº«å¯¹å„ç§æ‰©å±•èƒ½åŠ›æä¾›äº†ä¸åŒé€‰æ‹©çš„æ”¯æŒï¼Œå¯¹äºå¼€å‘è€…æ¥è¯´åªéœ€è¦æ ¹æ®è‡ªå·±çš„åŸºç¡€è®¾æ–½è¿›è¡Œç»„åˆå°±èƒ½åœ¨è‡ªå·±çš„ç¯å¢ƒä¸­è¿è¡Œã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>é«˜æ€§èƒ½&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>å‰é¢ä¸‰ç‚¹æ˜¯åˆæœŸé€‰æ‹©æ¡†æ¶éœ€è¦é‡ç‚¹å…³æ³¨çš„æŒ‡æ ‡ï¼Œä½†éšç€æœåŠ¡è§„æ¨¡å’Œèµ„æºæ¶ˆè€—å˜å¤§ï¼Œæ€§èƒ½å°±æˆäº†ä¸å®¹å¿½è§†çš„é—®é¢˜ã€‚ä»é•¿æœŸçš„è§’åº¦æ¥è¯´ï¼Œé€‰æ‹©æ¡†æ¶çš„æ—¶å€™ä¸€å®šè¦å…³æ³¨æ€§èƒ½ï¼Œå¦åˆ™åç»­åªèƒ½é¢ä¸´æ¡†æ¶æ›¿æ¢çš„é—®é¢˜ï¼Œæˆ–è€…è¢«è¿«å¯¹è¿™ä¸ªæ¡†æ¶åšå®šåˆ¶ç»´æŠ¤ã€‚&lt;/p>
&lt;p>å…³äºä»¥ä¸Šå››ç‚¹æ¡†æ¶çš„è¡¡é‡æŒ‡æ ‡ï¼Œè™½ç„¶ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> ç›®å‰è¿˜æ²¡åšåˆ°æœ€å¥½ï¼Œä½†æ˜¯è¿™å››ä¸ªè¦ç´ éƒ½æ˜¯ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> è®¾è®¡å’Œå®ç°ä¸­ä¸€ç›´åœ¨å…¼é¡¾çš„ï¼Œæˆ‘ä»¬ä¸ä¼šé¡¾æ­¤å¤±å½¼ã€‚&lt;/p>
&lt;h3 id="åŠŸèƒ½ç‰¹æ€§">åŠŸèƒ½ç‰¹æ€§&lt;/h3>
&lt;p>ä¸‹é¢å°±å‡ ä¸ªå¼€æºä¸€å¹´æ¥é‡è¦çš„åŠŸèƒ½ç‰¹æ€§è¿›è¡Œä»‹ç»ã€‚&lt;/p>
&lt;h4 id="proxyless">Proxyless&lt;/h4>
&lt;p>Proxyless æ˜¯ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> é¢å‘å¼€æºåœºæ™¯æä¾›çš„æ”¯æŒã€‚åœ¨ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> å¼€æºåˆæœŸï¼Œæˆ‘ä»¬å†…éƒ¨è®¨è®ºè¿‡æ˜¯å¦è¦æ”¯æŒ xDS å¯¹æ¥ &lt;a href="https://github.com/istio/istio">Istio&lt;/a>ï¼Œå¯¹äºå¤–éƒ¨ç”¨æˆ·æ¥è¯´ï¼Œä½¿ç”¨ &lt;a href="https://github.com/istio/istio">Istio&lt;/a> å¯ä»¥å¿«é€Ÿæ­å»ºä¸€å¥—åŸºæœ¬çš„å¾®æœåŠ¡æ¶æ„ï¼Œ
è§£å†³æœåŠ¡å‘ç°ã€æµé‡è·¯ç”±ã€é…ç½®ä¸‹å‘ç­‰é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨å®Œæ•´çš„ &lt;a href="https://github.com/istio/istio">Istio&lt;/a> çš„è§£å†³æ–¹æ¡ˆï¼Œå°±è¦å¼•å…¥ Envoyï¼Œè¿™ä¼šå¢åŠ è¿ç»´æˆæœ¬ï¼Œè€Œä¸”ç›´æ¥ä½¿ç”¨å®˜æ–¹çš„ Envoy æ–¹æ¡ˆå¯¹æ€§èƒ½æœ‰æŸï¼Œä¼šå¼•å…¥é¢å¤–çš„ CPU å¼€é”€ä¸”å¢åŠ å»¶è¿Ÿã€‚
&lt;strong>å¦‚æœ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> èƒ½ç›´æ¥å¯¹æ¥ &lt;a href="https://github.com/istio/istio">Istio&lt;/a>ï¼Œæ—¢èƒ½è®©ç”¨æˆ·äº«å—åˆ°éƒ¨åˆ† &lt;a href="https://github.com/istio/istio">Istio&lt;/a> çš„èƒ½åŠ›ï¼Œåˆå¯ä»¥é¿å… Envoy å¸¦æ¥çš„æ€§èƒ½æŸå¤±å’Œéƒ¨ç½²è¿ç»´æˆæœ¬ã€‚&lt;/strong> ä½†æ˜¯åœ¨å¼€æºåˆæœŸï¼Œæˆ‘ä»¬æ²¡æœ‰çœ‹åˆ°å¾ˆæ˜ç¡®çš„ç”¨æˆ·è¯‰æ±‚ï¼Œå› æ­¤æ²¡æœ‰å¯¹æ­¤åšé«˜ä¼˜çš„æ”¯æŒã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_RPC_Kitex/7.png" alt="image">&lt;/p>
&lt;p>åæ¥ gRPC å®˜æ–¹ä¹Ÿå‘å¸ƒäº† Proxyless çš„æ”¯æŒï¼ŒåŒæ—¶ &lt;a href="https://github.com/istio/istio">Istio&lt;/a> çš„å®˜æ–¹ä¹Ÿå°† Proxyless ä½œä¸ºä½¿ç”¨ &lt;a href="https://github.com/istio/istio">Istio&lt;/a> çš„ä¸€ç§æ–¹å¼ã€‚&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> ç°åœ¨ä¹Ÿå·²å®Œæˆæ”¯æŒï¼Œç›®å‰ä¸»è¦æ˜¯å¯¹æ¥æœåŠ¡å‘ç°ï¼Œ
xDS æ”¯æŒçš„æ‰©å±•å•ç‹¬å¼€æºåˆ°äº† &lt;a href="https://github.com/kitex-contrib/xds">kitex-contrib/xds&lt;/a> åº“ä¸­ï¼Œåç»­è¿˜ä¼šå®Œå–„ã€‚å¤§å®¶å¯ä»¥æ ¹æ® README äº†è§£å¦‚ä½•ä½¿ç”¨ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> å¯¹æ¥ &lt;a href="https://github.com/istio/istio">Istio&lt;/a>ã€‚&lt;/p>
&lt;h4 id="json-å’Œ-protobuf-æ³›åŒ–è°ƒç”¨æ”¯æŒ">JSON å’Œ Protobuf æ³›åŒ–è°ƒç”¨æ”¯æŒ&lt;/h4>
&lt;p>ä¹‹å‰ï¼Œ&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> æ”¯æŒäº†åº”ç”¨åœ¨ç½‘å…³åœºæ™¯çš„ HTTP æ³›åŒ–ï¼Œä»¥åŠæ”¯æŒäº†åº”ç”¨åœ¨ä¸€äº›é€šç”¨æœåŠ¡åœºæ™¯çš„ Map å’ŒäºŒè¿›åˆ¶æ³›åŒ–ã€‚å¼€æºåï¼Œæ ¹æ®ç”¨æˆ·çš„éœ€æ±‚åé¦ˆåˆæ–°å¢äº† JSON å’Œ Protobuf çš„æ³›åŒ–ã€‚&lt;/p>
&lt;p>Protobuf çš„æ³›åŒ–ä¹Ÿæ˜¯åº”ç”¨åœ¨ API ç½‘å…³çš„åœºæ™¯ã€‚åŸæ¥çš„ HTTP æ³›åŒ–ä¼ è¾“çš„æ•°æ®æ ¼å¼æ˜¯ JSONï¼Œä½†æ˜¯ JSON çš„åºåˆ—åŒ–ä½“ç§¯å¤§ã€æ•ˆç‡ä½ï¼Œå¯¹æ€§èƒ½æœ‰å½±å“ï¼Œæ‰€ä»¥å¾ˆå¤šç§»åŠ¨ç«¯çš„æ¥å£é€‰æ‹©ä½¿ç”¨ Protobuf ä¼ è¾“æ•°æ®ï¼Œå› æ­¤å¢åŠ äº† Protobuf æ³›åŒ–çš„æ”¯æŒã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_RPC_Kitex/8.png" alt="image">&lt;/p>
&lt;p>&lt;strong>ç›®å‰ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> çš„æ³›åŒ–ä¸»è¦é’ˆå¯¹åç«¯çš„ Thrift æœåŠ¡ï¼Œæ— è®ºæ˜¯ Protobufã€Map è¿˜æ˜¯ JSONï¼Œ&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> éƒ½ä¼šåœ¨è°ƒç”¨ç«¯ç»“åˆ IDL è§£æï¼Œå°†è¿™äº›æ•°æ®æ˜ å°„ç¼–ç ä¸º Thrift åŒ…å‘ç»™åç«¯æœåŠ¡ã€‚&lt;/strong>&lt;/p>
&lt;p>é‚£ä¹ˆä¸ºä»€ä¹ˆæŠŠæ³›åŒ–æ”¾åœ¨è°ƒç”¨ç«¯è€Œä¸æ˜¯æœåŠ¡ç«¯å‘¢ï¼Ÿå¤§å®¶å¹¿æ³›äº†è§£çš„æ³›åŒ–éƒ½æ˜¯æœåŠ¡ç«¯å¯¹æ³›åŒ–è¯·æ±‚åšäº†è§£æå¤„ç†ï¼Œå½“ç„¶è°ƒç”¨ç«¯ä¹Ÿè¦ç›¸åº”åœ°æä¾›æ³›åŒ–çš„ Clientã€‚
ä½†æ˜¯æ³›åŒ–é¢å‘çš„æ˜¯é€šç”¨æœåŠ¡ï¼Œæ³›åŒ–ä½¿ç”¨æˆæœ¬å…¶å®æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œå®ƒå¹¶ä¸é€‚ç”¨äºæ™®é€šçš„ RPC åœºæ™¯ï¼Œè€Œé€šç”¨æœåŠ¡é¢å‘çš„æ˜¯æ‰€æœ‰åç«¯çš„æœåŠ¡ï¼Œæœ‰ Golang/Java/C++/Python/Rustï¼Œå¦‚æœæ¯ä¸€ç§è¯­è¨€æ¡†æ¶éƒ½æ”¯æŒæ³›åŒ–ï¼Œæˆæœ¬æ˜¯éå¸¸é«˜çš„ã€‚
å°±ç®—å„ä¸ªè¯­è¨€éƒ½å¯¹æ³›åŒ–åšäº†æ”¯æŒï¼Œæ¡†æ¶ç‰ˆæœ¬æ”¶æ•›åˆæ˜¯ä¸€ä¸ªæ¼«é•¿çš„è¿‡ç¨‹ï¼Œå¯¹äºé€šç”¨æœåŠ¡æ¥è¯´ï¼Œå¯¹æ¥æ‰€æœ‰çš„æœåŠ¡å°±æ˜¾å¾—ä¸å¤ªç°å®ã€‚ç»¼åˆä»¥ä¸ŠåŸå› ï¼Œæ³›åŒ–æ”¾åœ¨è°ƒç”¨ç«¯æ”¯æŒã€‚&lt;/p>
&lt;h4 id="é‡è¯•èƒ½åŠ›å¢å¼º">é‡è¯•èƒ½åŠ›å¢å¼º&lt;/h4>
&lt;p>å»å¹´å¼€æºæ—¶ï¼Œ&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> å·²ç»æ”¯æŒäº†é‡è¯•åŠŸèƒ½ã€‚ä¹‹å‰æ”¯æŒçš„é‡è¯•æœ‰ä¸¤ç±»ï¼Œä¸€ä¸ªæ˜¯è¶…æ—¶é‡è¯•ï¼Œä¸€ä¸ªæ˜¯ Backup Requestã€‚&lt;/p>
&lt;p>å¯¹äºè¶…æ—¶æ¥é‡è¯•æ¥è¯´ï¼Œæˆ‘ä»¬åªä¼šå¯¹è¶…æ—¶è¿™ä¸€ç§å¼‚å¸¸è¿›è¡Œé‡è¯•ï¼Œä½†ä¸ºäº†è¿›ä¸€æ­¥æé«˜è¯·æ±‚æˆåŠŸç‡ï¼Œç”¨æˆ·å¸Œæœ›å¯¹å…¶ä»–çš„å¼‚å¸¸ä¹Ÿè¿›è¡Œé‡è¯•ï¼Œæˆ–è€…ç”¨æˆ·å¯èƒ½ä¼šå®šä¹‰ä¸€äº›ç”¨æˆ·è¯·æ±‚çš„çŠ¶æ€ç ï¼Œç»“åˆç”¨æˆ·çŠ¶æ€ç è¿›è¡Œé‡è¯•ï¼Œ
åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ˜¾ç„¶æˆ‘ä»¬åªæ”¯æŒè¶…æ—¶é‡è¯•æ˜¯ä¸æ»¡è¶³ç”¨æˆ·éœ€æ±‚çš„ã€‚åŸºäºè¿™ä¸ªèƒŒæ™¯ï¼Œ &lt;strong>Kitex æ–°å¢äº†æŒ‡å®šç»“æœé‡è¯•&lt;/strong> ï¼Œç”¨æˆ·å¯ä»¥æŒ‡å®šå…¶ä»–å¼‚å¸¸æˆ–æŒ‡å®šæŸä¸€ç±» Responseï¼Œæ¡†æ¶ä¼šç»“åˆç”¨æˆ·æŒ‡å®šçš„ç»“æœè¿›è¡Œé‡è¯•ã€‚&lt;/p>
&lt;p>å…¶æ¬¡ï¼Œç”¨æˆ·åœ¨é…ç½®é‡è¯•æ—¶ï¼Œå¦‚æœé€šè¿‡ä»£ç é…ç½®çš„æ–¹å¼è®¾ç½®é‡è¯•ï¼Œå®ƒä¼šå¯¹æ•´ä¸ª Client çš„æ‰€æœ‰ RPC æ–¹æ³•ç”Ÿæ•ˆï¼Œä½†æ˜¯ç”¨æˆ·å¸Œæœ›é’ˆå¯¹ä¸åŒçš„ RPC æ–¹æ³•åº”ç”¨ä¸åŒçš„é‡è¯•ç­–ç•¥ï¼Œç”šè‡³åŒä¸€ä¸ªæ–¹æ³•ä¹Ÿå¸Œæœ›å¯ä»¥é‡‡ç”¨ä¸åŒçš„é‡è¯•ç­–ç•¥ï¼Œ
å› ä¸ºä¸åŒé“¾è·¯ä¸Šå‘èµ·çš„åŒä¸€ä¸ªæ–¹æ³•çš„è¯·æ±‚å¯¹æŒ‡æ ‡è¦æ±‚ä¹Ÿä¼šä¸åŒã€‚æ¯”å¦‚æœ‰äº›æƒ³ä½¿ç”¨ Backup Request å‡å°‘å»¶è¿Ÿï¼Œæœ‰äº›æƒ³åšå¼‚å¸¸é‡è¯•æé«˜æˆåŠŸç‡ï¼Œå¯¹äºè¿™ç§æƒ…å†µï¼Œ &lt;strong>&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> æ–°çš„ç‰ˆæœ¬æ”¯æŒäº†è¯·æ±‚ç²’åº¦é…ç½®é‡è¯•&lt;/strong> ã€‚&lt;/p>
&lt;p>ä¸‹å›¾æ˜¯ä½¿ç”¨ç¤ºä¾‹ã€‚ä»¥è¯·æ±‚ç²’åº¦é‡è¯•é…ç½®ä¸ºä¾‹ï¼Œæ¯”å¦‚ RPC æ–¹æ³•æ˜¯ &lt;code>Mock&lt;/code>ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨å‘èµ· RPC è°ƒç”¨çš„æ—¶å€™ï¼Œåœ¨åé¢å¯ä»¥é…ç½®ä¸€ä¸ª &lt;code>callopt&lt;/code> æŒ‡å®šé‡è¯•ç­–ç•¥ï¼Œæ­¤æ¬¡è¯·æ±‚å°±ä¼šä½¿ç”¨è¿™ä¸ªé‡è¯•ç­–ç•¥ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_RPC_Kitex/9.png" alt="image">&lt;/p>
&lt;h4 id="thrift-validator">Thrift Validator&lt;/h4>
&lt;p>Thrift-gen-validator æ˜¯ Thriftgo çš„ä¸€ä¸ªå·¥å…·æ’ä»¶ï¼Œå®ƒå¯ä»¥æ ¹æ® Thrift IDL ä¸­å®šä¹‰çš„æ³¨è§£æè¿°çº¦æŸç»™å¯¹åº”çš„ &lt;code>struct&lt;/code> ç”Ÿæˆ &lt;code>IsValid() error&lt;/code> æ–¹æ³•ï¼Œæ ¡éªŒå€¼çš„åˆæ³•æ€§ã€‚
é€šå¸¸åš RPC è°ƒç”¨çš„æ—¶å€™ï¼Œç”¨æˆ·å¯èƒ½ä¼šå¯¹ä¸€äº›å­—æ®µæ ¡éªŒåˆæ³•æ€§ï¼Œç”¨æˆ·å¦‚æœç›´æ¥å†™è¿™äº›æ ¡éªŒä»£ç ï¼ŒæŠ•å…¥çš„æˆæœ¬ä¼šå¾ˆé«˜ã€‚æ‰€ä»¥æˆ‘ä»¬å°±æä¾›äº†æ³¨è§£æ”¯æŒï¼Œ &lt;strong>åªè¦ç”¨æˆ·åœ¨ IDL ä¸­æ ¹æ®è§„èŒƒå®šä¹‰æ³¨è§£ï¼ŒKitex å°±å¯ä»¥å¸®åŠ©ç”¨æˆ·ç”Ÿæˆæ ¡éªŒä»£ç &lt;/strong> ã€‚&lt;/p>
&lt;p>ä¸‹å›¾æ˜¯ä»£ç ç”Ÿæˆçš„å‘½ä»¤å’Œä¸€ä¸ª IDL æ³¨è§£å®šä¹‰ç¤ºä¾‹ï¼Œåœ¨ç”Ÿæˆä»£ç çš„æ—¶å€™æŒ‡å®š Thrift Validator çš„æ’ä»¶ï¼Œæˆ‘ä»¬çš„æ’ä»¶å·¥å…·å°±ä¼šè§£ææ³¨è§£ï¼Œä¸ºç”¨æˆ·ç”Ÿæˆè¿™ä¸€å¥—åˆæ³•æ€§æ ¡éªŒçš„ä»£ç ã€‚
ç›®å‰æˆ‘ä»¬ä¹Ÿå°† Thrift Validator çš„åŠŸèƒ½è´¡çŒ®ç»™äº† Apache Thriftã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_RPC_Kitex/10.png" alt="image">&lt;/p>
&lt;h3 id="æ€§èƒ½ä¼˜åŒ–">æ€§èƒ½ä¼˜åŒ–&lt;/h3>
&lt;p>ä»‹ç»å®Œå‡ ä¸ªé‡è¦çš„åŠŸèƒ½ç‰¹æ€§ï¼Œå†ä»‹ç»å‡ ä¸ªåœ¨æ€§èƒ½ä¸Šçš„ä¼˜åŒ–ç‰¹æ€§ã€‚&lt;/p>
&lt;h4 id="thrift-é«˜æ€§èƒ½ç¼–è§£ç ">Thrift é«˜æ€§èƒ½ç¼–è§£ç &lt;/h4>
&lt;p>&lt;strong>&lt;a href="https://github.com/cloudwego/frugal">Frugal&lt;/a> æ˜¯ä¸€ä¸ªæ— éœ€ç”Ÿæˆç¼–è§£ç ä»£ç ã€åŸºäº JIT çš„é«˜æ€§èƒ½åŠ¨æ€ Thrift ç¼–è§£ç å™¨ã€‚&lt;/strong> è™½ç„¶æˆ‘ä»¬é’ˆå¯¹å®˜æ–¹ Thrift ç¼–è§£ç å·²ç»åšäº†ä¼˜åŒ–ï¼Œæ”¯æŒäº† FastThriftï¼Œè¿™ä¸ªåœ¨æˆ‘ä»¬å¼€æºå‰å‘å¸ƒçš„ä¼˜åŒ–å®è·µé‡Œä¹Ÿæœ‰ä»‹ç»ï¼Œ
ä½†æˆ‘ä»¬å¸Œæœ›èƒ½æœ‰è¿›ä¸€æ­¥çš„æ€§èƒ½æå‡ï¼Œå‚è€ƒæˆ‘ä»¬å¼€æºçš„é«˜æ€§èƒ½ JSON åº“ Sonic çš„è®¾è®¡ï¼Œå®ç°äº† Thrift JIT ç¼–è§£ç å™¨ã€‚ä¸‹å›¾ä¸­çš„è¡¨æ ¼æ˜¯ &lt;a href="https://github.com/cloudwego/frugal">Frugal&lt;/a> ç»“åˆ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> ä¸ FastThrift çš„æ€§èƒ½å¯¹æ¯”ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_RPC_Kitex/11.png" alt="image">&lt;/p>
&lt;p>å¯ä»¥çœ‹åˆ°åœ¨å¤§éƒ¨åˆ†åœºæ™¯ RPC æ€§èƒ½è¡¨ç°éƒ½è¾ƒä¼˜ã€‚é™¤äº†æ€§èƒ½ä¸Šçš„ä¼˜åŠ¿ï¼Œ&lt;a href="https://github.com/cloudwego/frugal">Frugal&lt;/a> è¿˜æœ‰å¦ä¸€ä¸ªä¼˜åŠ¿æ˜¯æ— éœ€ç”Ÿæˆç¼–è§£ç ç”Ÿæˆä»£ç ã€‚Thrift çš„ç”Ÿæˆä»£ç æ¯” Protobuf ç¹é‡ï¼Œä¸€ä¸ªå¤æ‚çš„ IDL ä»£ç ç”Ÿæˆæ–‡ä»¶å¯ä»¥è¾¾åˆ°å‡ ä¸‡è¡Œï¼Œ
è€Œè¿™äº›ä»£ç æœ¬æ¥å¯¹ç”¨æˆ·æ¥è¯´æ— éœ€å…³æ³¨ï¼Œå´éœ€è¦ç”±ç”¨æˆ·æ¥ç»´æŠ¤ã€‚&lt;a href="https://github.com/cloudwego/frugal">Frugal&lt;/a> åªéœ€è¦ç”Ÿæˆç»“æ„ä½“ä»£ç ï¼Œä¸éœ€ç”Ÿæˆç¼–è§£ç ä»£ç ï¼Œå°±å¤§å¤§è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚&lt;/p>
&lt;p>å…³äºå¦‚ä½•åœ¨ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> ä¸­ä½¿ç”¨ &lt;a href="https://github.com/cloudwego/frugal">Frugal&lt;/a>ï¼Œå¯ä»¥å‚è€ƒä»“åº“çš„ &lt;a href="https://github.com/cloudwego/frugal#readme">Readme&lt;/a>ã€‚å½“ç„¶ç”¨æˆ·ä¹Ÿå¯ä»¥å•ç‹¬ä½¿ç”¨ &lt;a href="https://github.com/cloudwego/frugal">Frugal&lt;/a> ä½œä¸º Thrift é«˜æ€§èƒ½ç¼–è§£ç å™¨ï¼Œ&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> åç»­ä¹Ÿä¼šè€ƒè™‘é»˜è®¤ä½¿ç”¨ &lt;a href="https://github.com/cloudwego/frugal">Frugal&lt;/a>ã€‚&lt;/p>
&lt;h4 id="protobuf-é«˜æ€§èƒ½ç¼–è§£ç ">Protobuf é«˜æ€§èƒ½ç¼–è§£ç &lt;/h4>
&lt;p>è™½ç„¶æˆ‘ä»¬å†…éƒ¨ä¸»è¦æ”¯æŒ Thriftï¼Œä½†å¼€æºä¹‹åæˆ‘ä»¬å‘ç°å¤–éƒ¨ç”¨æˆ·å¯¹äº Protobuf æˆ– gRPC çš„å…³æ³¨ä¼šæ›´å¤šï¼Œæ‰€ä»¥å‚è€ƒ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> FastThrift çš„ä¼˜åŒ–æ€è·¯ï¼Œé‡æ–°å®ç°äº† Protobuf çš„ç”Ÿæˆä»£ç ã€‚
åœ¨ v0.4.0 ç‰ˆæœ¬ï¼Œå¦‚æœç”¨æˆ·ä½¿ç”¨ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> çš„å·¥å…·ç”Ÿæˆ Protobuf çš„ä»£ç ï¼Œå°±ä¼šé»˜è®¤ç”Ÿæˆ &lt;a href="https://github.com/cloudwego/fastpb">Fastpb&lt;/a> çš„ç¼–è§£ç ä»£ç ï¼Œåœ¨å‘èµ· RPC è°ƒç”¨çš„æ—¶å€™ï¼Œ&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> ä¹Ÿä¼šé»˜è®¤ä½¿ç”¨ &lt;a href="https://github.com/cloudwego/fastpb">Fastpb&lt;/a>ã€‚&lt;/p>
&lt;p>ä¸‹é¢åˆ—å‡ºçš„æ˜¯ &lt;a href="https://github.com/cloudwego/fastpb">Fastpb&lt;/a> ä¸å®˜æ–¹ Protobuf åºåˆ—åŒ–çš„æ€§èƒ½å¯¹æ¯”ï¼Œå¯ä»¥çœ‹åˆ°æ— è®ºæ˜¯ç¼–ç è¿˜æ˜¯è§£ç ï¼Œåœ¨æ•ˆç‡å’Œå†…å­˜åˆ†é…ä¸Šï¼Œ&lt;a href="https://github.com/cloudwego/fastpb">Fastpb&lt;/a> éƒ½è¿œè¿œä¼˜äºå®˜æ–¹ Protobuf åºåˆ—åŒ–åº“ã€‚&lt;/p>
&lt;ul>
&lt;li>FastWrite: &lt;strong>(ns/op) â†“67.8% ï¼Œ(B/op) â†“83.9%&lt;/strong>&lt;/li>
&lt;li>FastRead: &lt;strong>(ns/op) â†“41.5% ï¼Œ(B/op) â†“4.5%&lt;/strong>&lt;/li>
&lt;/ul>
&lt;h4 id="grpc-æ€§èƒ½ä¼˜åŒ–">gRPC æ€§èƒ½ä¼˜åŒ–&lt;/h4>
&lt;p>å¼€æºåˆæœŸï¼Œæˆ‘ä»¬å¯¹ gRPC æ•´ä½“ç¨³å®šæ€§å’Œæ€§èƒ½çš„å…³æ³¨æ˜¯æ¯”è¾ƒå°‘çš„ã€‚å› ä¸ºå†…éƒ¨ä½¿ç”¨çš„åœºæ™¯ä¸æ˜¯å¾ˆå¤šã€‚å¼€æºåæ”¶åˆ°äº†å¾ˆå¤šå¤–éƒ¨åŒå­¦çš„åé¦ˆï¼Œ
æ‰€ä»¥æˆ‘ä»¬é’ˆå¯¹ gRPC åšäº†ä¸€ä¸ªä¸“é¡¹çš„é—®é¢˜æ²»ç†ä»¥åŠæ€§èƒ½ä¼˜åŒ–ã€‚ä»Šå¹´ä¸­æ—¬æˆ‘ä»¬å·²ç»æŠŠç›¸å…³çš„ä¼˜åŒ–æ­£å¼æäº¤åˆ°å¼€æºåº“ï¼Œåœ¨ v0.4.0 ç‰ˆæœ¬å‘å¸ƒã€‚&lt;/p>
&lt;p>Kitex v0.4.0: &lt;a href="https://mp.weixin.qq.com/s/ezifbQkHcZQP6MygmJABYA">https://mp.weixin.qq.com/s/ezifbQkHcZQP6MygmJABYA&lt;/a>&lt;/p>
&lt;p>ä¸‹å›¾ä¸­å·¦ä¾§æ˜¯ä¼˜åŒ–å‰ Kitex-gRPC å’Œå®˜æ–¹ gRPC æ¡†æ¶å¯¹ &lt;strong>Unary è¯·æ±‚&lt;/strong>çš„å‹æµ‹ååå¯¹æ¯”ï¼Œåœ¨å¹¶å‘æ¯”è¾ƒä½çš„æƒ…å†µä¸‹ï¼Œ&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> çš„ååå¹¶ä¸å…·æœ‰ä¼˜åŠ¿ï¼Œ
ä½¿ç”¨ &lt;a href="https://github.com/cloudwego/fastpb">Fastpb&lt;/a> çš„æ—¶å€™ï¼Œ&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> çš„ååè¡¨ç°ä¼šå¥½ä¸€äº›ï¼Œä½†ä½å¹¶å‘çš„ååä¾ç„¶ä½äºå®˜æ–¹ gRPCã€‚åœ¨ä¼˜åŒ–ä¹‹åï¼Œååå¯¹æ¯”å¦‚å³å›¾æ‰€ç¤ºã€‚&lt;strong>ç›¸æ¯”ä¼˜åŒ–å‰ååæå‡ 46% - 70%ï¼Œç›¸æ¯”å®˜æ–¹ gRPC æ¡†æ¶ï¼Œååé«˜ 51% - 70%ã€‚&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_RPC_Kitex/13.png" alt="image">&lt;/p>
&lt;p>ä¸‹å›¾ä¸­å³ä¾§æ˜¯ä¼˜åŒ–å &lt;strong>Unary è¯·æ±‚&lt;/strong>çš„å»¶è¿Ÿå¯¹æ¯”ï¼Œåœ¨ååæ¯”å®˜æ–¹ gRPC é«˜å‡ºå¾ˆå¤šçš„æƒ…å†µä¸‹ï¼Œ&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> çš„å»¶è¿Ÿä¹Ÿæ˜¾è‘—ä½äºå®˜æ–¹çš„ gRPCã€‚åŒæ—¶å°± &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> è‡ªèº«è€Œè¨€ï¼Œåœ¨ä¼˜åŒ–åå»¶è¿Ÿè¡¨ç°ä¹Ÿå¥½äº†å¾ˆå¤šã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_RPC_Kitex/14.png" alt="image">&lt;/p>
&lt;p>æˆ‘ä»¬å†çœ‹ä¸‹ &lt;strong>Streaming è¯·æ±‚&lt;/strong>çš„å‹æµ‹æ€§èƒ½å¯¹æ¯”ï¼Œä¼˜åŒ–å‰ Streaming è¯·æ±‚çš„è¡¨ç°åŒæ ·åœ¨ä½å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œç›¸å¯¹ gRPC æ¡†æ¶æ²¡æœ‰ä¼˜åŠ¿ã€‚
ç»è¿‡ä¼˜åŒ–åï¼Œ&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> ååæ˜¾è‘—é«˜äºå®˜æ–¹ gRPCï¼Œå¦‚ä¸‹å›¾ï¼ŒåŒæ—¶ä½å¹¶å‘ä¸‹ååé«˜ä½†å»¶è¿ŸæŒå¹³ï¼Œå¢åŠ å¹¶å‘åèƒ½çœ‹åˆ°å»¶è¿Ÿå‡ºç°åˆ†å‰ã€‚æ‰€ä»¥åœ¨æ€§èƒ½ä¸Šï¼Œ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> æ”¯æŒçš„ gRPC åè®®ç›¸å¯¹å®˜æ–¹æœ‰æ˜æ˜¾çš„ä¼˜åŠ¿ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_RPC_Kitex/15.png" alt="image">&lt;/p>
&lt;p>è™½ç„¶åœ¨éƒ¨åˆ†åŠŸèƒ½ä¸Šï¼Œ&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> è¿˜æ²¡æœ‰å®Œå…¨å¯¹é½ï¼Œä½†æ˜¯ç›®å‰å·²ç»å¯ä»¥æ»¡è¶³å¤§éƒ¨åˆ†çš„åœºæ™¯éœ€æ±‚ï¼Œæˆ‘ä»¬åç»­ä¹Ÿä¼šç»§ç»­è¿›è¡ŒåŠŸèƒ½å¯¹é½ã€‚&lt;/p>
&lt;h2 id="ç¤¾åŒºå…±å»ºå®Œå–„ç”Ÿæ€åŠä¼ä¸šè½åœ°">ç¤¾åŒºå…±å»ºå®Œå–„ç”Ÿæ€åŠä¼ä¸šè½åœ°&lt;/h2>
&lt;h3 id="ç¤¾åŒºå…±å»ºçš„-kitex-æ‰©å±•ç”Ÿæ€">ç¤¾åŒºå…±å»ºçš„ Kitex æ‰©å±•ç”Ÿæ€&lt;/h3>
&lt;p>å¼€æºåï¼Œæˆ‘ä»¬å¾ˆæ¬£æ…°å¾—åˆ°äº†å¾ˆå¤šå¼€å‘è€…çš„å…³æ³¨ï¼Œå¦ç™½è¯´å†…éƒ¨å›¢é˜Ÿç²¾åŠ›æœ‰é™ï¼Œæ— æ³•å¿«é€Ÿå»ºç«‹èµ·é¢å‘å¤–éƒ¨ç”¨æˆ·çš„ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> æ‰©å±•ç”Ÿæ€ã€‚ä½†æ˜¯ä¸€å¹´ä»¥æ¥å€ŸåŠ©ç¤¾åŒºçš„åŠ›é‡ï¼Œ
&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> åœ¨ &lt;strong>æœåŠ¡æ³¨å†Œ/å‘ç°&lt;/strong>ã€ &lt;strong>å¯è§‚æµ‹æ€§&lt;/strong>ã€&lt;strong>æœåŠ¡æ²»ç†&lt;/strong>å‡ éƒ¨åˆ†çš„æ‰©å±•å¾—åˆ°äº†å¾ˆå¤šè¡¥å……ï¼Œå°¤å…¶æ˜¯æœåŠ¡æ³¨å†Œ/å‘ç°ç›¸å…³çš„æ‰©å±•ï¼Œç›®å‰å¼€æºçš„ä¸»æµæ³¨å†Œä¸­å¿ƒéƒ½å·²å®Œæˆå¯¹æ¥ï¼Œ
è™½ç„¶åœ¨åŠŸèƒ½ä¸°å¯Œåº¦ä¸Šæˆ‘ä»¬è¿˜æœ‰å¾…åŠ å¼ºï¼Œä½†ç»“åˆå·²æœ‰çš„æ”¯æŒï¼Œå¯¹äºå¤–éƒ¨ç”¨æˆ·å·²ç»å…·å¤‡äº†æ­å»ºå¾®æœåŠ¡æ¶æ„çš„èƒ½åŠ›ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_RPC_Kitex/16.png" alt="image">&lt;/p>
&lt;p>è¡·å¿ƒæ„Ÿè°¢ç§¯æå‚ä¸ CloudWeGo ç¤¾åŒºå»ºè®¾çš„åŒå­¦ä»¬ï¼å…³äº &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> ç›¸å…³çš„ç”Ÿæ€æ”¯æŒï¼Œå¤§å®¶å¯ä»¥è¿›å…¥ &lt;a href="https://github.com/kitex-contrib">kitex-contrib&lt;/a> äº†è§£æ›´å¤šçš„å¼€æºä»“åº“ã€‚&lt;/p>
&lt;h3 id="å¯¹æ¥å¤–éƒ¨ä¼ä¸šååŠ©è½åœ°">å¯¹æ¥å¤–éƒ¨ä¼ä¸šï¼ŒååŠ©è½åœ°&lt;/h3>
&lt;p>æˆ‘ä»¬å¼€æºçš„åˆè¡·æ˜¯ä¸ºäº†åŠ©åŠ›å…¶ä»–å¤–éƒ¨ä¼ä¸šå¿«é€Ÿåœ°æ­å»ºä¼ä¸šçº§çš„äº‘åŸç”Ÿæ¶æ„ã€‚å¼€æºåï¼Œæ£®é©¬ã€åå…´è¯åˆ¸ã€è´ªç©æ¸¸æˆã€ç¦¾å¤šç§‘æŠ€å…ˆåä¸»åŠ¨ä¸æˆ‘ä»¬è”ç³»ï¼Œåé¦ˆä½¿ç”¨é—®é¢˜ã€æå‡ºéœ€æ±‚ï¼Œ
çš„ç¡®è®©æˆ‘ä»¬å‘ç°äº†ä¸€äº›å’Œå†…éƒ¨åœºæ™¯ä¸ä¸€æ ·çš„é—®é¢˜ï¼Œéœ€è¦æˆ‘ä»¬å»å…³æ³¨ã€æ”¯æŒå’Œä¼˜åŒ–ï¼Œæˆ‘ä»¬å¾ˆå¼€å¿ƒ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> èƒ½åœ¨è¿™äº›ä¼ä¸šå†…éƒ¨å¾—åˆ°åº”ç”¨ã€‚
åœ¨ä»Šå¹´ 6 æœˆ 25 æ—¥çš„ CloudWeGo Meetup ä¸­ï¼Œæ£®é©¬å’Œåå…´è¯åˆ¸çš„ç ”å‘åŒå­¦ä¹Ÿåˆ†äº«äº†ä»–ä»¬ä½¿ç”¨ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> çš„å†…éƒ¨å®è·µã€‚&lt;/p>
&lt;p>æ£®é©¬ï¼šhttps://mp.weixin.qq.com/s/JAurW4P2E3NIduFaVY6jew&lt;/p>
&lt;p>åå…´è¯åˆ¸ï¼šhttps://mp.weixin.qq.com/s/QqGdzp-7rTdlxedy6bsXiw&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_RPC_Kitex/17.png" alt="image">&lt;/p>
&lt;p>é™¤äº†ä»¥ä¸Šä¼ä¸šï¼Œè¿˜æœ‰ä¸€äº›å…¬å¸ä¹Ÿç§ä¸‹å‘æˆ‘ä»¬å’¨è¯¢è¿‡ä½¿ç”¨é—®é¢˜ï¼Œæˆ‘ä»¬éå¸¸æ„Ÿè°¢è¿™äº›ä¼ä¸šç”¨æˆ·çš„æ”¯æŒï¼Œä»¥åŠå‘æˆ‘ä»¬æå‡ºçš„åé¦ˆä¿¡æ¯ã€‚
å¦‚ç¬¬ä¸€éƒ¨åˆ†æ‰€è®²ï¼Œæ”¶é›†ç¤¾åŒºå’Œä¼ä¸šçš„åé¦ˆå¯ä»¥ä¿ƒè¿› &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> é¢å‘å¤šå…ƒåœºæ™¯æ”¯æŒçš„æ¼”è¿›ï¼Œä¼ä¸šç”¨æˆ·å¦‚æœæœ‰ç›¸å…³éœ€æ±‚ï¼Œæ¬¢è¿è”ç³»æˆ‘ä»¬ã€‚&lt;/p>
&lt;h3 id="å¦‚ä½•ä½¿ç”¨-kitex-ä¸å†…éƒ¨åŸºç¡€è®¾æ–½é›†æˆ">å¦‚ä½•ä½¿ç”¨ Kitex ä¸å†…éƒ¨åŸºç¡€è®¾æ–½é›†æˆ&lt;/h3>
&lt;p>è¿™é‡Œå†ç®€å•ä»‹ç»ä¸‹å¦‚ä½•ä½¿ç”¨ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> ä¸å¤§å®¶çš„å†…éƒ¨åŸºç¡€è®¾æ–½é›†æˆã€‚ä»¥å­—èŠ‚å†…éƒ¨ä¸ºä¾‹ï¼Œå†…éƒ¨ä»“åº“é‡Œæœ‰å¼€æºåº“ä¸­çš„æ‰©å±•å®ç°ï¼Œé›†æˆå†…éƒ¨çš„èƒ½åŠ›ï¼Œ
åœ¨ bytedSuite ä¸­ï¼Œæˆ‘ä»¬é’ˆå¯¹ä¸åŒåœºæ™¯å¯¹ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> è¿›è¡Œåˆå§‹åŒ–ã€‚å¦‚ä¸‹é¢çš„ä»£ç ç¤ºä¾‹ï¼Œç”¨æˆ·åªéœ€è¦åœ¨æ„é€  Client å’Œ Server æ—¶å¢åŠ ä¸€ä¸ª option é…ç½®å°±å¯ä»¥å®Œæˆé›†æˆï¼Œ
ä¸è¿‡ä¸ºäº†è®©ç”¨æˆ·å®Œå…¨ä¸éœ€å…³æ³¨å†…éƒ¨èƒ½åŠ›çš„é›†æˆï¼Œæˆ‘ä»¬å°†è¯¥é…ç½®æ”¾åœ¨äº†ç”Ÿæˆçš„è„šæ‰‹æ¶ä»£ç ä¸­ï¼Œå…³äºé…ç½®å¦‚ä½•å†…åµŒåœ¨ç”Ÿæˆä»£ç ä¸­ï¼Œåç»­æˆ‘ä»¬ä¹Ÿä¼šå¼€æ”¾å‡ºæ¥ï¼Œæ–¹ä¾¿å¤–éƒ¨çš„æ¡†æ¶äºŒæ¬¡å¼€å‘è€…èƒ½ä»¥åŒæ ·çš„æ–¹å¼ä¸ºä¸šåŠ¡å¼€å‘åŒå­¦æä¾›é›†æˆèƒ½åŠ›ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/1st_RPC_Kitex/18.png" alt="image">&lt;/p>
&lt;h2 id="æ€»ç»“å’Œå±•æœ›">æ€»ç»“å’Œå±•æœ›&lt;/h2>
&lt;h3 id="æ€»ç»“">æ€»ç»“&lt;/h3>
&lt;p>æœ¬æ¬¡åˆ†äº«ä¸»è¦ä»‹ç»äº†ä»¥ä¸‹å†…å®¹ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> å¦‚ä½•ä¿æŒå†…å¤–ç»Ÿä¸€åœ°ä»å†…éƒ¨åº”ç”¨è¾ƒå¹¿çš„æ¡†æ¶è½¬ä¸ºå¼€æºæ¡†æ¶ï¼›&lt;/li>
&lt;li>å¼€æºä¸€å¹´ä»¥æ¥å‘å¸ƒäº†å“ªäº›é‡è¦çš„åŠŸèƒ½ç‰¹æ€§ï¼Œåšäº†å“ªäº›æ€§èƒ½ä¼˜åŒ–ï¼›&lt;/li>
&lt;li>å€ŸåŠ©ç¤¾åŒºçš„åŠ›é‡ç°åœ¨ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> çš„å‘¨è¾¹ç”Ÿæ€å¦‚ä½•ã€ä¼ä¸šè½åœ°æƒ…å†µä»¥åŠå¦‚ä½•ä½¿ç”¨ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> ä¼˜é›…åœ°é›†æˆå†…éƒ¨èƒ½åŠ›ã€‚&lt;/li>
&lt;/ul>
&lt;h3 id="å±•æœ›">å±•æœ›&lt;/h3>
&lt;ul>
&lt;li>ä¸ç¤¾åŒºåŒå­¦å…±å»ºï¼ŒæŒç»­ä¸°å¯Œç¤¾åŒºç”Ÿæ€ï¼›&lt;/li>
&lt;li>ç»“åˆå·¥ç¨‹å®è·µï¼Œä¸ºå¾®æœåŠ¡å¼€å‘è€…æä¾›æ›´å¤šä¾¿åˆ©ï¼›&lt;/li>
&lt;li>å®Œå–„å¥½ BDThrift ç”Ÿæ€ï¼ŒæŒç»­ä¼˜åŒ– Protobuf/gRPCï¼›&lt;/li>
&lt;li>æ›´å¤šç‰¹æ€§æ”¯æŒæˆ–å¼€æºï¼ŒShmIPCã€QUICã€Protobuf æ³›åŒ–â€¦&lt;/li>
&lt;/ul></description></item><item><title>Blog: å¼€æºç¤¾åŒºçš„é•¿æœŸä¸»ä¹‰ä¸æ–°å˜åŒ– â€” CloudWeGo å¼€æºç¤¾åŒºå®è·µ</title><link>https://www.cloudwego.io/zh/blog/2022/09/13/%E5%BC%80%E6%BA%90%E7%A4%BE%E5%8C%BA%E7%9A%84%E9%95%BF%E6%9C%9F%E4%B8%BB%E4%B9%89%E4%B8%8E%E6%96%B0%E5%8F%98%E5%8C%96-cloudwego-%E5%BC%80%E6%BA%90%E7%A4%BE%E5%8C%BA%E5%AE%9E%E8%B7%B5/</link><pubDate>Tue, 13 Sep 2022 00:00:00 +0000</pubDate><guid>https://www.cloudwego.io/zh/blog/2022/09/13/%E5%BC%80%E6%BA%90%E7%A4%BE%E5%8C%BA%E7%9A%84%E9%95%BF%E6%9C%9F%E4%B8%BB%E4%B9%89%E4%B8%8E%E6%96%B0%E5%8F%98%E5%8C%96-cloudwego-%E5%BC%80%E6%BA%90%E7%A4%BE%E5%8C%BA%E5%AE%9E%E8%B7%B5/</guid><description>
&lt;h2 id="æ¦‚è¿°">æ¦‚è¿°&lt;/h2>
&lt;p>CloudWeGo å¼€æºä¸€å‘¨å¹´ä»¥æ¥æ”¶è·äº†è¶…è¿‡ &lt;strong>1w&lt;/strong> çš„ star æ•°ï¼Œè¿™ä¸€å¹´ CloudWeGo ä»é¡¹ç›®çš„æ•°é‡ã€æ€§èƒ½çš„æå‡ã€ç¤¾åŒºçš„æ´»è·ƒã€ç”Ÿæ€çš„æ‹“å±•ç­‰å„ä¸ªæ–¹é¢éƒ½æœ‰ä¸€äº›æ•´ä½“çš„å˜åŒ–ã€‚
åŒæ—¶ï¼Œé€šè¿‡ä¸€å‘¨å¹´çš„å¼€æºï¼Œæˆ‘ä»¬æ”¶è·äº†éå¸¸å¤šçš„å¼€æºç¤¾åŒºç”¨æˆ·ï¼Œè¿™äº›ç”¨æˆ·åœ¨ç¤¾åŒºé‡Œä¹Ÿæä¾›äº†å¾ˆå¤šé¡¹ç›®çš„ä½¿ç”¨åé¦ˆã€‚åŸºäºè¿™äº›åé¦ˆï¼Œæˆ‘ä»¬å‘ç°éšç€æŠ€æœ¯å‘å±•å’Œç”¨æˆ·ä¸šåŠ¡çš„ä¸åœè¿­ä»£ï¼Œç”¨æˆ·éœ€æ±‚ä¹Ÿåœ¨å‘ç”Ÿç€å˜åŒ–ã€‚
å› æ­¤æˆ‘ä»¬æ¢³ç†äº†æ–°ä¸€ä»£å…³äºäº‘åŸç”Ÿå¾®æœåŠ¡ç”¨æˆ·çš„ç”»åƒï¼Œä½œä¸ºæŒ‡å¯¼æˆ‘ä»¬ç¤¾åŒºæŒç»­æ¼”è¿›çš„é‡è¦å‚è€ƒã€‚&lt;/p>
&lt;h2 id="cloudwego-å¼€æºä¸€å‘¨å¹´çš„å˜åŒ–">CloudWeGo å¼€æºä¸€å‘¨å¹´çš„å˜åŒ–&lt;/h2>
&lt;h3 id="å…¨æ™¯å›¾">å…¨æ™¯å›¾&lt;/h3>
&lt;p>CloudWeGo æ˜¯ä¸€å¥—ç”±å­—èŠ‚è·³åŠ¨å¼€æºçš„äº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„ä¸­é—´ä»¶é›†åˆã€‚åœ¨ 2021 å¹´ 9 æœˆæ­£å¼æ¨å‡ºçš„æ—¶å€™ï¼Œåªå¼€æºäº† &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> é«˜æ€§èƒ½ RPC æ¡†æ¶ã€é«˜æ€§èƒ½ç½‘ç»œåº“ &lt;a href="https://github.com/cloudwego/netpoll">Netpoll&lt;/a>ï¼Œè¿˜æœ‰ç›¸å…³çš„è¾…åŠ©å·¥å…·å’ŒåŸºç¡€åº“ã€‚&lt;/p>
&lt;p>ç»è¿‡ä¸€å¹´çš„å»ºè®¾ï¼ŒCloudWeGo ç¤¾åŒºç›®å‰æœ‰ &lt;strong>11&lt;/strong> ä¸ªé‡ç‚¹é¡¹ç›®é½å¤´å¹¶è¿›ã€‚æˆ‘ä»¬ä¸ä»…æœ‰ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> æ¡†æ¶ï¼Œè¿˜æœ‰åŸºäº HTTP ç›¸å…³çš„é«˜æ€§èƒ½æ¡†æ¶ &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a>ï¼ŒåŒæ—¶å¼€æºäº†é«˜æ€§èƒ½çš„ Rust RPC æ¡†æ¶ &lt;a href="https://github.com/cloudwego/volo">Volo&lt;/a>ï¼Œè¿™ä¹Ÿæ˜¯å›½å†…é¦–ä¸ªå¼€æº Rust RPC æ¡†æ¶ã€‚&lt;/p>
&lt;p>ä» CloudWeGo å¼€æºçš„é¡¹ç›®ä¹Ÿèƒ½æ„Ÿå—åˆ°æˆ‘ä»¬å¯¹æ€§èƒ½çš„æè‡´è¿½æ±‚ï¼Œæˆ‘ä»¬ä¸ä»…å¼€æºäº†æ¡†æ¶ç›¸å…³çš„é¡¹ç›®ï¼ŒåŒæ—¶ä¹ŸæŠŠæ·±åº¦ä¼˜åŒ–çš„ä¸€äº›ç¼–è§£ç åº“ã€ç½‘ç»œåº“éƒ½è¿›è¡Œäº†å¼€æºã€‚
åœ¨ CloudWeGo æ•´ä½“çš„é¡¹ç›®ä¸­ï¼Œå§‹ç»ˆéƒ½ä¿æŒç€ä¸‰é«˜çš„ç‰¹æ€§ï¼Œå³ &lt;strong>é«˜æ€§èƒ½&lt;/strong> ã€&lt;strong>é«˜å¯é æ€§&lt;/strong>å’Œ &lt;strong>é«˜æ‰©å±•æ€§&lt;/strong> ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/opensource_community/1.png" alt="image">&lt;/p>
&lt;p>ä¸æ­¤åŒæ—¶ï¼Œè¿™ä¸€å¹´æˆ‘ä»¬ä¹Ÿåœ¨è‡´åŠ›äºå¼€æºç¤¾åŒºçš„å»ºè®¾ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>æ˜“ç”¨æ€§&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>CloudWeGo éå¸¸é‡è§†æ•´ä¸ªé¡¹ç›®çš„æ˜“ç”¨æ€§å»ºè®¾ã€‚æˆ‘ä»¬æœ‰éå¸¸å®Œæ•´çš„å®˜æ–¹æ–‡æ¡£ä½“ç³»ï¼ŒåŒ…æ‹¬æ•´ä½“çš„æ‰©å±•å’Œ Example çš„å»ºè®¾ï¼Œä»¥åŠå„å¤§äº‘å‚å•†ç”Ÿæ€çš„å¯¹æ¥ç­‰ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>è½åœ°æ”¯æŒ&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>ä¸ºäº†å¸®åŠ©æ›´å¤šå¯¹é«˜æ€§èƒ½å¾®æœåŠ¡æ¶æ„æœ‰éœ€æ±‚çš„ç”¨æˆ·ï¼Œèƒ½å¤Ÿè®©ä»–ä»¬çœŸå®åœ°æŠŠé«˜æ€§èƒ½çš„æŠ€æœ¯è§£å†³æ–¹æ¡ˆè½åœ°ï¼Œæˆ‘ä»¬æä¾›äº† Benchmark çš„æ€§èƒ½æµ‹è¯•å’Œé€‰å‹å‚è€ƒï¼ŒåŒæ—¶æä¾›å…è´¹çš„ä¼ä¸šæ”¯æŒï¼Œå¸®åŠ©ç”¨æˆ·è§£å†³è‡ªå·±ä¸šåŠ¡ç‰¹å¼‚æ€§ä¸Šçš„ä¸€äº›é—®é¢˜ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>æ´»åŠ¨ &amp;amp; å¸ƒé“&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>ä¸ºäº†è®©æ›´å¤šæœ‰éœ€æ±‚çš„ç”¨æˆ·èƒ½å¤Ÿåœ¨ç¤¾åŒºæ‰¾åˆ°é«˜æ€§èƒ½æŠ€æœ¯è§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¼€è®¾äº†ç›¸å…³çš„æ´»åŠ¨å’Œå¸ƒé“ä½“ç³»çš„å»ºè®¾ã€‚åœ¨ CloudWeGo å¼€æºä¸€å‘¨å¹´ä¹‹é™…ï¼Œé¡¹ç›®æ•´ä½“æ”¶è·äº†å¾ˆå¤šç”¨æˆ·æ”¯æŒï¼Œä¹Ÿæ”¶è·äº†å¾ˆå¤šä¼ä¸šç”¨æˆ·çš„ä½¿ç”¨åé¦ˆã€‚&lt;/p>
&lt;h3 id="cloudwego-å¼€æºç¤¾åŒºçš„é•¿æœŸä¸»ä¹‰">CloudWeGo å¼€æºç¤¾åŒºçš„é•¿æœŸä¸»ä¹‰&lt;/h3>
&lt;h4 id="é«˜æ€§èƒ½æŠ€æœ¯è§£å†³æ–¹æ¡ˆçš„æŒç»­æ¢ç´¢">é«˜æ€§èƒ½æŠ€æœ¯è§£å†³æ–¹æ¡ˆçš„æŒç»­æ¢ç´¢&lt;/h4>
&lt;p>CloudWeGo å¼€æºä¸€å‘¨å¹´çš„å†ç¨‹ï¼Œå…¶å®å°±æ˜¯å¯¹é«˜æ€§èƒ½æŠ€æœ¯è§£å†³æ–¹æ¡ˆæŒç»­æ¢ç´¢çš„å†ç¨‹ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/opensource_community/2.png" alt="image">&lt;/p>
&lt;blockquote>
&lt;ul>
&lt;li>CloudWeGo ä» 2021 å¹´ 9 æœˆ 8 æ—¥æ­£å¼å¼€æºã€‚æ¨å‡ºé«˜æ€§èƒ½çš„ RPC æ¡†æ¶ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a>ã€é…åˆ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> ä½¿ç”¨çš„é«˜æ€§èƒ½ç½‘ç»œåº“ &lt;a href="https://github.com/cloudwego/netpoll">Netpoll&lt;/a>ã€åŸºäº Thrift ä»£ç ç”Ÿæˆå·¥å…· Thriftgo å’ŒåŸºç¡€åº“ Sonicã€‚&lt;/li>
&lt;li>2022 å¹´ 5 æœˆï¼Œå¼€æºäº†åŸºäº JIT çš„ç¼–è§£ç å·¥å…· Frugalã€‚&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> é…åˆ Frugal çš„ä½¿ç”¨ï¼Œèƒ½å¤Ÿå¸¦æ¥ 5 å€çš„æ€§èƒ½æå‡ã€‚&lt;/li>
&lt;li>2022 å¹´ 6 æœˆï¼Œå¼€æºé«˜æ€§èƒ½ HTTP æ¡†æ¶ &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a>ã€‚&lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> ä¸ä»…ä»…æ˜¯ä¸€ä¸ª é«˜æ€§èƒ½çš„ HTTP çš„å¼€æºæ¡†æ¶ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªè¶…å¤§è§„æ¨¡çš„ä¼ä¸šè½åœ°å®è·µã€‚åœ¨æˆ‘ä»¬å†…éƒ¨çš„ç½‘å…³åœºæ™¯ä¸‹ï¼Œæ›¿æ¢ &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> æ¡†æ¶ä¹‹åçš„ CPU ä½¿ç”¨èŠ‚çœäº†è¶…è¿‡ 40%ã€‚&lt;/li>
&lt;li>2022 å¹´ 7 æœˆï¼Œæˆ‘ä»¬å“åº”ç¤¾åŒºå‘¼å£°æœ€é«˜çš„å…³äº Protobuf çš„æ€§èƒ½ä¼˜åŒ–ï¼Œå¸¦æ¥äº†é«˜æ€§èƒ½çš„ Protobuf åºåˆ—åŒ–ååºåˆ—åŒ–åº“ FastPBï¼Œå†æ¬¡å¯¹ç›¸å…³çš„æ€§èƒ½è¿›è¡Œæå‡ã€‚&lt;/li>
&lt;li>å¼€æºä¸€å‘¨å¹´ä¹‹é™…ï¼Œæˆ‘ä»¬åˆè¿›è¡Œäº†æ›´æ·±åº¦çš„é«˜æ€§èƒ½æ¡†æ¶èƒ½åŠ›æ¢ç´¢ï¼Œå¼€æºäº†å›½å†…é¦–ä¸ª Rust RPC æ¡†æ¶ &lt;a href="https://github.com/cloudwego/volo">Volo&lt;/a>ã€‚&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;p>CloudWeGo å¼€æºä¸€å‘¨å¹´çš„æ—¶é—´çº¿ï¼Œéšè—ç€ CloudWeGo ç¤¾åŒºè¿è¥çš„ç¬¬ä¸€ä¸ªé•¿æœŸä¸»ä¹‰å…³é”®è¯ï¼š&lt;strong>é«˜æ€§èƒ½æŠ€æœ¯è§£å†³æ–¹æ¡ˆçš„æŒç»­æ¢ç´¢&lt;/strong> ã€‚&lt;/p>
&lt;h4 id="æ´»è·ƒ--é«˜å¯é æ€§çš„é•¿æœŸæ‰¿è¯º">æ´»è·ƒ &amp;amp; é«˜å¯é æ€§çš„é•¿æœŸæ‰¿è¯º&lt;/h4>
&lt;p>CloudWeGo å¼€æºä¸€å¹´æ¥ï¼Œæ”¶è·äº†è¶…è¿‡ 1w çš„ star æ•°ï¼Œæ•´ä¸ªç¤¾åŒºçš„æ´»è·ƒåº¦ä¹Ÿæœ‰äº†é£é€Ÿæå‡ã€‚&lt;/p>
&lt;p>ç¤¾åŒºä¿æŒç€ 2-3 ä¸ªæœˆå‘å¸ƒä¸€æ¬¡ä¸­ç‰ˆæœ¬çš„å‘ç‰ˆé¢‘ç‡ï¼ŒPR å’Œ Issue æ•°é‡åœ¨å¼€æºä¸€å¹´çš„æ—¶é—´å†…å®ç°ç¨³æ­¥æå‡ï¼Œä»æ¯æœˆ 47 æ¡ PR åˆå…¥å¢åŠ åˆ°æ¯æœˆè¶…è¿‡ 160 æ¡ PR åˆå…¥ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/opensource_community/3.png" alt="image">&lt;/p>
&lt;p>å…¶å®é«˜æ´»è·ƒçš„ç¤¾åŒºå¹¶ä¸å°‘è§ï¼Œä½†æ˜¯æˆ‘ä»¬ç¤¾åŒºè¿˜æœ‰ä¸€ä¸ªå…³é”®è¯ï¼š&lt;strong>åšæŒæ´»è·ƒ &amp;amp; é«˜å¯é æ€§çš„é•¿æœŸæ‰¿è¯º&lt;/strong>ã€‚CloudWeGo ç¤¾åŒºå¯¹å¯é æ€§çš„åšæŒï¼Œè¦æ±‚æˆ‘ä»¬ä¸ä»…è¦ç»´æŒæ´»è·ƒï¼Œè¿˜è¦ä¿æŒæ´»è·ƒä¸”å¯é ã€‚&lt;/p>
&lt;p>CloudWeGo å¼€æºç¤¾åŒºä¸€ç›´ä¿æŒç€æˆ‘ä»¬æ‰€æœ‰çš„å¼€æºé¡¹ç›®å†…å¤–ä¸€è‡´çš„æ‰¿è¯ºï¼ŒåŒæ—¶æˆ‘ä»¬å¼€æºåˆ°å¤–éƒ¨çš„æ‰€æœ‰èƒ½åŠ›å’Œé¡¹ç›®éƒ½æ˜¯åœ¨å†…éƒ¨ç»è¿‡å¯é æ€§éªŒè¯çš„ã€‚è¿™ä¹Ÿæ­£æ˜¯ CloudWeGo å¼€æºç¤¾åŒºåšæŒçš„å¦ä¸€ä¸ªé•¿æœŸä¸»ä¹‰ã€‚&lt;/p>
&lt;h4 id="é«˜æ˜“ç”¨æ€§è®¾è®¡">é«˜æ˜“ç”¨æ€§è®¾è®¡&lt;/h4>
&lt;p>æˆ‘ä»¬éå¸¸å¸Œæœ› CloudWeGo å¼€æºå‡ºæ¥çš„é«˜æ€§èƒ½æŠ€æœ¯è§£å†³æ–¹æ¡ˆï¼Œèƒ½å¤Ÿæ›´å¥½åœ°å¸®åŠ©æ›´å¤šç”¨æˆ·æ­å»ºè‡ªå·±çš„å¾®æœåŠ¡æ¶æ„ä½“ç³»ã€‚å› æ­¤ï¼ŒCloudWeGo åœ¨ç¤¾åŒºå»ºè®¾ä¸Šå›´ç»•ç€æ˜“ç”¨æ€§å»ºè®¾åšäº†éå¸¸å¤šçš„æ‹“å±•ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>CloudWeGo æ–‡æ¡£å»ºè®¾&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>é¦–å…ˆï¼Œåœ¨æ–‡æ¡£å»ºè®¾æ–¹é¢ï¼ŒCloudWeGo å®˜ç½‘ä¸Šçº¿äº†è¿‘ 3 ä¸‡å­—è¾ƒä¸ºå®Œå–„çš„æ–‡æ¡£ä½“ç³»ã€‚å†…å®¹è¦†ç›–ä» 1 åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹ï¼Œåˆ°å„ä¸ªç›¸å…³æ¨¡å—çš„åŸºæœ¬ç‰¹æ€§ä»‹ç»ï¼Œå†åˆ°ä¸€äº›æ‹“å±•èƒ½åŠ›çš„å»ºè®¾ã€‚&lt;/p>
&lt;p>å…¶æ¬¡ï¼Œæˆ‘ä»¬ä¸ºäº†è¾¾åˆ°çœŸæ­£çš„å¼€ç®±å³ç”¨ï¼ŒèŠ‚çœç”¨æˆ·å¯¹æ¥å„ä¸ªæ‰©å±•é¡¹ç›®çš„ä½¿ç”¨æˆæœ¬ï¼Œä¸Šçº¿äº† &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> å’Œ &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> ç›¸å…³çš„ Exampleï¼Œå¸®å¿™å»ºè®¾äº†ç›¸å…³ä»æ³¨å†Œå‘ç°ï¼Œåˆ°å„ä¸ªä¸­é—´ä»¶ä½¿ç”¨çš„ä¸€äº›å¼€ç®±å³ç”¨çš„ Demoã€‚&lt;/p>
&lt;p>å¦å¤–ï¼Œä¸ºäº†æå‡æ›´å¤šå¼€å‘è€…çš„ä½¿ç”¨ä½“éªŒï¼Œå®˜ç½‘ä¹Ÿä¸Šçº¿äº†é™æ€æ–‡æ¡£çš„æœç´¢èƒ½åŠ›ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/opensource_community/4.png" alt="image">&lt;/p>
&lt;ul>
&lt;li>&lt;strong>CloudWeGo ç”Ÿæ€å»ºè®¾&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>æƒ³åœ¨å†…éƒ¨æ„å»ºä¸€å¥—å®Œæ•´çš„äº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„ä½“ç³»ï¼Œä»…ä»…ä½¿ç”¨ CloudWeGo çš„ä¸€ä¸ªæ¡†æ¶é¡¹ç›®ï¼Œæ˜¯è¿œè¿œä¸å¤Ÿçš„ã€‚å› æ­¤ï¼ŒCloudWeGo åœ¨æ˜“ç”¨æ€§æ–¹é¢å¤§åŠ›æ‹“å±•ç›¸å…³çš„ç”Ÿæ€å»ºè®¾ã€‚&lt;/p>
&lt;ol>
&lt;li>CloudWeGo åœ¨ 2021 å¹´åŠ å…¥ CNCF Landscapeï¼Œå¸Œæœ›ç»™ç”¨æˆ·ä¸€ä¸ªæ›´åŠ æ˜ç¡®çš„äº§å“å®šä½ã€‚åŒæ—¶ï¼Œæ”¯æŒå¯¹æ¥å„å¤§äº‘å‚å•†ï¼Œä¸º CloudWeGo é¡¹ç›®çš„ç”¨æˆ·æä¾›æ›´å¤šå…¬æœ‰äº‘çš„ä½¿ç”¨é€‰æ‹©ã€‚&lt;/li>
&lt;li>ä¸ºå¸®åŠ©å¤§å®¶å‡å°‘ç›¸å…³çš„ä½¿ç”¨æˆæœ¬ï¼Œæˆ‘ä»¬éå¸¸ç§¯æåœ°å’Œä¸Šä¸‹æ¸¸çš„å¼€æºé¡¹ç›®è¿›è¡Œæ·±åº¦åˆä½œï¼Œå»ºè®¾äº†ä¸€æ•´å¥—å¾®æœåŠ¡å¼€æºä¾›åº”é“¾çš„åˆä½œä½“ç³»ï¼Œæ­å»ºäº† CloudWeGo æ¡†æ¶å¯¹æ¥å„ä¸ªé¡¹ç›®çš„ç›¸å…³ Demo å’Œå¼€ç®±å³ç”¨çš„ Exampleã€‚&lt;/li>
&lt;li>ä»è€ƒè™‘æœªæ¥å‘å±•çš„è§’åº¦è€Œè¨€ï¼Œå½“ä¼ä¸šè½åœ°äº†ä¸€æ•´å¥—å¾®æœåŠ¡æ¶æ„ä¹‹åï¼Œå¯èƒ½ä¼šå­˜åœ¨æ˜“ç”¨æ€§æˆ–æ€§èƒ½æ–¹é¢çš„é—®é¢˜ã€‚å½“å‡ºç°æ›´å¥½çš„æŠ€æœ¯è§£å†³å’Œæ€§èƒ½æå‡æ–¹æ¡ˆï¼ŒåŸºäºåŸæœ‰æ¶æ„çš„è€¦åˆå’Œå¤æ‚åº¦ï¼Œå¾ˆéš¾æ¨è¿›æ–°çš„æ¶æ„è¿›è¡Œæ•´ä½“çš„è¿­ä»£ã€‚
å› æ­¤ï¼Œæˆ‘ä»¬ä¹Ÿéå¸¸ç§¯æåœ°åœ¨æ¨è¿›å»ºè®¾äº‘åŸç”Ÿå¾®æœåŠ¡æ²»ç†çš„æ•´ä½“æ ‡å‡†ã€‚å¸Œæœ›æ›´å¤šçš„é¡¹ç›®ï¼Œèƒ½å¤Ÿå½¢æˆç»Ÿä¸€çš„æ¥å…¥å’Œå¯¹æ¥çš„æ ‡å‡†ï¼Œä»è€Œåœ¨æœªæ¥çš„ä¸€äº›æ–°çš„ã€æ›´é«˜æ€§èƒ½çš„æŠ€æœ¯è§£å†³æ–¹æ¡ˆçš„è¿ç§»å’Œè¿‡æ¸¡ä¸Šï¼Œèƒ½å¤Ÿè®©è¿ç§»å’Œä½¿ç”¨æˆæœ¬é™åˆ°æœ€ä½ã€‚&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/opensource_community/5.png" alt="image">&lt;/p>
&lt;ul>
&lt;li>&lt;strong>CloudWeGo çš„å¼€å‘è€…æ´»åŠ¨&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>CloudWeGo é¡¹ç›®åŒ…æ‹¬æ•´ä¸ªç¤¾åŒºéƒ½å¯¹é«˜æ€§èƒ½æœ‰éå¸¸çƒ­çƒˆçš„è¿½æ±‚ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¹Ÿåœ¨ä¸åœåœ°è¿­ä»£ã€‚&lt;/p>
&lt;p>CloudWeGo ä¸€ç›´åœ¨ä¸æ–­è¿½æ±‚é«˜æ€§èƒ½æ¡†æ¶ä»¥åŠé«˜æ€§èƒ½æŠ€æœ¯è§£å†³æœ€æ–°æ–¹æ¡ˆã€‚æ¯æ¬¡ä¸Šçº¿æ–°çš„æŠ€æœ¯è§£å†³æ–¹æ¡ˆå’Œä¸€äº›ç›¸å…³èƒ½åŠ›ä¹‹åï¼Œæˆ‘ä»¬éƒ½æœŸæœ›è®©æ›´å¤šçš„ç”¨æˆ·çŸ¥é“è¿™äº›æ–¹æ¡ˆæ˜¯æ€æ ·çš„ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿæ›´ä¾¿æ·åœ°å­¦ä¹ åˆ°ä¸€äº›ç›¸å…³çš„æŠ€æœ¯æŒ‡å—ã€‚&lt;/p>
&lt;p>å› æ­¤ï¼Œæˆ‘ä»¬é’ˆå¯¹æ€§åœ°è®¾è®¡äº† CloudWeGo Study Group å­¦ä¹ è®¡åˆ’ï¼Œè¿™æ˜¯ä¸ºäº†å°†ä¸€äº›å…¨æ–°çš„æ€§èƒ½è§£å†³æ–¹æ¡ˆè¿›è¡Œä½“ç³»åŒ–çš„å­¦ä¹ åˆ†äº«ï¼Œå³é€šè¿‡ä¸€äº›ç±»ä¼¼äºä»æ¡†æ¶å…¥é—¨åˆ°æ ¸å¿ƒèƒ½åŠ›çš„è§£è¯»ã€å†åˆ°ä¸€äº›å­¦ä¹ è·¯å¾„çš„åˆ†äº«ä»¥åŠæ‰©å±•çŸ¥è¯†çš„ç›¸å…³ä»‹ç»å¯¹å¤–å¼€æ”¾ç»™ç¤¾åŒºã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/opensource_community/6.png" alt="image">&lt;/p>
&lt;p>æˆ‘ä»¬ä¼šæä¾›ä¸€ä»½å®Œæ•´çš„å­¦ä¹ èµ„æ–™ï¼Œé™ä½ç”¨æˆ·å­¦ä¹ æ–°çš„æŠ€æœ¯è§£å†³æ–¹æ¡ˆçš„æˆæœ¬ï¼Œä¹Ÿèƒ½å¤Ÿè®©ç”¨æˆ·äº†è§£åˆ°è‡ªå·±çš„å­¦ä¹ æ˜¯å¦é€‚åˆå…¶ä¸šåŠ¡åœºæ™¯ã€‚åœ¨æ•´ä¸ªå­¦ä¹ å’Œä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œé™ä½æœ€ç»ˆå­¦ä¹ çš„æ—¶é•¿ï¼Œé€šè¿‡ä½“ç³»åŒ–çš„å­¦ä¹ æ›´å¿«åœ°ç†è§£æŠ€æœ¯æ–¹æ¡ˆçš„æ€§èƒ½äº®ç‚¹å’Œéœ€è¦å­¦ä¹ çš„ç›¸å…³ç‚¹ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/opensource_community/7.png" alt="image">&lt;/p>
&lt;h4 id="å°ç»“">å°ç»“&lt;/h4>
&lt;p>CloudWeGo å¼€æºç¤¾åŒºåšæŒçš„é•¿æœŸä¸»ä¹‰ï¼š&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/opensource_community/8.png" alt="image">&lt;/p>
&lt;h3 id="cloudwego-çš„ç”¨æˆ·">CloudWeGo çš„ç”¨æˆ·&lt;/h3>
&lt;p>åŸºäºå¼€æºç¤¾åŒºé•¿æœŸä¸»ä¹‰çš„åšæŒï¼ŒCloudWeGo è‡ª 2021 å¹´ 9 æœˆå¼€æºï¼Œè‡³ä»Šå¼€æº 1 å¹´ï¼Œè·å¾—è¶…è¿‡ 1w starï¼Œæ”¯æŒå®Œæˆäº†è¯åˆ¸ã€ç”µå•†ã€ä¸­å°ã€ç¤¾äº¤ã€æ¸¸æˆã€AI ç­‰è¡Œä¸šä¼ä¸šå®¢æˆ·çš„è½åœ°ä½¿ç”¨ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/opensource_community/9.png" alt="image">&lt;/p>
&lt;h3 id="cloudwego-çš„è´¡çŒ®è€…">CloudWeGo çš„è´¡çŒ®è€…&lt;/h3>
&lt;p>åœ¨æ´»è·ƒçš„ç¤¾åŒºæ°›å›´ä¸‹ï¼Œæˆ‘ä»¬æ”¶è·äº†ä»æœ€åˆåˆšå¼€æºåªæœ‰ 20 ä¸ªå†…éƒ¨è´¡çŒ®è€…ï¼Œåˆ°ç°åœ¨å·²ç»æœ‰äº†è¶…è¿‡ 200 ä¸ªä»£ç è´¡çŒ®è€…ã€‚è¿™äº›è´¡çŒ®è€…åœ¨æ·±åº¦ä½¿ç”¨äº† CloudWeGo å¼€æºé¡¹ç›®ä¹‹åï¼Œä¹Ÿä¸º CloudWeGo å¼€æºé¡¹ç›®è´¡çŒ®äº†å¤§é‡ç”Ÿæ€æ–¹é¢ç›¸å…³å¯¹æ¥èƒ½åŠ›ã€‚&lt;/p>
&lt;h4 id="è´¡çŒ®è€…ä½“ç³»æ›´æ–°">è´¡çŒ®è€…ä½“ç³»æ›´æ–°&lt;/h4>
&lt;p>åŸºäºè¶Šæ¥è¶Šå¤šçš„è´¡çŒ®è€…åœ¨æˆ‘ä»¬çš„å¼€æºç¤¾åŒºé‡Œåšäº†å¤§é‡æ·±åº¦è´¡çŒ®ï¼ŒCloudWeGo å¼€æºç¤¾åŒºåœ¨ä¸€å‘¨å¹´çš„å‘¨å¹´åº†ä¹‹é™…ï¼Œæ¨å‡º &lt;strong>å…¨æ–°çš„è´¡çŒ®è€…æ¿€åŠ±ä½“ç³»&lt;/strong> ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬æ–°å¢å¼€æ”¾äº†ä¸‰ä¸ªè§’è‰²ä½“ç³»ï¼Œå¸Œæœ›é€šè¿‡è¿™ç§å®Œå–„çš„è§’è‰²æœºåˆ¶ï¼Œèµ‹äºˆç¤¾åŒºå¼€å‘è€…æ›´å¤šçš„ç¤¾åŒºæ²»ç†æƒé™ã€‚åŒæ—¶æˆ‘ä»¬ä¹Ÿé¼“åŠ±æ›´å¤šçš„è´¡çŒ®è€…èƒ½å¤Ÿæˆä¸ºé¡¹ç›®çš„ç»´æŠ¤è€…ï¼Œå¸Œæœ›é•¿æœŸçš„ç»´æŠ¤è€…èƒ½å¤ŸçœŸæ­£å¸¦é¢†æˆ‘ä»¬çš„é¡¹ç›®æŒç»­è¿›è¡Œé«˜æ€§èƒ½çš„ä¼˜åŒ–å’Œç›¸å…³çš„æ¼”è¿›ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/opensource_community/10.png" alt="image">&lt;/p>
&lt;h4 id="è´¡çŒ®è€…å¤šæ ·åŒ–">è´¡çŒ®è€…å¤šæ ·åŒ–&lt;/h4>
&lt;p>åœ¨å¼€æºé¡¹ç›®çš„è¿è¥å’Œç»´æŠ¤ä¸­ï¼ŒåŒ…æ‹¬å¼€æºç¤¾åŒºçš„å»ºè®¾ï¼Œä¸ä»…ä»…æ˜¯ä¾èµ–ä»£ç è´¡çŒ®è€…çš„å‚ä¸ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–æ–¹é¢çš„è´¡çŒ®ï¼Œå…¶ä¸­åŒ…æ‹¬ä¼ä¸šæ”¯æŒåœºæ™¯çš„è´¡çŒ®ã€å¸ƒé“æ´»åŠ¨çš„è´¡çŒ®ã€æ•´ä½“æ´»åŠ¨ç»„ç»‡çš„è´¡çŒ®ç­‰å¤šå…ƒå‚ä¸ã€‚
è¿™äº›è´¡çŒ®è€…åœ¨ CloudWeGo ç¤¾åŒºä¹Ÿæ˜¯è¢«å¤§åŠ›æ”¯æŒçš„ï¼Œå› æ­¤æˆ‘ä»¬ä¸“é—¨é’ˆå¯¹å¤šå…ƒè´¡çŒ®ä¸Šçº¿äº† CloudWeGo å¹´åº¦æ¿€åŠ±è®¡åˆ’ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/opensource_community/11.png" alt="image">&lt;/p>
&lt;p>ç¤¾åŒºåœ¨ 8 æœˆä»½åˆšåˆšå®Œæˆäº† 2021 - 2022 å¹´åº¦ CloudWeGo Awesome Contributor çš„è¯„é€‰ï¼Œæˆ‘ä»¬éå¸¸è£å¹¸åœ°æ”¶è·äº† 84 ä½å¹´åº¦ä¼˜ç§€è´¡çŒ®è€…ã€‚
åœ¨å®Œæˆäº†ç¤¾åŒºçš„æåä¸å…¬ç¤ºåï¼Œè¿™äº›åŒå­¦å·²ç»é¡ºåˆ©æˆä¸ºäº† CloudWeGo å¹´åº¦ä¼˜ç§€è´¡çŒ®è€…ï¼Œä¹‹åæˆ‘ä»¬ä¼šä¸ºè¿™äº›ä¼˜ç§€è´¡çŒ®è€…é€ä¸Š CloudWeGo ä¸€å‘¨å¹´çš„è£èª‰çºªå¿µå¾½ç« ã€‚&lt;/p>
&lt;h3 id="cloudwego-ç¤¾åŒºé‡åˆ°çš„é—®é¢˜">CloudWeGo ç¤¾åŒºé‡åˆ°çš„é—®é¢˜&lt;/h3>
&lt;p>æ­£æ˜¯å› ä¸ºç¤¾åŒºè¾ƒé«˜çš„æ´»è·ƒåº¦ä»¥åŠä¼—å¤šè´¡çŒ®è€…çš„å‚ä¸ï¼Œå¤§é‡ç”¨æˆ·åŠ å…¥äº† CloudWeGo ç¤¾åŒºã€‚æˆ‘ä»¬é€æ¸å‘ç°ç”¨æˆ·çš„ä½¿ç”¨åœºæ™¯å¼€å§‹æ…¢æ…¢å‘ç”Ÿäº†æ‹“å±•ã€‚
ä»æœ€åˆå¯èƒ½åªæ˜¯æƒ³äº†è§£ä¸€ä¸‹å¾®æœåŠ¡çš„æ¡†æ¶ã€å•ç‹¬ä¸€ä¸ªé¡¹ç›®å¦‚ä½•å»è½åœ°å’Œä½¿ç”¨ï¼Œåˆ°åæ¥æ…¢æ…¢å˜æˆæ¢ç´¢ä¸€æ•´å¥—å¾®æœåŠ¡æ¶æ„çš„è®¾è®¡ï¼Œä»¥åŠå¤šä¸ªé¡¹ç›®ä¹‹é—´çš„å®è·µé…åˆå’Œç›¸å…³ç”Ÿæ€èƒ½åŠ›çš„å»ºè®¾ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/opensource_community/12.png" alt="image">&lt;/p>
&lt;p>è¿™äº›å…¶å®æ˜¯éå¸¸ä½“ç³»åŒ–ã€å¤§è§„æ¨¡çš„éœ€æ±‚ï¼Œå› æ­¤æˆ‘ä»¬è”åˆä¸€äº›ä¼ä¸šç”¨æˆ·è¿›è¡Œäº†ç›¸å…³åœºæ™¯çš„å®è·µè´¡çŒ®ã€‚CloudWeGo ä¹‹å‰æ”¯æŒäº†åŒ…æ‹¬è¯åˆ¸ã€ç”µå•†ã€AI å’Œå„ä¸ªè¡Œä¸šç”¨æˆ·åœºæ™¯è½åœ°ï¼Œæˆ‘ä»¬ä¹Ÿå’Œè¿™äº›ä¼ä¸šç”¨æˆ·è¿›è¡Œäº†ç›¸å…³åœºæ™¯çš„æ¢³ç†ã€‚&lt;/p>
&lt;h3 id="cloudwego-çš„ä¼ä¸šç”¨æˆ·è´¡çŒ®">CloudWeGo çš„ä¼ä¸šç”¨æˆ·è´¡çŒ®&lt;/h3>
&lt;h4 id="åå…´è¯åˆ¸">åå…´è¯åˆ¸&lt;/h4>
&lt;p>&lt;a href="https://www.cloudwego.io/zh/cooperation/huaxingsec/">æ¡ˆä¾‹é“¾æ¥&lt;/a>&lt;/p>
&lt;p>åå…´è¯åˆ¸çš„å¼ å¤©è€å¸ˆå›¢é˜Ÿå‘ç¤¾åŒºè´¡çŒ®äº†æ¥è‡ªè¯åˆ¸è¡Œä¸šä½¿ç”¨ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> å®Œæˆæ··åˆäº‘éƒ¨ç½²ä¸‹è·¨æœºæˆ¿ä½¿ç”¨åœºæ™¯çš„æ¡ˆä¾‹ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬åœ¨è·Ÿå¼ å¤©è€å¸ˆå›¢é˜Ÿåˆä½œçš„æ—¶å€™å‘ç°ï¼Œä»–ä»¬é‡åˆ°çš„æœ€å¤§çš„é—®é¢˜æ˜¯æœ‰çš„ä¸šåŠ¡éƒ¨ç½²åœ¨é‡‘èäº‘æœºæˆ¿ä¸Šï¼Œæœ‰çš„ä¸šåŠ¡éƒ¨ç½²åœ¨ç§æœ‰æœºæˆ¿ä¸Šï¼Œæ‰€ä»¥å­˜åœ¨è·¨æœºæˆ¿è°ƒç”¨çš„é—®é¢˜ã€‚
å› ä¸ºä»–ä»¬ä½¿ç”¨ K8s é›†ç¾¤ï¼Œè¿˜ä¼šå‡ºç°åŒé›†ç¾¤è°ƒç”¨å’Œè·¨é›†ç¾¤è°ƒç”¨çš„é—®é¢˜ã€‚æ•´ä¸ªè°ƒç”¨çš„é“¾è·¯éå¸¸é•¿ï¼Œè¿™ä¸­é—´å°±ä¼šå‡ºç°å¾ˆå¤šä¸å¯è§‚æµ‹çš„é—®é¢˜ï¼Œå½“å‡ºç°é—®é¢˜çš„æ—¶å€™ï¼Œæ’æŸ¥éš¾åº¦å°±æå…¶å¤§ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/opensource_community/13.png" alt="image">&lt;/p>
&lt;p>äºæ˜¯å¼ å¤©è€å¸ˆå›¢é˜Ÿåœ¨å’Œ CloudWeGo åˆä½œä¹‹åï¼Œæ•´ä½“æ­å»ºäº†ä¸€ä¸ª &lt;strong>&lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> + K8s&lt;/strong> çš„å¯è§‚æµ‹æ€§ç³»ç»Ÿï¼Œä¹Ÿå°†ç›¸å…³çš„æ­å»ºå®è·µè´¡çŒ®åˆ°äº†å¼€æºç¤¾åŒºã€‚æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥é€šè¿‡ CloudWeGo å…¬ä¼—å·æŸ¥çœ‹ç›¸å…³çš„ä¼ä¸šæ¡ˆä¾‹å’Œæœ€ç»ˆçš„å®è·µåœºæ™¯ã€‚&lt;/p>
&lt;h4 id="æ£®é©¬">æ£®é©¬&lt;/h4>
&lt;p>&lt;a href="https://www.cloudwego.io/zh/cooperation/semir/">æ¡ˆä¾‹é“¾æ¥&lt;/a>&lt;/p>
&lt;p>CloudWeGo å’Œæ£®é©¬å…±åŒæ¢³ç†äº†ä¸ç”µå•†è¡Œä¸šç›¸å…³çš„ä¸€ä¸ªæ•´ä½“ä½¿ç”¨åœºæ™¯ã€‚éå¸¸æ„Ÿè°¢æ£®é©¬å›¢é˜Ÿï¼Œè´¡çŒ®äº†ç”µå•†è¡Œä¸šä½¿ç”¨ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> æ¥å…¥ Istioï¼Œä»¥æé«˜å¯¹é«˜å¹¶å‘è®¢å•å¤„ç†èƒ½åŠ›çš„ä½¿ç”¨åœºæ™¯ã€‚&lt;/p>
&lt;p>æ£®é©¬å›¢é˜Ÿè¿˜è´¡çŒ®äº†åŸºäºå¾®æœåŠ¡æ¶æ„çš„ä¸¤ç§æ¨¡å¼ï¼Œä¸ºæœ‰ç›¸å…³é«˜æ€§èƒ½ä¸šåŠ¡éœ€æ±‚çš„ç”¨æˆ·æä¾›äº†&lt;strong>æœåŠ¡ç½‘æ ¼ + &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a>&lt;/strong> æ²»ç†æ¨¡å¼ç›¸å…³çš„é€‰å‹ä¾æ®ï¼Œå¹¶ä¸”ç»™å‡ºäº†ç›¸å…³çš„å‹æµ‹æŠ¥å‘Šï¼Œä¹Ÿç»™ç¤¾åŒºæœ‰ç›¸åŒéœ€æ±‚çš„å°ä¼™ä¼´æä¾›é‡è¦å‚è€ƒã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/opensource_community/14.png" alt="image">&lt;/p>
&lt;h4 id="é£ä¹¦">é£ä¹¦&lt;/h4>
&lt;p>&lt;a href="https://www.cloudwego.io/zh/cooperation/feishu/">æ¡ˆä¾‹é“¾æ¥&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> å¼€æºåï¼Œå¾ˆå¤šç”¨æˆ·ä¼šé—®åˆ°å†…éƒ¨ç½‘å…³å¹³å°æ¶æ„çš„è®¾è®¡æ€è·¯ï¼ŒåŒ…æ‹¬å†…éƒ¨ç½‘å…³å¹³å°å¦‚ä½•é…åˆ &lt;a href="https://github.com/cloudwego/hertz">Hertz&lt;/a> æ•´ä½“ä½¿ç”¨ï¼Ÿ&lt;/p>
&lt;p>é£ä¹¦ä¹‹å‰æ˜¯ä¸€ä¸ª all-in-one çš„å¥—ä»¶å¼€å‘æ¨¡å¼ï¼Œå„ä¸ªä¸šåŠ¡å›¢é˜Ÿä¼šå°†ä¸šåŠ¡ä»£ç æäº¤åˆ°é£ä¹¦ç½‘å…³å¹³å°çš„ä»£ç ä»“é‡Œé¢ï¼Œç”±é£ä¹¦ç½‘å…³ç›¸å…³çš„åŒå­¦æ¥åš web é€»è¾‘çš„å¼€å‘ã€‚
è¿™å°±å¯¼è‡´ä»–ä»¬æ‰€æœ‰çš„æœåŠ¡éƒ½æ˜¯èåœ¨ä¸€èµ·çš„ï¼Œæ²¡æœ‰åŠæ³•åšåˆ°å‘å¸ƒéš”ç¦»ï¼Œæå¤§åœ°é˜»ç¢äº†ç½‘å…³å¹³å°æ¶æ„çš„æ¼”è¿›å’Œè¿­ä»£é€Ÿåº¦ã€‚&lt;/p>
&lt;p>å› æ­¤ï¼Œé£ä¹¦å›¢é˜Ÿå°†å‰ç«¯ Node å•ä½“æœåŠ¡åšäº†å¾®å‰ç«¯æ¶æ„æ‹†åˆ†ï¼Œé…åˆ &lt;a href="https://github.com/cloudwego/kitex">Kitex&lt;/a> æ³›åŒ–è°ƒç”¨å„ä¸ªä¸šåŠ¡çš„å¾®æœåŠ¡ï¼Œå®ç°äº†å„ä¸ªä¸šåŠ¡å‘å¸ƒå®Œå…¨éš”ç¦»ï¼Œè¿™ä½¿å¾—ä»–ä»¬ä¸å†ä¾èµ–ç½‘å…³å¹³å°çš„ä¸šåŠ¡å¼€å‘ï¼Œè¿›è€ŒåŠ å¿«äº†æ•´ä¸ªç½‘å…³ä¸šåŠ¡è¿­ä»£çš„é€Ÿåº¦ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/opensource_community/15.png" alt="image">&lt;/p>
&lt;h3 id="æ¥è‡ªç¤¾åŒºçš„ç”¨æˆ·å…·ä½“é—®é¢˜">æ¥è‡ªç¤¾åŒºçš„ç”¨æˆ·å…·ä½“é—®é¢˜&lt;/h3>
&lt;p>æˆ‘ä»¬éå¸¸æ„Ÿè°¢ä¼ä¸šç”¨æˆ·è´¡çŒ®çš„ç›¸å…³é—®é¢˜ï¼ŒCloudWeGo é…åˆä¼ä¸šç”¨æˆ·çš„åœºæ™¯æ¡ˆä¾‹ä¹Ÿè·å¾—äº†ç¤¾åŒºç”¨æˆ·çš„ä¼—å¤šå¥½è¯„ã€‚ä¸æ­¤åŒæ—¶ï¼Œæœ‰æ›´å¤šçš„ç”¨æˆ·ä¹Ÿæå‡ºäº†æ–°çš„é—®é¢˜ï¼Œè¿™äº›é—®é¢˜éå¸¸å…·ä½“ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/opensource_community/16.png" alt="image">&lt;/p>
&lt;p>é€šè¿‡æ€»ç»“å‘ç°ï¼Œè¿™äº›é—®é¢˜å…·æœ‰æ˜¾è‘—çš„ä¸šåŠ¡ç‰¹å¼‚æ€§ã€‚æˆ‘ä»¬ä¹Ÿå¾ˆå¥½å¥‡è¿™äº›ç”¨æˆ·åœ¨å†…éƒ¨åˆ°åº•æ˜¯å¦‚ä½•æ­å»ºå…¶å¾®æœåŠ¡ä½“ç³»çš„ï¼Ÿ&lt;/p>
&lt;p>å› æ­¤æˆ‘ä»¬å¼€å§‹æ¢³ç† CloudWeGo å¼€æºç¤¾åŒºçš„äº‘åŸç”Ÿå¾®æœåŠ¡ç”¨æˆ·ç”»åƒã€‚&lt;/p>
&lt;h2 id="æ–°ä¸€ä»£äº‘åŸç”Ÿå¾®æœåŠ¡ç”¨æˆ·ç”»åƒ">æ–°ä¸€ä»£äº‘åŸç”Ÿå¾®æœåŠ¡ç”¨æˆ·ç”»åƒ&lt;/h2>
&lt;p>æˆ‘ä»¬å°†ç¤¾åŒºçš„ç”¨æˆ·å¤§æ¦‚åˆ†æˆäº†ä¸‰ç§ç±»å‹ï¼š&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/opensource_community/17.png" alt="image">&lt;/p>
&lt;ul>
&lt;li>&lt;strong>å­—èŠ‚è·³åŠ¨&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>å­—èŠ‚è·³åŠ¨æ˜¯æˆ‘ä»¬ç›®å‰æœ€å¤§çš„ç”¨æˆ·ã€‚å­—èŠ‚è·³åŠ¨çš„çº¿ä¸Šå¾®æœåŠ¡æ•°é‡å·²ç»è¶…è¿‡äº† 10 ä¸‡ï¼ŒæœåŠ¡ç«¯å³°å€¼ QPS å·²ç»è¾¾åˆ°äº†æ•°äº¿çš„çº§åˆ«ï¼Œä¸šåŠ¡å¤æ‚æ€§éå¸¸å¤§ï¼Œå­˜åœ¨è·¨è¯­è¨€ã€è·¨å¹³å°ã€è·¨ç»ˆç«¯ã€è·¨é›†ç¾¤ã€è·¨æœºæˆ¿ç­‰å¤šç§å¤æ‚çš„é—®é¢˜ã€‚&lt;/p>
&lt;p>åŒæ—¶å­—èŠ‚è·³åŠ¨å†…éƒ¨æœ‰éå¸¸å®Œå–„çš„å¾®æœåŠ¡æ¶æ„ä½“ç³»ï¼Œæ•´ä½“çš„å¾®æœåŠ¡æ²»ç†å·²ç»å…¨é¢è¿ˆå…¥äº† 2.0 çš„æ—¶ä»£ï¼Œç”¨å¾®æœåŠ¡æ¡†æ¶é…åˆæœåŠ¡ç½‘æ ¼æºæ‰‹å¹¶è¿›ã€‚&lt;/p>
&lt;p>åœ¨è¿™ä¸ªåœºæ™¯ä¹‹ä¸‹ï¼Œå­—èŠ‚è·³åŠ¨æœ€å¤§çš„éœ€æ±‚å°±æ˜¯é«˜æ€§èƒ½å’Œå¯æ‰©å±•æ€§ï¼Œè¿™ä¹Ÿæ˜¯ CloudWeGo ä½œä¸ºå­—èŠ‚è·³åŠ¨å†…éƒ¨å­µåŒ–çš„ä¸€ä¸ªä¼˜ç§€çš„é«˜æ€§èƒ½æŠ€æœ¯è§£å†³æ–¹æ¡ˆæœ€åˆå¼€æºæ—¶æ‰€å…·æœ‰çš„ç‰¹æ€§ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>å¤„äºè½¬å‹æœŸçš„ç”¨æˆ·&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>ç¤¾åŒºé‡Œæ•°é‡æœ€å¤§çš„ç¾¤ä½“ï¼Œè¿™äº›ç”¨æˆ·å¯èƒ½æ˜¯ç”µå•†çš„ã€è¯åˆ¸çš„ã€åå°çš„ä»¥åŠä¸€äº›åˆ›ä¸šå…¬å¸ï¼Œä»–ä»¬çš„èŠ‚ç‚¹æ•°é‡ä¸æ˜¯ç‰¹åˆ«å¤šï¼Œå¯èƒ½åœ¨ 5-1000 ä»¥å†…ï¼Œ
çº¿ä¸Šå¾®æœåŠ¡æ•°é‡å¤„äº 5000 ä»¥å†…çš„æ°´å¹³ï¼Œä½†è¿™äº›ç”¨æˆ·å¯èƒ½æœ¬èº«å°±æ˜¯äº‘åŸç”Ÿæ¶æ„ï¼Œæˆ–è€…å·²ç»åœ¨å¾€è¿™æ–¹é¢åšä¸€äº›ç›¸å…³çš„è¿ç§»ã€‚&lt;/p>
&lt;p>è¿™ç±»ç”¨æˆ·åœ¨ CloudWeGo å¼€æºç¤¾åŒºçš„è¯‰æ±‚ï¼Œä¸»è¦æ˜¯é’ˆå¯¹ä¸šåŠ¡çš„ç‰¹å¼‚æ€§æ–¹é¢å­˜åœ¨é«˜æ€§èƒ½ç›¸å…³çš„éœ€æ±‚ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>éäº‘åŸç”Ÿæ¶æ„ä¼ä¸šç”¨æˆ·&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>è¿™ä¸€ç±»ç”¨æˆ·å±äºéäº‘åŸç”Ÿæ¶æ„çš„ä¼ä¸šï¼Œä»–ä»¬çš„æœåŠ¡å¯èƒ½è¿˜æ²¡æœ‰å®Œå…¨äº‘åŒ–ï¼Œå…·æœ‰ä¸€å®šçš„å†å²è¿ç§»è´Ÿæ‹…ã€‚è¿™ç±»ç”¨æˆ·ç€é‡ä¼šä¼˜å…ˆè€ƒè™‘å¦‚ä½•å°†è‡ªå·±çš„æœåŠ¡è¿ç§»ä¸Šäº‘ã€‚&lt;/p>
&lt;p>å› æ­¤å¯ä»¥çœ‹åˆ°ï¼Œç¬¬äºŒç±»ç”¨æˆ·æ˜¯ç›®å‰ç¤¾åŒºæ•°é‡æœ€å¤§ï¼Œä¸”æœ€éœ€æ±‚æœ€è¿«åˆ‡çš„ä¸€ç±»ç”¨æˆ·ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/opensource_community/18.png" alt="image">&lt;/p>
&lt;p>æˆ‘ä»¬è®¤ä¸ºç†æƒ³çŠ¶æ€ä¸‹ç”¨æˆ·æ•´ä¸ªäº‘åŸç”Ÿæ¶æ„ä½“ç³»çš„æ­å»ºè¿‡ç¨‹ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ç¬¬ä¸€ä¸ªé˜¶æ®µï¼šæœåŠ¡ä¸Šäº‘&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>ç±»ä¼¼ç¬¬ä¸‰ç±»ç”¨æˆ·ï¼Œå½“å‰é¢ä¸´çš„é—®é¢˜å°±æ˜¯æ€ä¹ˆæŠŠè‡ªå·±çš„ä¸šåŠ¡è¿ç§»ä¸Šäº‘ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ç¬¬äºŒä¸ªé˜¶æ®µï¼šäº‘åŸç”Ÿéƒ¨ç½²&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>ç±»ä¼¼ç¬¬äºŒç±»ç¤¾åŒºå¤§é‡çš„ç”¨æˆ·ï¼Œå…¶å®å·²ç»æ˜¯äº‘åŸç”Ÿéƒ¨ç½²çš„ä¼ä¸šï¼Œç”¨åˆ°äº†ç›¸å…³å®¹å™¨åŒ–å’Œç¼–æ’è°ƒåº¦çš„æŠ€æœ¯ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ç¬¬ä¸‰ä¸ªé˜¶æ®µï¼šå¾®æœåŠ¡æ¶æ„&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>ç»§ç»­å¾€å‰æ¼”è¿›ï¼Œå¼€å§‹æ­å»ºç›¸å…³çš„å¾®æœåŠ¡æ¶æ„ï¼Œä»¥åŠä¼šåšæœåŠ¡çš„æ‹†åˆ†å’Œé€šä¿¡çš„æ²»ç†ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>ç¬¬å››ä¸ªé˜¶æ®µï¼šå¾®æœåŠ¡æ²»ç†&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>å½“ç”¨æˆ·åœ¨çº¿ä¸Šæœ‰äº†ä¸€å®šæ•°é‡çš„å¾®æœåŠ¡ä¹‹åï¼Œä¼šå¼€å§‹å‡ºç°ä¾èµ–ç®¡ç†å’Œä¸€è‡´æ€§ä¿éšœçš„é—®é¢˜ã€‚&lt;/p>
&lt;p>ä½†æ˜¯æˆ‘ä»¬åœ¨è·Ÿç”¨æˆ·æ²Ÿé€šè¿‡ç¨‹ä¸­å‘ç°ï¼Œè¿™å…¶å®ä¸æ˜¯ä¸€ç§ç»å¯¹æ„ä¹‰ä¸Šçš„åŒºåˆ†ã€‚&lt;/p>
&lt;p>å› ä¸ºå¾ˆå¤šå…¬å¸å…¶å®å¹¶ä¸æ˜¯å®Œå…¨å±äºå…¶ä¸­ä¸€ç§çŠ¶æ€ï¼Œè€Œæ˜¯ä¸€ç§é•¿ä¹…çš„ä¸­é—´æ€ï¼Œå…¬å¸çš„ä¸šåŠ¡ä¼šå¤„äºä¸åŒçš„çŠ¶æ€ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬åœ¨å’Œç›¸å…³ç”¨æˆ·è¿›è¡Œæ·±åº¦çš„æ²Ÿé€šæ—¶ï¼Œå‘ç°è¿™äº›ä¸šåŠ¡åœºæ™¯å…¶å®å¹¶ä¸æ˜¯å®Œå…¨ä¸å¯å¤åˆ¶çš„ï¼Œè€Œæ˜¯å…·æœ‰ä¸€å®šçš„è¡Œä¸šèšåˆæ€§å’Œç›¸ä¼¼æ€§ã€‚&lt;/p>
&lt;p>äºæ˜¯ï¼Œæˆ‘ä»¬å¼€å§‹æ¢ç´¢å¦‚ä½•é€šè¿‡ç¤¾åŒºæ›´å¥½åœ°å¸®åŠ©è¿™äº›å¼€å‘è€…è§£å†³ç—›ç‚¹é—®é¢˜ï¼Œè¿™ä¹Ÿæ­£æ˜¯ CloudWeGo å¼€æºç¤¾åŒºæ¥ä¸‹æ¥æ•´ä½“çš„æ¼”è¿›æ–¹å‘ã€‚&lt;/p>
&lt;h2 id="æŒç»­æ¼”è¿›çš„-cloudwego-å¼€æºç¤¾åŒº">æŒç»­æ¼”è¿›çš„ CloudWeGo å¼€æºç¤¾åŒº&lt;/h2>
&lt;p>CloudWeGo 1.0 ç¤¾åŒºæ­å»ºçš„ä¸»è¦æ–¹å‘ï¼Œæ˜¯å°†å­—èŠ‚è·³åŠ¨å†…éƒ¨å­µåŒ–çš„é«˜æ€§èƒ½æ¡†æ¶è§£å†³æ–¹æ¡ˆè§¦è¾¾ç»™æ›´å¤šçš„ç”¨æˆ·ï¼Œè®©æ›´å¤šå¯¹é«˜æ€§èƒ½è§£å†³æ–¹æ¡ˆæœ‰éœ€æ±‚çš„ç”¨æˆ·èƒ½å¤ŸçœŸæ­£åœ°åœ¨å†…éƒ¨è½åœ°å’Œä½¿ç”¨è¿™äº›æ–¹æ¡ˆã€‚&lt;/p>
&lt;p>å½“æˆ‘ä»¬å‘ç°ç”¨æˆ·å‡ºç°ç‰¹å¼‚æ€§çš„è¡Œä¸šéœ€æ±‚åï¼ŒClouWeGo 2.0 å¸Œæœ›ç¤¾åŒºå»ºè®¾ä»¥å¼€å‘è€…æœåŠ¡ä¸ºä¸»ï¼Œèƒ½çœŸæ­£åœ°å¸®åŠ©åˆ°ç¤¾åŒºçš„å¼€å‘è€…ï¼Œè§£å†³å…¶åœ¨å¾®æœåŠ¡æ²»ç†è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›çœŸå®å­˜åœ¨çš„é—®é¢˜ã€‚&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/opensource_community/19.png" alt="image">&lt;/p>
&lt;ul>
&lt;li>&lt;strong>è¡Œä¸šè§£å†³æ–¹æ¡ˆ&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>é€šè¿‡ç”¨æˆ·é—®é¢˜ã€åœºæ™¯å’Œè§£å†³æ–¹æ¡ˆçš„è¡Œä¸šå…±å»ºï¼Œå½¢æˆç¤¾åŒºçš„ Go äº‘åŸç”Ÿå¾®æœåŠ¡æœ€ä½³å®è·µï¼Œå¸Œæœ›èƒ½å¤Ÿé’ˆå¯¹æœ‰ç‰¹å¼‚æ€§éœ€æ±‚çš„ç”¨æˆ·ç»™åˆ°ä¸€å®šçš„å‚è€ƒã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>æ˜“ç”¨æ€§å»ºè®¾&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>æˆ‘ä»¬ä¼šæŒç»­å’Œå¼€æºé“¾æ¡çš„ä¸Šä¸‹æ¸¸æ·±å…¥åˆä½œï¼Œå»ºè®¾äº‘åŸç”Ÿå¾®æœåŠ¡ç›¸å…³çš„æ ‡å‡†æ²»ç†ã€‚è‡´åŠ›äºåç»­æ˜“ç”¨æ€§çš„å»ºè®¾ï¼Œå¸Œæœ›èƒ½å¤Ÿç»™åˆ°æˆæœ¬æ›´ä½çš„è¿ç§»ï¼Œä»¥åŠå»ºç«‹åæœŸç»´æŠ¤çš„æ²»ç†æ ‡å‡†ã€‚&lt;/p>
&lt;ul>
&lt;li>&lt;strong>æŒç»­æŠ•èµ„é«˜æ€§èƒ½æ–¹æ¡ˆ&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>ç»§ç»­ç»´æŒ CloudWeGo å¼€æºç¤¾åŒºçš„é•¿æœŸä¸»ä¹‰ã€‚æˆ‘ä»¬ä¼šæ·±å…¥æŠ•å…¥å¯¹é«˜æ€§èƒ½è§£å†³æ–¹æ¡ˆçš„æŒç»­æ¢ç´¢ï¼Œä¹Ÿä¼šåœ¨ Rust é¢†åŸŸæŒç»­å¼€å±•ç›¸å…³ç”Ÿæ€å’Œå¼€æºçš„å»ºè®¾ï¼Œå…±å»º Rust ä¸­å›½çš„å¼€æºç”Ÿæ€ã€‚&lt;/p>
&lt;p>åŸºäºæ­¤ï¼Œå¼•å‡º CloudWeGo å¼€æºç¤¾åŒº 2.0ï¼š&lt;/p>
&lt;p>&lt;img src="https://www.cloudwego.io/img/blog/opensource_community/20.png" alt="image">&lt;/p>
&lt;p>CloudWeGo 2.0 çš„é˜¶æ®µï¼Œæˆ‘ä»¬å¸Œæœ›ç¤¾åŒºèƒ½å¤Ÿè·¨è¶Šé¡¹ç›®è¾¹ç•Œï¼ŒçœŸæ­£èƒ½å¤Ÿå¸®åŠ©ç¤¾åŒºç”¨æˆ·æ­å»ºä¸€å¥—é«˜æ€§èƒ½çš„å¾®æœåŠ¡æ²»ç†æ¶æ„å’Œæ•´ä½“çš„å¾®æœåŠ¡æ²»ç†ä½“ç³»ï¼š&lt;/p>
&lt;ul>
&lt;li>é€šè¿‡ Go é¢†åŸŸç›¸å…³å¾®æœåŠ¡æ²»ç†çš„æ ‡å‡†å’Œæœ€ä½³å®è·µçš„å»ºè®¾ï¼Œä¸ºä¸€äº›é€šç”¨æ€§æŠ€æœ¯å’Œè¡Œä¸šæœ€ä½³å®è·µæä¾›å‚è€ƒï¼›&lt;/li>
&lt;li>å¯¹æ¥å¼€æºé¡¹ç›®ä¸Šä¸‹æ¸¸è¿›è¡Œæ·±åº¦åˆä½œï¼Œæå¤§åœ°æå‡æ•´ä¸ªé¡¹ç›®çš„æ˜“ç”¨æ€§ï¼›&lt;/li>
&lt;li>æ¨è¿›é«˜æ€§èƒ½ Rust è§£å†³æ–¹æ¡ˆçš„è½åœ°ï¼ŒæŒç»­æ¢ç´¢ Rust é«˜æ€§èƒ½æŠ€æœ¯è§£å†³æ–¹æ¡ˆï¼Œæ„å»º Rust ç›¸å…³ç”Ÿæ€ã€‚&lt;/li>
&lt;/ul>
&lt;p>å¦‚æœå¤§å®¶å¯¹ CloudWeGo å¼€æºç¤¾åŒºï¼Œä»¥åŠåˆšæ‰æåˆ°çš„ä¸€äº›æŠ€æœ¯è§£å†³æ–¹æ¡ˆã€ä¼ä¸šçš„è½åœ°æ”¯æŒæœ‰ä»»ä½•çš„ç–‘é—®ï¼Œå¯ä»¥å…³æ³¨ CloudWeGo å…¬ä¼—å·ï¼Œ
æˆ‘ä»¬ä¼šåœ¨å…¬ä¼—å·ä¸Šå‘å¸ƒä¸€äº›æ–°é—»åŠ¨æ€ä»¥åŠå„ä¸ªç›¸å…³åœºæ™¯çš„æ¡ˆä¾‹æŠ¥é“ï¼ŒåŒæ—¶æˆ‘ä»¬ä¹Ÿä¼šåœ¨å…¬ä¼—å·ä¸Šæä¾›ç›¸å…³çš„æŠ€æœ¯æ”¯æŒã€‚æ„Ÿè°¢å¤§å®¶çš„å…³æ³¨ï¼&lt;/p></description></item></channel></rss>